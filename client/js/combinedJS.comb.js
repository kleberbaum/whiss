var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,g){b!=Array.prototype&&b!=Object.prototype&&(b[a]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,g,d){if(a){g=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var h=b[d];h in g||(g[h]={});g=g[h]}b=b[b.length-1];d=g[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:a})}};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(g){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;$jscomp.polyfill("Object.setPrototypeOf",function(b){return b||$jscomp.setPrototypeOf},"es6","es5");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var b=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+b++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(b){var a=0;return $jscomp.iteratorPrototype(function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var g=0,d={next:function(){if(g<b.length){var h=g++;return{value:a(h,b[h]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var a=b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function a(){this.batch_=null}function g(b){return b instanceof h?b:new h(function(a,f){a(b)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;a.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};a.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var d=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(b){d(b,
0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var e=b[a];delete b[a];try{e()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};a.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var h=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{b(a.resolve,a.reject)}catch(e){a.reject(e)}};h.prototype.createResolveAndReject_=
function(){function b(b){return function(c){e||(e=!0,b.call(a,c))}}var a=this,e=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};h.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof h)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var a=null!=b;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};h.prototype.resolveToNonPromiseObj_=function(b){var a=
void 0;try{a=b.then}catch(e){this.reject_(e);return}"function"==typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)};h.prototype.reject_=function(b){this.settle_(2,b)};h.prototype.fulfill_=function(b){this.settle_(1,b)};h.prototype.settle_=function(b,a){if(0!=this.state_)throw Error("Cannot settle("+b+", "+a|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=a;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),b[a]=null;this.onSettledCallbacks_=null}};var m=new a;h.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};h.prototype.settleSameAsThenable_=function(b,a){var e=this.createResolveAndReject_();try{b.call(a,e.resolve,e.reject)}catch(k){e.reject(k)}};h.prototype.then=function(b,a){function e(b,a){return"function"==typeof b?function(a){try{k(b(a))}catch(t){c(t)}}:a}var k,c,f=new h(function(b,
a){k=b;c=a});this.callWhenSettled_(e(b,k),e(a,c));return f};h.prototype.catch=function(b){return this.then(void 0,b)};h.prototype.callWhenSettled_=function(b,a){function e(){switch(k.state_){case 1:b(k.result_);break;case 2:a(k.result_);break;default:throw Error("Unexpected state: "+k.state_);}}var k=this;null==this.onSettledCallbacks_?m.asyncExecute(e):this.onSettledCallbacks_.push(function(){m.asyncExecute(e)})};h.resolve=g;h.reject=function(b){return new h(function(a,e){e(b)})};h.race=function(b){return new h(function(a,
e){for(var k=$jscomp.makeIterator(b),c=k.next();!c.done;c=k.next())g(c.value).callWhenSettled_(a,e)})};h.all=function(b){var a=$jscomp.makeIterator(b),e=a.next();return e.done?g([]):new h(function(b,c){function k(a){return function(c){f[a]=c;l--;0==l&&b(f)}}var f=[],l=0;do f.push(void 0),l++,g(e.value).callWhenSettled_(k(f.length-1),c),e=a.next();while(!e.done)})};return h},"es6","es3");
$jscomp.polyfill("Object.is",function(b){return b?b:function(b,g){return b===g?0!==b||1/b===1/g:b!==b&&g!==g}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,g){var a=this;a instanceof String&&(a=String(a));var h=a.length;for(g=g||0;g<h;g++)if(a[g]==b||Object.is(a[g],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,a,g){if(null==b)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,g){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,g||0)}},"es6","es3");
SSHyClient={MSG_DISCONNECT:1,MSG_IGNORE:2,MSG_UNIMPLEMENTED:3,MSG_DEBUG:4,MSG_SERVICE_REQUEST:5,MSG_SERVICE_ACCEPT:6,MSG_KEX_INIT:20,MSG_NEW_KEYS:21,MSG_KEXDH_INIT:30,MSG_KEXDH_GEX_GROUP:31,MSG_KEXDH_GEX_INIT:32,MSG_KEXDH_GEX_REPLY:33,MSG_KEXDH_GEX_REQUEST:34,MSG_USERAUTH_REQUEST:50,MSG_USERAUTH_FAILURE:51,MSG_USERAUTH_SUCCESS:52,MSG_USERAUTH_BANNER:53,MSG_GLOBAL_REQUEST:80,MSG_REQUEST_SUCCESS:81,MSG_REQUEST_FAILURE:82,MSG_CHANNEL_OPEN:90,MSG_CHANNEL_OPEN_SUCCESS:91,MSG_CHANNEL_OPEN_FAILURE:92,MSG_CHANNEL_WINDOW_ADJUST:93,
MSG_CHANNEL_DATA:94,MSG_CHANNEL_EXTENDED_DATA:95,MSG_CHANNEL_EOF:96,MSG_CHANNEL_CLOSE:97,MSG_CHANNEL_REQUEST:98,MSG_CHANNEL_SUCCESS:99,MSG_CHANNEL_FAILURE:100,WINDOW_SIZE:40674,MAX_PACKET_SIZE:16384,AES_CBC:2,AES_CTR:6,fishFsHintLeave:"\u001b[32",bashFsHintLeave:"\u001b]0;"};var BigInteger=function(){function b(b,a,c){null!=b&&("number"==typeof b?this.fromNumber(b,a,c):null==a&&"string"!=typeof b?this.fromString(b,256):this.fromString(b,a))}function a(){return new b(null)}function g(b,a,c,e,k,f){for(;0<=--f;){var l=a*this[b++]+c[e]+k;k=Math.floor(l/67108864);c[e++]=l&67108863}return k}function d(b,a,c,e,k,f){var l=a&32767;for(a>>=15;0<=--f;){var u=this[b]&32767,n=this[b++]>>15,d=a*u+n*l;u=l*u+((d&32767)<<15)+c[e]+(k&1073741823);k=(u>>>30)+(d>>>15)+a*n+(k>>>30);c[e++]=
u&1073741823}return k}function h(b,a,c,e,k,f){var l=a&16383;for(a>>=14;0<=--f;){var u=this[b]&16383,n=this[b++]>>14,d=a*u+n*l;u=l*u+((d&16383)<<14)+c[e]+k;k=(u>>28)+(d>>14)+a*n;c[e++]=u&268435455}return k}function m(b,a){b=C[b.charCodeAt(a)];return null==b?-1:b}function f(b){var c=a();c.fromInt(b);return c}function l(b){var a=1,c;0!=(c=b>>>16)&&(b=c,a+=16);0!=(c=b>>8)&&(b=c,a+=8);0!=(c=b>>4)&&(b=c,a+=4);0!=(c=b>>2)&&(b=c,a+=2);0!=b>>1&&(a+=1);return a}function e(b){this.m=b}function k(b){this.m=b;
this.mp=b.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<b.DB-15)-1;this.mt2=2*b.t}function c(b,a){return b&a}function n(b,a){return b|a}function p(b,a){return b^a}function q(b,a){return b&~a}function r(){}function t(b){return b}function y(c){this.r2=a();this.q3=a();b.ONE.dlShiftTo(2*c.t,this.r2);this.mu=this.r2.divide(c);this.m=c}var v;"Microsoft Internet Explorer"==navigator.appName?(b.prototype.am=d,v=30):"Netscape"!=navigator.appName?(b.prototype.am=g,v=26):(b.prototype.am=
h,v=28);b.prototype.DB=v;b.prototype.DM=(1<<v)-1;b.prototype.DV=1<<v;b.prototype.FV=Math.pow(2,52);b.prototype.F1=52-v;b.prototype.F2=2*v-52;var C=[],z;v=48;for(z=0;9>=z;++z)C[v++]=z;v=97;for(z=10;36>z;++z)C[v++]=z;v=65;for(z=10;36>z;++z)C[v++]=z;e.prototype.convert=function(b){return 0>b.s||0<=b.compareTo(this.m)?b.mod(this.m):b};e.prototype.revert=function(b){return b};e.prototype.reduce=function(b){b.divRemTo(this.m,null,b)};e.prototype.mulTo=function(b,a,c){b.multiplyTo(a,c);this.reduce(c)};e.prototype.sqrTo=
function(b,a){b.squareTo(a);this.reduce(a)};k.prototype.convert=function(c){var e=a();c.abs().dlShiftTo(this.m.t,e);e.divRemTo(this.m,null,e);0>c.s&&0<e.compareTo(b.ZERO)&&this.m.subTo(e,e);return e};k.prototype.revert=function(b){var c=a();b.copyTo(c);this.reduce(c);return c};k.prototype.reduce=function(b){for(;b.t<=this.mt2;)b[b.t++]=0;for(var a=0;a<this.m.t;++a){var c=b[a]&32767,e=c*this.mpl+((c*this.mph+(b[a]>>15)*this.mpl&this.um)<<15)&b.DM;c=a+this.m.t;for(b[c]+=this.m.am(0,e,b,a,0,this.m.t);b[c]>=
b.DV;)b[c]-=b.DV,b[++c]++}b.clamp();b.drShiftTo(this.m.t,b);0<=b.compareTo(this.m)&&b.subTo(this.m,b)};k.prototype.mulTo=function(b,a,c){b.multiplyTo(a,c);this.reduce(c)};k.prototype.sqrTo=function(b,a){b.squareTo(a);this.reduce(a)};b.prototype.copyTo=function(b){for(var a=this.t-1;0<=a;--a)b[a]=this[a];b.t=this.t;b.s=this.s};b.prototype.fromInt=function(b){this.t=1;this.s=0>b?-1:0;0<b?this[0]=b:-1>b?this[0]=b+DV:this.t=0};b.prototype.fromString=function(a,c){if(16==c)c=4;else if(8==c)c=3;else if(256==
c)c=8;else if(2==c)c=1;else if(32==c)c=5;else if(4==c)c=2;else{this.fromRadix(a,c);return}this.s=this.t=0;for(var e=a.length,k=!1,f=0;0<=--e;){var l=8==c?a[e]&255:m(a,e);0>l?"-"==a.charAt(e)&&(k=!0):(k=!1,0==f?this[this.t++]=l:f+c>this.DB?(this[this.t-1]|=(l&(1<<this.DB-f)-1)<<f,this[this.t++]=l>>this.DB-f):this[this.t-1]|=l<<f,f+=c,f>=this.DB&&(f-=this.DB))}8==c&&0!=(a[0]&128)&&(this.s=-1,0<f&&(this[this.t-1]|=(1<<this.DB-f)-1<<f));this.clamp();k&&b.ZERO.subTo(this,this)};b.prototype.clamp=function(){for(var b=
this.s&this.DM;0<this.t&&this[this.t-1]==b;)--this.t};b.prototype.dlShiftTo=function(b,a){var c;for(c=this.t-1;0<=c;--c)a[c+b]=this[c];for(c=b-1;0<=c;--c)a[c]=0;a.t=this.t+b;a.s=this.s};b.prototype.drShiftTo=function(b,a){for(var c=b;c<this.t;++c)a[c-b]=this[c];a.t=Math.max(this.t-b,0);a.s=this.s};b.prototype.lShiftTo=function(b,a){var c=b%this.DB,e=this.DB-c,k=(1<<e)-1;b=Math.floor(b/this.DB);var f=this.s<<c&this.DM,l;for(l=this.t-1;0<=l;--l)a[l+b+1]=this[l]>>e|f,f=(this[l]&k)<<c;for(l=b-1;0<=l;--l)a[l]=
0;a[b]=f;a.t=this.t+b+1;a.s=this.s;a.clamp()};b.prototype.rShiftTo=function(b,a){a.s=this.s;var c=Math.floor(b/this.DB);if(c>=this.t)a.t=0;else{b%=this.DB;var e=this.DB-b,k=(1<<b)-1;a[0]=this[c]>>b;for(var f=c+1;f<this.t;++f)a[f-c-1]|=(this[f]&k)<<e,a[f-c]=this[f]>>b;0<b&&(a[this.t-c-1]|=(this.s&k)<<e);a.t=this.t-c;a.clamp()}};b.prototype.subTo=function(b,a){for(var c=0,e=0,f=Math.min(b.t,this.t);c<f;)e+=this[c]-b[c],a[c++]=e&this.DM,e>>=this.DB;if(b.t<this.t){for(e-=b.s;c<this.t;)e+=this[c],a[c++]=
e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;c<b.t;)e-=b[c],a[c++]=e&this.DM,e>>=this.DB;e-=b.s}a.s=0>e?-1:0;-1>e?a[c++]=this.DV+e:0<e&&(a[c++]=e);a.t=c;a.clamp()};b.prototype.multiplyTo=function(a,c){var e=this.abs(),f=a.abs(),k=e.t;for(c.t=k+f.t;0<=--k;)c[k]=0;for(k=0;k<f.t;++k)c[k+e.t]=e.am(0,f[k],c,k,0,e.t);c.s=0;c.clamp();this.s!=a.s&&b.ZERO.subTo(c,c)};b.prototype.squareTo=function(b){for(var a=this.abs(),c=b.t=2*a.t;0<=--c;)b[c]=0;for(c=0;c<a.t-1;++c){var e=a.am(c,a[c],b,2*c,0,1);(b[c+
a.t]+=a.am(c+1,2*a[c],b,2*c+1,e,a.t-c-1))>=a.DV&&(b[c+a.t]-=a.DV,b[c+a.t+1]=1)}0<b.t&&(b[b.t-1]+=a.am(c,a[c],b,2*c,0,1));b.s=0;b.clamp()};b.prototype.divRemTo=function(c,e,f){var k=c.abs();if(!(0>=k.t)){var n=this.abs();if(n.t<k.t)null!=e&&e.fromInt(0),null!=f&&this.copyTo(f);else{null==f&&(f=a());var d=a(),m=this.s;c=c.s;var h=this.DB-l(k[k.t-1]);0<h?(k.lShiftTo(h,d),n.lShiftTo(h,f)):(k.copyTo(d),n.copyTo(f));k=d.t;n=d[k-1];if(0!=n){var p=n*(1<<this.F1)+(1<k?d[k-2]>>this.F2:0),g=this.FV/p;p=(1<<
this.F1)/p;var u=1<<this.F2,r=f.t,q=r-k,t=null==e?a():e;d.dlShiftTo(q,t);0<=f.compareTo(t)&&(f[f.t++]=1,f.subTo(t,f));b.ONE.dlShiftTo(k,t);for(t.subTo(d,d);d.t<k;)d[d.t++]=0;for(;0<=--q;){var A=f[--r]==n?this.DM:Math.floor(f[r]*g+(f[r-1]+u)*p);if((f[r]+=d.am(0,A,f,q,0,k))<A)for(d.dlShiftTo(q,t),f.subTo(t,f);f[r]<--A;)f.subTo(t,f)}null!=e&&(f.drShiftTo(k,e),m!=c&&b.ZERO.subTo(e,e));f.t=k;f.clamp();0<h&&f.rShiftTo(h,f);0>m&&b.ZERO.subTo(f,f)}}}};b.prototype.invDigit=function(){if(1>this.t)return 0;
var b=this[0];if(0==(b&1))return 0;var a=b&3;a=a*(2-(b&15)*a)&15;a=a*(2-(b&255)*a)&255;a=a*(2-((b&65535)*a&65535))&65535;a=a*(2-b*a%this.DV)%this.DV;return 0<a?this.DV-a:-a};b.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};b.prototype.exp=function(c,e){if(4294967295<c||1>c)return b.ONE;var f=a(),k=a(),n=e.convert(this),d=l(c)-1;for(n.copyTo(f);0<=--d;)if(e.sqrTo(f,k),0<(c&1<<d))e.mulTo(k,n,f);else{var m=f;f=k;k=m}return e.revert(f)};b.prototype.toString=function(b){if(0>this.s)return"-"+
this.negate().toString(b);if(16==b)b=4;else if(8==b)b=3;else if(2==b)b=1;else if(32==b)b=5;else if(4==b)b=2;else return this.toRadix(b);var a=(1<<b)-1,c,e=!1,f="",k=this.t,l=this.DB-k*this.DB%b;if(0<k--)for(l<this.DB&&0<(c=this[k]>>l)&&(e=!0,f="0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));0<=k;)l<b?(c=(this[k]&(1<<l)-1)<<b-l,c|=this[--k]>>(l+=this.DB-b)):(c=this[k]>>(l-=b)&a,0>=l&&(l+=this.DB,--k)),0<c&&(e=!0),e&&(f+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));return e?f:"0"};b.prototype.negate=
function(){var c=a();b.ZERO.subTo(this,c);return c};b.prototype.abs=function(){return 0>this.s?this.negate():this};b.prototype.compareTo=function(b){var a=this.s-b.s;if(0!=a)return a;var c=this.t;a=c-b.t;if(0!=a)return a;for(;0<=--c;)if(0!=(a=this[c]-b[c]))return a;return 0};b.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)};b.prototype.mod=function(c){var e=a();this.abs().divRemTo(c,null,e);0>this.s&&0<e.compareTo(b.ZERO)&&c.subTo(e,e);return e};
b.prototype.modPowInt=function(b,a){a=256>b||a.isEven()?new e(a):new k(a);return this.exp(b,a)};b.ZERO=f(0);b.ONE=f(1);r.prototype.convert=t;r.prototype.revert=t;r.prototype.mulTo=function(b,a,c){b.multiplyTo(a,c)};r.prototype.sqrTo=function(b,a){b.squareTo(a)};y.prototype.convert=function(b){if(0>b.s||b.t>2*this.m.t)return b.mod(this.m);if(0>b.compareTo(this.m))return b;var c=a();b.copyTo(c);this.reduce(c);return c};y.prototype.revert=function(b){return b};y.prototype.reduce=function(b){b.drShiftTo(this.m.t-
1,this.r2);b.t>this.m.t+1&&(b.t=this.m.t+1,b.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>b.compareTo(this.r2);)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);0<=b.compareTo(this.m);)b.subTo(this.m,b)};y.prototype.mulTo=function(b,a,c){b.multiplyTo(a,c);this.reduce(c)};y.prototype.sqrTo=function(b,a){b.squareTo(a);this.reduce(a)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],B=67108864/x[x.length-1];b.prototype.chunkSize=function(b){return Math.floor(Math.LN2*this.DB/Math.log(b))};b.prototype.toRadix=function(b){null==b&&(b=10);if(0==this.signum()||2>b||36<b)return"0";var c=this.chunkSize(b);c=Math.pow(b,
c);var e=f(c),k=a(),l=a(),n="";for(this.divRemTo(e,k,l);0<k.signum();)n=(c+l.intValue()).toString(b).substr(1)+n,k.divRemTo(e,k,l);return l.intValue().toString(b)+n};b.prototype.fromRadix=function(a,c){this.fromInt(0);null==c&&(c=10);for(var e=this.chunkSize(c),f=Math.pow(c,e),k=!1,l=0,n=0,d=0;d<a.length;++d){var h=m(a,d);0>h?"-"==a.charAt(d)&&0==this.signum()&&(k=!0):(n=c*n+h,++l>=e&&(this.dMultiply(f),this.dAddOffset(n,0),n=l=0))}0<l&&(this.dMultiply(Math.pow(c,l)),this.dAddOffset(n,0));k&&b.ZERO.subTo(this,
this)};b.prototype.fromNumber=function(a,c,e){if("number"==typeof c)if(2>a)this.fromInt(1);else for(this.fromNumber(a,e),this.testBit(a-1)||this.bitwiseTo(b.ONE.shiftLeft(a-1),n,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(b.ONE.shiftLeft(a-1),this);else{e=[];var f=a&7;e.length=(a>>3)+1;c.nextBytes(e);e[0]=0<f?e[0]&(1<<f)-1:0;this.fromString(e,256)}};b.prototype.bitwiseTo=function(b,a,c){var e,f=Math.min(b.t,this.t);for(e=
0;e<f;++e)c[e]=a(this[e],b[e]);if(b.t<this.t){var k=b.s&this.DM;for(e=f;e<this.t;++e)c[e]=a(this[e],k);c.t=this.t}else{k=this.s&this.DM;for(e=f;e<b.t;++e)c[e]=a(k,b[e]);c.t=b.t}c.s=a(this.s,b.s);c.clamp()};b.prototype.changeBit=function(a,c){a=b.ONE.shiftLeft(a);this.bitwiseTo(a,c,a);return a};b.prototype.addTo=function(b,a){for(var c=0,e=0,f=Math.min(b.t,this.t);c<f;)e+=this[c]+b[c],a[c++]=e&this.DM,e>>=this.DB;if(b.t<this.t){for(e+=b.s;c<this.t;)e+=this[c],a[c++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=
this.s;c<b.t;)e+=b[c],a[c++]=e&this.DM,e>>=this.DB;e+=b.s}a.s=0>e?-1:0;0<e?a[c++]=e:-1>e&&(a[c++]=this.DV+e);a.t=c;a.clamp()};b.prototype.dMultiply=function(b){this[this.t]=this.am(0,b-1,this,0,0,this.t);++this.t;this.clamp()};b.prototype.dAddOffset=function(b,a){if(0!=b){for(;this.t<=a;)this[this.t++]=0;for(this[a]+=b;this[a]>=this.DV;)this[a]-=this.DV,++a>=this.t&&(this[this.t++]=0),++this[a]}};b.prototype.multiplyLowerTo=function(b,a,c){var e=Math.min(this.t+b.t,a);c.s=0;for(c.t=e;0<e;)c[--e]=
0;var f;for(f=c.t-this.t;e<f;++e)c[e+this.t]=this.am(0,b[e],c,e,0,this.t);for(f=Math.min(b.t,a);e<f;++e)this.am(0,b[e],c,e,0,a-e);c.clamp()};b.prototype.multiplyUpperTo=function(b,a,c){--a;var e=c.t=this.t+b.t-a;for(c.s=0;0<=--e;)c[e]=0;for(e=Math.max(a-this.t,0);e<b.t;++e)c[this.t+e-a]=this.am(a-e,b[e],c,0,0,this.t+e-a);c.clamp();c.drShiftTo(1,c)};b.prototype.modInt=function(b){if(0>=b)return 0;var a=this.DV%b,c=0>this.s?b-1:0;if(0<this.t)if(0==a)c=this[0]%b;else for(var e=this.t-1;0<=e;--e)c=(a*
c+this[e])%b;return c};b.prototype.millerRabin=function(c){var e=this.subtract(b.ONE),f=e.getLowestSetBit();if(0>=f)return!1;var k=e.shiftRight(f);c=c+1>>1;c>x.length&&(c=x.length);for(var l=a(),n=0;n<c;++n){l.fromInt(x[n]);var d=l.modPow(k,this);if(0!=d.compareTo(b.ONE)&&0!=d.compareTo(e)){for(var m=1;m++<f&&0!=d.compareTo(e);)if(d=d.modPowInt(2,this),0==d.compareTo(b.ONE))return!1;if(0!=d.compareTo(e))return!1}}return!0};b.prototype.clone=function(){var b=a();this.copyTo(b);return b};b.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};b.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};b.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};b.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};b.prototype.toByteArray=function(){var b=this.t,a=[];a[0]=this.s;var c=this.DB-
b*this.DB%8,e,f=0;if(0<b--)for(c<this.DB&&(e=this[b]>>c)!=(this.s&this.DM)>>c&&(a[f++]=e|this.s<<this.DB-c);0<=b;)if(8>c?(e=(this[b]&(1<<c)-1)<<8-c,e|=this[--b]>>(c+=this.DB-8)):(e=this[b]>>(c-=8)&255,0>=c&&(c+=this.DB,--b)),0!=(e&128)&&(e|=-256),0==f&&(this.s&128)!=(e&128)&&++f,0<f||e!=this.s)a[f++]=e;return a};b.prototype.equals=function(b){return 0==this.compareTo(b)};b.prototype.min=function(b){return 0>this.compareTo(b)?this:b};b.prototype.max=function(b){return 0<this.compareTo(b)?this:b};b.prototype.and=
function(b){var e=a();this.bitwiseTo(b,c,e);return e};b.prototype.or=function(b){var c=a();this.bitwiseTo(b,n,c);return c};b.prototype.xor=function(b){var c=a();this.bitwiseTo(b,p,c);return c};b.prototype.andNot=function(b){var c=a();this.bitwiseTo(b,q,c);return c};b.prototype.not=function(){for(var b=a(),c=0;c<this.t;++c)b[c]=this.DM&~this[c];b.t=this.t;b.s=~this.s;return b};b.prototype.shiftLeft=function(b){var c=a();0>b?this.rShiftTo(-b,c):this.lShiftTo(b,c);return c};b.prototype.shiftRight=function(b){var c=
a();0>b?this.lShiftTo(-b,c):this.rShiftTo(b,c);return c};b.prototype.getLowestSetBit=function(){for(var b=0;b<this.t;++b)if(0!=this[b]){var a=b*this.DB;b=this[b];if(0==b)b=-1;else{var c=0;0==(b&65535)&&(b>>=16,c+=16);0==(b&255)&&(b>>=8,c+=8);0==(b&15)&&(b>>=4,c+=4);0==(b&3)&&(b>>=2,c+=2);0==(b&1)&&++c;b=c}return a+b}return 0>this.s?this.t*this.DB:-1};b.prototype.bitCount=function(){for(var b=0,a=this.s&this.DM,c=0;c<this.t;++c){for(var e=this[c]^a,f=0;0!=e;)e&=e-1,++f;b+=f}return b};b.prototype.testBit=
function(b){var a=Math.floor(b/this.DB);return a>=this.t?0!=this.s:0!=(this[a]&1<<b%this.DB)};b.prototype.setBit=function(b){return this.changeBit(b,n)};b.prototype.clearBit=function(b){return this.changeBit(b,q)};b.prototype.flipBit=function(b){return this.changeBit(b,p)};b.prototype.add=function(b){var c=a();this.addTo(b,c);return c};b.prototype.subtract=function(b){var c=a();this.subTo(b,c);return c};b.prototype.multiply=function(b){var c=a();this.multiplyTo(b,c);return c};b.prototype.divide=function(b){var c=
a();this.divRemTo(b,c,null);return c};b.prototype.remainder=function(b){var c=a();this.divRemTo(b,null,c);return c};b.prototype.divideAndRemainder=function(b){var c=a(),e=a();this.divRemTo(b,c,e);return[c,e]};b.prototype.modPow=function(b,c){var n=b.bitLength(),d=f(1);if(0>=n)return d;var m=18>n?1:48>n?3:144>n?4:768>n?5:6;c=8>n?new e(c):c.isEven()?new y(c):new k(c);var h=[],p=3,g=m-1,r=(1<<m)-1;h[1]=c.convert(this);if(1<m)for(n=a(),c.sqrTo(h[1],n);p<=r;)h[p]=a(),c.mulTo(n,h[p-2],h[p]),p+=2;var q=
b.t-1,t,v=!0,u=a();for(n=l(b[q])-1;0<=q;){n>=g?t=b[q]>>n-g&r:(t=(b[q]&(1<<n+1)-1)<<g-n,0<q&&(t|=b[q-1]>>this.DB+n-g));for(p=m;0==(t&1);)t>>=1,--p;0>(n-=p)&&(n+=this.DB,--q);if(v)h[t].copyTo(d),v=!1;else{for(;1<p;)c.sqrTo(d,u),c.sqrTo(u,d),p-=2;0<p?c.sqrTo(d,u):(p=d,d=u,u=p);c.mulTo(u,h[t],d)}for(;0<=q&&0==(b[q]&1<<n);)c.sqrTo(d,u),p=d,d=u,u=p,0>--n&&(n=this.DB-1,--q)}return c.revert(d)};b.prototype.modInverse=function(c){var a=c.isEven();if(this.isEven()&&a||0==c.signum())return b.ZERO;for(var e=
c.clone(),k=this.clone(),l=f(1),n=f(0),d=f(0),m=f(1);0!=e.signum();){for(;e.isEven();)e.rShiftTo(1,e),a?(l.isEven()&&n.isEven()||(l.addTo(this,l),n.subTo(c,n)),l.rShiftTo(1,l)):n.isEven()||n.subTo(c,n),n.rShiftTo(1,n);for(;k.isEven();)k.rShiftTo(1,k),a?(d.isEven()&&m.isEven()||(d.addTo(this,d),m.subTo(c,m)),d.rShiftTo(1,d)):m.isEven()||m.subTo(c,m),m.rShiftTo(1,m);0<=e.compareTo(k)?(e.subTo(k,e),a&&l.subTo(d,l),n.subTo(m,n)):(k.subTo(e,k),a&&d.subTo(l,d),m.subTo(n,m))}if(0!=k.compareTo(b.ONE))return b.ZERO;
if(0<=m.compareTo(c))return m.subtract(c);if(0>m.signum())m.addTo(c,m);else return m;return 0>m.signum()?m.add(c):m};b.prototype.pow=function(b){return this.exp(b,new r)};b.prototype.gcd=function(b){var c=0>this.s?this.negate():this.clone();b=0>b.s?b.negate():b.clone();if(0>c.compareTo(b)){var a=c;c=b;b=a}a=c.getLowestSetBit();var e=b.getLowestSetBit();if(0>e)return c;a<e&&(e=a);for(0<e&&(c.rShiftTo(e,c),b.rShiftTo(e,b));0<c.signum();)0<(a=c.getLowestSetBit())&&c.rShiftTo(a,c),0<(a=b.getLowestSetBit())&&
b.rShiftTo(a,b),0<=c.compareTo(b)?(c.subTo(b,c),c.rShiftTo(1,c)):(b.subTo(c,b),b.rShiftTo(1,b));0<e&&b.lShiftTo(e,b);return b};b.prototype.isProbablePrime=function(b){var c,a=this.abs();if(1==a.t&&a[0]<=x[x.length-1]){for(c=0;c<x.length;++c)if(a[0]==x[c])return!0;return!1}if(a.isEven())return!1;for(c=1;c<x.length;){for(var e=x[c],f=c+1;f<x.length&&e<B;)e*=x[f++];for(e=a.modInt(e);c<f;)if(0==e%x[c++])return!1}return a.millerRabin(b)};return{BigInteger:b}}();BigInteger=BigInteger.BigInteger;SSHyClient.hash={};SSHyClient.hash.SHA1=function(b){this.data=b||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var b=toByteArray(this.data),a=bytesToWords(b),g=8*b.length;b=[];var d=1732584193,h=-271733879,m=-1732584194,f=271733878,l=-1009589776;a[g>>5]|=128<<24-g%32;a[(g+64>>>9<<4)+15]=g;for(g=0;g<a.length;g+=16){for(var e=d,k=h,c=m,n=f,p=l,q=0;80>q;q++){if(16>q)b[q]=a[g+q];else{var r=b[q-3]^b[q-8]^b[q-14]^b[q-16];b[q]=r<<1|r>>>31}r=(d<<5|d>>>27)+l+(b[q]>>>0)+(20>q?(h&m|~h&f)+1518500249:40>q?(h^m^f)+1859775393:60>q?(h&m|h&f|m&f)-1894007588:(h^m^f)-899497514);
l=f;f=m;m=h<<30|h>>>2;h=d;d=r}d+=e;h+=k;m+=c;f+=n;l+=p}return fromByteArray(wordsToBytes([d,h,m,f,l]))}};SSHyClient.hash.SHA256=function(b){this.data=b||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var b=toByteArray(this.data),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=bytesToWords(b),d=8*b.length;b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];var h=[],m,f;g[d>>5]|=128<<24-d%32;g[(d+64>>9<<4)+15]=d;for(m=0;m<g.length;m+=16){d=b[0];var l=b[1];var e=b[2];
var k=b[3];var c=b[4];var n=b[5];var p=b[6];var q=b[7];for(f=0;64>f;f++){if(16>f)h[f]=g[f+m];else{var r=h[f-15];var t=h[f-2];h[f]=((r<<25|r>>>7)^(r<<14|r>>>18)^r>>>3)+(h[f-7]>>>0)+((t<<15|t>>>17)^(t<<13|t>>>19)^t>>>10)+(h[f-16]>>>0)}t=d&l^d&e^l&e;var y=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22);r=(q>>>0)+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&n^~c&p)+a[f]+(h[f]>>>0);t=y+t;q=p;p=n;n=c;c=k+r>>>0;k=e;e=l;l=d;d=r+t>>>0}b[0]+=d;b[1]+=l;b[2]+=e;b[3]+=k;b[4]+=c;b[5]+=n;b[6]+=p;b[7]+=q}return fromByteArray(wordsToBytes(b))}};
SSHyClient.hash.HMAC=function(b,a,g){g=digestmod="SHA-1"==g?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var d=new g,h=new g;64<b.length&&(b=(new g(b)).digest());b+=Array(64-b.length+1).join("\x00");g=toByteArray(b).slice(0);b=toByteArray(b).slice(0);for(var m=0;64>m;++m)g[m]^=92,b[m]^=54;d.data+=fromByteArray(g);h.data+=fromByteArray(b);h.data+=a;d.data+=h.digest();return d.digest()};
SSHyClient.hash.MD5=function(b){var a=toByteArray(b);b=bytesToWords(a);var g=8*a.length;a=1732584193;for(var d=-271733879,h=-1732584194,m=271733878,f=0;f<b.length;f++)b[f]=(b[f]<<8|b[f]>>>24)&16711935|(b[f]<<24|b[f]>>>8)&4278255360;b[g>>>5]|=128<<g%32;b[(g+64>>>9<<4)+14]=g;g=function(b,c,a,e,f,k,l){b=b+(c&a|~c&e)+(f>>>0)+l;return(b<<k|b>>>32-k)+c};var l=function(b,c,a,e,f,k,l){b=b+(c&e|a&~e)+(f>>>0)+l;return(b<<k|b>>>32-k)+c},e=function(b,c,a,e,f,k,l){b=b+(c^a^e)+(f>>>0)+l;return(b<<k|b>>>32-k)+c},
k=function(b,c,a,e,f,k,l){b=b+(a^(c|~e))+(f>>>0)+l;return(b<<k|b>>>32-k)+c};for(f=0;f<b.length;f+=16){var c=a,n=d,p=h,q=m;a=g(a,d,h,m,b[f+0],7,-680876936);m=g(m,a,d,h,b[f+1],12,-389564586);h=g(h,m,a,d,b[f+2],17,606105819);d=g(d,h,m,a,b[f+3],22,-1044525330);a=g(a,d,h,m,b[f+4],7,-176418897);m=g(m,a,d,h,b[f+5],12,1200080426);h=g(h,m,a,d,b[f+6],17,-1473231341);d=g(d,h,m,a,b[f+7],22,-45705983);a=g(a,d,h,m,b[f+8],7,1770035416);m=g(m,a,d,h,b[f+9],12,-1958414417);h=g(h,m,a,d,b[f+10],17,-42063);d=g(d,h,m,
a,b[f+11],22,-1990404162);a=g(a,d,h,m,b[f+12],7,1804603682);m=g(m,a,d,h,b[f+13],12,-40341101);h=g(h,m,a,d,b[f+14],17,-1502002290);d=g(d,h,m,a,b[f+15],22,1236535329);a=l(a,d,h,m,b[f+1],5,-165796510);m=l(m,a,d,h,b[f+6],9,-1069501632);h=l(h,m,a,d,b[f+11],14,643717713);d=l(d,h,m,a,b[f+0],20,-373897302);a=l(a,d,h,m,b[f+5],5,-701558691);m=l(m,a,d,h,b[f+10],9,38016083);h=l(h,m,a,d,b[f+15],14,-660478335);d=l(d,h,m,a,b[f+4],20,-405537848);a=l(a,d,h,m,b[f+9],5,568446438);m=l(m,a,d,h,b[f+14],9,-1019803690);
h=l(h,m,a,d,b[f+3],14,-187363961);d=l(d,h,m,a,b[f+8],20,1163531501);a=l(a,d,h,m,b[f+13],5,-1444681467);m=l(m,a,d,h,b[f+2],9,-51403784);h=l(h,m,a,d,b[f+7],14,1735328473);d=l(d,h,m,a,b[f+12],20,-1926607734);a=e(a,d,h,m,b[f+5],4,-378558);m=e(m,a,d,h,b[f+8],11,-2022574463);h=e(h,m,a,d,b[f+11],16,1839030562);d=e(d,h,m,a,b[f+14],23,-35309556);a=e(a,d,h,m,b[f+1],4,-1530992060);m=e(m,a,d,h,b[f+4],11,1272893353);h=e(h,m,a,d,b[f+7],16,-155497632);d=e(d,h,m,a,b[f+10],23,-1094730640);a=e(a,d,h,m,b[f+13],4,681279174);
m=e(m,a,d,h,b[f+0],11,-358537222);h=e(h,m,a,d,b[f+3],16,-722521979);d=e(d,h,m,a,b[f+6],23,76029189);a=e(a,d,h,m,b[f+9],4,-640364487);m=e(m,a,d,h,b[f+12],11,-421815835);h=e(h,m,a,d,b[f+15],16,530742520);d=e(d,h,m,a,b[f+2],23,-995338651);a=k(a,d,h,m,b[f+0],6,-198630844);m=k(m,a,d,h,b[f+7],10,1126891415);h=k(h,m,a,d,b[f+14],15,-1416354905);d=k(d,h,m,a,b[f+5],21,-57434055);a=k(a,d,h,m,b[f+12],6,1700485571);m=k(m,a,d,h,b[f+3],10,-1894986606);h=k(h,m,a,d,b[f+10],15,-1051523);d=k(d,h,m,a,b[f+1],21,-2054922799);
a=k(a,d,h,m,b[f+8],6,1873313359);m=k(m,a,d,h,b[f+15],10,-30611744);h=k(h,m,a,d,b[f+6],15,-1560198380);d=k(d,h,m,a,b[f+13],21,1309151649);a=k(a,d,h,m,b[f+4],6,-145523070);m=k(m,a,d,h,b[f+11],10,-1120210379);h=k(h,m,a,d,b[f+2],15,718787259);d=k(d,h,m,a,b[f+9],21,-343485551);a=a+c>>>0;d=d+n>>>0;h=h+p>>>0;m=m+q>>>0}var r=function(b){if(b.constructor==Number)return(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;for(var c=0;c<b.length;c++)b[c]=r(b[c]);return b};return fromByteArray(wordsToBytes(r([a,d,
h,m])))};sjcl={cipher:{}};
sjcl.cipher.aes=function(b,a){this._tables[0][0][0]||this._precompute();this.mode=a;var g,d,h=this._tables[0][4],m=this._tables[1];a=b.length;var f=1;if(4!==a&&6!==a&&8!==a)throw"invalid aes key size";this._key=[g=b.slice(0),d=[]];for(b=a;b<4*a+28;b++){var l=g[b-1];if(0===b%a||8===a&&4===b%a)l=h[l>>>24]<<24^h[l>>16&255]<<16^h[l>>8&255]<<8^h[l&255],0===b%a&&(l=l<<8^l>>>24^f<<24,f=f<<1^283*(f>>7));g[b]=g[b-a]^l}for(a=0;b;a++,b--)l=g[a&3?b:b-4],d[a]=4>=b||4>a?l:m[0][h[l>>>24]]^m[1][h[l>>16&255]]^m[2][h[l>>
8&255]]^m[3][h[l&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(b,a,g){a=this.mode==sjcl.cipher.aes.MODE_CBC?a:[];for(var d=[],h=0;h<b.length/16;h++){var m=b.slice(16*h,16*(h+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var f=0;16>f;f++)m[f]^=a[f];a=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(m),0))}else for(a=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(g.increment())),0)),f=0;16>f;f++)a[f]^=m[f];d=d.concat(a)}return d},decrypt:function(b,a){for(var g=[],d=0;d<b.length/
16;d++){var h=b.slice(16*d,16*(d+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(h),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var m=0;16>m;m++)ct[m]^=a[m];a=h}g=g.concat(ct)}return g},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var b=this._tables[0],a=this._tables[1],g=b[4],d=a[4],h,m,f,l=[],e=[],k;for(h=0;256>h;h++)e[(l[h]=h<<1^283*(h>>7))^h]=h;for(m=f=0;!g[m];m^=k||1,f=e[f]||1){var c=f^f<<1^f<<2^f<<3^f<<4;c=c>>8^c&255^99;g[m]=c;d[c]=m;var n=l[h=
l[k=l[m]]];var p=16843009*n^65537*h^257*k^16843008*m;n=257*l[c]^16843008*c;for(h=0;4>h;h++)b[h][m]=n=n<<24^n>>>8,a[h][c]=p=p<<24^p>>>8}for(h=0;5>h;h++)b[h]=b[h].slice(0),a[h]=a[h].slice(0)},_crypt:function(b,a){if(4!==b.length)throw"invalid aes block size";var g=this._key[a],d=b[0]^g[0],h=b[a?3:1]^g[1],m=b[2]^g[2];b=b[a?1:3]^g[3];var f=g.length/4-2,l,e=4,k=[0,0,0,0];var c=this._tables[a];var n=c[0],p=c[1],q=c[2],r=c[3],t=c[4];for(l=0;l<f;l++){c=n[d>>>24]^p[h>>16&255]^q[m>>8&255]^r[b&255]^g[e];var y=
n[h>>>24]^p[m>>16&255]^q[b>>8&255]^r[d&255]^g[e+1];var v=n[m>>>24]^p[b>>16&255]^q[d>>8&255]^r[h&255]^g[e+2];b=n[b>>>24]^p[d>>16&255]^q[h>>8&255]^r[m&255]^g[e+3];e+=4;d=c;h=y;m=v}for(l=0;4>l;l++)k[a?3&-l:l]=t[d>>>24]<<24^t[h>>16&255]<<16^t[m>>8&255]<<8^t[b&255]^g[e++],c=d,d=h,h=m,m=b,b=c;return k}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(b){var a=[],g=sjcl.bitArray.bitLength(b),d,h;for(d=0;d<g/8;d++)0===(d&3)&&(h=b[d/4]),a.push(h>>>24),h<<=8;return a},toBits:function(b){var a=[],g,d=0;for(g=0;g<b.length;g++)d=d<<8|b[g],3===(g&3)&&(a.push(d),d=0);g&3&&a.push(sjcl.bitArray.partial(8*(g&3),d));return a}};
sjcl.bitArray={bitLength:function(b){var a=b.length;return 0===a?0:32*(a-1)+sjcl.bitArray.getPartial(b[a-1])},partial:function(b,a,g){return 32===b?a:(g?a|0:a<<32-b)+1099511627776*b},getPartial:function(b){return Math.round(b/1099511627776)||32}};var symbols={"-2":"E","-1":"S",0:" ",1:".",2:"o",3:"+",4:"=",5:"*",6:"B",7:"O",8:"X",9:"@",10:"%",11:"&",12:"#",13:"/",14:"^"},bounds={width:17,height:9};function createBoard(b){for(var a=[],g=0;g<b.width;g++){a[g]=[];for(var d=0;d<b.height;d++)a[g][d]=0}return a}
function generateBoard(b){var a=createBoard(bounds),g=Math.floor(bounds.width/2),d=Math.floor(bounds.height/2);a[g][d]=-1;b.forEach(function(b){for(var m=0;8>m;m+=2){var f=b>>m&3;switch(f){case 0:case 1:0<d&&d--;break;case 2:case 3:d<bounds.height-1&&d++}switch(f){case 0:case 2:0<g&&g--;break;case 1:case 3:g<bounds.width-1&&g++}0<=a[g][d]&&a[g][d]++}});a[g][d]=-2;return a}
function boardToString(b){result=[];for(var a=0;a<bounds.height;a++){result[a]=[];for(var g=0;g<bounds.width;g++)result[a][g]=symbols[b[g][a]]||symbols[0];result[a]="|"+result[a].join("")+"|"}result.splice(0,0,"\n+---[ RSA2048 ]---+");result.push("+-----------------+");return result.join("\n")}
function randomart(b){for(var a=[],g=0,d=b.length;g<d;g++)a.push("0x"+b[g]);document.getElementById("hostKeyImg").innerHTML=boardToString(generateBoard(a));document.getElementById("hostKey").style.display="inline-block"};var struct={pack:function(b,a){var g="";switch(b){case "Q":b=new BigInteger("ff",16);g+=String.fromCharCode(a.shiftRight(56).and(b));g+=String.fromCharCode(a.shiftRight(48).and(b));g+=String.fromCharCode(a.shiftRight(40).and(b));g+=String.fromCharCode(a.shiftRight(32).and(b));g+=String.fromCharCode(a.shiftRight(24).and(b));g+=String.fromCharCode(a.shiftRight(16).and(b));g+=String.fromCharCode(a.shiftRight(8).and(b));g+=String.fromCharCode(a.and(b));break;case "I":g+=String.fromCharCode(a>>>24&255),
g+=String.fromCharCode(a>>>16&255),g+=String.fromCharCode(a>>>8&255);case "B":g+=String.fromCharCode(a&255)}return g},unpack:function(b,a){var g=[],d=0,h=0;switch(b){case "Q":h=new BigInteger("0",10);h=h.add((new BigInteger(a.charCodeAt(0).toString(),10)).shiftLeft(56));h=h.add((new BigInteger(a.charCodeAt(1).toString(),10)).shiftLeft(48));h=h.add((new BigInteger(a.charCodeAt(2).toString(),10)).shiftLeft(40));h=h.add((new BigInteger(a.charCodeAt(3).toString(),10)).shiftLeft(32));h=h.add((new BigInteger(a.charCodeAt(4).toString(),
10)).shiftLeft(24));h=h.add((new BigInteger(a.charCodeAt(5).toString(),10)).shiftLeft(16));h=h.add((new BigInteger(a.charCodeAt(6).toString(),10)).shiftLeft(8));h=h.add((new BigInteger(a.charCodeAt(7).toString(),10)).shiftLeft(0));g.push(h);break;case "I":h+=a.charCodeAt(0)<<24>>>0,h+=a.charCodeAt(1)<<16>>>0,h+=a.charCodeAt(2)<<8>>>0,d+=3;case "B":h+=a.charCodeAt(0+d)<<0>>>0,g.push(h)}return g}};function inflate_long(b){var a=new BigInteger("0",10);b.length%4&&(b=Array(4-b.length%4+1).join("\x00")+b);for(var g=0;g<b.length;g+=4)a=a.shiftLeft(32),a=a.add(new BigInteger(struct.unpack("I",b.substring(g,g+4))[0].toString(),10));return a}
function deflate_long(b,a){b="number"==typeof b?new BigInteger(b.toString(),10):b.clone();a=void 0==a?!0:a;for(var g="",d=new BigInteger("-1",10),h=new BigInteger("ffffffff",16);!b.equals(BigInteger.ZERO)&&!b.equals(d);)g=struct.pack("I",b.and(h))+g,b=b.shiftRight(32);h=!1;for(var m=0;m<g.length;++m){if(b.equals(BigInteger.ZERO)&&"\x00"!=g.charAt(m)){h=!0;break}if(b.equals(d)&&"\u00ff"!=g.charAt(m)){h=!0;break}}h||(m=0,g=b.equals(BigInteger.ZERO)?"\x00":"\u00ff");g=g.substring(m);a&&(b.equals(BigInteger.ZERO)&&
128<=g.charCodeAt(0)&&(g="\x00"+g),b.equals(d)&&128>g.charCodeAt(0)&&(g="\u00ff"+g));return g}function toByteArray(b){for(var a=new Uint8Array(b.length),g=0;g<b.length;g++)a[g]=b.charCodeAt(g);return a}function fromByteArray(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function bytesToWords(b){for(var a=[],g=0,d=0;g<b.length;g++,d+=8)a[d>>>5]|=(b[g]&255)<<24-d%32;return a}function wordsToBytes(b){for(var a=[],g=0;g<32*b.length;g+=8)a.push(b[g>>>5]>>>24-g%32&255);return a}
function setCharAt(b,a,g){return b.substring(0,a)+g+b.substring(a+1)}function fromUtf8(b){for(var a="",g=toByteArray(b),d=0;d<b.length;d++){var h=b.charCodeAt(d);if(192<=h&&223>=h){var m=g[++d];h=(h&31)<<6|m&63}else if(224<=h&&239>=h){m=g[++d];var f=g[++d];h=(h&15)<<12|(m&63)<<6|f&63}else 128<=h&&(h=".");a+=String.fromCharCode(h)}return a}function read_rng(b){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(b)))}
function filter(b,a){b=b.split(",");for(var g=0;g<b.length;++g)if(-1!=a.indexOf(b[g]))return b[g]}function splitSlice(b,a){a=void 0===a?5E3:a;for(var g=[],d=0,h=b.length;d<h;d+=a)g.push(b.slice(d,a+d));return g}function modColorPercent(b,a){var g=parseInt(b.slice(1),16);b=0>a?0:255;a=0>a?-1*a:a;var d=g>>16,h=g>>8&255;g&=255;return"#"+(16777216+65536*(Math.round((b-d)*a)+d)+256*(Math.round((b-h)*a)+h)+(Math.round((b-g)*a)+g)).toString(16).slice(1)}
function ascii2hex(b){for(var a="",g=0;g<b.length;g++)a=1==b.charCodeAt(g).toString(16).length?a+("0"+b.charCodeAt(g).toString(16)):a+(""+b.charCodeAt(g).toString(16));return a};(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=b()})(function(){return function h(a,g,d){function m(e,k){if(!g[e]){if(!a[e]){var c="function"==typeof require&&require;if(!k&&c)return c(e,!0);if(f)return f(e,!0);k=Error("Cannot find module '"+e+"'");throw k.code="MODULE_NOT_FOUND",k;}k=g[e]={exports:{}};
a[e][0].call(k.exports,function(c){var f=a[e][1][c];return m(f?f:c)},k,k.exports,h,a,g,d)}return g[e].exports}for(var f="function"==typeof require&&require,l=0;l<d.length;l++)m(d[l]);return m}({1:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});var h=a("./utils/CircularList");d.CHAR_DATA_ATTR_INDEX=0;d.CHAR_DATA_CHAR_INDEX=1;d.CHAR_DATA_WIDTH_INDEX=2;d.CHAR_DATA_CODE_INDEX=3;d.MAX_BUFFER_SIZE=4294967295;a=function(){function a(a,l){this._terminal=a;this._hasScrollback=l;this.clear()}
Object.defineProperty(a.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._terminal.rows},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCursorInViewport",{get:function(){var a=this.ybase+this.y-this.ydisp;return 0<=a&&a<this._terminal.rows},enumerable:!0,configurable:!0});a.prototype._getCorrectBufferLength=function(a){if(!this._hasScrollback)return a;
a+=this._terminal.options.scrollback;return a>d.MAX_BUFFER_SIZE?d.MAX_BUFFER_SIZE:a};a.prototype.fillViewportRows=function(){if(0===this._lines.length)for(var a=this._terminal.rows;a--;)this.lines.push(this._terminal.blankLine())};a.prototype.clear=function(){this.x=this.y=this.ybase=this.ydisp=0;this._lines=new h.CircularList(this._getCorrectBufferLength(this._terminal.rows));this.scrollTop=0;this.scrollBottom=this._terminal.rows-1;this.setupTabStops()};a.prototype.resize=function(a,l){var e=this._getCorrectBufferLength(l);
e>this._lines.maxLength&&(this._lines.maxLength=e);if(0<this._lines.length){if(this._terminal.cols<a)for(var f=[this._terminal.defAttr," ",1,32],c=0;c<this._lines.length;c++)for(;this._lines.get(c).length<a;)this._lines.get(c).push(f);f=0;if(this._terminal.rows<l)for(c=this._terminal.rows;c<l;c++)this._lines.length<l+this.ybase&&(0<this.ybase&&this._lines.length<=this.ybase+this.y+f+1?(this.ybase--,f++,0<this.ydisp&&this.ydisp--):this._lines.push(this._terminal.blankLine(void 0,void 0,a)));else for(c=
this._terminal.rows;c>l;c--)this._lines.length>l+this.ybase&&(this._lines.length>this.ybase+this.y+1?this._lines.pop():(this.ybase++,this.ydisp++));e<this._lines.maxLength&&(c=this._lines.length-e,0<c&&(this._lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0)),this._lines.maxLength=e);this.x=Math.min(this.x,a-1);this.y=Math.min(this.y,l-1);f&&(this.y+=f);this.savedY=Math.min(this.savedY,l-1);this.savedX=Math.min(this.savedX,a-1);this.scrollTop=0}this.scrollBottom=
l-1};a.prototype.translateBufferLineToString=function(a,l,e,k){void 0===e&&(e=0);void 0===k&&(k=null);var c="",f=this.lines.get(a);if(!f)return"";a=e;null===k&&(k=f.length);for(var m=k,h=0;h<f.length;h++){var g=f[h];c+=g[d.CHAR_DATA_CHAR_INDEX];0===g[d.CHAR_DATA_WIDTH_INDEX]?(e>=h&&a--,k>=h&&m--):1<g[d.CHAR_DATA_CHAR_INDEX].length&&(e>h&&(a+=g[d.CHAR_DATA_CHAR_INDEX].length-1),k>h&&(m+=g[d.CHAR_DATA_CHAR_INDEX].length-1))}return l&&(l=c.search(/\s+$/),-1!==l&&(m=Math.min(m,l)),m<=a)?"":c.substring(a,
m)};a.prototype.setupTabStops=function(a){null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this._terminal.cols;a+=this._terminal.options.tabStopWidth)this.tabs[a]=!0};a.prototype.prevStop=function(a){null==a&&(a=this.x);for(;!this.tabs[--a]&&0<a;);return a>=this._terminal.cols?this._terminal.cols-1:0>a?0:a};a.prototype.nextStop=function(a){null==a&&(a=this.x);for(;!this.tabs[++a]&&a<this._terminal.cols;);return a>=this._terminal.cols?this._terminal.cols-1:0>a?0:a};return a}();
d.Buffer=a},{"./utils/CircularList":32}],2:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var k in e)e.hasOwnProperty(k)&&(a[k]=e[k])};return function(f,e){function k(){this.constructor=f}a(f,e);f.prototype=null===e?Object.create(e):(k.prototype=e.prototype,new k)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("./Buffer");a=function(a){function f(e){var k=a.call(this)||
this;k._terminal=e;k._normal=new m.Buffer(k._terminal,!0);k._normal.fillViewportRows();k._alt=new m.Buffer(k._terminal,!1);k._activeBuffer=k._normal;k.setupTabStops();return k}h(f,a);Object.defineProperty(f.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"normal",{get:function(){return this._normal},enumerable:!0,
configurable:!0});f.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._alt.clear(),this._activeBuffer=this._normal,this.emit("activate",{activeBuffer:this._normal,inactiveBuffer:this._alt}))};f.prototype.activateAltBuffer=function(){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(),this._activeBuffer=this._alt,this.emit("activate",{activeBuffer:this._alt,inactiveBuffer:this._normal}))};f.prototype.resize=function(a,k){this._normal.resize(a,k);this._alt.resize(a,
k)};f.prototype.setupTabStops=function(a){this._normal.setupTabStops(a);this._alt.setupTabStops(a)};return f}(a("./EventEmitter").EventEmitter);d.BufferSet=a},{"./Buffer":1,"./EventEmitter":7}],3:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});d.wcwidth=function(a){function d(a,e){var c=0,k=e.length-1;if(a<e[0][0]||a>e[k][1])return!1;for(;k>=c;){var f=c+k>>1;if(a>e[f][1])c=f+1;else if(a<e[f][0])k=f-1;else return!0}return!1}var f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,
1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,
2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,
4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],
l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],e=a.control|0,k=null;return function(c){c|=0;if(32>c)return e|0;if(127>c)return 1;var n;if(!(n=k)){k="undefined"===typeof Uint32Array?Array(4096):new Uint32Array(4096);for(n=0;4096>n;++n){for(var m=0,h=16;h--;){m<<=2;var g=16*n+h;g=0===g?a.nul:32>g||127<=g&&160>g?a.control:d(g,f)?0:4352<=g&&(4447>=
g||9001===g||9002===g||11904<=g&&42191>=g&&12351!==g||44032<=g&&55203>=g||63744<=g&&64255>=g||65040<=g&&65049>=g||65072<=g&&65135>=g||65280<=g&&65376>=g||65504<=g&&65510>=g)?2:1;m|=g}k[n]=m}n=k}if(65536>c)return n[c>>4]>>((c&15)<<1)&3;c=d(c,l)?0:131072<=c&&196605>=c||196608<=c&&262141>=c?2:1;return c}}({nul:0,control:0})},{}],4:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});d.CHARSETS={};d.DEFAULT_CHARSET=d.CHARSETS.B;d.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",
e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};d.CHARSETS.A={"#":"\u00a3"};d.CHARSETS.B=null;d.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};d.CHARSETS.C=d.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6",
"]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};d.CHARSETS.R={"#":"\u00a3","@":"\u00e0","[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};d.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};d.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};d.CHARSETS.Y=
{"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};d.CHARSETS.E=d.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};d.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};d.CHARSETS.H=d.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc",
"`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};d.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7","]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],5:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a,f,l){this.textarea=a;this.compositionView=f;this.terminal=l;this.isSendingComposition=this.isComposing=!1;this.compositionPosition={start:null,end:null}}a.prototype.compositionstart=
function(){this.isComposing=!0;this.compositionPosition.start=this.textarea.value.length;this.compositionView.textContent="";this.compositionView.classList.add("active")};a.prototype.compositionupdate=function(a){var f=this;this.compositionView.textContent=a.data;this.updateCompositionElements();setTimeout(function(){f.compositionPosition.end=f.textarea.value.length},0)};a.prototype.compositionend=function(){this.finalizeComposition(!0)};a.prototype.keydown=function(a){if(this.isComposing||this.isSendingComposition){if(229===
a.keyCode||16===a.keyCode||17===a.keyCode||18===a.keyCode)return!1;this.finalizeComposition(!1)}return 229===a.keyCode?(this.handleAnyTextareaChanges(),!1):!0};a.prototype.finalizeComposition=function(a){var f=this;this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(a){var l=this.compositionPosition.start,e=this.compositionPosition.end;this.isSendingComposition=!0;setTimeout(function(){if(f.isSendingComposition){f.isSendingComposition=!1;var a=f.isComposing?
f.textarea.value.substring(l,e):f.textarea.value.substring(l);f.terminal.handler(a)}},0)}else this.isSendingComposition=!1,a=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(a)};a.prototype.handleAnyTextareaChanges=function(){var a=this,f=this.textarea.value;setTimeout(function(){if(!a.isComposing){var l=a.textarea.value.replace(f,"");0<l.length&&a.terminal.handler(l)}},0)};a.prototype.updateCompositionElements=function(a){var f=this;
if(this.isComposing){if(this.terminal.buffer.isCursorInViewport){var l=Math.ceil(this.terminal.charMeasure.height*this.terminal.options.lineHeight),e=this.terminal.buffer.y*l,k=this.terminal.buffer.x*this.terminal.charMeasure.width;this.compositionView.style.left=k+"px";this.compositionView.style.top=e+"px";this.compositionView.style.height=l+"px";this.compositionView.style.lineHeight=l+"px";l=this.compositionView.getBoundingClientRect();this.textarea.style.left=k+"px";this.textarea.style.top=e+"px";
this.textarea.style.width=l.width+"px";this.textarea.style.height=l.height+"px";this.textarea.style.lineHeight=l.height+"px"}a||setTimeout(function(){return f.updateCompositionElements(!0)},0)}};a.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""};return a}();d.CompositionHelper=a},{}],6:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=d.C0||(d.C0={});a.NUL="\x00";a.SOH="\u0001";a.STX="\u0002";a.ETX="\u0003";a.EOT="\u0004";a.ENQ="\u0005";
a.ACK="\u0006";a.BEL="\u0007";a.BS="\b";a.HT="\t";a.LF="\n";a.VT="\x0B";a.FF="\f";a.CR="\r";a.SO="\u000e";a.SI="\u000f";a.DLE="\u0010";a.DC1="\u0011";a.DC2="\u0012";a.DC3="\u0013";a.DC4="\u0014";a.NAK="\u0015";a.SYN="\u0016";a.ETB="\u0017";a.CAN="\u0018";a.EM="\u0019";a.SUB="\u001a";a.ESC="\u001b";a.FS="\u001c";a.GS="\u001d";a.RS="\u001e";a.US="\u001f";a.SP=" ";a.DEL="\u007f"},{}],7:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(){this._events=this._events||
{}}a.prototype.on=function(a,f){this._events[a]=this._events[a]||[];this._events[a].push(f)};a.prototype.off=function(a,f){if(this._events[a]){a=this._events[a];for(var l=a.length;l--;)if(a[l]===f){a.splice(l,1);break}}};a.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]};a.prototype.emit=function(a){for(var f=[],l=1;l<arguments.length;l++)f[l-1]=arguments[l];if(this._events[a]){l=this._events[a];for(var e=0;e<l.length;e++)l[e].apply(this,f)}};a.prototype.listeners=
function(a){return this._events[a]||[]};a.prototype.destroy=function(){this._events={}};return a}();d.EventEmitter=a},{}],8:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});var h=a("./EscapeSequences"),m=a("./Charsets"),f=a("./Buffer"),l=a("./renderer/Types"),e=a("./CharWidth");a=function(){function a(a){this._terminal=a}a.prototype.addChar=function(a,k){if(" "<=a){k=e.wcwidth(k);this._terminal.charset&&this._terminal.charset[a]&&(a=this._terminal.charset[a]);var c=this._terminal.buffer.y+
this._terminal.buffer.ybase;if(!k&&this._terminal.buffer.x)this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-1]&&(this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-1][f.CHAR_DATA_WIDTH_INDEX]?(this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-1][f.CHAR_DATA_CHAR_INDEX]+=a,this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-1][3]=a.charCodeAt(0)):this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-2]&&(this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-
2][f.CHAR_DATA_CHAR_INDEX]+=a,this._terminal.buffer.lines.get(c)[this._terminal.buffer.x-2][3]=a.charCodeAt(0)),this._terminal.updateRange(this._terminal.buffer.y));else{if(this._terminal.buffer.x+k-1>=this._terminal.cols)if(this._terminal.wraparoundMode)this._terminal.buffer.x=0,this._terminal.buffer.y++,this._terminal.buffer.y>this._terminal.buffer.scrollBottom?(this._terminal.buffer.y--,this._terminal.scroll(!0)):this._terminal.buffer.lines.get(this._terminal.buffer.y).isWrapped=!0;else if(2===
k)return;c=this._terminal.buffer.y+this._terminal.buffer.ybase;if(this._terminal.insertMode)for(var l=0;l<k;++l)0===this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).pop()[f.CHAR_DATA_WIDTH_INDEX]&&this._terminal.buffer.lines.get(c)[this._terminal.cols-2]&&2===this._terminal.buffer.lines.get(c)[this._terminal.cols-2][f.CHAR_DATA_WIDTH_INDEX]&&(this._terminal.buffer.lines.get(c)[this._terminal.cols-2]=[this._terminal.curAttr," ",1,32]),this._terminal.buffer.lines.get(c).splice(this._terminal.buffer.x,
0,[this._terminal.curAttr," ",1,32]);this._terminal.buffer.lines.get(c)[this._terminal.buffer.x]=[this._terminal.curAttr,a,k,a.charCodeAt(0)];this._terminal.buffer.x++;this._terminal.updateRange(this._terminal.buffer.y);2===k&&(this._terminal.buffer.lines.get(c)[this._terminal.buffer.x]=[this._terminal.curAttr,"",0,void 0],this._terminal.buffer.x++)}}};a.prototype.bell=function(){this._terminal.bell()};a.prototype.lineFeed=function(){this._terminal.convertEol&&(this._terminal.buffer.x=0);this._terminal.buffer.y++;
this._terminal.buffer.y>this._terminal.buffer.scrollBottom&&(this._terminal.buffer.y--,this._terminal.scroll());this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--;this._terminal.emit("linefeed")};a.prototype.carriageReturn=function(){this._terminal.buffer.x=0};a.prototype.backspace=function(){0<this._terminal.buffer.x&&this._terminal.buffer.x--};a.prototype.tab=function(){this._terminal.buffer.x=this._terminal.buffer.nextStop()};a.prototype.shiftOut=function(){this._terminal.setgLevel(1)};
a.prototype.shiftIn=function(){this._terminal.setgLevel(0)};a.prototype.insertChars=function(a){a=a[0];1>a&&(a=1);for(var c=this._terminal.buffer.y+this._terminal.buffer.ybase,e=this._terminal.buffer.x,f=[this._terminal.eraseAttr()," ",1,32];a--&&e<this._terminal.cols;)this._terminal.buffer.lines.get(c).splice(e++,0,f),this._terminal.buffer.lines.get(c).pop()};a.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y-=a;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0)};a.prototype.cursorDown=
function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};a.prototype.cursorForward=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x+=a;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};a.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x>=this._terminal.cols&&
this._terminal.buffer.x--;this._terminal.buffer.x-=a;0>this._terminal.buffer.x&&(this._terminal.buffer.x=0)};a.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x=0};a.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y-=a;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0);this._terminal.buffer.x=0};a.prototype.cursorCharAbsolute=
function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x=a-1};a.prototype.cursorPosition=function(a){var c=a[0]-1;a=2<=a.length?a[1]-1:0;0>c?c=0:c>=this._terminal.rows&&(c=this._terminal.rows-1);0>a?a=0:a>=this._terminal.cols&&(a=this._terminal.cols-1);this._terminal.buffer.x=a;this._terminal.buffer.y=c};a.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.buffer.x=this._terminal.buffer.nextStop()};a.prototype.eraseInDisplay=function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.buffer.x,
this._terminal.buffer.y);for(a=this._terminal.buffer.y+1;a<this._terminal.rows;a++)this._terminal.eraseLine(a);break;case 1:this._terminal.eraseLeft(this._terminal.buffer.x,this._terminal.buffer.y);for(a=this._terminal.buffer.y;a--;)this._terminal.eraseLine(a);break;case 2:for(a=this._terminal.rows;a--;)this._terminal.eraseLine(a);break;case 3:a=this._terminal.buffer.lines.length-this._terminal.rows,0<a&&(this._terminal.buffer.lines.trimStart(a),this._terminal.buffer.ybase=Math.max(this._terminal.buffer.ybase-
a,0),this._terminal.buffer.ydisp=Math.max(this._terminal.buffer.ydisp-a,0),this._terminal.emit("scroll",0))}};a.prototype.eraseInLine=function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.buffer.x,this._terminal.buffer.y);break;case 1:this._terminal.eraseLeft(this._terminal.buffer.x,this._terminal.buffer.y);break;case 2:this._terminal.eraseLine(this._terminal.buffer.y)}};a.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);for(var c=this._terminal.buffer.y+this._terminal.buffer.ybase,
e=this._terminal.rows-1+this._terminal.buffer.ybase-(this._terminal.rows-1-this._terminal.buffer.scrollBottom)+1;a--;)this._terminal.buffer.lines.splice(e-1,1),this._terminal.buffer.lines.splice(c,0,this._terminal.blankLine(!0));this._terminal.updateRange(this._terminal.buffer.y);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};a.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var c=this._terminal.buffer.y+this._terminal.buffer.ybase;var e=this._terminal.rows-1-this._terminal.buffer.scrollBottom;
for(e=this._terminal.rows-1+this._terminal.buffer.ybase-e;a--;)this._terminal.buffer.lines.splice(c,1),this._terminal.buffer.lines.splice(e,0,this._terminal.blankLine(!0));this._terminal.updateRange(this._terminal.buffer.y);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};a.prototype.deleteChars=function(a){a=a[0];1>a&&(a=1);for(var c=this._terminal.buffer.y+this._terminal.buffer.ybase,e=[this._terminal.eraseAttr()," ",1,32];a--;)this._terminal.buffer.lines.get(c).splice(this._terminal.buffer.x,
1),this._terminal.buffer.lines.get(c).push(e);this._terminal.updateRange(this._terminal.buffer.y)};a.prototype.scrollUp=function(a){for(a=a[0]||1;a--;)this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollTop,1),this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollBottom,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.buffer.scrollTop);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};
a.prototype.scrollDown=function(a){for(a=a[0]||1;a--;)this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollBottom,1),this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollTop,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.buffer.scrollTop);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};a.prototype.eraseChars=function(a){a=a[0];1>a&&(a=1);for(var c=this._terminal.buffer.y+this._terminal.buffer.ybase,
e=this._terminal.buffer.x,f=[this._terminal.eraseAttr()," ",1,32];a--&&e<this._terminal.cols;)this._terminal.buffer.lines.get(c)[e++]=f};a.prototype.cursorBackwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.buffer.x=this._terminal.buffer.prevStop()};a.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x=a-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};a.prototype.HPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x+=
a;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};a.prototype.repeatPrecedingCharacter=function(a){a=a[0]||1;for(var c=this._terminal.buffer.lines.get(this._terminal.buffer.ybase+this._terminal.buffer.y),e=c[this._terminal.buffer.x-1]||[this._terminal.defAttr," ",1,32];a--;)c[this._terminal.buffer.x++]=e};a.prototype.sendDeviceAttributes=function(a){0<a[0]||(this._terminal.prefix?">"===this._terminal.prefix&&(this._terminal.is("xterm")?this._terminal.send(h.C0.ESC+
"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.send(h.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.send(a[0]+"c"):this._terminal.is("screen")&&this._terminal.send(h.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.send(h.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.send(h.C0.ESC+"[?6c"))};a.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y=
a-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1)};a.prototype.VPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};a.prototype.HVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this._terminal.buffer.y=a[0]-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=
this._terminal.rows-1);this._terminal.buffer.x=a[1]-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};a.prototype.tabClear=function(a){a=a[0];0>=a?delete this._terminal.buffer.tabs[this._terminal.buffer.x]:3===a&&(this._terminal.buffer.tabs={})};a.prototype.setMode=function(a){if(1<a.length)for(var c=0;c<a.length;c++)this.setMode([a[c]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!0}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=
!0;break;case 2:this._terminal.setgCharset(0,m.DEFAULT_CHARSET);this._terminal.setgCharset(1,m.DEFAULT_CHARSET);this._terminal.setgCharset(2,m.DEFAULT_CHARSET);this._terminal.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=
!0;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===a[0];this._terminal.vt200Mouse=1E3===a[0];this._terminal.normalMouse=1E3<a[0];this._terminal.mouseEvents=!0;this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager.disable();this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;
break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.buffers.activateAltBuffer();this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}};a.prototype.resetMode=function(a){if(1<a.length)for(var c=0;c<a.length;c++)this.resetMode([a[c]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!1}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=
!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;
this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element.classList.remove("enable-mouse-events");this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.buffers.activateNormalBuffer();this._terminal.refresh(0,this._terminal.rows-
1);this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}};a.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])this._terminal.curAttr=this._terminal.defAttr;else{for(var c=a.length,e=this._terminal.curAttr>>18,f=this._terminal.curAttr>>9&511,k=this._terminal.curAttr&511,d,h=0;h<c;h++)d=a[h],30<=d&&37>=d?f=d-30:40<=d&&47>=d?k=d-40:90<=d&&97>=d?(d+=8,f=d-90):100<=d&&107>=d?(d+=8,k=d-100):0===d?(e=this._terminal.defAttr>>
18,f=this._terminal.defAttr>>9&511,k=this._terminal.defAttr&511):1===d?e|=l.FLAGS.BOLD:4===d?e|=l.FLAGS.UNDERLINE:5===d?e|=l.FLAGS.BLINK:7===d?e|=l.FLAGS.INVERSE:8===d?e|=l.FLAGS.INVISIBLE:2===d?e|=l.FLAGS.DIM:22===d?(e&=~l.FLAGS.BOLD,e&=~l.FLAGS.DIM):24===d?e&=~l.FLAGS.UNDERLINE:25===d?e&=~l.FLAGS.BLINK:27===d?e&=~l.FLAGS.INVERSE:28===d?e&=~l.FLAGS.INVISIBLE:39===d?f=this._terminal.defAttr>>9&511:49===d?k=this._terminal.defAttr&511:38===d?2===a[h+1]?(h+=2,f=this._terminal.matchColor(a[h]&255,a[h+
1]&255,a[h+2]&255),-1===f&&(f=511),h+=2):5===a[h+1]&&(h+=2,f=d=a[h]&255):48===d?2===a[h+1]?(h+=2,k=this._terminal.matchColor(a[h]&255,a[h+1]&255,a[h+2]&255),-1===k&&(k=511),h+=2):5===a[h+1]&&(h+=2,k=d=a[h]&255):100===d?(f=this._terminal.defAttr>>9&511,k=this._terminal.defAttr&511):this._terminal.error("Unknown SGR attribute: %d.",d);this._terminal.curAttr=e<<18|f<<9|k}};a.prototype.deviceStatus=function(a){if(!this._terminal.prefix)switch(a[0]){case 5:this._terminal.send(h.C0.ESC+"[0n");break;case 6:this._terminal.send(h.C0.ESC+
"["+(this._terminal.buffer.y+1)+";"+(this._terminal.buffer.x+1)+"R")}else if("?"===this._terminal.prefix)switch(a[0]){case 6:this._terminal.send(h.C0.ESC+"[?"+(this._terminal.buffer.y+1)+";"+(this._terminal.buffer.x+1)+"R")}};a.prototype.softReset=function(a){this._terminal.cursorHidden=!1;this._terminal.insertMode=!1;this._terminal.originMode=!1;this._terminal.wraparoundMode=!0;this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._terminal.applicationCursor=!1;this._terminal.buffer.scrollTop=
0;this._terminal.buffer.scrollBottom=this._terminal.rows-1;this._terminal.curAttr=this._terminal.defAttr;this._terminal.buffer.x=this._terminal.buffer.y=0;this._terminal.charset=null;this._terminal.glevel=0;this._terminal.charsets=[null]};a.prototype.setCursorStyle=function(a){a=1>a[0]?1:a[0];switch(a){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",
1===a%2)};a.prototype.setScrollRegion=function(a){this._terminal.prefix||(this._terminal.buffer.scrollTop=(a[0]||1)-1,this._terminal.buffer.scrollBottom=(a[1]&&a[1]<=this._terminal.rows?a[1]:this._terminal.rows)-1,this._terminal.buffer.x=0,this._terminal.buffer.y=0)};a.prototype.saveCursor=function(a){this._terminal.buffer.savedX=this._terminal.buffer.x;this._terminal.buffer.savedY=this._terminal.buffer.y};a.prototype.restoreCursor=function(a){this._terminal.buffer.x=this._terminal.buffer.savedX||
0;this._terminal.buffer.y=this._terminal.buffer.savedY||0};return a}();d.InputHandler=a},{"./Buffer":1,"./CharWidth":3,"./Charsets":4,"./EscapeSequences":6,"./renderer/Types":28}],9:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(e,c){function f(){this.constructor=e}a(e,c);e.prototype=null===c?Object.create(c):(f.prototype=
c.prototype,new f)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("./Types"),f=a("./input/MouseZoneManager"),l=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?(\/[\/\w\.\-%~]*)*(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;a=function(a){function e(c){var e=a.call(this)||this;e._terminal=c;e._linkMatchers=[];e._nextLinkMatcherId=0;e._rowsToLinkify={start:null,
end:null};e.registerLinkMatcher(l,null,{matchIndex:1});return e}h(e,a);e.prototype.attachToDom=function(a){this._mouseZoneManager=a};e.prototype.linkifyRows=function(a,f){var c=this;this._mouseZoneManager&&(null===this._rowsToLinkify.start?(this._rowsToLinkify.start=a,this._rowsToLinkify.end=f):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,a),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,f)),this._mouseZoneManager.clearAll(a,f),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),
this._rowsTimeoutId=setTimeout(function(){return c._linkifyRows()},e.TIME_BEFORE_LINKIFY))};e.prototype._linkifyRows=function(){this._rowsTimeoutId=null;for(var a=this._rowsToLinkify.start;a<=this._rowsToLinkify.end;a++)this._linkifyRow(a);this._rowsToLinkify.start=null;this._rowsToLinkify.end=null};e.prototype.setHypertextLinkHandler=function(a){this._linkMatchers[0].handler=a};e.prototype.setHypertextValidationCallback=function(a){this._linkMatchers[0].validationCallback=a};e.prototype.registerLinkMatcher=
function(a,e,f){void 0===f&&(f={});if(0!==this._nextLinkMatcherId&&!e)throw Error("handler must be defined");a={id:this._nextLinkMatcherId++,regex:a,handler:e,matchIndex:f.matchIndex,validationCallback:f.validationCallback,hoverTooltipCallback:f.tooltipCallback,hoverLeaveCallback:f.leaveCallback,willLinkActivate:f.willLinkActivate,priority:f.priority||0};this._addLinkMatcherToList(a);return a.id};e.prototype._addLinkMatcherToList=function(a){if(0===this._linkMatchers.length)this._linkMatchers.push(a);
else{for(var c=this._linkMatchers.length-1;0<=c;c--)if(a.priority<=this._linkMatchers[c].priority){this._linkMatchers.splice(c+1,0,a);return}this._linkMatchers.splice(0,0,a)}};e.prototype.deregisterLinkMatcher=function(a){for(var c=1;c<this._linkMatchers.length;c++)if(this._linkMatchers[c].id===a)return this._linkMatchers.splice(c,1),!0;return!1};e.prototype._linkifyRow=function(a){var c=this._terminal.buffer.ydisp+a;if(!(c>=this._terminal.buffer.lines.length)){c=this._terminal.buffer.translateBufferLineToString(c,
!1);for(var e=0;e<this._linkMatchers.length;e++)this._doLinkifyRow(a,c,this._linkMatchers[e])}};e.prototype._doLinkifyRow=function(a,e,f,d){var c=this;void 0===d&&(d=0);var k=e.match(f.regex);if(k&&0!==k.length){var l=k["number"!==typeof f.matchIndex?0:f.matchIndex],h=e.indexOf(l);f.validationCallback?f.validationCallback(l,function(e){c._rowsTimeoutId||e&&c._addLink(d+h,a,l,f)}):this._addLink(d+h,a,l,f);k=h+l.length;e=e.substr(k);0<e.length&&this._doLinkifyRow(a,e,f,d+k)}};e.prototype._addLink=function(a,
e,d,k){var c=this;this._mouseZoneManager.add(new f.MouseZone(a+1,a+1+d.length,e+1,function(a){if(k.handler)return k.handler(a,d);window.open(d,"_blank")},function(f){c.emit(m.LinkHoverEventTypes.HOVER,{x:a,y:e,length:d.length});c._terminal.element.style.cursor="pointer"},function(f){c.emit(m.LinkHoverEventTypes.TOOLTIP,{x:a,y:e,length:d.length});k.hoverTooltipCallback&&k.hoverTooltipCallback(f,d)},function(){c.emit(m.LinkHoverEventTypes.LEAVE,{x:a,y:e,length:d.length});c._terminal.element.style.cursor=
"";k.hoverLeaveCallback&&k.hoverLeaveCallback()},function(a){return k.willLinkActivate?k.willLinkActivate(a,d):!0}))};e.TIME_BEFORE_LINKIFY=200;return e}(a("./EventEmitter").EventEmitter);d.Linkifier=a},{"./EventEmitter":7,"./Types":14,"./input/MouseZoneManager":18}],10:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});var h=a("./EscapeSequences"),m=a("./Charsets"),f={};f[h.C0.BEL]=function(a,c){return c.bell()};f[h.C0.LF]=function(a,c){return c.lineFeed()};f[h.C0.VT]=f[h.C0.LF];f[h.C0.FF]=
f[h.C0.LF];f[h.C0.CR]=function(a,c){return c.carriageReturn()};f[h.C0.BS]=function(a,c){return c.backspace()};f[h.C0.HT]=function(a,c){return c.tab()};f[h.C0.SO]=function(a,c){return c.shiftOut()};f[h.C0.SI]=function(a,c){return c.shiftIn()};f[h.C0.ESC]=function(a,e){return a.setState(c.ESCAPED)};var l={"[":function(a,e){e.params=[];e.currentParam=0;a.setState(c.CSI_PARAM)},"]":function(a,e){e.params=[];e.currentParam=0;a.setState(c.OSC)},P:function(a,e){e.params=[];e.currentParam=0;a.setState(c.DCS)},
_:function(a,e){a.setState(c.IGNORE)},"^":function(a,e){a.setState(c.IGNORE)},c:function(a,c){c.reset()},E:function(a,e){e.buffer.x=0;e.index();a.setState(c.NORMAL)},D:function(a,e){e.index();a.setState(c.NORMAL)},M:function(a,e){e.reverseIndex();a.setState(c.NORMAL)},"%":function(a,e){e.setgLevel(0);e.setgCharset(0,m.DEFAULT_CHARSET);a.setState(c.NORMAL);a.skipNextChar()}};l[h.C0.CAN]=function(a){return a.setState(c.NORMAL)};var e={"?":function(a){return a.setPrefix("?")},">":function(a){return a.setPrefix(">")},
"!":function(a){return a.setPrefix("!")},0:function(a){return a.setParam(10*a.getParam())},1:function(a){return a.setParam(10*a.getParam()+1)},2:function(a){return a.setParam(10*a.getParam()+2)},3:function(a){return a.setParam(10*a.getParam()+3)},4:function(a){return a.setParam(10*a.getParam()+4)},5:function(a){return a.setParam(10*a.getParam()+5)},6:function(a){return a.setParam(10*a.getParam()+6)},7:function(a){return a.setParam(10*a.getParam()+7)},8:function(a){return a.setParam(10*a.getParam()+
8)},9:function(a){return a.setParam(10*a.getParam()+9)},$:function(a){return a.setPostfix("$")},'"':function(a){return a.setPostfix('"')}," ":function(a){return a.setPostfix(" ")},"'":function(a){return a.setPostfix("'")},";":function(a){return a.finalizeParam()}};e[h.C0.CAN]=function(a){return a.setState(c.NORMAL)};var k={"@":function(a,c,e){return a.insertChars(c)},A:function(a,c,e){return a.cursorUp(c)},B:function(a,c,e){return a.cursorDown(c)},C:function(a,c,e){return a.cursorForward(c)},D:function(a,
c,e){return a.cursorBackward(c)},E:function(a,c,e){return a.cursorNextLine(c)},F:function(a,c,e){return a.cursorPrecedingLine(c)},G:function(a,c,e){return a.cursorCharAbsolute(c)},H:function(a,c,e){return a.cursorPosition(c)},I:function(a,c,e){return a.cursorForwardTab(c)},J:function(a,c,e){return a.eraseInDisplay(c)},K:function(a,c,e){return a.eraseInLine(c)},L:function(a,c,e){return a.insertLines(c)},M:function(a,c,e){return a.deleteLines(c)},P:function(a,c,e){return a.deleteChars(c)},S:function(a,
c,e){return a.scrollUp(c)},T:function(a,c,e){2>c.length&&!e&&a.scrollDown(c)},X:function(a,c,e){return a.eraseChars(c)},Z:function(a,c,e){return a.cursorBackwardTab(c)},"`":function(a,c,e){return a.charPosAbsolute(c)},a:function(a,c,e){return a.HPositionRelative(c)},b:function(a,c,e){return a.repeatPrecedingCharacter(c)},c:function(a,c,e){return a.sendDeviceAttributes(c)},d:function(a,c,e){return a.linePosAbsolute(c)},e:function(a,c,e){return a.VPositionRelative(c)},f:function(a,c,e){return a.HVPosition(c)},
g:function(a,c,e){return a.tabClear(c)},h:function(a,c,e){return a.setMode(c)},l:function(a,c,e){return a.resetMode(c)},m:function(a,c,e){return a.charAttributes(c)},n:function(a,c,e){return a.deviceStatus(c)},p:function(a,c,e){switch(e){case "!":a.softReset(c)}},q:function(a,c,e,f){" "===f&&a.setCursorStyle(c)},r:function(a,c){return a.setScrollRegion(c)},s:function(a,c){return a.saveCursor(c)},u:function(a,c){return a.restoreCursor(c)}};k[h.C0.CAN]=function(a,e,f,d,k){return k.setState(c.NORMAL)};
var c;(function(a){a[a.NORMAL=0]="NORMAL";a[a.ESCAPED=1]="ESCAPED";a[a.CSI_PARAM=2]="CSI_PARAM";a[a.CSI=3]="CSI";a[a.OSC=4]="OSC";a[a.CHARSET=5]="CHARSET";a[a.DCS=6]="DCS";a[a.IGNORE=7]="IGNORE"})(c=d.ParserState||(d.ParserState={}));a=function(){function a(a,e){this._inputHandler=a;this._terminal=e;this._state=c.NORMAL}a.prototype.parse=function(a){var d=a.length,g=this._terminal.buffer.x,n=this._terminal.buffer.y;this._terminal.debug&&this._terminal.log("data: "+a);this._position=0;this._terminal.surrogate_high&&
(a=this._terminal.surrogate_high+a,this._terminal.surrogate_high="");for(;this._position<d;this._position++){var p=a[this._position];var v=a.charCodeAt(this._position);if(55296<=v&&56319>=v){var C=a.charCodeAt(this._position+1);if(isNaN(C)){this._terminal.surrogate_high=p;continue}v=1024*(v-55296)+(C-56320)+65536;p+=a.charAt(this._position+1)}if(!(56320<=v&&57343>=v))switch(this._state){case c.NORMAL:if(p in f)f[p](this,this._inputHandler);else this._inputHandler.addChar(p,v);break;case c.ESCAPED:if(p in
l){l[p](this,this._terminal);break}switch(p){case "(":case ")":case "*":case "+":case "-":case ".":switch(p){case "(":this._terminal.gcharset=0;break;case ")":this._terminal.gcharset=1;break;case "*":this._terminal.gcharset=2;break;case "+":this._terminal.gcharset=3;break;case "-":this._terminal.gcharset=1;break;case ".":this._terminal.gcharset=2}this._state=c.CHARSET;break;case "/":this._terminal.gcharset=3;this._state=c.CHARSET;this._position--;break;case "N":this._state=c.NORMAL;break;case "O":this._state=
c.NORMAL;break;case "n":this._terminal.setgLevel(2);this._state=c.NORMAL;break;case "o":this._terminal.setgLevel(3);this._state=c.NORMAL;break;case "|":this._terminal.setgLevel(3);this._state=c.NORMAL;break;case "}":this._terminal.setgLevel(2);this._state=c.NORMAL;break;case "~":this._terminal.setgLevel(1);this._state=c.NORMAL;break;case "7":this._inputHandler.saveCursor();this._state=c.NORMAL;break;case "8":this._inputHandler.restoreCursor();this._state=c.NORMAL;break;case "#":this._state=c.NORMAL;
this._position++;break;case "H":this._terminal.tabSet();this._state=c.NORMAL;break;case "=":this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._state=c.NORMAL;break;case ">":this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._state=c.NORMAL;break;default:this._state=c.NORMAL,
this._terminal.error("Unknown ESC control: %s.",p)}break;case c.CHARSET:p in m.CHARSETS?(v=m.CHARSETS[p],"/"===p&&this.skipNextChar()):v=m.DEFAULT_CHARSET;this._terminal.setgCharset(this._terminal.gcharset,v);this._terminal.gcharset=null;this._state=c.NORMAL;break;case c.OSC:if(p===h.C0.ESC||p===h.C0.BEL){p===h.C0.ESC&&this._position++;this._terminal.params.push(this._terminal.currentParam);switch(this._terminal.params[0]){case 0:case 1:case 2:this._terminal.params[1]&&(this._terminal.title=this._terminal.params[1],
this._terminal.handleTitle(this._terminal.title))}this._terminal.params=[];this._terminal.currentParam=0;this._state=c.NORMAL}else this._terminal.params.length?this._terminal.currentParam+=p:"0"<=p&&"9">=p?this._terminal.currentParam=10*this._terminal.currentParam+p.charCodeAt(0)-48:";"===p&&(this._terminal.params.push(this._terminal.currentParam),this._terminal.currentParam="");break;case c.CSI_PARAM:if(p in e){e[p](this);break}this.finalizeParam();this._state=c.CSI;case c.CSI:p in k?(this._terminal.debug&&
this._terminal.log("CSI "+(this._terminal.prefix?this._terminal.prefix:"")+" "+(this._terminal.params?this._terminal.params.join(";"):"")+" "+(this._terminal.postfix?this._terminal.postfix:"")+" "+p),k[p](this._inputHandler,this._terminal.params,this._terminal.prefix,this._terminal.postfix,this)):this._terminal.error("Unknown CSI code: %s.",p);this._state=c.NORMAL;this._terminal.prefix="";this._terminal.postfix="";break;case c.DCS:if(p===h.C0.ESC||p===h.C0.BEL){p===h.C0.ESC&&this._position++;switch(this._terminal.prefix){case "":break;
case "$q":p=this._terminal.currentParam;v=!1;switch(p){case '"q':p='0"q';break;case '"p':p='61"p';break;case "r":p=""+(this._terminal.buffer.scrollTop+1)+";"+(this._terminal.buffer.scrollBottom+1)+"r";break;case "m":p="0m";break;default:this._terminal.error("Unknown DCS Pt: %s.",p),p=""}this._terminal.send(h.C0.ESC+"P"+ +v+"$r"+p+h.C0.ESC+"\\");break;case "+p":break;case "+q":p=this._terminal.currentParam;v=!1;this._terminal.send(h.C0.ESC+"P"+ +v+"+r"+p+h.C0.ESC+"\\");break;default:this._terminal.error("Unknown DCS prefix: %s.",
this._terminal.prefix)}this._terminal.currentParam=0;this._terminal.prefix="";this._state=c.NORMAL}else this._terminal.currentParam?this._terminal.currentParam+=p:this._terminal.prefix||"$"===p||"+"===p?2===this._terminal.prefix.length?this._terminal.currentParam=p:this._terminal.prefix+=p:this._terminal.currentParam=p;break;case c.IGNORE:if(p===h.C0.ESC||p===h.C0.BEL)p===h.C0.ESC&&this._position++,this._state=c.NORMAL}}this._terminal.buffer.x===g&&this._terminal.buffer.y===n||this._terminal.emit("cursormove");
return this._state};a.prototype.setState=function(a){this._state=a};a.prototype.setPrefix=function(a){this._terminal.prefix=a};a.prototype.setPostfix=function(a){this._terminal.postfix=a};a.prototype.setParam=function(a){this._terminal.currentParam=a};a.prototype.getParam=function(){return this._terminal.currentParam};a.prototype.finalizeParam=function(){this._terminal.params.push(this._terminal.currentParam);this._terminal.currentParam=0};a.prototype.skipNextChar=function(){this._position++};return a}();
d.Parser=a},{"./Charsets":4,"./EscapeSequences":6}],11:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(c,e){function f(){this.constructor=c}a(c,e);c.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("./utils/MouseHelper"),f=a("./shared/utils/Browser");
g=a("./EventEmitter");var l=a("./SelectionModel"),e=a("./Buffer"),k=a("./handlers/AltClickHandler");a=String.fromCharCode(160);var c=new RegExp(a,"g"),n;(function(a){a[a.NORMAL=0]="NORMAL";a[a.WORD=1]="WORD";a[a.LINE=2]="LINE"})(n||(n={}));a=function(a){function d(c,e){var f=a.call(this)||this;f._terminal=c;f._charMeasure=e;f._enabled=!0;f._initListeners();f.enable();f._model=new l.SelectionModel(c);f._activeSelectionMode=n.NORMAL;return f}h(d,a);Object.defineProperty(d.prototype,"_buffer",{get:function(){return this._terminal.buffers.active},
enumerable:!0,configurable:!0});d.prototype._initListeners=function(){var a=this;this._mouseMoveListener=function(c){return a._onMouseMove(c)};this._mouseUpListener=function(c){return a._onMouseUp(c)};this._trimListener=function(c){return a._onTrim(c)};this.initBuffersListeners()};d.prototype.initBuffersListeners=function(){var a=this;this._terminal.buffer.lines.on("trim",this._trimListener);this._terminal.buffers.on("activate",function(c){return a._onBufferActivate(c)})};d.prototype.disable=function(){this.clearSelection();
this._enabled=!1};d.prototype.enable=function(){this._enabled=!0};Object.defineProperty(d.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasSelection",{get:function(){var a=this._model.finalSelectionStart,c=this._model.finalSelectionEnd;return a&&c?a[0]!==c[0]||a[1]!==
c[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"selectionText",{get:function(){var a=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!a||!e)return"";var d=[];d.push(this._buffer.translateBufferLineToString(a[1],!0,a[0],a[1]===e[1]?e[0]:null));for(var k=a[1]+1;k<=e[1]-1;k++){var l=this._buffer.lines.get(k),h=this._buffer.translateBufferLineToString(k,!0);l.isWrapped?d[d.length-1]+=h:d.push(h)}a[1]!==e[1]&&(l=this._buffer.lines.get(e[1]),h=this._buffer.translateBufferLineToString(e[1],
!0,0,e[0]),l.isWrapped?d[d.length-1]+=h:d.push(h));return d.map(function(a){return a.replace(c," ")}).join(f.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});d.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh()};d.prototype.refresh=function(a){var c=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return c._refresh()}));f.isLinux&&a&&this.selectionText.length&&this.emit("newselection",
this.selectionText)};d.prototype._refresh=function(){this._refreshAnimationFrame=null;this.emit("refresh",{start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd})};d.prototype.isClickInSelection=function(a){a=this._getMouseBufferCoords(a);var c=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return c&&e?a[1]>c[1]&&a[1]<e[1]||c[1]===e[1]&&a[1]===c[1]&&a[0]>c[0]&&a[0]<e[0]||c[1]<e[1]&&a[1]===e[1]&&a[0]<e[0]:!1};d.prototype.selectWordAtCursor=function(a){if(a=this._getMouseBufferCoords(a))this._selectWordAt(a,
!1),this._model.selectionEnd=null,this.refresh(!0)};d.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh();this._terminal.emit("selection")};d.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()};d.prototype._getMouseBufferCoords=function(a){a=this._terminal.mouseHelper.getCoords(a,this._terminal.screenElement,this._charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows,!0);if(!a)return null;a[0]--;a[1]--;a[1]+=this._terminal.buffer.ydisp;
return a};d.prototype._getMouseEventScrollAmount=function(a){a=m.MouseHelper.getCoordsRelativeToElement(a,this._terminal.screenElement)[1];var c=this._terminal.rows*Math.ceil(this._charMeasure.height*this._terminal.options.lineHeight);if(0<=a&&a<=c)return 0;a>c&&(a-=c);a=Math.min(Math.max(a,-50),50);a/=50;return a/Math.abs(a)+Math.round(14*a)};d.prototype.shouldForceSelection=function(a){return f.isMac?a.altKey:a.shiftKey};d.prototype.onMouseDown=function(a){this._mouseDownTimeStamp=a.timeStamp;if((2!==
a.button||!this.hasSelection)&&0===a.button){if(!this._enabled){if(!this.shouldForceSelection(a))return;a.stopPropagation()}a.preventDefault();this._dragScrollAmount=0;this._enabled&&a.shiftKey?this._onIncrementalClick(a):1===a.detail?this._onSingleClick(a):2===a.detail?this._onDoubleClick(a):3===a.detail&&this._onTripleClick(a);this._addMouseDownListeners();this.refresh(!0)}};d.prototype._addMouseDownListeners=function(){var a=this;this._terminal.element.ownerDocument.addEventListener("mousemove",
this._mouseMoveListener);this._terminal.element.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return a._dragScroll()},50)};d.prototype._removeMouseDownListeners=function(){this._terminal.element.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener);this._terminal.element.ownerDocument.removeEventListener("mouseup",this._mouseUpListener);clearInterval(this._dragScrollIntervalTimer);this._dragScrollIntervalTimer=
null};d.prototype._onIncrementalClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))};d.prototype._onSingleClick=function(a){this._model.selectionStartLength=0;this._model.isSelectAllActive=!1;this._activeSelectionMode=n.NORMAL;this._model.selectionStart=this._getMouseBufferCoords(a);this._model.selectionStart&&(this._model.selectionEnd=null,(a=this._buffer.lines.get(this._model.selectionStart[1]))&&(a.length>=this._model.selectionStart[0]||0===a[this._model.selectionStart[0]][e.CHAR_DATA_WIDTH_INDEX]&&
this._model.selectionStart[0]++))};d.prototype._onDoubleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=n.WORD,this._selectWordAt(a,!0)};d.prototype._onTripleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=n.LINE,this._selectLineAt(a[1])};d.prototype._onMouseMove=function(a){a.stopImmediatePropagation();var c=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=this._getMouseBufferCoords(a);
this._model.selectionEnd?(this._activeSelectionMode===n.LINE?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:this._activeSelectionMode===n.WORD&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(a),0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]<this._buffer.lines.length&&(a=this._buffer.lines.get(this._model.selectionEnd[1])[this._model.selectionEnd[0]])&&
0===a[e.CHAR_DATA_WIDTH_INDEX]&&this._model.selectionEnd[0]++,c&&c[0]===this._model.selectionEnd[0]&&c[1]===this._model.selectionEnd[1]||this.refresh(!0)):this.refresh(!0)};d.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollLines(this._dragScrollAmount,!1),this._model.selectionEnd=0<this._dragScrollAmount?[this._terminal.cols-1,Math.min(this._terminal.buffer.ydisp+this._terminal.rows,this._terminal.buffer.lines.length-1)]:[0,this._terminal.buffer.ydisp],this.refresh())};
d.prototype._onMouseUp=function(a){var c=a.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners();1>=this.selectionText.length&&500>c?(new k.AltClickHandler(a,this._terminal)).move():this.hasSelection&&this._terminal.emit("selection")};d.prototype._onBufferActivate=function(a){this.clearSelection();a.inactiveBuffer.lines.off("trim",this._trimListener);a.activeBuffer.lines.on("trim",this._trimListener)};d.prototype._convertViewportColToCharacterIndex=function(a,c){for(var f=c[0],d=0;c[0]>=
d;d++){var k=a[d];0===k[e.CHAR_DATA_WIDTH_INDEX]?f--:1<k[e.CHAR_DATA_CHAR_INDEX].length&&c[0]!==d&&(f+=k[e.CHAR_DATA_CHAR_INDEX].length-1)}return f};d.prototype.setSelection=function(a,c,e){this._model.clearSelection();this._removeMouseDownListeners();this._model.selectionStart=[a,c];this._model.selectionStartLength=e;this.refresh()};d.prototype._getWordAt=function(a,c){var f=this._buffer.lines.get(a[1]);if(!f)return null;var d=this._buffer.translateBufferLineToString(a[1],!1),k=this._convertViewportColToCharacterIndex(f,
a),l=k,h=a[0]-k,m=0,g=0,n=0,p=0;if(" "===d.charAt(k)){for(;0<k&&" "===d.charAt(k-1);)k--;for(;l<d.length&&" "===d.charAt(l+1);)l++}else{var q=a[0];a=a[0];0===f[q][e.CHAR_DATA_WIDTH_INDEX]&&(m++,q--);2===f[a][e.CHAR_DATA_WIDTH_INDEX]&&(g++,a++);1<f[a][e.CHAR_DATA_CHAR_INDEX].length&&(p+=f[a][e.CHAR_DATA_CHAR_INDEX].length-1,l+=f[a][e.CHAR_DATA_CHAR_INDEX].length-1);for(;0<q&&0<k&&!this._isCharWordSeparator(f[q-1]);){var r=f[q-1];0===r[e.CHAR_DATA_WIDTH_INDEX]?(m++,q--):1<r[e.CHAR_DATA_CHAR_INDEX].length&&
(n+=r[e.CHAR_DATA_CHAR_INDEX].length-1,k-=r[e.CHAR_DATA_CHAR_INDEX].length-1);k--;q--}for(;a<f.length&&l+1<d.length&&!this._isCharWordSeparator(f[a+1]);)r=f[a+1],2===r[e.CHAR_DATA_WIDTH_INDEX]?(g++,a++):1<r[e.CHAR_DATA_CHAR_INDEX].length&&(p+=r[e.CHAR_DATA_CHAR_INDEX].length-1,l+=r[e.CHAR_DATA_CHAR_INDEX].length-1),l++,a++}l++;f=k+h-m+n;m=Math.min(this._terminal.cols,l-k+m+g-n-p);return c||""!==d.slice(k,l).trim()?{start:f,length:m}:null};d.prototype._selectWordAt=function(a,c){if(c=this._getWordAt(a,
c))this._model.selectionStart=[c.start,a[1]],this._model.selectionStartLength=c.length};d.prototype._selectToWordAt=function(a){var c=this._getWordAt(a,!0);c&&(this._model.selectionEnd=[this._model.areSelectionValuesReversed()?c.start:c.start+c.length,a[1]])};d.prototype._isCharWordSeparator=function(a){return 0===a[e.CHAR_DATA_WIDTH_INDEX]?!1:0<=" ()[]{}'\"".indexOf(a[e.CHAR_DATA_CHAR_INDEX])};d.prototype._selectLineAt=function(a){this._model.selectionStart=[0,a];this._model.selectionStartLength=
this._terminal.cols};return d}(g.EventEmitter);d.SelectionManager=a},{"./Buffer":1,"./EventEmitter":7,"./SelectionModel":12,"./handlers/AltClickHandler":16,"./shared/utils/Browser":30,"./utils/MouseHelper":33}],12:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a){this._terminal=a;this.clearSelection()}a.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(a.prototype,
"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._terminal.cols,this._terminal.buffer.ybase+this._terminal.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?[this.selectionStart[0]+
this.selectionStartLength,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:null},enumerable:!0,configurable:!0});a.prototype.areSelectionValuesReversed=function(){var a=this.selectionStart,f=this.selectionEnd;return a&&f?a[1]>f[1]||a[1]===f[1]&&a[0]>f[0]:!1};a.prototype.onTrim=function(a){this.selectionStart&&(this.selectionStart[1]-=
a);this.selectionEnd&&(this.selectionEnd[1]-=a);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return a}();d.SelectionModel=a},{}],13:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(c,e){function f(){this.constructor=
c}a(c,e);c.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("./BufferSet"),f=a("./Buffer"),l=a("./CompositionHelper");g=a("./EventEmitter");var e=a("./Viewport"),k=a("./handlers/Clipboard"),c=a("./EscapeSequences"),n=a("./InputHandler"),p=a("./Parser"),q=a("./renderer/Renderer"),r=a("./Linkifier"),t=a("./SelectionManager"),y=a("./utils/CharMeasure"),v=a("./shared/utils/Browser"),C=a("./utils/MouseHelper"),z=a("./utils/Sounds"),
x=a("./renderer/ColorManager"),B=a("./input/MouseZoneManager"),u="undefined"!==typeof window?window.document:null,A={cols:80,rows:24,convertEol:!1,termName:"xterm",cursorBlink:!1,cursorStyle:"block",bellSound:z.BELL_SOUND,bellStyle:"none",enableBold:!0,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,scrollback:1E3,screenKeys:!1,debug:!1,macOptionIsMeta:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,allowTransparency:!1,
tabStopWidth:8,theme:null,rightClickSelectsWord:v.isMac};a=function(a){function d(c){void 0===c&&(c={});var e=a.call(this)||this;e.browser=v;e.options=c;e.setup();return e}h(d,a);d.prototype.setup=function(){var a=this;Object.keys(A).forEach(function(c){null==a.options[c]&&(a.options[c]=A[c]);a[c]=a.options[c]});this.parent=u?u.body:null;this.cols=this.options.cols;this.rows=this.options.rows;if(this.options.handler)this.on("data",this.options.handler);this.cursorState=0;this.cursorHidden=!1;this.sendDataQueue=
"";this.customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.bracketedPasteMode=!1;this.gcharset=this.charset=null;this.glevel=0;this.charsets=[null];this.writable=this.readable=!0;this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.postfix=this.prefix="";this.writeBuffer=[];this.writeStopped=this.xoffSentToCatchUp=this.writeInProgress=!1;this.surrogateHigh="";this.userScrolling=!1;this.inputHandler=
new n.InputHandler(this);this.parser=new p.Parser(this.inputHandler,this);this.renderer=this.renderer||null;this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new r.Linkifier(this);this._mouseZoneManager=this._mouseZoneManager||null;this.buffers=new m.BufferSet(this);this.selectionManager&&(this.selectionManager.clearSelection(),this.selectionManager.initBuffersListeners())};Object.defineProperty(d.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,
configurable:!0});d.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};d.prototype.focus=function(){this.textarea&&this.textarea.focus()};Object.defineProperty(d.prototype,"isFocused",{get:function(){return u.activeElement===this.textarea},enumerable:!0,configurable:!0});d.prototype.getOption=function(a){if(!(a in A))throw Error('No option with key "'+a+'"');return"undefined"!==typeof this.options[a]?this.options[a]:this[a]};d.prototype.setOption=function(a,c){if(!(a in A))throw Error('No option with key "'+
a+'"');switch(a){case "bellStyle":c||(c="none");break;case "cursorStyle":c||(c="block");break;case "fontWeight":c||(c="normal");break;case "fontWeightBold":c||(c="bold");break;case "lineHeight":if(1>c){console.warn(a+" cannot be less than 1, value: "+c);return}case "tabStopWidth":if(1>c){console.warn(a+" cannot be less than 1, value: "+c);return}break;case "theme":if(this.renderer){this._setTheme(c);return}break;case "scrollback":c=Math.min(c,f.MAX_BUFFER_SIZE);if(0>c){console.warn(a+" cannot be less than 0, value: "+
c);return}if(this.options[a]!==c){var e=this.rows+c;if(this.buffer.lines.length>e){e=this.buffer.lines.length-e;var d=0>this.buffer.ydisp-e;this.buffer.lines.trimStart(e);this.buffer.ybase=Math.max(this.buffer.ybase-e,0);this.buffer.ydisp=Math.max(this.buffer.ydisp-e,0);d&&this.refresh(0,this.rows-1)}}}this[a]=c;this.options[a]=c;switch(a){case "fontFamily":case "fontSize":this.renderer.clear();this.charMeasure.measure(this.options);break;case "enableBold":case "letterSpacing":case "lineHeight":case "fontWeight":case "fontWeightBold":a=
"fontWeight"===a||"fontWeightBold"===a||"enableBold"===a,this.renderer.clear(),this.renderer.onResize(this.cols,this.rows,a),this.refresh(0,this.rows-1);case "scrollback":this.buffers.resize(this.cols,this.rows);this.viewport.syncScrollArea();break;case "tabStopWidth":this.buffers.setupTabStops();break;case "bellSound":case "bellStyle":this.syncBellSound()}if(this.renderer)this.renderer.onOptionsChanged()};d.prototype._onTextAreaFocus=function(){this.sendFocus&&this.send(c.C0.ESC+"[I");this.element.classList.add("focus");
this.showCursor();this.emit("focus")};d.prototype.blur=function(){return this.textarea.blur()};d.prototype._onTextAreaBlur=function(){this.refresh(this.buffer.y,this.buffer.y);this.sendFocus&&this.send(c.C0.ESC+"[O");this.element.classList.remove("focus");this.emit("blur")};d.prototype.initGlobal=function(){var a=this;this.bindKeys();w(this.element,"copy",function(c){a.hasSelection()&&k.copyHandler(c,a,a.selectionManager)});var c=function(c){return k.pasteHandler(c,a)};w(this.textarea,"paste",c);
w(this.element,"paste",c);v.isFirefox?w(this.element,"mousedown",function(c){2===c.button&&k.rightClickHandler(c,a.textarea,a.selectionManager,a.options.rightClickSelectsWord)}):w(this.element,"contextmenu",function(c){k.rightClickHandler(c,a.textarea,a.selectionManager,a.options.rightClickSelectsWord)});v.isLinux&&w(this.element,"auxclick",function(c){1===c.button&&k.moveTextAreaUnderMouseCursor(c,a.textarea)})};d.prototype.bindKeys=function(){var a=this,c=this;w(this.element,"keydown",function(a){u.activeElement===
this&&c._keyDown(a)},!0);w(this.element,"keypress",function(a){u.activeElement===this&&c._keyPress(a)},!0);w(this.element,"keyup",function(c){16!==c.keyCode&&17!==c.keyCode&&18!==c.keyCode&&a.focus()},!0);w(this.textarea,"keydown",function(c){a._keyDown(c)},!0);w(this.textarea,"keypress",function(c){a._keyPress(c);a.textarea.value=""},!0);w(this.textarea,"compositionstart",function(){return a.compositionHelper.compositionstart()});w(this.textarea,"compositionupdate",function(c){return a.compositionHelper.compositionupdate(c)});
w(this.textarea,"compositionend",function(){return a.compositionHelper.compositionend()});this.on("refresh",function(){return a.compositionHelper.updateCompositionElements()});this.on("refresh",function(c){return a.queueLinkification(c.start,c.end)})};d.prototype.open=function(a){var c=this;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.body;
this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.setAttribute("tabindex","0");this.parent.appendChild(this.element);a=u.createDocumentFragment();this.viewportElement=u.createElement("div");this.viewportElement.classList.add("xterm-viewport");a.appendChild(this.viewportElement);this.viewportScrollArea=u.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);
this.screenElement=u.createElement("div");this.screenElement.classList.add("xterm-screen");this.helperContainer=u.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.screenElement.appendChild(this.helperContainer);a.appendChild(this.screenElement);this._mouseZoneManager=new B.MouseZoneManager(this);this.on("scroll",function(){return c._mouseZoneManager.clearAll()});this.linkifier.attachToDom(this._mouseZoneManager);this.textarea=u.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");
this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){return c._onTextAreaFocus()});this.textarea.addEventListener("blur",function(){return c._onTextAreaBlur()});this.helperContainer.appendChild(this.textarea);this.compositionView=u.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=
new l.CompositionHelper(this.textarea,this.compositionView,this);this.helperContainer.appendChild(this.compositionView);this.charSizeStyleElement=u.createElement("style");this.helperContainer.appendChild(this.charSizeStyleElement);this.charMeasure=new y.CharMeasure(u,this.helperContainer);this.syncBellSound();this.element.appendChild(a);this.renderer=new q.Renderer(this,this.options.theme);this.options.theme=null;this.viewport=new e.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasure);
this.viewport.onThemeChanged(this.renderer.colorManager.colors);this.on("cursormove",function(){return c.renderer.onCursorMove()});this.on("resize",function(){return c.renderer.onResize(c.cols,c.rows,!1)});this.on("blur",function(){return c.renderer.onBlur()});this.on("focus",function(){return c.renderer.onFocus()});this.charMeasure.on("charsizechanged",function(){return c.renderer.onResize(c.cols,c.rows,!0)});this.renderer.on("resize",function(a){return c.viewport.syncScrollArea()});this.selectionManager=
new t.SelectionManager(this,this.charMeasure);this.element.addEventListener("mousedown",function(a){return c.selectionManager.onMouseDown(a)});this.selectionManager.on("refresh",function(a){return c.renderer.onSelectionChanged(a.start,a.end)});this.selectionManager.on("newselection",function(a){c.textarea.value=a;c.textarea.focus();c.textarea.select()});this.on("scroll",function(){c.viewport.syncScrollArea();c.selectionManager.refresh()});this.viewportElement.addEventListener("scroll",function(){return c.selectionManager.refresh()});
this.mouseHelper=new C.MouseHelper(this.renderer);this.charMeasure.measure(this.options);this.refresh(0,this.rows-1);this.initGlobal();this.bindMouse()};d.prototype._setTheme=function(a){a=this.renderer.setTheme(a);if(this.viewport)this.viewport.onThemeChanged(a)};d.applyAddon=function(a){a.apply(d)};d.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var c=null!=a.button?+a.button:null!=a.which?a.which-1:null;v.isMSIE&&(c=1===c?0:4===c?1:c);break;case "mouseup":c=
3;break;case "DOMMouseScroll":c=0>a.detail?64:65;break;case "wheel":c=0<a.wheelDeltaY?64:65}var e=a.shiftKey?4:0;var d=a.metaKey?8:0;var k=a.ctrlKey?16:0;e=e|d|k;h.vt200Mouse?e&=k:h.normalMouse||(e=0);c=32+(e<<2)+c;if(k=h.mouseHelper.getRawByteCoords(a,h.screenElement,h.charMeasure,h.options.lineHeight,h.cols,h.rows))switch(f(c,k),a.overrideType||a.type){case "mousedown":m=c;break;case "mouseup":m=32}}function e(a){var c=m;(a=h.mouseHelper.getRawByteCoords(a,h.screenElement,h.charMeasure,h.options.lineHeight,
h.cols,h.rows))&&f(c+32,a)}function d(a,c){h.utfMouse?2047===c?a.push(0):127>c?a.push(c):(2047<c&&(c=2047),a.push(192|c>>6),a.push(128|c&63)):255===c?a.push(0):(127<c&&(c=127),a.push(c))}function f(a,e){if(h.vt300Mouse){a&=3;e.x-=32;e.y-=32;var f=c.C0.ESC+"[24";if(0===a)f+="1";else if(1===a)f+="3";else if(2===a)f+="5";else{if(3===a)return;f+="0"}f+="~["+e.x+","+e.y+"]\r";h.send(f)}else h.decLocator?(a&=3,e.x-=32,e.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&(a=3),h.send(c.C0.ESC+"["+a+";"+(3===a?4:
0)+";"+e.y+";"+e.x+";"+e.page||"0&w")):h.urxvtMouse?(e.x-=32,e.y-=32,e.x++,e.y++,h.send(c.C0.ESC+"["+a+";"+e.x+";"+e.y+"M")):h.sgrMouse?(e.x-=32,e.y-=32,h.send(c.C0.ESC+"[<"+((3===(a&3)?a&-4:a)-32)+";"+e.x+";"+e.y+(3===(a&3)?"m":"M"))):(f=[],d(f,a),d(f,e.x),d(f,e.y),h.send(c.C0.ESC+"[M"+String.fromCharCode.apply(String,f)))}var k=this,l=this.element,h=this,m=32;w(l,"mousedown",function(c){c.preventDefault();k.focus();if(k.mouseEvents&&!k.selectionManager.shouldForceSelection(c)){a(c);if(k.vt200Mouse)return c.overrideType=
"mouseup",a(c),k.cancel(c);k.normalMouse&&w(k.document,"mousemove",e);if(!k.x10Mouse){var d=function(c){a(c);if(k.normalMouse){var f=void 0;void 0===f&&(f=!1);k.document.removeEventListener("mousemove",e,f)}f=void 0;void 0===f&&(f=!1);k.document.removeEventListener("mouseup",d,f);return k.cancel(c)};w(k.document,"mouseup",d)}return k.cancel(c)}});w(l,"wheel",function(c){!k.mouseEvents||k.x10Mouse||k.vt300Mouse||k.decLocator||(a(c),c.preventDefault())});w(l,"wheel",function(a){if(!k.mouseEvents)return k.viewport.onWheel(a),
k.cancel(a)});w(l,"touchstart",function(a){if(!k.mouseEvents)return k.viewport.onTouchStart(a),k.cancel(a)});w(l,"touchmove",function(a){if(!k.mouseEvents)return k.viewport.onTouchMove(a),k.cancel(a)})};d.prototype.destroy=function(){a.prototype.destroy.call(this);this.writable=this.readable=!1;this.handler=function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};d.prototype.refresh=function(a,c){this.renderer&&this.renderer.queueRefresh(a,
c)};d.prototype.queueLinkification=function(a,c){this.linkifier&&this.linkifier.linkifyRows(a,c)};d.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))};d.prototype.scroll=function(a){a=this.blankLine(void 0,a);var c=this.buffer.ybase+this.buffer.scrollTop,e=this.buffer.ybase+this.buffer.scrollBottom;0===this.buffer.scrollTop?(c=this.buffer.lines.length===this.buffer.lines.maxLength,e===this.buffer.lines.length-1?this.buffer.lines.push(a):
this.buffer.lines.splice(e+1,0,a),c)?this.userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this.userScrolling||this.buffer.ydisp++):(this.buffer.lines.shiftElements(c+1,e-c+1-1,-1),this.buffer.lines.set(e,a));this.userScrolling||(this.buffer.ydisp=this.buffer.ybase);this.updateRange(this.buffer.scrollTop);this.updateRange(this.buffer.scrollBottom);this.emit("scroll",this.buffer.ydisp)};d.prototype.scrollLines=function(a,c){if(0>a){if(0===this.buffer.ydisp)return;
this.userScrolling=!0}else a+this.buffer.ydisp>=this.buffer.ybase&&(this.userScrolling=!1);var e=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+a,this.buffer.ybase),0);e!==this.buffer.ydisp&&(c||this.emit("scroll",this.buffer.ydisp),this.refresh(0,this.rows-1))};d.prototype.scrollPages=function(a){this.scrollLines(a*(this.rows-1))};d.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)};d.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-
this.buffer.ydisp)};d.prototype.write=function(a){var e=this;this.writeBuffer.push(a);this.options.useFlowControl&&!this.xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.send(c.C0.DC3),this.xoffSentToCatchUp=!0);!this.writeInProgress&&0<this.writeBuffer.length&&(this.writeInProgress=!0,setTimeout(function(){e.innerWrite()}))};d.prototype.innerWrite=function(){for(var a=this,e=this.writeBuffer.splice(0,300);0<e.length;){var d=e.shift();this.xoffSentToCatchUp&&0===e.length&&0===this.writeBuffer.length&&
(this.send(c.C0.DC1),this.xoffSentToCatchUp=!1);this.refreshEnd=this.refreshStart=this.buffer.y;d=this.parser.parse(d);this.parser.setState(d);this.updateRange(this.buffer.y);this.refresh(this.refreshStart,this.refreshEnd)}0<this.writeBuffer.length?setTimeout(function(){return a.innerWrite()},0):this.writeInProgress=!1};d.prototype.writeln=function(a){this.write(a+"\r\n")};d.prototype.attachCustomKeyEventHandler=function(a){this.customKeyEventHandler=a};d.prototype.setHypertextLinkHandler=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext link handler before Terminal.open is called");
this.linkifier.setHypertextLinkHandler(a);this.refresh(0,this.rows-1)};d.prototype.setHypertextValidationCallback=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext validation callback before Terminal.open is called");this.linkifier.setHypertextValidationCallback(a);this.refresh(0,this.rows-1)};d.prototype.registerLinkMatcher=function(a,c,e){return this.linkifier?(a=this.linkifier.registerLinkMatcher(a,c,e),this.refresh(0,this.rows-1),a):0};d.prototype.deregisterLinkMatcher=function(a){this.linkifier&&
this.linkifier.deregisterLinkMatcher(a)&&this.refresh(0,this.rows-1)};d.prototype.hasSelection=function(){return this.selectionManager?this.selectionManager.hasSelection:!1};d.prototype.getSelection=function(){return this.selectionManager?this.selectionManager.selectionText:""};d.prototype.clearSelection=function(){this.selectionManager&&this.selectionManager.clearSelection()};d.prototype.selectAll=function(){this.selectionManager&&this.selectionManager.selectAll()};d.prototype._keyDown=function(a){if(this.customKeyEventHandler&&
!1===this.customKeyEventHandler(a))return!1;if(!this.compositionHelper.keydown(a))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var e=this._evaluateKeyEscapeSequence(a);e.key===c.C0.DC3?this.writeStopped=!0:e.key===c.C0.DC1&&(this.writeStopped=!1);if(e.scrollLines)return this.scrollLines(e.scrollLines),this.cancel(a,!0);if(this._isThirdLevelShift(this.browser,a))return!0;e.cancel&&this.cancel(a,!0);if(!e.key)return!0;this.emit("keydown",a);this.emit("key",e.key,a);this.showCursor();
this.handler(e.key);return this.cancel(a,!0)};d.prototype._isThirdLevelShift=function(a,c){a=a.isMac&&!this.options.macOptionIsMeta&&c.altKey&&!c.ctrlKey&&!c.metaKey||a.isMSWindows&&c.altKey&&c.ctrlKey&&!c.metaKey;return"keypress"===c.type?a:a&&(!c.keyCode||47<c.keyCode)};d.prototype._evaluateKeyEscapeSequence=function(a){var e={cancel:!1,key:void 0,scrollLines:void 0},d=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:"UIKeyInputUpArrow"===a.key?e.key=this.applicationCursor?
c.C0.ESC+"OA":c.C0.ESC+"[A":"UIKeyInputLeftArrow"===a.key?e.key=this.applicationCursor?c.C0.ESC+"OD":c.C0.ESC+"[D":"UIKeyInputRightArrow"===a.key?e.key=this.applicationCursor?c.C0.ESC+"OC":c.C0.ESC+"[C":"UIKeyInputDownArrow"===a.key&&(e.key=this.applicationCursor?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(a.shiftKey){e.key=c.C0.BS;break}else if(a.altKey){e.key=c.C0.ESC+c.C0.DEL;break}e.key=c.C0.DEL;break;case 9:if(a.shiftKey){e.key=c.C0.ESC+"[Z";break}e.key=c.C0.HT;e.cancel=!0;break;case 13:e.key=
c.C0.CR;e.cancel=!0;break;case 27:e.key=c.C0.ESC;e.cancel=!0;break;case 37:d?(e.key=c.C0.ESC+"[1;"+(d+1)+"D",e.key===c.C0.ESC+"[1;3D"&&(e.key=this.browser.isMac?c.C0.ESC+"b":c.C0.ESC+"[1;5D")):e.key=this.applicationCursor?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:d?(e.key=c.C0.ESC+"[1;"+(d+1)+"C",e.key===c.C0.ESC+"[1;3C"&&(e.key=this.browser.isMac?c.C0.ESC+"f":c.C0.ESC+"[1;5C")):e.key=this.applicationCursor?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:d?(e.key=c.C0.ESC+"[1;"+(d+1)+"A",e.key===c.C0.ESC+
"[1;3A"&&(e.key=c.C0.ESC+"[1;5A")):e.key=this.applicationCursor?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:d?(e.key=c.C0.ESC+"[1;"+(d+1)+"B",e.key===c.C0.ESC+"[1;3B"&&(e.key=c.C0.ESC+"[1;5B")):e.key=this.applicationCursor?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(e.key=c.C0.ESC+"[2~");break;case 46:e.key=d?c.C0.ESC+"[3;"+(d+1)+"~":c.C0.ESC+"[3~";break;case 36:e.key=d?c.C0.ESC+"[1;"+(d+1)+"H":this.applicationCursor?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:e.key=d?c.C0.ESC+"[1;"+
(d+1)+"F":this.applicationCursor?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:a.shiftKey?e.scrollLines=-(this.rows-1):e.key=c.C0.ESC+"[5~";break;case 34:a.shiftKey?e.scrollLines=this.rows-1:e.key=c.C0.ESC+"[6~";break;case 112:e.key=d?c.C0.ESC+"[1;"+(d+1)+"P":c.C0.ESC+"OP";break;case 113:e.key=d?c.C0.ESC+"[1;"+(d+1)+"Q":c.C0.ESC+"OQ";break;case 114:e.key=d?c.C0.ESC+"[1;"+(d+1)+"R":c.C0.ESC+"OR";break;case 115:e.key=d?c.C0.ESC+"[1;"+(d+1)+"S":c.C0.ESC+"OS";break;case 116:e.key=d?c.C0.ESC+"[15;"+(d+1)+
"~":c.C0.ESC+"[15~";break;case 117:e.key=d?c.C0.ESC+"[17;"+(d+1)+"~":c.C0.ESC+"[17~";break;case 118:e.key=d?c.C0.ESC+"[18;"+(d+1)+"~":c.C0.ESC+"[18~";break;case 119:e.key=d?c.C0.ESC+"[19;"+(d+1)+"~":c.C0.ESC+"[19~";break;case 120:e.key=d?c.C0.ESC+"[20;"+(d+1)+"~":c.C0.ESC+"[20~";break;case 121:e.key=d?c.C0.ESC+"[21;"+(d+1)+"~":c.C0.ESC+"[21~";break;case 122:e.key=d?c.C0.ESC+"[23;"+(d+1)+"~":c.C0.ESC+"[23~";break;case 123:e.key=d?c.C0.ESC+"[24;"+(d+1)+"~":c.C0.ESC+"[24~";break;default:!a.ctrlKey||
a.shiftKey||a.altKey||a.metaKey?this.browser.isMac&&!this.options.macOptionIsMeta||!a.altKey||a.ctrlKey||a.metaKey?this.browser.isMac&&!a.altKey&&!a.ctrlKey&&a.metaKey&&65===a.keyCode&&this.selectAll():65<=a.keyCode&&90>=a.keyCode?e.key=c.C0.ESC+String.fromCharCode(a.keyCode+32):192===a.keyCode?e.key=c.C0.ESC+"`":48<=a.keyCode&&57>=a.keyCode&&(e.key=c.C0.ESC+(a.keyCode-48)):65<=a.keyCode&&90>=a.keyCode?e.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?e.key=String.fromCharCode(0):51<=a.keyCode&&
55>=a.keyCode?e.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?e.key=String.fromCharCode(127):219===a.keyCode?e.key=String.fromCharCode(27):220===a.keyCode?e.key=String.fromCharCode(28):221===a.keyCode&&(e.key=String.fromCharCode(29))}return e};d.prototype.setgLevel=function(a){this.glevel=a;this.charset=this.charsets[a]};d.prototype.setgCharset=function(a,c){this.charsets[a]=c;this.glevel===a&&(this.charset=c)};d.prototype._keyPress=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;
this.cancel(a);if(a.charCode)var c=a.charCode;else if(null==a.which)c=a.keyCode;else if(0!==a.which&&0!==a.charCode)c=a.which;else return!1;if(!c||(a.altKey||a.ctrlKey||a.metaKey)&&!this._isThirdLevelShift(this.browser,a))return!1;c=String.fromCharCode(c);this.emit("keypress",c,a);this.emit("key",c,a);this.showCursor();this.handler(c);return!0};d.prototype.send=function(a){var c=this;this.sendDataQueue||setTimeout(function(){c.handler(c.sendDataQueue);c.sendDataQueue=""},1);this.sendDataQueue+=a};
d.prototype.bell=function(){var a=this;this.emit("bell");this.soundBell()&&this.bellAudioElement.play();this.visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this.visualBellTimer),this.visualBellTimer=window.setTimeout(function(){a.element.classList.remove("visual-bell-active")},200))};d.prototype.log=function(a,c){this.options.debug&&this.context.console&&this.context.console.log&&this.context.console.log(a,c)};d.prototype.error=function(a,c){this.options.debug&&this.context.console&&
this.context.console.error&&this.context.console.error(a,c)};d.prototype.resize=function(a,c){isNaN(a)||isNaN(c)||(a===this.cols&&c===this.rows?this.charMeasure.width&&this.charMeasure.height||this.charMeasure.measure(this.options):(1>a&&(a=1),1>c&&(c=1),this.buffers.resize(a,c),this.cols=a,this.rows=c,this.buffers.setupTabStops(this.cols),this.charMeasure.measure(this.options),this.refresh(0,this.rows-1),this.emit("resize",{cols:a,rows:c})))};d.prototype.updateRange=function(a){a<this.refreshStart&&
(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};d.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};d.prototype.eraseRight=function(a,c){var e=this.buffer.lines.get(this.buffer.ybase+c);if(e){for(var d=[this.eraseAttr()," ",1,32];a<this.cols;a++)e[a]=d;this.updateRange(c)}};d.prototype.eraseLeft=function(a,c){var e=this.buffer.lines.get(this.buffer.ybase+c);if(e){var d=[this.eraseAttr()," ",1,32];for(a++;a--;)e[a]=d;this.updateRange(c)}};d.prototype.clear=
function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y));this.buffer.lines.length=1;this.buffer.ydisp=0;this.buffer.ybase=0;this.buffer.y=0;for(var a=1;a<this.rows;a++)this.buffer.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.buffer.ydisp)}};d.prototype.eraseLine=function(a){this.eraseRight(0,a)};d.prototype.blankLine=function(a,c,e){a=[a?this.eraseAttr():this.defAttr," ",1,32];var d=
[];c&&(d.isWrapped=c);e=e||this.cols;for(c=0;c<e;c++)d[c]=a;return d};d.prototype.ch=function(a){return a?[this.eraseAttr()," ",1,32]:[this.defAttr," ",1,32]};d.prototype.is=function(a){return 0===(this.options.termName+"").indexOf(a)};d.prototype.handler=function(a){this.options.disableStdin||(this.selectionManager&&this.selectionManager.hasSelection&&this.selectionManager.clearSelection(),this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),this.emit("data",a))};d.prototype.handleTitle=
function(a){this.emit("title",a)};d.prototype.index=function(){this.buffer.y++;this.buffer.y>this.buffer.scrollBottom&&(this.buffer.y--,this.scroll());this.buffer.x>=this.cols&&this.buffer.x--};d.prototype.reverseIndex=function(){this.buffer.y===this.buffer.scrollTop?(this.buffer.lines.shiftElements(this.buffer.y+this.buffer.ybase,this.buffer.scrollBottom-this.buffer.scrollTop,1),this.buffer.lines.set(this.buffer.y+this.buffer.ybase,this.blankLine(!0)),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom)):
this.buffer.y--};d.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this.customKeyEventHandler,c=this.inputHandler;this.setup();this.customKeyEventHandler=a;this.inputHandler=c;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};d.prototype.tabSet=function(){this.buffer.tabs[this.buffer.x]=!0};d.prototype.cancel=function(a,c){if(this.options.cancelEvents||c)return a.preventDefault(),a.stopPropagation(),!1};d.prototype.matchColor=function(a,c,e){var d=
a<<16|c<<8|e;if(null!=E[d])a=E[d];else{for(var f=Infinity,k=-1,l=0,h,m,g;l<D.length;l++){h=D[l];m=h[0];g=h[1];h=h[2];m=Math.pow(30*(a-m),2)+Math.pow(59*(c-g),2)+Math.pow(11*(e-h),2);if(0===m){k=l;break}m<f&&(f=m,k=l)}a=E[d]=k}return a};d.prototype.visualBell=function(){return!1};d.prototype.soundBell=function(){return"sound"===this.options.bellStyle};d.prototype.syncBellSound=function(){this.element&&(this.soundBell()&&this.bellAudioElement?this.bellAudioElement.setAttribute("src",this.options.bellSound):
this.soundBell()?(this.bellAudioElement=u.createElement("audio"),this.bellAudioElement.setAttribute("preload","auto"),this.bellAudioElement.setAttribute("src",this.options.bellSound),this.helperContainer.appendChild(this.bellAudioElement)):this.bellAudioElement&&this.helperContainer.removeChild(this.bellAudioElement))};return d}(g.EventEmitter);d.Terminal=a;var w=function(a,c,e,d){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(c,e,d||!1)})},D=function(){for(var a=x.DEFAULT_ANSI_COLORS.map(function(a){a=
a.substring(1);return[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)]}),c=[0,95,135,175,215,255],e=0;216>e;e++)a.push([c[e/36%6|0],c[e/6%6|0],c[e%6]]);for(e=0;24>e;e++)c=8+10*e,a.push([c,c,c]);return a}(),E={}},{"./Buffer":1,"./BufferSet":2,"./CompositionHelper":5,"./EscapeSequences":6,"./EventEmitter":7,"./InputHandler":8,"./Linkifier":9,"./Parser":10,"./SelectionManager":11,"./Viewport":15,"./handlers/Clipboard":17,"./input/MouseZoneManager":18,"./renderer/ColorManager":21,
"./renderer/Renderer":25,"./shared/utils/Browser":30,"./utils/CharMeasure":31,"./utils/MouseHelper":33,"./utils/Sounds":35}],14:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=d.LinkHoverEventTypes||(d.LinkHoverEventTypes={});a.HOVER="linkhover";a.TOOLTIP="linktooltip";a.LEAVE="linkleave"},{}],15:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a,d,l,e){var f=this;this.terminal=a;this.viewportElement=d;this.scrollArea=l;this.charMeasure=
e;this.lastRecordedBufferHeight=this.lastRecordedViewportHeight=this.lastRecordedBufferLength=this.currentRowHeight=this.scrollBarWidth=0;this.scrollBarWidth=this.viewportElement.offsetWidth-this.scrollArea.offsetWidth||15;this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));setTimeout(function(){return f.syncScrollArea()},0)}a.prototype.onThemeChanged=function(a){this.viewportElement.style.backgroundColor=a.background};a.prototype.refresh=function(){if(0<this.charMeasure.height){this.currentRowHeight=
this.terminal.renderer.dimensions.scaledCellHeight/window.devicePixelRatio;this.lastRecordedViewportHeight=this.viewportElement.offsetHeight;var a=Math.round(this.currentRowHeight*this.lastRecordedBufferLength)+(this.lastRecordedViewportHeight-this.terminal.renderer.dimensions.canvasHeight);this.lastRecordedBufferHeight!==a&&(this.lastRecordedBufferHeight=a,this.scrollArea.style.height=this.lastRecordedBufferHeight+"px")}};a.prototype.syncScrollArea=function(){this.lastRecordedBufferLength!==this.terminal.buffer.lines.length?
(this.lastRecordedBufferLength=this.terminal.buffer.lines.length,this.refresh()):this.lastRecordedViewportHeight!==this.terminal.renderer.dimensions.canvasHeight?this.refresh():this.terminal.renderer.dimensions.scaledCellHeight/window.devicePixelRatio!==this.currentRowHeight&&this.refresh();var a=this.terminal.buffer.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==a&&(this.viewportElement.scrollTop=a)};a.prototype.onScroll=function(a){this.viewportElement.offsetParent&&this.terminal.scrollLines(Math.round(this.viewportElement.scrollTop/
this.currentRowHeight)-this.terminal.buffer.ydisp,!0)};a.prototype.onWheel=function(a){if(0!==a.deltaY){var d=1;a.deltaMode===WheelEvent.DOM_DELTA_LINE?d=this.currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=a.deltaY*d;a.preventDefault()}};a.prototype.onTouchStart=function(a){this.lastTouchY=a.touches[0].pageY};a.prototype.onTouchMove=function(a){var d=this.lastTouchY-a.touches[0].pageY;this.lastTouchY=a.touches[0].pageY;
0!==d&&(this.viewportElement.scrollTop+=d,a.preventDefault())};return a}();d.Viewport=a},{}],16:[function(a,g,d){function h(a,e){a=Math.floor(a);for(var d="",c=0;c<a;c++)d+=e;return d}Object.defineProperty(d,"__esModule",{value:!0});var m=a("../EscapeSequences"),f;(function(a){a.Up="A";a.Down="B";a.Right="C";a.Left="D"})(f||(f={}));a=function(){function a(a,d){this._mouseEvent=a;this._terminal=d;this._lines=this._terminal.buffer.lines;this._startCol=this._terminal.buffer.x;this._startRow=this._terminal.buffer.y;
a=this._terminal.mouseHelper.getCoords(this._mouseEvent,this._terminal.element,this._terminal.charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows,!1).map(function(a){return a-1});this._endCol=a[0];this._endRow=a[1]}a.prototype.move=function(){this._mouseEvent.altKey&&this._terminal.send(this._arrowSequences())};a.prototype._arrowSequences=function(){return this._resetStartingRow()+this._moveToRequestedRow()+this._moveToRequestedCol()};a.prototype._resetStartingRow=
function(){this._wrappedRowsForRow(this._endRow);return 0===this._moveToRequestedRow().length?"":h(this._bufferLine(this._startCol,this._startRow,this._startCol,this._startRow-this._wrappedRowsForRow(this._startRow),!1).length,this._sequence(f.Left))};a.prototype._moveToRequestedRow=function(){var a=this._startRow-this._wrappedRowsForRow(this._startRow),d=this._endRow-this._wrappedRowsForRow(this._endRow);a=Math.abs(a-d)-this._wrappedRowsCount();return h(a,this._sequence(this._verticalDirection()))};
a.prototype._moveToRequestedCol=function(){var a=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;var d=this._endRow,c=this._horizontalDirection();return h(this._bufferLine(this._startCol,a,this._endCol,d,c===f.Right).length,this._sequence(c))};a.prototype._wrappedRowsCount=function(){for(var a=0,d=this._startRow-this._wrappedRowsForRow(this._startRow),c=this._endRow-this._wrappedRowsForRow(this._endRow),l=0;l<Math.abs(d-c);l++){var h=this._verticalDirection()===
f.Up?-1:1;this._lines.get(d+h*l).isWrapped&&a++}return a};a.prototype._wrappedRowsForRow=function(a){for(var e=0,c=this._lines.get(a).isWrapped;c&&0<=a&&a<this._terminal.rows;)e++,a--,c=this._lines.get(a).isWrapped;return e};a.prototype._horizontalDirection=function(){var a=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;return this._startCol<this._endCol&&a<=this._endRow||this._startCol>=this._endCol&&a<this._endRow?f.Right:f.Left};a.prototype._verticalDirection=
function(){return this._startRow>this._endRow?f.Up:f.Down};a.prototype._bufferLine=function(a,d,c,f,l){for(var e=a,k="";e!==c||d!==f;)e+=l?1:-1,l&&e>this._terminal.cols-1?(k+=this._terminal.buffer.translateBufferLineToString(d,!1,a,e),a=e=0,d++):!l&&0>e&&(k+=this._terminal.buffer.translateBufferLineToString(d,!1,0,a+1),a=e=this._terminal.cols-1,d--);return k+this._terminal.buffer.translateBufferLineToString(d,!1,a,e)};a.prototype._sequence=function(a){return m.C0.ESC+(this._terminal.applicationCursor?
"O":"[")+a};return a}();d.AltClickHandler=a},{"../EscapeSequences":6}],17:[function(a,g,d){function h(a,e){return e?a.replace(/\r?\n/g,"\r"):a}function m(a,e){return e?"\u001b[200~"+a+"\u001b[201~":a}function f(a,e){e.style.position="fixed";e.style.width="20px";e.style.height="20px";e.style.left=a.clientX-10+"px";e.style.top=a.clientY-10+"px";e.style.zIndex="1000";e.focus();setTimeout(function(){e.style.position=null;e.style.width=null;e.style.height=null;e.style.left=null;e.style.top=null;e.style.zIndex=
null},200)}Object.defineProperty(d,"__esModule",{value:!0});d.prepareTextForTerminal=h;d.bracketTextForPaste=m;d.copyHandler=function(a,e,d){e.browser.isMSIE?window.clipboardData.setData("Text",d.selectionText):a.clipboardData.setData("text/plain",d.selectionText);a.preventDefault()};d.pasteHandler=function(a,e){a.stopPropagation();var d=function(c){c=h(c,e.browser.isMSWindows);c=m(c,e.bracketedPasteMode);e.handler(c);e.textarea.value="";e.emit("paste",c);e.cancel(a)};if(e.browser.isMSIE){if(window.clipboardData){var c=
window.clipboardData.getData("Text");d(c)}}else a.clipboardData&&(c=a.clipboardData.getData("text/plain"),d(c))};d.moveTextAreaUnderMouseCursor=f;d.rightClickHandler=function(a,e,d,c){f(a,e);c&&!d.isClickInSelection(a)&&d.selectWordAtCursor(a);e.value=d.selectionText;e.select()}},{}],18:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a){var d=this;this._terminal=a;this._zones=[];this._areZonesActive=!1;this._currentZone=this._tooltipTimeout=null;this._lastHoverCoords=
[null,null];this._terminal.element.addEventListener("mousedown",function(a){return d._onMouseDown(a)});this._mouseMoveListener=function(a){return d._onMouseMove(a)};this._clickListener=function(a){return d._onClick(a)}}a.prototype.add=function(a){this._zones.push(a);1===this._zones.length&&this._activate()};a.prototype.clearAll=function(a,d){if(0!==this._zones.length){d||(a=0,d=this._terminal.rows-1);for(var f=0;f<this._zones.length;f++){var e=this._zones[f];e.y>a&&e.y<=d+1&&(this._currentZone&&this._currentZone===
e&&(this._currentZone.leaveCallback(),this._currentZone=null),this._zones.splice(f--,1))}0===this._zones.length&&this._deactivate()}};a.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._terminal.element.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.addEventListener("click",this._clickListener))};a.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._terminal.element.removeEventListener("mousemove",this._mouseMoveListener),
this._terminal.element.removeEventListener("click",this._clickListener))};a.prototype._onMouseMove=function(a){if(this._lastHoverCoords[0]!==a.pageX||this._lastHoverCoords[1]!==a.pageY)this._onHover(a),this._lastHoverCoords=[a.pageX,a.pageY]};a.prototype._onHover=function(a){var d=this,l=this._findZoneEventAt(a);l!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),l&&(this._currentZone=l,l.hoverCallback&&
l.hoverCallback(a),this._tooltipTimeout=setTimeout(function(){return d._onTooltip(a)},500)))};a.prototype._onTooltip=function(a){this._tooltipTimeout=null;var d=this._findZoneEventAt(a);d&&d.tooltipCallback&&d.tooltipCallback(a)};a.prototype._onMouseDown=function(a){if(this._areZonesActive){var d=this._findZoneEventAt(a);d&&d.willLinkActivate(a)&&(a.preventDefault(),a.stopImmediatePropagation())}};a.prototype._onClick=function(a){var d=this._findZoneEventAt(a);d&&(d.clickCallback(a),a.preventDefault(),
a.stopImmediatePropagation())};a.prototype._findZoneEventAt=function(a){a=this._terminal.mouseHelper.getCoords(a,this._terminal.screenElement,this._terminal.charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows);if(!a)return null;for(var d=0;d<this._zones.length;d++){var l=this._zones[d];if(l.y===a[1]&&l.x1<=a[0]&&l.x2>a[0])return l}return null};return a}();d.MouseZoneManager=a;a=function(){return function(a,d,f,l,e,k,c,g){this.x1=a;this.x2=d;this.y=f;this.clickCallback=
l;this.hoverCallback=e;this.tooltipCallback=k;this.leaveCallback=c;this.willLinkActivate=g}}();d.MouseZone=a},{}],19:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});var h=a("./CharAtlas"),m=a("../Buffer");d.INVERTED_DEFAULT_COLOR=-1;a=function(){function a(a,e,d,c,f){this._container=a;this._alpha=c;this._colors=f;this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=this._scaledCharHeight=this._scaledCharWidth=0;this._canvas=document.createElement("canvas");
this._canvas.classList.add("xterm-"+e+"-layer");this._canvas.style.zIndex=d.toString();this._initCanvas();this._container.appendChild(this._canvas)}a.prototype._initCanvas=function(){this._ctx=this._canvas.getContext("2d",{alpha:this._alpha});this._alpha||this.clearAll()};a.prototype.onOptionsChanged=function(a){};a.prototype.onBlur=function(a){};a.prototype.onFocus=function(a){};a.prototype.onCursorMove=function(a){};a.prototype.onGridChanged=function(a,e,d){};a.prototype.onSelectionChanged=function(a,
e,d){};a.prototype.onThemeChanged=function(a,e){this._refreshCharAtlas(a,e)};a.prototype.setTransparency=function(a,e){if(e!==this._alpha){var d=this._canvas;this._alpha=e;this._canvas=this._canvas.cloneNode();this._initCanvas();this._container.replaceChild(this._canvas,d);this._refreshCharAtlas(a,this._colors);this.onGridChanged(a,0,a.rows-1)}};a.prototype._refreshCharAtlas=function(a,e){var d=this;0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=null,a=h.acquireCharAtlas(a,
e,this._scaledCharWidth,this._scaledCharHeight),a instanceof HTMLCanvasElement?this._charAtlas=a:a.then(function(a){return d._charAtlas=a}))};a.prototype.resize=function(a,e,d){this._scaledCellWidth=e.scaledCellWidth;this._scaledCellHeight=e.scaledCellHeight;this._scaledCharWidth=e.scaledCharWidth;this._scaledCharHeight=e.scaledCharHeight;this._scaledCharLeft=e.scaledCharLeft;this._scaledCharTop=e.scaledCharTop;this._canvas.width=e.scaledCanvasWidth;this._canvas.height=e.scaledCanvasHeight;this._canvas.style.width=
e.canvasWidth+"px";this._canvas.style.height=e.canvasHeight+"px";this._alpha||this.clearAll();d&&this._refreshCharAtlas(a,this._colors)};a.prototype.fillCells=function(a,e,d,c){this._ctx.fillRect(a*this._scaledCellWidth,e*this._scaledCellHeight,d*this._scaledCellWidth,c*this._scaledCellHeight)};a.prototype.fillBottomLineAtCells=function(a,e,d){void 0===d&&(d=1);this._ctx.fillRect(a*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,d*this._scaledCellWidth,window.devicePixelRatio)};
a.prototype.fillLeftLineAtCell=function(a,e){this._ctx.fillRect(a*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)};a.prototype.strokeRectAtCell=function(a,e,d,c){this._ctx.lineWidth=window.devicePixelRatio;this._ctx.strokeRect(a*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,d*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)};a.prototype.clearAll=function(){this._alpha?
this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))};a.prototype.clearCells=function(a,e,d,c){this._alpha?this._ctx.clearRect(a*this._scaledCellWidth,e*this._scaledCellHeight,d*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background,this._ctx.fillRect(a*this._scaledCellWidth,e*this._scaledCellHeight,d*this._scaledCellWidth,c*this._scaledCellHeight))};
a.prototype.fillCharTrueColor=function(a,e,d,c){this._ctx.font=this._getFont(a,!1);this._ctx.textBaseline="top";this._clipRow(a,c);this._ctx.fillText(e[m.CHAR_DATA_CHAR_INDEX],d*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop)};a.prototype.drawChar=function(a,e,d,c,f,g,m,r,t,y){var k=0;256>m?k=m+2:t&&a.options.enableBold&&(k=1);this._charAtlas&&256>d&&(1<k&&16>m&&(8>m||t)||256<=m)&&256<=r?(e=this._scaledCharWidth+h.CHAR_ATLAS_CELL_SPACING,c=this._scaledCharHeight+
h.CHAR_ATLAS_CELL_SPACING,y&&(this._ctx.globalAlpha=.5),t&&!a.options.enableBold&&1<k&&(k-=8),this._ctx.drawImage(this._charAtlas,d*e,k*c,e,this._scaledCharHeight,f*this._scaledCellWidth+this._scaledCharLeft,g*this._scaledCellHeight+this._scaledCharTop,e,this._scaledCharHeight)):this._drawUncachedChar(a,e,c,m,f,g,t&&a.options.enableBold,y)};a.prototype._drawUncachedChar=function(a,e,f,c,h,g,m,r){this._ctx.save();this._ctx.font=this._getFont(a,m);this._ctx.textBaseline="top";this._ctx.fillStyle=c===
d.INVERTED_DEFAULT_COLOR?this._colors.background:256>c?this._colors.ansi[c]:this._colors.foreground;this._clipRow(a,g);r&&(this._ctx.globalAlpha=.5);this._ctx.fillText(e,h*this._scaledCellWidth+this._scaledCharLeft,g*this._scaledCellHeight+this._scaledCharTop);this._ctx.restore()};a.prototype._clipRow=function(a,e){this._ctx.beginPath();this._ctx.rect(0,e*this._scaledCellHeight,a.cols*this._scaledCellWidth,this._scaledCellHeight);this._ctx.clip()};a.prototype._getFont=function(a,e){return(e?a.options.fontWeightBold:
a.options.fontWeight)+" "+a.options.fontSize*window.devicePixelRatio+"px "+a.options.fontFamily};return a}();d.BaseRenderLayer=a},{"../Buffer":1,"./CharAtlas":20}],20:[function(a,g,d){function h(a,d,c,f){f={foreground:f.foreground,background:f.background,cursor:null,cursorAccent:null,selection:null,ansi:f.ansi.slice(0,16)};return{scaledCharWidth:a,scaledCharHeight:d,fontFamily:c.options.fontFamily,fontSize:c.options.fontSize,fontWeight:c.options.fontWeight,fontWeightBold:c.options.fontWeightBold,
allowTransparency:c.options.allowTransparency,colors:f}}function m(a,d){for(var c=0;c<a.colors.ansi.length;c++)if(a.colors.ansi[c]!==d.colors.ansi[c])return!1;return a.fontFamily===d.fontFamily&&a.fontSize===d.fontSize&&a.fontWeight===d.fontWeight&&a.fontWeightBold===d.fontWeightBold&&a.allowTransparency===d.allowTransparency&&a.scaledCharWidth===d.scaledCharWidth&&a.scaledCharHeight===d.scaledCharHeight&&a.colors.foreground===d.colors.foreground&&a.colors.background===d.colors.background}Object.defineProperty(d,
"__esModule",{value:!0});var f=a("../shared/CharAtlasGenerator");d.CHAR_ATLAS_CELL_SPACING=1;var l=[];d.acquireCharAtlas=function(a,d,c,g){for(var e=h(c,g,a,d),k=0;k<l.length;k++){var n=l[k],t=n.ownedBy.indexOf(a);if(0<=t){if(m(n.config,e))return n.bitmap;1===n.ownedBy.length?l.splice(k,1):n.ownedBy.splice(t,1);break}}for(k=0;k<l.length;k++)if(n=l[k],m(n.config,e))return n.ownedBy.push(a),n.bitmap;a={bitmap:f.generateCharAtlas(window,function(a,c){var e=document.createElement("canvas");e.width=a;
e.height=c;return e},{scaledCharWidth:c,scaledCharHeight:g,fontSize:a.options.fontSize,fontFamily:a.options.fontFamily,fontWeight:a.options.fontWeight,fontWeightBold:a.options.fontWeightBold,background:d.background,foreground:d.foreground,ansiColors:d.ansi,devicePixelRatio:window.devicePixelRatio,allowTransparency:a.options.allowTransparency}),config:e,ownedBy:[a]};l.push(a);return a.bitmap}},{"../shared/CharAtlasGenerator":29}],21:[function(a,g,d){function h(a){a=a.toString(16);return 2>a.length?
"0"+a:a}Object.defineProperty(d,"__esModule",{value:!0});d.DEFAULT_ANSI_COLORS="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");a=function(){function a(){for(var a=d.DEFAULT_ANSI_COLORS.slice(),l=[0,95,135,175,215,255],e=0;216>e;e++){var k=h(l[e/36%6|0]),c=h(l[e/6%6|0]),g=h(l[e%6]);a.push("#"+k+c+g)}for(e=0;24>e;e++)l=h(8+10*e),a.push("#"+l+l+l);this.colors={foreground:"#ffffff",background:"#000000",cursor:"#ffffff",
cursorAccent:"#000000",selection:"rgba(255, 255, 255, 0.3)",ansi:a}}a.prototype.setTheme=function(a){this.colors.foreground=a.foreground||"#ffffff";this.colors.background=a.background||"#000000";this.colors.cursor=a.cursor||"#ffffff";this.colors.cursorAccent=a.cursorAccent||"#000000";this.colors.selection=a.selection||"rgba(255, 255, 255, 0.3)";this.colors.ansi[0]=a.black||d.DEFAULT_ANSI_COLORS[0];this.colors.ansi[1]=a.red||d.DEFAULT_ANSI_COLORS[1];this.colors.ansi[2]=a.green||d.DEFAULT_ANSI_COLORS[2];
this.colors.ansi[3]=a.yellow||d.DEFAULT_ANSI_COLORS[3];this.colors.ansi[4]=a.blue||d.DEFAULT_ANSI_COLORS[4];this.colors.ansi[5]=a.magenta||d.DEFAULT_ANSI_COLORS[5];this.colors.ansi[6]=a.cyan||d.DEFAULT_ANSI_COLORS[6];this.colors.ansi[7]=a.white||d.DEFAULT_ANSI_COLORS[7];this.colors.ansi[8]=a.brightBlack||d.DEFAULT_ANSI_COLORS[8];this.colors.ansi[9]=a.brightRed||d.DEFAULT_ANSI_COLORS[9];this.colors.ansi[10]=a.brightGreen||d.DEFAULT_ANSI_COLORS[10];this.colors.ansi[11]=a.brightYellow||d.DEFAULT_ANSI_COLORS[11];
this.colors.ansi[12]=a.brightBlue||d.DEFAULT_ANSI_COLORS[12];this.colors.ansi[13]=a.brightMagenta||d.DEFAULT_ANSI_COLORS[13];this.colors.ansi[14]=a.brightCyan||d.DEFAULT_ANSI_COLORS[14];this.colors.ansi[15]=a.brightWhite||d.DEFAULT_ANSI_COLORS[15]};return a}();d.ColorManager=a},{}],22:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(e,
d){function c(){this.constructor=e}a(e,d);e.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("../Buffer");a=function(a){function e(e,c,d){e=a.call(this,e,"cursor",c,!0,d)||this;e._state={x:null,y:null,isFocused:null,style:null,width:null};e._cursorRenderers={bar:e._renderBarCursor.bind(e),block:e._renderBlockCursor.bind(e),underline:e._renderUnderlineCursor.bind(e)};return e}h(e,a);e.prototype.resize=function(e,c,d){a.prototype.resize.call(this,
e,c,d);this._state={x:null,y:null,isFocused:null,style:null,width:null}};e.prototype.reset=function(a){this._clearCursor();this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged(a))};e.prototype.onBlur=function(a){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause();a.refresh(a.buffer.y,a.buffer.y)};e.prototype.onFocus=function(a){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume(a):a.refresh(a.buffer.y,
a.buffer.y)};e.prototype.onOptionsChanged=function(a){var c=this;a.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new f(a,function(){c._render(a,!0)})):(this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),a.refresh(a.buffer.y,a.buffer.y))};e.prototype.onCursorMove=function(a){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation(a)};e.prototype.onGridChanged=function(a,c,e){!this._cursorBlinkStateManager||
this._cursorBlinkStateManager.isPaused?this._render(a,!1):this._cursorBlinkStateManager.restartBlinkAnimation(a)};e.prototype._render=function(a,c){if(!a.cursorState||a.cursorHidden)this._clearCursor();else{var e=a.buffer.ybase+a.buffer.y;c=e-a.buffer.ydisp;if(0>c||c>=a.rows)this._clearCursor();else if(e=a.buffer.lines.get(e)[a.buffer.x])if(a.isFocused)if(this._cursorBlinkStateManager&&!this._cursorBlinkStateManager.isCursorVisible)this._clearCursor();else{if(this._state){if(this._state.x===a.buffer.x&&
this._state.y===c&&this._state.isFocused===a.isFocused&&this._state.style===a.options.cursorStyle&&this._state.width===e[m.CHAR_DATA_WIDTH_INDEX])return;this._clearCursor()}this._ctx.save();this._cursorRenderers[a.options.cursorStyle||"block"](a,a.buffer.x,c,e);this._ctx.restore();this._state.x=a.buffer.x;this._state.y=c;this._state.isFocused=!1;this._state.style=a.options.cursorStyle;this._state.width=e[m.CHAR_DATA_WIDTH_INDEX]}else this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor,
this._renderBlurCursor(a,a.buffer.x,c,e),this._ctx.restore(),this._state.x=a.buffer.x,this._state.y=c,this._state.isFocused=!1,this._state.style=a.options.cursorStyle,this._state.width=e[m.CHAR_DATA_WIDTH_INDEX]}};e.prototype._clearCursor=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,style:null,width:null})};e.prototype._renderBarCursor=function(a,c,e,d){this._ctx.save();this._ctx.fillStyle=this._colors.cursor;this.fillLeftLineAtCell(c,
e);this._ctx.restore()};e.prototype._renderBlockCursor=function(a,c,e,d){this._ctx.save();this._ctx.fillStyle=this._colors.cursor;this.fillCells(c,e,d[m.CHAR_DATA_WIDTH_INDEX],1);this._ctx.fillStyle=this._colors.cursorAccent;this.fillCharTrueColor(a,d,c,e);this._ctx.restore()};e.prototype._renderUnderlineCursor=function(a,c,e,d){this._ctx.save();this._ctx.fillStyle=this._colors.cursor;this.fillBottomLineAtCells(c,e);this._ctx.restore()};e.prototype._renderBlurCursor=function(a,c,e,d){this._ctx.save();
this._ctx.strokeStyle=this._colors.cursor;this.strokeRectAtCell(c,e,d[m.CHAR_DATA_WIDTH_INDEX],1);this._ctx.restore()};return e}(a("./BaseRenderLayer").BaseRenderLayer);d.CursorRenderLayer=a;var f=function(){function a(a,d){this.renderCallback=d;this.isCursorVisible=!0;a.isFocused&&this._restartInterval()}Object.defineProperty(a.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._blinkInterval&&
(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};a.prototype.restartBlinkAnimation=function(a){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){e.renderCallback();
e._animationFrame=null})))};a.prototype._restartInterval=function(a){var e=this;void 0===a&&(a=600);this._blinkInterval&&window.clearInterval(this._blinkInterval);this._blinkStartTimeout=setTimeout(function(){if(e._animationTimeRestarted){var a=600-(Date.now()-e._animationTimeRestarted);e._animationTimeRestarted=null;if(0<a){e._restartInterval(a);return}}e.isCursorVisible=!1;e._animationFrame=window.requestAnimationFrame(function(){e.renderCallback();e._animationFrame=null});e._blinkInterval=setInterval(function(){if(e._animationTimeRestarted){var a=
600-(Date.now()-e._animationTimeRestarted);e._animationTimeRestarted=null;e._restartInterval(a)}else e.isCursorVisible=!e.isCursorVisible,e._animationFrame=window.requestAnimationFrame(function(){e.renderCallback();e._animationFrame=null})},600)},a)};a.prototype.pause=function(){this.isCursorVisible=!0;this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&
(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};a.prototype.resume=function(a){this._animationTimeRestarted=null;this._restartInterval();this.restartBlinkAnimation(a)};return a}()},{"../Buffer":1,"./BaseRenderLayer":19}],23:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(){this.cache=[]}a.prototype.resize=function(a,d){for(var f=0;f<a;f++){this.cache.length<=f&&this.cache.push([]);for(var e=this.cache[f].length;e<d;e++)this.cache[f].push(null);
this.cache[f].length=d}this.cache.length=a};a.prototype.clear=function(){for(var a=0;a<this.cache.length;a++)for(var d=0;d<this.cache[a].length;d++)this.cache[a][d]=null};return a}();d.GridCache=a},{}],24:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d])};return function(d,e){function f(){this.constructor=d}a(d,e);d.prototype=null===e?Object.create(e):
(f.prototype=e.prototype,new f)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("../Types");a=function(a){function d(e,d,c,f){var h=a.call(this,e,"link",d,!0,c)||this;h._state=null;f.linkifier.on(m.LinkHoverEventTypes.HOVER,function(a){return h._onLinkHover(a)});f.linkifier.on(m.LinkHoverEventTypes.LEAVE,function(a){return h._onLinkLeave(a)});return h}h(d,a);d.prototype.resize=function(e,d,c){a.prototype.resize.call(this,e,d,c);this._state=null};d.prototype.reset=function(a){this._clearCurrentLink()};
d.prototype._clearCurrentLink=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.length,1),this._state=null)};d.prototype._onLinkHover=function(a){this._ctx.fillStyle=this._colors.foreground;this.fillBottomLineAtCells(a.x,a.y,a.length);this._state=a};d.prototype._onLinkLeave=function(a){this._clearCurrentLink()};return d}(a("./BaseRenderLayer").BaseRenderLayer);d.LinkRenderLayer=a},{"../Types":14,"./BaseRenderLayer":19}],25:[function(a,g,d){var h=this&&this.__extends||
function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(c,e){function d(){this.constructor=c}a(c,e);c.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("./TextRenderLayer"),f=a("./SelectionRenderLayer"),l=a("./CursorRenderLayer"),e=a("./ColorManager"),k=a("./LinkRenderLayer");g=a("../EventEmitter");
var c=a("../utils/ScreenDprMonitor");a=function(a){function d(d,h){var g=a.call(this)||this;g._terminal=d;g._refreshRowsQueue=[];g._refreshAnimationFrame=null;g._isPaused=!1;g._needsFullRefresh=!1;g.colorManager=new e.ColorManager;h&&g.colorManager.setTheme(h);g._renderLayers=[new m.TextRenderLayer(g._terminal.screenElement,0,g.colorManager.colors,g._terminal.options.allowTransparency),new f.SelectionRenderLayer(g._terminal.screenElement,1,g.colorManager.colors),new k.LinkRenderLayer(g._terminal.screenElement,
2,g.colorManager.colors,g._terminal),new l.CursorRenderLayer(g._terminal.screenElement,3,g.colorManager.colors)];g.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null};g._devicePixelRatio=window.devicePixelRatio;g._updateDimensions();g.onOptionsChanged();g._screenDprMonitor=new c.ScreenDprMonitor;
g._screenDprMonitor.setListener(function(){return g.onWindowResize(window.devicePixelRatio)});"IntersectionObserver"in window&&(new IntersectionObserver(function(a){return g.onIntersectionChange(a[0])},{threshold:0})).observe(g._terminal.element);return g}h(d,a);d.prototype.onIntersectionChange=function(a){this._isPaused=0===a.intersectionRatio;!this._isPaused&&this._needsFullRefresh&&this._terminal.refresh(0,this._terminal.rows-1)};d.prototype.onWindowResize=function(a){this._devicePixelRatio!==
a&&(this._devicePixelRatio=a,this.onResize(this._terminal.cols,this._terminal.rows,!0))};d.prototype.setTheme=function(a){var c=this;this.colorManager.setTheme(a);this._renderLayers.forEach(function(a){a.onThemeChanged(c._terminal,c.colorManager.colors);a.reset(c._terminal)});this._isPaused?this._needsFullRefresh=!0:this._terminal.refresh(0,this._terminal.rows-1);return this.colorManager.colors};d.prototype.onResize=function(a,c,e){var d=this;this._updateDimensions();this._renderLayers.forEach(function(a){return a.resize(d._terminal,
d.dimensions,e)});this._isPaused?this._needsFullRefresh=!0:this._terminal.refresh(0,this._terminal.rows-1);this._terminal.screenElement.style.width=this.dimensions.canvasWidth+this._terminal.viewport.scrollBarWidth+"px";this._terminal.screenElement.style.height=window.innerHeight+"px";this.emit("resize",{width:this.dimensions.canvasWidth,height:this.dimensions.canvasHeight})};d.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows,!0)};d.prototype.onBlur=function(){var a=
this;this._runOperation(function(c){return c.onBlur(a._terminal)})};d.prototype.onFocus=function(){var a=this;this._runOperation(function(c){return c.onFocus(a._terminal)})};d.prototype.onSelectionChanged=function(a,c){var e=this;this._runOperation(function(d){return d.onSelectionChanged(e._terminal,a,c)})};d.prototype.onCursorMove=function(){var a=this;this._runOperation(function(c){return c.onCursorMove(a._terminal)})};d.prototype.onOptionsChanged=function(){var a=this;this._runOperation(function(c){return c.onOptionsChanged(a._terminal)})};
d.prototype.clear=function(){var a=this;this._runOperation(function(c){return c.reset(a._terminal)})};d.prototype._runOperation=function(a){this._isPaused?this._needsFullRefresh=!0:this._renderLayers.forEach(function(c){return a(c)})};d.prototype.queueRefresh=function(a,c){this._isPaused?this._needsFullRefresh=!0:(this._refreshRowsQueue.push({start:a,end:c}),this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this))))};d.prototype._refreshLoop=
function(){var a=this;if(4<this._refreshRowsQueue.length){var c=0;var e=this._terminal.rows-1}else{c=this._refreshRowsQueue[0].start;e=this._refreshRowsQueue[0].end;for(var d=1;d<this._refreshRowsQueue.length;d++)this._refreshRowsQueue[d].start<c&&(c=this._refreshRowsQueue[d].start),this._refreshRowsQueue[d].end>e&&(e=this._refreshRowsQueue[d].end)}this._refreshRowsQueue=[];this._refreshAnimationFrame=null;c=Math.max(c,0);e=Math.min(e,this._terminal.rows-1);this._renderLayers.forEach(function(d){return d.onGridChanged(a._terminal,
c,e)});this._terminal.emit("refresh",{start:c,end:e})};d.prototype._updateDimensions=function(){this._terminal.charMeasure.width&&this._terminal.charMeasure.height&&(this.dimensions.scaledCharWidth=Math.floor(this._terminal.charMeasure.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=
1===this._terminal.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=
Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)};return d}(g.EventEmitter);d.Renderer=a},{"../EventEmitter":7,"../utils/ScreenDprMonitor":34,"./ColorManager":21,"./CursorRenderLayer":22,"./LinkRenderLayer":24,"./SelectionRenderLayer":26,
"./TextRenderLayer":27}],26:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])};return function(d,h){function e(){this.constructor=d}a(d,h);d.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}}();Object.defineProperty(d,"__esModule",{value:!0});a=function(a){function d(d,e,f){d=a.call(this,d,"selection",e,!0,f)||this;d._state=
{start:null,end:null};return d}h(d,a);d.prototype.resize=function(d,e,f){a.prototype.resize.call(this,d,e,f);this._state={start:null,end:null}};d.prototype.reset=function(a){this._state.start&&this._state.end&&(this._state={start:null,end:null},this.clearAll())};d.prototype.onSelectionChanged=function(a,e,d){if(this._state.start!==e&&this._state.end!==d&&(this.clearAll(),e&&d)){var c=e[1]-a.buffer.ydisp,f=d[1]-a.buffer.ydisp,h=Math.max(c,0),g=Math.min(f,a.rows-1);if(!(h>=a.rows||0>g)){c=c===h?e[0]:
0;var k=h===g?d[0]:a.cols;this._ctx.fillStyle=this._colors.selection;this.fillCells(c,h,k-c,1);this.fillCells(0,h+1,a.cols,Math.max(g-h-1,0));h!==g&&this.fillCells(0,g,f===g?d[0]:a.cols,1);this._state.start=[e[0],e[1]];this._state.end=[d[0],d[1]]}}};return d}(a("./BaseRenderLayer").BaseRenderLayer);d.SelectionRenderLayer=a},{"./BaseRenderLayer":19}],27:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||
function(a,e){for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c])};return function(c,e){function d(){this.constructor=c}a(c,e);c.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(d,"__esModule",{value:!0});var m=a("../Buffer"),f=a("./Types"),l=a("./GridCache"),e=a("./BaseRenderLayer");a=function(a){function c(c,e,d,f){c=a.call(this,c,"text",e,f,d)||this;c._characterOverlapCache={};c._state=new l.GridCache;return c}h(c,a);c.prototype.resize=function(c,e,d){a.prototype.resize.call(this,
c,e,d);d=this._getFont(c,!1);if(this._characterWidth!==e.scaledCharWidth||this._characterFont!==d)this._characterWidth=e.scaledCharWidth,this._characterFont=d,this._characterOverlapCache={};this._state.clear();this._state.resize(c.cols,c.rows)};c.prototype.reset=function(a){this._state.clear();this.clearAll()};c.prototype.onGridChanged=function(a,c,d){if(0!==this._state.cache.length)for(;c<=d;c++){var h=a.buffer.lines.get(c+a.buffer.ydisp);this.clearCells(0,c,a.cols,1);for(var g=0;g<a.cols;g++){var k=
h[g],l=k[m.CHAR_DATA_CODE_INDEX],n=k[m.CHAR_DATA_CHAR_INDEX],p=k[m.CHAR_DATA_ATTR_INDEX],q=k[m.CHAR_DATA_WIDTH_INDEX];if(0!==q&&!(32===l&&0<g&&this._isOverlapping(h[g-1]))){var B=p>>18,u=p&511,A=256<=u,w=B&f.FLAGS.INVISIBLE,D=B&f.FLAGS.INVERSE;!l||32===l&&A&&!D||w||(0!==q&&this._isOverlapping(k)&&g<h.length-1&&32===h[g+1][m.CHAR_DATA_CODE_INDEX]&&(q=2),k=p>>9&511,D&&(D=u,u=k,k=D,256===k&&(k=e.INVERTED_DEFAULT_COLOR),257===u&&(u=e.INVERTED_DEFAULT_COLOR)),256>u&&(this._ctx.save(),this._ctx.fillStyle=
u===e.INVERTED_DEFAULT_COLOR?this._colors.foreground:this._colors.ansi[u],this.fillCells(g,c,q,1),this._ctx.restore()),this._ctx.save(),B&f.FLAGS.BOLD&&(this._ctx.font=this._getFont(a,!0),8>k&&(k+=8)),B&f.FLAGS.UNDERLINE&&(this._ctx.fillStyle=k===e.INVERTED_DEFAULT_COLOR?this._colors.background:256>k?this._colors.ansi[k]:this._colors.foreground,this.fillBottomLineAtCells(g,c)),this.drawChar(a,n,l,q,g,c,k,u,!!(B&f.FLAGS.BOLD),!!(B&f.FLAGS.DIM)),this._ctx.restore())}}}};c.prototype.onOptionsChanged=
function(a){this.setTransparency(a,a.options.allowTransparency)};c.prototype._isOverlapping=function(a){if(1!==a[m.CHAR_DATA_WIDTH_INDEX]||256>a[m.CHAR_DATA_CODE_INDEX])return!1;a=a[m.CHAR_DATA_CHAR_INDEX];if(this._characterOverlapCache.hasOwnProperty(a))return this._characterOverlapCache[a];this._ctx.save();this._ctx.font=this._characterFont;var c=Math.floor(this._ctx.measureText(a).width)>this._characterWidth;this._ctx.restore();return this._characterOverlapCache[a]=c};c.prototype._clearChar=function(a,
c){var e=1,d=this._state.cache[a][c];d&&2===d[m.CHAR_DATA_WIDTH_INDEX]&&(e=2);this.clearCells(a,c,e,1)};return c}(e.BaseRenderLayer);d.TextRenderLayer=a},{"../Buffer":1,"./BaseRenderLayer":19,"./GridCache":23,"./Types":28}],28:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=d.FLAGS||(d.FLAGS={});a[a.BOLD=1]="BOLD";a[a.UNDERLINE=2]="UNDERLINE";a[a.BLINK=4]="BLINK";a[a.INVERSE=8]="INVERSE";a[a.INVISIBLE=16]="INVISIBLE";a[a.DIM=32]="DIM"},{}],29:[function(a,g,d){function h(a,e,d,
c){for(var f=0;f<a.data.length;f+=4)a.data[f]===e&&a.data[f+1]===d&&a.data[f+2]===c&&(a.data[f+3]=0)}function m(a,e){return a+" "+e.fontSize*e.devicePixelRatio+"px "+e.fontFamily}Object.defineProperty(d,"__esModule",{value:!0});var f=a("./utils/Browser");d.CHAR_ATLAS_CELL_SPACING=1;d.generateCharAtlas=function(a,e,g){var c=g.scaledCharWidth+d.CHAR_ATLAS_CELL_SPACING,k=g.scaledCharHeight+d.CHAR_ATLAS_CELL_SPACING,l=e(255*c,18*k);e=l.getContext("2d",{alpha:g.allowTransparency});e.fillStyle=g.background;
e.fillRect(0,0,l.width,l.height);e.save();e.fillStyle=g.foreground;e.font=m(g.fontWeight,g);e.textBaseline="top";for(var q=0;256>q;q++)e.save(),e.beginPath(),e.rect(q*c,0,c,k),e.clip(),e.fillText(String.fromCharCode(q),q*c,0),e.restore();e.save();e.font=m(g.fontWeightBold,g);for(q=0;256>q;q++)e.save(),e.beginPath(),e.rect(q*c,k,c,k),e.clip(),e.fillText(String.fromCharCode(q),q*c,k),e.restore();e.restore();e.font=m(g.fontWeight,g);for(var r=0;16>r;r++){8===r&&(e.font=m(g.fontWeightBold,g));var t=(r+
2)*k;for(q=0;256>q;q++)e.save(),e.beginPath(),e.rect(q*c,t,c,k),e.clip(),e.fillStyle=g.ansiColors[r],e.fillText(String.fromCharCode(q),q*c,t),e.restore()}e.restore();if(!("createImageBitmap"in a)||f.isFirefox)return l instanceof HTMLCanvasElement?l:new Promise(function(a){return a(l.transferToImageBitmap())});c=e.getImageData(0,0,l.width,l.height);k=parseInt(g.background.substr(1,2),16);e=parseInt(g.background.substr(3,2),16);g=parseInt(g.background.substr(5,2),16);h(c,k,e,g);return a.createImageBitmap(c)}},
{"./utils/Browser":30}],30:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});g=(a="undefined"===typeof navigator?!0:!1)?"node":navigator.userAgent;a=a?"node":navigator.platform;d.isFirefox=!!~g.indexOf("Firefox");d.isMSIE=!!~g.indexOf("MSIE")||!!~g.indexOf("Trident");g=0<=["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a);d.isMac=g;d.isIpad="iPad"===a;d.isIphone="iPhone"===a;g=0<=["Windows","Win16","Win32","WinCE"].indexOf(a);d.isMSWindows=g;d.isLinux=0<=a.indexOf("Linux")},{}],
31:[function(a,g,d){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])};return function(d,g){function e(){this.constructor=d}a(d,g);d.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)}}();Object.defineProperty(d,"__esModule",{value:!0});a=function(a){function d(d,e){var f=a.call(this)||this;f._document=d;f._parentElement=e;f._measureElement=
f._document.createElement("span");f._measureElement.style.position="absolute";f._measureElement.style.top="0";f._measureElement.style.left="-9999em";f._measureElement.style.lineHeight="normal";f._measureElement.textContent="W";f._measureElement.setAttribute("aria-hidden","true");f._parentElement.appendChild(f._measureElement);return f}h(d,a);Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return this._height},
enumerable:!0,configurable:!0});d.prototype.measure=function(a){this._measureElement.style.fontFamily=a.fontFamily;this._measureElement.style.fontSize=a.fontSize+"px";a=this._measureElement.getBoundingClientRect();0===a.width||0===a.height||this._width===a.width&&this._height===a.height||(this._width=a.width,this._height=Math.ceil(a.height),this.emit("charsizechanged"))};return d}(a("../EventEmitter").EventEmitter);d.CharMeasure=a},{"../EventEmitter":7}],32:[function(a,g,d){var h=this&&this.__extends||
function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])};return function(d,g){function e(){this.constructor=d}a(d,g);d.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)}}();Object.defineProperty(d,"__esModule",{value:!0});a=function(a){function d(d){var e=a.call(this)||this;e._maxLength=d;e._array=Array(e._maxLength);e._startIndex=0;e._length=0;return e}h(d,a);Object.defineProperty(d.prototype,
"maxLength",{get:function(){return this._maxLength},set:function(a){if(this._maxLength!==a){for(var e=Array(a),d=0;d<Math.min(a,this.length);d++)e[d]=this._array[this._getCyclicIndex(d)];this._array=e;this._maxLength=a;this._startIndex=0}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)for(var e=this._length;e<a;e++)this._array[e]=void 0;this._length=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"forEach",{get:function(){var a=this;return function(e){for(var d=a.length,c=0;c<d;c++)e(a.get(c),c)}},enumerable:!0,configurable:!0});d.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]};d.prototype.set=function(a,e){this._array[this._getCyclicIndex(a)]=e};d.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a;this._length===this._maxLength?(this._startIndex++,this._startIndex===this._maxLength&&(this._startIndex=0),this.emit("trim",1)):this._length++};
d.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};d.prototype.splice=function(a,e){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];if(e){for(c=a;c<this._length-e;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+e)];this._length-=e}if(d&&d.length){for(c=this._length-1;c>=a;c--)this._array[this._getCyclicIndex(c+d.length)]=this._array[this._getCyclicIndex(c)];for(c=0;c<d.length;c++)this._array[this._getCyclicIndex(a+c)]=d[c];
this._length+d.length>this.maxLength?(d=this._length+d.length-this.maxLength,this._startIndex+=d,this._length=this.maxLength,this.emit("trim",d)):this._length+=d.length}};d.prototype.trimStart=function(a){a>this._length&&(a=this._length);this._startIndex+=a;this._length-=a;this.emit("trim",a)};d.prototype.shiftElements=function(a,e,d){if(!(0>=e)){if(0>a||a>=this._length)throw Error("start argument out of range");if(0>a+d)throw Error("Cannot shift elements in list beyond index 0");if(0<d){for(var c=
e-1;0<=c;c--)this.set(a+c+d,this.get(a+c));a=a+e+d-this._length;if(0<a)for(this._length+=a;this._length>this.maxLength;)this._length--,this._startIndex++,this.emit("trim",1)}else for(c=0;c<e;c++)this.set(a+c+d,this.get(a+c))}};d.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this.maxLength};return d}(a("../EventEmitter").EventEmitter);d.CircularList=a},{"../EventEmitter":7}],33:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a){this._renderer=
a}a.getCoordsRelativeToElement=function(a,d){if(null==a.pageX)return null;var f=d,e=a.pageX;for(a=a.pageY;d;)e-=d.offsetLeft,a-=d.offsetTop,d=d.offsetParent;for(d=f;d&&d!==d.ownerDocument.body;)e+=d.scrollLeft,a+=d.scrollTop,d=d.parentElement;return[e,a]};a.prototype.getCoords=function(d,f,g,e,h,c,n){if(!g.width||!g.height)return null;d=a.getCoordsRelativeToElement(d,f);if(!d)return null;d[0]=Math.ceil((d[0]+(n?this._renderer.dimensions.actualCellWidth/2:0))/this._renderer.dimensions.actualCellWidth);
d[1]=Math.ceil(d[1]/this._renderer.dimensions.actualCellHeight);d[0]=Math.min(Math.max(d[0],1),h+(n?1:0));d[1]=Math.min(Math.max(d[1],1),c);return d};a.prototype.getRawByteCoords=function(a,d,g,e,h,c){a=this.getCoords(a,d,g,e,h,c);return{x:a[0]+32,y:a[1]+32}};return a}();d.MouseHelper=a},{}],34:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(){}a.prototype.setListener=function(a){var d=this;this._listener&&this.clearListener();this._listener=a;this._outerListener=
function(){d._listener(window.devicePixelRatio,d._currentDevicePixelRatio);d._updateDpr()};this._updateDpr()};a.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._resolutionMediaMatchList.removeListener(this._outerListener);this._currentDevicePixelRatio=window.devicePixelRatio;this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)");this._resolutionMediaMatchList.addListener(this._outerListener)};a.prototype.clearListener=function(){this._listener&&
(this._resolutionMediaMatchList.removeListener(this._outerListener),this._outerListener=this._listener=null)};return a}();d.ScreenDprMonitor=a},{}],35:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});d.BELL_SOUND="data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg=="},
{}],36:[function(a,g,d){Object.defineProperty(d,"__esModule",{value:!0});a=a("./Terminal");g.exports=a.Terminal},{"./Terminal":13}]},{},[36])(36)});
(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).fit=b()})(function(){return function h(a,g,d){function m(e,k){if(!g[e]){if(!a[e]){var c="function"==typeof require&&require;if(!k&&c)return c(e,!0);if(f)return f(e,!0);k=Error("Cannot find module '"+e+"'");throw k.code="MODULE_NOT_FOUND",k;}k=g[e]={exports:{}};
a[e][0].call(k.exports,function(c){var d=a[e][1][c];return m(d?d:c)},k,k.exports,h,a,g,d)}return g[e].exports}for(var f="function"==typeof require&&require,l=0;l<d.length;l++)m(d[l]);return m}({1:[function(a,g,d){function h(a){if(!a.element.parentElement)return null;var d=window.getComputedStyle(a.element.parentElement),e=parseInt(d.getPropertyValue("height"));d=Math.max(0,parseInt(d.getPropertyValue("width")));var f=window.getComputedStyle(a.element),c=parseInt(f.getPropertyValue("padding-top")),
g=parseInt(f.getPropertyValue("padding-bottom")),h=parseInt(f.getPropertyValue("padding-right"));f=parseInt(f.getPropertyValue("padding-left"));return{cols:Math.floor((d-(h+f)-a.viewport.scrollBarWidth)/a.renderer.dimensions.actualCellWidth),rows:Math.floor((e-(c+g))/a.renderer.dimensions.actualCellHeight)}}function m(a){a.screenElement.style.height=window.innerHeight;var d=h(a);d&&(a.resize(d.cols,d.rows),document.getElementById("termCols").value=d.cols,document.getElementById("termRows").value=
d.rows,transport.auth.resize_pty(termCols,termRows))}Object.defineProperty(d,"__esModule",{value:!0});d.proposeGeometry=h;d.fit=m;d.apply=function(a){a.prototype.proposeGeometry=function(){return h(this)};a.prototype.fit=function(){m(this)}}},{}]},{},[1])(1)});var ws,transport,term=null,isFirefox=-1<navigator.userAgent.toLowerCase().indexOf("firefox");window.msCrypto&&(window.crypto={},window.crypto.getRandomValues=function(b){return window.msCrypto.getRandomValues(b)},Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}));var resizeInterval;
window.onload=function(){document.body.innerHTML+='<div id="settingsNav" class="sidenav">\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="closebtn" onclick="toggleNav(0)">&times;</a>\n\t\t\t\t\t\t\t\t\t<span class="title large">Terminal Options</span>\n\t\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px">Font Size</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.modFontSize(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentFontSize">16px</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.modFontSize(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:40px">Terminal Size</span>\n\t\t\t\t\t\t\t\t\t<span class="leftarrow">Cols:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termCols" min="5" oninput="transport.settings.modTerm(0, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="rightarrow">Rows:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termRows" min="5" oninput="transport.settings.modTerm(1, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:60px;">Local Echo</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary nomargin">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext" style="visibility:visible;" id="autoEchoState">State: Enabled</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" id="currentLEcho">Auto</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:50px">Colours</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(0)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentColor">Monokai</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">Format: Xresources</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" style="width:220px;">Upload</span>\n\t\t\t\t\t\t\t\t\t\t<input type="file" title=" " id="Xresources" class="upload" onchange="transport.settings.importXresources()" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Keep Alive</span>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">0 to disable</span>\n\t\t\t\t\t\t\t\t\t\t<input type="number" class="large" id="keepAlive" onchange="transport.settings.setKeepAlive(this.value);" placeholder="0">\n\t\t\t\t\t\t\t\t\t\t<span style="font-size:16px;"> seconds</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="pasteDiv">\n\t\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Paste</span>\n\t\t\t\t\t\t\t\t\t\t<textarea id="pasteTextArea" class="pasteTextArea" onchange="term.textarea.onpaste(this.value)"></textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Network Traffic</span>\n\t\t\t\t\t\t\t\t\t<div class="netTraffic">\n\t\t\t\t\t\t\t\t\t\t<span class="leftarrow">rx: <span id="rxTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t\t<span class="rightarrow">tx: <span id="txTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="hostKey" style="display: none;">\n\t\t\t\t\t\t\t\t        <span class="title" style="padding-top:20px;">Host Key</span>\n\t\t\t\t\t\t\t\t        <span id="hostKeyImg" class="hostKeyImg"></span>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span id="gear" class="gear" style="visibility:visible;" onclick="toggleNav(250)">&#9881</span>';isFirefox||
(document.getElementById("pasteDiv").style.display="none");fit.apply(Terminal);startSSHy()};window.onresize=function(){clearTimeout(resizeInterval);resizeInterval=setTimeout(resize,400)};window.onbeforeunload=function(){(ws||transport)&&transport.disconnect()};function resize(){term&&term.fit()}
function toggleNav(b){document.getElementById("settingsNav").style.width=b;if(transport.settings.sidenavElementState=b)transport.settings.setNetTraffic(transport.parceler.recieveData,!0),transport.settings.setNetTraffic(transport.parceler.transmitData,!1);b=document.getElementById("gear").style;b.visibility="hidden"===b.visibility?"visible":"hidden"}
function startSSHy(){document.title="SSHy Client";ws=new WebSocket(wsproxyURL,"base64");ws.onopen=function(b){transport=new SSHyClient.Transport(ws);transport.settings.rsaCheckEnabled=!1};ws.onmessage=function(b){transport.parceler.handle(atob(b.data))};ws.onclose=function(b){term?transport.closing||(term.write("\n\n\rWebsocket connection to "+transport.auth.hostname+" was unexpectedly closed."),transport.settings.keepAliveInterval||term.write("\n\n\rThis was likely caused by he remote SSH server timing out the session due to inactivity.\r\n- Session Keep Alive interval can be set in the settings to prevent this behaviour.")):
(termInit(),term.write("WebSocket connection failed: Error in connection establishment: code "+b.code))};ws.sendB64=function(b){this.send(btoa(b));transport.parceler.transmitData+=b.length;transport.settings.setNetTraffic(transport.parceler.transmitData,!1)}}
function termInit(){term=new Terminal({cols:80,rows:24});term.open(document.getElementById("terminal"),!0);document.getElementById("termCols").value=term.cols;document.getElementById("termRows").value=term.rows;transport.settings.setColorScheme(1)}
function startxtermjs(){termInit();transport.auth.authenticated||term.write("Login as: ");term.textarea.onkeydown=function(b){if(ws&&transport&&!(5<=transport.auth.failedAttempts)&&!transport.auth.awaitingAuthentication){var a=b.char&&1==b.char.length?b.char:b.key;if(!(1<a.length&&(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey)&&"Backspace"!=a)){if(transport.auth.authenticated){if(1==a.length&&(!(b.altKey||b.ctrlKey||b.metaKey)||b.altKey&&b.ctrlKey))var g=a;else if(1==a.length&&b.shiftKey&&b.ctrlKey){if("V"!=
b.key){b.preventDefault();return}}else g=term._evaluateKeyEscapeSequence(b).key;transport.settings.localEcho&&transport.settings.parseKey(b);return null===g?null:transport.expect_key(g)}if(!(b.altKey||b.ctrlKey||b.metaKey||1<a.length&&13!=b.keyCode&&8!=b.keyCode))switch(b.keyCode){case 8:void 0===transport.auth.termPassword?0<transport.auth.termUsername.length&&(term.write("\b"),term.eraseRight(term.x-1,term.y),transport.auth.termUsername=transport.auth.termUsername.slice(0,transport.auth.termUsername.length-
1)):transport.auth.termPassword=transport.auth.termPassword.slice(0,transport.auth.termPassword.length-1);break;case 13:void 0===transport.auth.termPassword?(term.write("\n\r"+transport.auth.termUsername+"@"+transport.auth.hostname+"'s password:"),transport.auth.termPassword=""):(term.write("\n\r"),transport.auth.ssh_connection());break;default:void 0===transport.auth.termPassword?(transport.auth.termUsername+=a,term.write(a)):transport.auth.termPassword+=a}}}};term.textarea.onpaste=function(b){isFirefox?
document.getElementById("pasteTextArea").value="":b=b.clipboardData.getData("text/plain");if(b)if(1E6>b.length)if(5E3<b.length){b=splitSlice(b);for(var a=0;a<b.length-1;a++)transport.expect_key(b[a])}else transport.expect_key(b);else alert("Error: Pasting large strings is not permitted.")}};SSHyClient.auth=function(b){this.parceler=b;this.authenticated=null;this.awaitingAuthentication=!1;this.hostname=wsproxyURL?wsproxyURL.split("/")[2].split(":")[0]:"";this.termUsername="";this.termPassword=void 0;this.failedAttempts=0};
SSHyClient.auth.prototype={request_auth:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_SERVICE_REQUEST));b.add_string("ssh-userauth");this.parceler.send(b)},ssh_connection:function(){if(this.termUsername&&this.termPassword){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_USERAUTH_REQUEST));b.add_string(this.termUsername);b.add_string("ssh-connection");b.add_string("password");b.add_boolean(!1);b.add_string(this.termPassword);this.awaitingAuthentication=
!0;this.parceler.send(b)}else term||startxtermjs()},auth_success:function(b){b&&(document.title=this.termUsername+"@"+this.hostname,this.termUsername="",this.termPassword=void 0,term||startxtermjs(),transport.settings.setKeepAlive(240),document.getElementById("keepAlive").value=240,this.open_channel("session"))},open_channel:function(b,a){a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_OPEN));a.add_string(b);a.add_int(1);a.add_int(SSHyClient.WINDOW_SIZE);a.add_int(SSHyClient.MAX_PACKET_SIZE);
this.parceler.send(a)},get_pty:function(b,a,g){var d=new SSHyClient.Message;d.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));d.add_int(0);d.add_string("pty-req");d.add_boolean(!1);d.add_string(b);d.add_int(a);d.add_int(g);d.add_int(0);d.add_int(0);d.add_string("");this.parceler.send(d);this.invoke_shell()},resize_pty:function(b,a){var g=new SSHyClient.Message;g.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));g.add_int(0);g.add_string("window-change");g.add_boolean(!1);
g.add_int(b);g.add_int(a);g.add_int(0);g.add_int(0);this.parceler.send(g)},invoke_shell:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));b.add_int(0);b.add_string("shell");b.add_boolean(!1);this.parceler.send(b);void 0===this.termPassword?term.write("\n\r"):startxtermjs()},authFailure:function(){term?(term.write("Access Denied\r\n"),5<=++this.failedAttempts?(term.write("Too many failed authentication attempts"),transport.disconnect()):(term.write(this.termUsername+
"@"+this.hostname+"'s password:"),this.termPassword="")):display_error("Invalid Username or Password")}};SSHyClient.crypto={};SSHyClient.crypto.AES=function(b,a,g,d){this.cipher=new sjcl.cipher.aes(sjcl.codec.bytes.toBits(toByteArray(b)),a);this.mode=a;this.mode==SSHyClient.AES_CBC&&(this.iv=toByteArray(g));this.counter=d};
SSHyClient.crypto.AES.prototype={encrypt:function(b){b=this.cipher.encrypt(toByteArray(b),this.iv,this.counter);this.mode==SSHyClient.AES_CBC&&(this.iv=b.slice(-16));return fromByteArray(b)},decrypt:function(b){b=toByteArray(b);if(this.mode==SSHyClient.AES_CBC){var a=this.cipher.decrypt(b,this.iv);this.iv=b.slice(-16)}else a=this.cipher.encrypt(b,this.iv,this.counter);return fromByteArray(a)}};
SSHyClient.crypto.counter=function(b,a){a=void 0===a?1:a;this.blocksize=b/8;this.overflow=0;0===a?this.value=(new array(this.blocksize+1)).join("\u00ff"):(b=deflate_long(a.subtract(BigInteger.ONE),!1),this.value=Array(this.blocksize-b.length+1).join("\x00")+b)};
SSHyClient.crypto.counter.prototype={increment:function(){for(var b=this.blocksize;b--;){var a=String.fromCharCode((this.value.charCodeAt(b)+1)%256);this.value=setCharAt(this.value,b,a);if("\x00"!=a)return this.value}b=deflate_long(this.overflow,!1);return this.value=Array(this.blocksize-b.length+1).join("\x00")+b}};SSHyClient.kex={K:null,H:null,sessionId:null};function verifyKey(b,a){if(!(new SSHyClient.RSAKey(new SSHyClient.Message(b))).verify(SSHyClient.kex.H,new SSHyClient.Message(a)))throw transport.disconnect(),"RSA signature verification failed, disconnecting.";}
SSHyClient.kex.DiffieHellman=function(b,a,g){this.transport=b;this.SHAVersion=g;this.group=a;void 0===this.group?(this.p=this.q=this.g=this.x=this.e=this.f=null,this.minBits=1024,this.maxBits=8192,this.preferredBits=2048):(1===this.group?this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE65381FFFFFFFFFFFFFFFF",
16):14===this.group&&(this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AACAA68FFFFFFFFFFFFFFFF",
16)),this.x=this.e=this.f=new BigInteger("0",10),this.G=new BigInteger("2",10))};
SSHyClient.kex.DiffieHellman.prototype={start:function(){var b=new SSHyClient.Message;void 0===this.group?(b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_REQUEST)),b.add_int(this.minBits),b.add_int(this.preferredBits),b.add_int(this.maxBits)):(this.x=inflate_long(read_rng(128)),this.e=this.G.modPow(this.x,this.P),b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_INIT)),b.add_mpint(this.e));this.transport.send_packet(b)},parse_reply:function(b,a){void 0===this.group&&b==SSHyClient.MSG_KEXDH_GEX_GROUP?
this.parse_gex_group(a):this.handleDHReply(a)},handleDHReply:function(b){b=new SSHyClient.Message(b);var a=b.get_string();if(transport.settings.rsaCheckEnabled){var g=wsproxyURL.split("/")[3],d=ascii2hex(a),h=ascii2hex(SSHyClient.hash.MD5(a)).match(/.{2}/g);randomart(h);var m=localStorage.getItem(g);if(m){if(m!=d)if(confirm("WARNING - POTENTIAL SECURITY BREACH!\r\n\nThe servers host key does not match the one SSHy has cached in local storage. This means that either the server administrator has changed the host key, or you have actually connected to another computer pretending to be the server.\r\nThe new rsa2 key fingerprint is:\r\nssh-rsa 2048 "+
h.join(":")+"\r\nIf you were expecting this change and trust the new key, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this new key, hit `Cancel` to abandon the connection"))localStorage.setItem(g,d);else throw ws.close(),"Error: Locally stored rsa key does not match remote key";}else if(confirm("The server's host key is not cached in local storage. You have no guarentee that the server is the computer you think it is.\n\rThe server's rsa2 key finterprint is:\r\nssh-rsa 2048 "+
h.join(":")+"\r\nIf you trust the host, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this host, hit `Cancel` to abandon the connection"))localStorage.setItem(g,d);else throw ws.close(),"User has declined the rsa-key and closed the connection";}this.f=b.get_mpint();b=b.get_string();g=this.f.modPow(this.x,this.p);d=new SSHyClient.Message;d.add_string(this.transport.local_version);d.add_string(this.transport.remote_version);d.add_string(this.transport.local_kex_message);
d.add_string(this.transport.remote_kex_message);d.add_string(a);void 0===this.group&&(d.add_int(this.minBits),d.add_int(this.preferredBits),d.add_int(this.maxBits),d.add_mpint(this.p),d.add_mpint(this.g));d.add_mpint(this.e);d.add_mpint(this.f);d.add_mpint(g);SSHyClient.kex.K=g;SSHyClient.kex.sessionId=SSHyClient.kex.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(d.toString())).digest():(new SSHyClient.hash.SHA256(d.toString())).digest();transport.settings.rsaCheckEnabled&&verifyKey(a,b);this.transport.send_new_keys()},
generate_x:function(){var b=this.p.subtract(BigInteger.ONE);b=b.divide(new BigInteger("2",10));var a=deflate_long(b,0),g=a[0].charCodeAt(0);a=a.length;for(var d=255;!(g&128);)g<<=1,d>>=1;for(;!(g=read_rng(a),g=String.fromCharCode(g[0].charCodeAt(0)&d)+g.substring(1),g=inflate_long(g,1),0<g.compareTo(BigInteger.ONE)&&0<b.compareTo(g)););this.x=g},parse_gex_group:function(b){b=new SSHyClient.Message(b);this.p=b.get_mpint();this.g=b.get_mpint();this.generate_x();this.e=this.g.modPow(this.x,this.p);b=
new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_INIT));b.add_mpint(this.e);this.transport.send_packet(b)}};SSHyClient.Message=function(b){this.position=0;this.packet=void 0===b?String():String(b)};
SSHyClient.Message.prototype={toString:function(){return this.packet},get_bytes:function(b){var a=this.packet.substring(this.position,this.position+b);this.position+=b;return a.length<b&&1048576>b?a+Array(b-a.length+1).join("\x00"):a},get_int:function(){return struct.unpack("I",this.get_bytes(4))[0]},get_string:function(){return this.get_bytes(this.get_int())},get_mpint:function(){return inflate_long(this.get_string())},add_bytes:function(b){this.packet+=b;return this},add_boolean:function(b){this.add_bytes(!0===
b?"\u0001":"\x00");return this},add_int:function(b){this.packet+=struct.pack("I",b);return this},add_mpint:function(b){this.add_string(deflate_long(b));return this},add_string:function(b){this.add_int(b.length);this.packet+=b;return this}};SSHyClient.parceler=function(b,a){this.socket=b;this.transport=a;this.encrypting=!1;this.hmacSHAVersion=this.inbound_iv=this.inbound_enc_key=this.inbound_mac_key=this.inbound_cipher=this.outbound_enc_iv=this.outbound_enc_key=this.outbound_mac_key=this.outbound_cipher=null;this.outbound_sequence_num=this.inbound_sequence_num=this.macSize=0;this.block_size=8;this.prevHeader=this.inbound_buffer="";this.windowSize=SSHyClient.WINDOW_SIZE;this.recieveData=this.transmitData=0};
SSHyClient.parceler.prototype={send:function(b){packet=this.pack_message(b.toString());this.encrypting&&(packet=this.outbound_cipher.encrypt(packet)+SSHyClient.hash.HMAC(this.outbound_mac_key,struct.pack("I",this.outbound_sequence_num)+packet,this.hmacSHAVersion));this.socket.sendB64(packet);this.outbound_sequence_num++},pack_message:function(b){var a=3+this.block_size-(b.length+8)%this.block_size;b=struct.pack("I",b.length+a+1)+struct.pack("B",a)+b;return b+=this.encrypting?read_rng(a):Array(a+1).join("\x00")},
handle:function(b){this.recieveData+=b.length;this.transport.settings.setNetTraffic(transport.parceler.recieveData,!0);if(this.encrypting)this.inbound_buffer+=b,this.decrypt();else if(this.transport.remote_version)this.inbound_buffer+=b,this.decrypt(b);else this.transport.handler_table[0](this.transport,b)},decrypt:function(){for(var b=" ",a;null!==b;){if(this.prevHeader)a=this.prevHeader,this.prevHeader="";else{a=this.read_ibuffer();if(!a)break;this.encrypting&&(a=this.inbound_cipher.decrypt(a))}var g=
struct.unpack("I",a.substring(0,4))[0],d=a.substring(4);b=this.read_ibuffer(g+this.macSize-d.length);if(!b){this.prevHeader=a;break}a=b.substring(0,g-d.length);this.encrypting&&(a=this.inbound_cipher.decrypt(a));a=d+a;if(this.macSize){d=b.substring(g-d.length);var h=struct.pack("I",this.inbound_sequence_num)+struct.pack("I",g)+a;if(SSHyClient.hash.HMAC(this.inbound_mac_key,h,this.hmacSHAVersion)!=d)throw this.transport.disconnect(),"Inbound MAC verification failed - Mismatched MAC";}this.inbound_sequence_num++;
this.windowSize-=g;0>=this.windowSize&&this.transport.winAdjust();this.transport.handle_dec(a)}},read_ibuffer:function(b){b=void 0===b?this.block_size:b;if(this.inbound_buffer.length<b)return null;var a=this.inbound_buffer.substring(0,b);this.inbound_buffer=this.inbound_buffer.substring(b);return a}};SSHyClient.RSAKey=function(b){b.get_string();this.e=b.get_mpint();this.n=b.get_mpint()};SSHyClient.RSAKey.prototype={pkcs1imify:function(b){return"\x00\u0001"+Array(deflate_long(this.n,0).length-15-b.length-3+1).join("\u00ff")+"\x000!0\t\u0006\u0005+\u000e\u0003\u0002\u001a\u0005\x00\u0004\u0014"+b},verify:function(b,a){if("ssh-rsa"!=a.get_string())return!1;a=inflate_long(a.get_string(),!0);b=inflate_long(this.pkcs1imify((new SSHyClient.hash.SHA1(b)).digest()),!0);return a.modPow(this.e,this.n).equals(b)}};SSHyClient.settings=function(){this.localEcho=0;this.fsHintEnter="\u001b[?1";this.fsHintLeave=SSHyClient.bashFsHintLeave;this.autoEchoState=!1;this.autoEchoTimeout=0;this.blockedKeys=[":"];this.keepAliveInterval=void 0;this.fontSize=16;this.colorTango=!0;this.colorNames=Object.keys(this.colorSchemes);this.colorCounter=0;this.shellString="";this.sidenavElementState=0;this.rxElement=document.getElementById("rxTraffic");this.txElement=document.getElementById("txTraffic");this.autoEchoElement=document.getElementById("autoEchoState");
this.rsaCheckEnabled=!0};
SSHyClient.settings.prototype={colorSchemes:[["Solarized",{background:"#002b36",black:"#002b36",red:"#dc322f",green:"#859900",yellow:"#b58900",blue:"#268bd2",magenta:"#6c71c4",cyan:"#2aa198",white:"#93a1a1",brightBlack:"#657b83",brightRed:"#dc322f",brightGreen:"#859900",brightYellow:"#b58900",brightBlue:"#268bd2",brightMagenta:"#6c71c4",brightCyan:"#2aa198",brightWhite:"#fdf6e3",cursor:"#93a1a1",foreground:"#93a1a1"}],["Material",{background:"#263238",black:"#263238",red:"#ff9800",green:"#8bc34a",
yellow:"#ffc107",blue:"#03a9f4",magenta:"#e91e63",cyan:"#009688",white:"#cfd8dc",brightBlack:"#37474f",brightRed:"#ffa74d",brightGreen:"#9ccc65",brightYellow:"#ffa000",brightBlue:"#81d4fa",brightMagenta:"#ad1457",brightCyan:"#26a69a",brightWhite:"#eceff1",cursor:"#eceff1",foreground:"#eceff1"}],["Monokai",{background:"#272822",black:"#272822",red:"#dc2566",green:"#8fc029",yellow:"#d4c96e",blue:"#55bcce",magenta:"#9358fe",cyan:"#56b7a5",white:"#acada1",brightBlack:"#76715e",brightRed:"#fa2772",brightGreen:"#a7e22e",
brightYellow:"#e7db75",brightBlue:"#66d9ee",brightMagenta:"#ae82ff",brightCyan:"#66efd5",brightWhite:"#cfd0c2",cursor:"#f1ebeb",foreground:"#f1ebeb"}],["Ashes",{background:"#1c2023",black:"#1c2023",red:"#c7ae95",green:"#95c7ae",yellow:"#aec795",blue:"#ae95c7",magenta:"#c795ae",cyan:"#95aec7",white:"#c7ccd1",brightBlack:"#747c84",brightRed:"#c7ae95",brightGreen:"#95c7ae",brightYellow:"#aec795",brightBlue:"#ae95c7",brightMagenta:"#c795ae",brightCyan:"#95aec7",brightWhite:"#f3f4f5",cursor:"#c7ccd1",
foreground:"#c7ccd1"}],["Google",{background:"#ffffff",black:"#ffffff",red:"#cc342b",green:"#198844",yellow:"#fba922",blue:"#3971ed",magenta:"#a36ac7",cyan:"#3971ed",white:"#c5c8c6",brightBlack:"#969896",brightRed:"#cc342b",brightGreen:"#198844",brightYellow:"#fba922",brightBlue:"#3971ed",brightMagenta:"#a36ac7",brightCyan:"#3971ed",brightWhite:"#ffffff",cursor:"#373b41",foreground:"#373b41"}],["Mono Light",{background:"#f7f7f7",black:"#f7f7f7",red:"#7c7c7c",green:"#8e8e8e",yellow:"#a0a0a0",blue:"#686868",
magenta:"#747474",cyan:"#868686",white:"#b9b9b9",brightBlack:"#525252",brightRed:"#7c7c7c",brightGreen:"#8e8e8e",brightYellow:"#a0a0a0",brightBlue:"#686868",brightMagenta:"#747474",brightCyan:"#868686",brightWhite:"#f7f7f7",cursor:"#464646",foreground:"#464646"}],["Mono Dark",{background:"#000000",black:"#000000",red:"#6b6b6b",green:"#c4c4c4",yellow:"#b3b3b3",blue:"#999999",magenta:"#717171",cyan:"#8a8a8a",white:"#b5cabb",brightBlack:"#202020",brightRed:"#464646",brightGreen:"#f8f8f8",brightYellow:"#eeeeee",
brightBlue:"#7c7c7c",brightMagenta:"#adadad",brightCyan:"#c0c0c0",brightWhite:"#99ac9e",cursor:"#ffffff",foreground:"#ffffff"}],["Tango",{}]],testShell:function(b){-1===b.substring(0,2).indexOf("]")&&(0===this.shellString.length||7<this.shellString.length)?this.shellString="":(this.shellString+=b,7>this.shellString.length||(-1!==this.shellString.indexOf("]0;fish")?(this.shellString="",this.fsHintLeave=SSHyClient.fishFsHintLeave):-1!==this.shellString.indexOf("@")&&(this.shellString="",this.fsHintLeave=
SSHyClient.bashFsHintLeave)))},setLocalEcho:function(b){this.localEcho=Math.min(Math.max(this.localEcho+=b,0),2);document.getElementById("currentLEcho").innerHTML=["Force Off","Auto","Force On"][this.localEcho];b=document.getElementById("autoEchoState");1===this.localEcho?(b.style.visibility="visible",b.innerHTML="State: "+(!1===this.autoEchoState?"Disabled":"Enabled")):b.style.visibility="hidden"},parseLocalEcho:function(b){if(1===this.localEcho){var a=performance.now();if(!(100>a-this.autoEchoTimeout))if(b=
b.substring(0,64),!this.autoEchoState)-1!=b.indexOf(this.fsHintLeave)&&-1!=b.indexOf("@")&&(this.autoEchoState=!0,this.autoEchoElement.innerHTML="State: Enabled",this.autoEchoTimeout=a);else if(-1!=b.indexOf(this.fsHintEnter)||-1!=b.toLowerCase().indexOf("password"))this.autoEchoState=!1,this.autoEchoElement.innerHTML="State: Disabled",this.autoEchoTimeout=a}},parseKey:function(b){1===this.localEcho&&!1===this.autoEchoState||1<b.key.length||this.blockedKeys.includes(b.key)||b.altKey||b.ctrlKey||b.metaKey||
(transport.lastKey||term.write(b.key),transport.lastKey+=b.key)},setKeepAlive:function(b){b=void 0===b?0:1E3*Math.floor(b);if(0===b||void 0!==this.keepAliveInterval)if(clearInterval(this.keepAliveInterval),this.keepAliveInterval=void 0,!b)return;this.keepAliveInterval=setInterval(transport.keepAlive,b)},setColorScheme:function(b){var a=document.styleSheets[0],g=this.colorSchemes[b][0];b=this.colorSchemes[b][1];term&&term._setTheme(b);if(!this.colorTango)for(i=0;4>i;i++)a.deleteRule(13);"Tango"===
g?(this.colorTango=!0,document.getElementById("currentColor").innerHTML="Tango"):(a.insertRule("html, body {background-color: "+b.background+" !important;}",13),a.insertRule(".sidenav {background-color: "+modColorPercent(b.background,-.2)+" !important;}",13),a.insertRule(".sidenav .netTraffic .leftarrow {color: "+b.brightGreen+" !important;}",13),a.insertRule(".sidenav .netTraffic .rightarrow {color: "+b.brightYellow+" !important;}",13),this.colorTango=!1,document.getElementById("currentColor").innerHTML=
void 0===g?"Custom":g)},importXresources:function(){var b=new FileReader,a=document.getElementById("Xresources").files[0];b.readAsText(a);b.onload=function(){var g=b.result.split("\n");g=g.sort((new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"})).compare);colScheme=[];for(var d=0;d<g.length;d++){var h=g[d].match(/#([0-9a-f]{3}){1,2}/ig);if(h&&(colScheme.push(h[0]),19<=colScheme.length))break}if(19!==colScheme.length)return alert("Uploaded file could not be parsed correctly.");colScheme={background:colScheme[0],
black:colScheme[1],red:colScheme[2],green:colScheme[3],yellow:colScheme[4],blue:colScheme[5],magenta:colScheme[6],cyan:colScheme[7],white:colScheme[8],brightBlack:colScheme[9],brightRed:colScheme[10],brightGreen:colScheme[11],brightYellow:colScheme[12],brightBlue:colScheme[13],brightMagenta:colScheme[14],brightCyan:colScheme[15],brightWhite:colScheme[16],cursor:colScheme[17],foreground:colScheme[18]};colName=".Xresources"===a.name?"custom":a.name.split(".")[0];transport.settings.colorSchemes.push([colName,
colScheme]);transport.settings.colorNames=Object.keys(transport.settings.colorSchemes);transport.settings.setColorScheme(transport.settings.colorSchemes.length-1)}},cycleColorSchemes:function(b){this.colorCounter=0===b?--this.colorCounter:++this.colorCounter;if(this.colorCounter>this.colorNames.length-1||0>this.colorCounter)this.colorCounter=1===b?0:this.colorNames.length-1;this.setColorScheme(this.colorCounter)},modFontSize:function(b){this.fontSize+=b;term.setOption("fontSize",this.fontSize);document.getElementById("currentFontSize").innerHTML=
transport.settings.fontSize+"px";term.fit();ransport.auth.resize_pty(term.cols,term.rows)},modTerm:function(b,a){b?term.resize(term.cols,a):term.resize(a,term.rows);transport.auth.resize_pty(term.cols,term.rows)},setNetTraffic:function(b,a){if(this.sidenavElementState){switch(!0){case 1024>b:b+="Bytes";break;case 1024<=b&&1048576>b:b=(b/1024).toFixed(3)+"KB";break;case 1048576<=b&&1073741824>b:b=(b/1048576).toFixed(3)+"MB";break;default:b=(b/1073741824).toFixed(3)+"GB"}element=!0===a?this.rxElement:
this.txElement;element.innerHTML=b}}};SSHyClient.Transport=function(b,a){this.local_version="SSH-2.0-SSHyClient";this.remote_version="";this.remote_kex_message=this.local_kex_message=null;this.preferred_algorithms="diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha256,diffie-hellman-group1-sha1 ssh-rsa aes128-ctr hmac-sha2-256,hmac-sha1 none ".split(" ");this.preferred_hash=this.preferred_mac=this.preferred_kex=null;this.parceler=
new SSHyClient.parceler(b,this);this.auth=new SSHyClient.auth(this.parceler);this.settings=void 0===a?new SSHyClient.settings:a;this.lastKey="";this.closing=!1};
SSHyClient.Transport.prototype={kex_info:{"diffie-hellman-group1-sha1":function(b){return new SSHyClient.kex.DiffieHellman(b,1,"SHA-1")},"diffie-hellman-group14-sha1":function(b){return new SSHyClient.kex.DiffieHellman(b,14,"SHA-1")},"diffie-hellman-group-exchange-sha1":function(b){return new SSHyClient.kex.DiffieHellman(b,void 0,"SHA-1")},"diffie-hellman-group1-sha256":function(b){return new SSHyClient.kex.DiffieHellman(b,1,"SHA-256")},"diffie-hellman-group14-sha256":function(b){return new SSHyClient.kex.DiffieHellman(b,
14,"SHA-256")},"diffie-hellman-group-exchange-sha256":function(b){return new SSHyClient.kex.DiffieHellman(b,void 0,"SHA-256")}},mac_info:{"hmac-sha1":function(b){b.parceler.hmacSHAVersion="SHA-1";b.preferred_hash=20},"hmac-sha2-256":function(b){b.parceler.hmacSHAVersion="SHA-256";b.preferred_hash=32}},handler_table:{0:function(b,a){b.parceler.socket.sendB64(b.local_version+"\r\n");b.remote_version=a.slice(0,a.length-2);b.send_kex_init()},1:function(b,a){b.disconnect()},2:function(b,a){},3:function(b,
a){},6:function(b,a){"ssh-userauth"==(new SSHyClient.Message(a.slice(1))).get_string()&&b.auth.ssh_connection()},20:function(b,a){b.parse_kex_reply(a);b.remote_kex_message=a;b.preferred_kex.start()},21:function(b){b.activate_encryption()},31:function(b,a){b.preferred_kex.parse_reply(31,a.slice(1))},33:function(b,a){b.preferred_kex.parse_reply(33,a.slice(1))},51:function(b,a){b.auth.awaitingAuthentication=!1;b.auth.authFailure()},52:function(b,a){b.auth.authenticated=!0;b.auth.awaitingAuthentication=
!1;b.auth.auth_success(!0)},80:function(b,a){},91:function(b,a){resize();b.auth.get_pty("xterm",term.cols,term.rows)},93:function(b,a){},94:function(b,a){a=a.slice(9);if(b.settings.localEcho&&(b.settings.testShell(a),b.settings.parseLocalEcho(a),b.lastKey)){if(a==b.lastKey.substring(0,1)){b.lastKey=b.lastKey.slice(1);return}b.lastKey=b.lastKey.slice(1);term.write("\b")}term.write(fromUtf8(a))},96:function(b,a){},97:function(b,a){b.disconnect()},98:function(b,a){}},winAdjust:function(){var b=new SSHyClient.Message;
b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_WINDOW_ADJUST));b.add_int(0);b.add_int(SSHyClient.WINDOW_SIZE);this.send_packet(b.toString());this.parceler.windowSize=SSHyClient.WINDOW_SIZE},disconnect:function(b){this.closing=!0;b=void 0===b?11:b;var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_DISCONNECT));a.add_int(b);this.send_packet(a.toString());ws.close();term.write("\r\nConnection to "+this.auth.hostname+" closed. Code - "+b)},keepAlive:function(){if(3!==
ws.readyState){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_IGNORE));b.add_string("");transport.send_packet(b.toString())}},cut_padding:function(b){return b.substring(1,b.length-b[0].charCodeAt(0))},send_packet:function(b){this.parceler.send(b)},send_kex_init:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEX_INIT));b.add_bytes(read_rng(16));b.add_string(this.preferred_algorithms[0]);b.add_string(this.preferred_algorithms[1]);
for(var a=2;6>a;a++)b.add_string(this.preferred_algorithms[a]),b.add_string(this.preferred_algorithms[a]);b.add_boolean(!1);b.add_int(0);this.local_kex_message=b=b.toString();this.send_packet(b)},parse_kex_reply:function(b){b=new SSHyClient.Message(b);b.get_bytes(17);var a=filter(this.preferred_algorithms[0],b.get_string().split(",")),g=filter(this.preferred_algorithms[1],b.get_string().split(","));b.get_string();var d=filter(this.preferred_algorithms[2],b.get_string().split(","));b.get_string();
b=filter(this.preferred_algorithms[3],b.get_string().split(","));if(!(a&&g&&d&&b))throw"Chosen Algs = kex="+a+", keys="+g+", cipher="+d+", mac="+b;this.preferred_kex=this.kex_info[a](this);this.preferred_mac=this.mac_info[b](this)},generate_key:function(b,a){var g=new SSHyClient.Message;g.add_mpint(SSHyClient.kex.K);g.add_bytes(SSHyClient.kex.H);g.add_bytes(b);g.add_bytes(SSHyClient.kex.sessionId);return"SHA-1"==this.preferred_kex.SHAVersion?(new SSHyClient.hash.SHA1(g.toString())).digest().substring(0,
a):(new SSHyClient.hash.SHA256(g.toString())).digest().substring(0,a)},activate_encryption:function(){this.parceler.block_size=16;this.parceler.macSize=this.preferred_hash;this.parceler.outbound_enc_iv=this.generate_key("A",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_enc_key=this.generate_key("C",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_mac_key=this.generate_key("E",this.parceler.macSize,this.preferred_kex.SHAVersion);this.parceler.outbound_cipher=
new SSHyClient.crypto.AES(this.parceler.outbound_enc_key,SSHyClient.AES_CTR,this.parceler.outbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.outbound_enc_iv)));this.parceler.inbound_enc_iv=this.generate_key("B",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_enc_key=this.generate_key("D",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_mac_key=this.generate_key("F",this.parceler.macSize,this.preferred_kex.SHAVersion);
this.parceler.inbound_cipher=new SSHyClient.crypto.AES(this.parceler.inbound_enc_key,SSHyClient.AES_CTR,this.parceler.inbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.inbound_enc_iv)));this.parceler.encrypting=!0;this.auth.request_auth()},handle_dec:function(b){b=this.cut_padding(b);try{this.handler_table[b.substring(0,1).charCodeAt(0)](this,b)}catch(a){console.log(a),console.log("Error! code - "+b.substring(0,1).charCodeAt(0)+" does not exist!")}},
str_to_bytes:function(b){return unescape(encodeURIComponent(b))},expect_key:function(b){if(b){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_DATA));a.add_int(0);a.add_string(this.str_to_bytes(b.toString()));this.parceler.send(a)}},send_new_keys:function(b){b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_NEW_KEYS));this.send_packet(b)}};

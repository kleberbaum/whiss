var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,e){c!=Array.prototype&&c!=Object.prototype&&(c[a]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,a,e,d){if(a){e=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var b=c[d];b in e||(e[b]={});e=e[b]}c=c[c.length-1];d=e[c];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Object.setPrototypeOf",function(c){return c?c:"object"!=typeof"".__proto__?null:function(c,e){c.__proto__=e;if(c.__proto__!==e)throw new TypeError(c+" is not extensible");return c}},"es6","es5");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,d={next:function(){if(e<c.length){var b=e++;return{value:a(b,c[b]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6-impl","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(c,e){return c===e?0!==c||1/c===1/e:c!==c&&e!==e}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,e){var a=this;a instanceof String&&(a=String(a));var b=a.length;for(e=e||0;e<b;e++)if(a[e]==c||Object.is(a[e],c))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,a,e){if(null==c)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,e){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,e||0)}},"es6-impl","es3");
SSHyClient={MSG_DISCONNECT:1,MSG_IGNORE:2,MSG_UNIMPLEMENTED:3,MSG_DEBUG:4,MSG_SERVICE_REQUEST:5,MSG_SERVICE_ACCEPT:6,MSG_KEX_INIT:20,MSG_NEW_KEYS:21,MSG_KEXDH_INIT:30,MSG_KEXDH_GEX_GROUP:31,MSG_KEXDH_GEX_INIT:32,MSG_KEXDH_GEX_REPLY:33,MSG_KEXDH_GEX_REQUEST:34,MSG_USERAUTH_REQUEST:50,MSG_USERAUTH_FAILURE:51,MSG_USERAUTH_SUCCESS:52,MSG_USERAUTH_BANNER:53,MSG_GLOBAL_REQUEST:80,MSG_REQUEST_SUCCESS:81,MSG_REQUEST_FAILURE:82,MSG_CHANNEL_OPEN:90,MSG_CHANNEL_OPEN_SUCCESS:91,MSG_CHANNEL_OPEN_FAILURE:92,MSG_CHANNEL_WINDOW_ADJUST:93,
MSG_CHANNEL_DATA:94,MSG_CHANNEL_EXTENDED_DATA:95,MSG_CHANNEL_EOF:96,MSG_CHANNEL_CLOSE:97,MSG_CHANNEL_REQUEST:98,MSG_CHANNEL_SUCCESS:99,MSG_CHANNEL_FAILURE:100,WINDOW_SIZE:40674,MAX_PACKET_SIZE:16384,AES_CBC:2,AES_CTR:6,fishFsHintLeave:"\u001b[32",bashFsHintLeave:"\u001b]0;"};sjcl={cipher:{}};
sjcl.cipher.aes=function(c,a){this._tables[0][0][0]||this._precompute();this.mode=a;var e,d,b=this._tables[0][4],f=this._tables[1];a=c.length;var g=1;if(4!==a&&6!==a&&8!==a)throw"invalid aes key size";this._key=[e=c.slice(0),d=[]];for(c=a;c<4*a+28;c++){var n=e[c-1];if(0===c%a||8===a&&4===c%a)n=b[n>>>24]<<24^b[n>>16&255]<<16^b[n>>8&255]<<8^b[n&255],0===c%a&&(n=n<<8^n>>>24^g<<24,g=g<<1^283*(g>>7));e[c]=e[c-a]^n}for(a=0;c;a++,c--)n=e[a&3?c:c-4],d[a]=4>=c||4>a?n:f[0][b[n>>>24]]^f[1][b[n>>16&255]]^f[2][b[n>>
8&255]]^f[3][b[n&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(c,a,e){a=this.mode==sjcl.cipher.aes.MODE_CBC?a:[];for(var d=[],b=0;b<c.length/16;b++){var f=c.slice(16*b,16*(b+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var g=0;16>g;g++)f[g]^=a[g];a=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(f),0))}else for(a=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(e.increment())),0)),g=0;16>g;g++)a[g]^=f[g];d=d.concat(a)}return d},decrypt:function(c,a){for(var e=[],d=0;d<c.length/
16;d++){var b=c.slice(16*d,16*(d+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(b),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var f=0;16>f;f++)ct[f]^=a[f];a=b}e=e.concat(ct)}return e},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var c=this._tables[0],a=this._tables[1],e=c[4],d=a[4],b,f,g,n=[],h=[],q;for(b=0;256>b;b++)h[(n[b]=b<<1^283*(b>>7))^b]=b;for(f=g=0;!e[f];f^=q||1,g=h[g]||1){var p=g^g<<1^g<<2^g<<3^g<<4;p=p>>8^p&255^99;e[f]=p;d[p]=f;var r=n[b=
n[q=n[f]]];var l=16843009*r^65537*b^257*q^16843008*f;r=257*n[p]^16843008*p;for(b=0;4>b;b++)c[b][f]=r=r<<24^r>>>8,a[b][p]=l=l<<24^l>>>8}for(b=0;5>b;b++)c[b]=c[b].slice(0),a[b]=a[b].slice(0)},_crypt:function(c,a){if(4!==c.length)throw"invalid aes block size";var e=this._key[a],d=c[0]^e[0],b=c[a?3:1]^e[1],f=c[2]^e[2];c=c[a?1:3]^e[3];var g=e.length/4-2,n,h=4,q=[0,0,0,0];var p=this._tables[a];var r=p[0],l=p[1],t=p[2],v=p[3],m=p[4];for(n=0;n<g;n++){p=r[d>>>24]^l[b>>16&255]^t[f>>8&255]^v[c&255]^e[h];var A=
r[b>>>24]^l[f>>16&255]^t[c>>8&255]^v[d&255]^e[h+1];var u=r[f>>>24]^l[c>>16&255]^t[d>>8&255]^v[b&255]^e[h+2];c=r[c>>>24]^l[d>>16&255]^t[b>>8&255]^v[f&255]^e[h+3];h+=4;d=p;b=A;f=u}for(n=0;4>n;n++)q[a?3&-n:n]=m[d>>>24]<<24^m[b>>16&255]<<16^m[f>>8&255]<<8^m[c&255]^e[h++],p=d,d=b,b=f,f=c,c=p;return q}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(c){var a=[],e=sjcl.bitArray.bitLength(c),d,b;for(d=0;d<e/8;d++)0===(d&3)&&(b=c[d/4]),a.push(b>>>24),b<<=8;return a},toBits:function(c){var a=[],e,d=0;for(e=0;e<c.length;e++)d=d<<8|c[e],3===(e&3)&&(a.push(d),d=0);e&3&&a.push(sjcl.bitArray.partial(8*(e&3),d));return a}};
sjcl.bitArray={bitLength:function(c){var a=c.length;return 0===a?0:32*(a-1)+sjcl.bitArray.getPartial(c[a-1])},partial:function(c,a,e){return 32===c?a:(e?a|0:a<<32-c)+1099511627776*c},getPartial:function(c){return Math.round(c/1099511627776)||32}};var BigInteger=function(){function c(c,a,b){null!=c&&("number"==typeof c?this.fromNumber(c,a,b):null==a&&"string"!=typeof c?this.fromString(c,256):this.fromString(c,a))}function a(){return new c(null)}function e(c,a,b,k,h,d){for(;0<=--d;){var C=a*this[c++]+b[k]+h;h=Math.floor(C/67108864);b[k++]=C&67108863}return h}function d(c,a,b,k,h,d){var C=a&32767;for(a>>=15;0<=--d;){var w=this[c]&32767,f=this[c++]>>15,g=a*w+f*C,w=C*w+((g&32767)<<15)+b[k]+(h&1073741823);h=(w>>>30)+(g>>>15)+a*f+(h>>>30);b[k++]=
w&1073741823}return h}function b(c,a,b,k,h,d){var C=a&16383;for(a>>=14;0<=--d;){var w=this[c]&16383,f=this[c++]>>14,g=a*w+f*C,w=C*w+((g&16383)<<14)+b[k]+h;h=(w>>28)+(g>>14)+a*f;b[k++]=w&268435455}return h}function f(c,a){c=x[c.charCodeAt(a)];return null==c?-1:c}function g(c){var b=a();b.fromInt(c);return b}function n(c){var a=1,b;0!=(b=c>>>16)&&(c=b,a+=16);0!=(b=c>>8)&&(c=b,a+=8);0!=(b=c>>4)&&(c=b,a+=4);0!=(b=c>>2)&&(c=b,a+=2);0!=c>>1&&(a+=1);return a}function h(c){this.m=c}function q(c){this.m=c;
this.mp=c.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<c.DB-15)-1;this.mt2=2*c.t}function p(c,a){return c&a}function r(c,a){return c|a}function l(c,a){return c^a}function t(c,a){return c&~a}function v(){}function m(c){return c}function A(b){this.r2=a();this.q3=a();c.ONE.dlShiftTo(2*b.t,this.r2);this.mu=this.r2.divide(b);this.m=b}var u;"Microsoft Internet Explorer"==navigator.appName?(c.prototype.am=d,u=30):"Netscape"!=navigator.appName?(c.prototype.am=e,u=26):(c.prototype.am=
b,u=28);c.prototype.DB=u;c.prototype.DM=(1<<u)-1;c.prototype.DV=1<<u;c.prototype.FV=Math.pow(2,52);c.prototype.F1=52-u;c.prototype.F2=2*u-52;var x=[],B;u=48;for(B=0;9>=B;++B)x[u++]=B;u=97;for(B=10;36>B;++B)x[u++]=B;u=65;for(B=10;36>B;++B)x[u++]=B;h.prototype.convert=function(c){return 0>c.s||0<=c.compareTo(this.m)?c.mod(this.m):c};h.prototype.revert=function(c){return c};h.prototype.reduce=function(c){c.divRemTo(this.m,null,c)};h.prototype.mulTo=function(c,a,b){c.multiplyTo(a,b);this.reduce(b)};h.prototype.sqrTo=
function(c,a){c.squareTo(a);this.reduce(a)};q.prototype.convert=function(b){var h=a();b.abs().dlShiftTo(this.m.t,h);h.divRemTo(this.m,null,h);0>b.s&&0<h.compareTo(c.ZERO)&&this.m.subTo(h,h);return h};q.prototype.revert=function(c){var b=a();c.copyTo(b);this.reduce(b);return b};q.prototype.reduce=function(c){for(;c.t<=this.mt2;)c[c.t++]=0;for(var a=0;a<this.m.t;++a){var b=c[a]&32767,k=b*this.mpl+((b*this.mph+(c[a]>>15)*this.mpl&this.um)<<15)&c.DM,b=a+this.m.t;for(c[b]+=this.m.am(0,k,c,a,0,this.m.t);c[b]>=
c.DV;)c[b]-=c.DV,c[++b]++}c.clamp();c.drShiftTo(this.m.t,c);0<=c.compareTo(this.m)&&c.subTo(this.m,c)};q.prototype.mulTo=function(c,a,b){c.multiplyTo(a,b);this.reduce(b)};q.prototype.sqrTo=function(c,a){c.squareTo(a);this.reduce(a)};c.prototype.copyTo=function(c){for(var a=this.t-1;0<=a;--a)c[a]=this[a];c.t=this.t;c.s=this.s};c.prototype.fromInt=function(c){this.t=1;this.s=0>c?-1:0;0<c?this[0]=c:-1>c?this[0]=c+DV:this.t=0};c.prototype.fromString=function(a,b){if(16==b)b=4;else if(8==b)b=3;else if(256==
b)b=8;else if(2==b)b=1;else if(32==b)b=5;else if(4==b)b=2;else{this.fromRadix(a,b);return}this.s=this.t=0;for(var h=a.length,k=!1,d=0;0<=--h;){var C=8==b?a[h]&255:f(a,h);0>C?"-"==a.charAt(h)&&(k=!0):(k=!1,0==d?this[this.t++]=C:d+b>this.DB?(this[this.t-1]|=(C&(1<<this.DB-d)-1)<<d,this[this.t++]=C>>this.DB-d):this[this.t-1]|=C<<d,d+=b,d>=this.DB&&(d-=this.DB))}8==b&&0!=(a[0]&128)&&(this.s=-1,0<d&&(this[this.t-1]|=(1<<this.DB-d)-1<<d));this.clamp();k&&c.ZERO.subTo(this,this)};c.prototype.clamp=function(){for(var c=
this.s&this.DM;0<this.t&&this[this.t-1]==c;)--this.t};c.prototype.dlShiftTo=function(c,a){var b;for(b=this.t-1;0<=b;--b)a[b+c]=this[b];for(b=c-1;0<=b;--b)a[b]=0;a.t=this.t+c;a.s=this.s};c.prototype.drShiftTo=function(c,a){for(var b=c;b<this.t;++b)a[b-c]=this[b];a.t=Math.max(this.t-c,0);a.s=this.s};c.prototype.lShiftTo=function(c,a){var b=c%this.DB,k=this.DB-b,h=(1<<k)-1;c=Math.floor(c/this.DB);var d=this.s<<b&this.DM,f;for(f=this.t-1;0<=f;--f)a[f+c+1]=this[f]>>k|d,d=(this[f]&h)<<b;for(f=c-1;0<=f;--f)a[f]=
0;a[c]=d;a.t=this.t+c+1;a.s=this.s;a.clamp()};c.prototype.rShiftTo=function(c,a){a.s=this.s;var b=Math.floor(c/this.DB);if(b>=this.t)a.t=0;else{c%=this.DB;var k=this.DB-c,h=(1<<c)-1;a[0]=this[b]>>c;for(var d=b+1;d<this.t;++d)a[d-b-1]|=(this[d]&h)<<k,a[d-b]=this[d]>>c;0<c&&(a[this.t-b-1]|=(this.s&h)<<k);a.t=this.t-b;a.clamp()}};c.prototype.subTo=function(c,a){for(var b=0,k=0,h=Math.min(c.t,this.t);b<h;)k+=this[b]-c[b],a[b++]=k&this.DM,k>>=this.DB;if(c.t<this.t){for(k-=c.s;b<this.t;)k+=this[b],a[b++]=
k&this.DM,k>>=this.DB;k+=this.s}else{for(k+=this.s;b<c.t;)k-=c[b],a[b++]=k&this.DM,k>>=this.DB;k-=c.s}a.s=0>k?-1:0;-1>k?a[b++]=this.DV+k:0<k&&(a[b++]=k);a.t=b;a.clamp()};c.prototype.multiplyTo=function(a,b){var h=this.abs(),k=a.abs(),d=h.t;for(b.t=d+k.t;0<=--d;)b[d]=0;for(d=0;d<k.t;++d)b[d+h.t]=h.am(0,k[d],b,d,0,h.t);b.s=0;b.clamp();this.s!=a.s&&c.ZERO.subTo(b,b)};c.prototype.squareTo=function(c){for(var a=this.abs(),b=c.t=2*a.t;0<=--b;)c[b]=0;for(b=0;b<a.t-1;++b){var k=a.am(b,a[b],c,2*b,0,1);(c[b+
a.t]+=a.am(b+1,2*a[b],c,2*b+1,k,a.t-b-1))>=a.DV&&(c[b+a.t]-=a.DV,c[b+a.t+1]=1)}0<c.t&&(c[c.t-1]+=a.am(b,a[b],c,2*b,0,1));c.s=0;c.clamp()};c.prototype.divRemTo=function(b,h,d){var k=b.abs();if(!(0>=k.t)){var f=this.abs();if(f.t<k.t)null!=h&&h.fromInt(0),null!=d&&this.copyTo(d);else{null==d&&(d=a());var g=a(),l=this.s;b=b.s;var e=this.DB-n(k[k.t-1]);0<e?(k.lShiftTo(e,g),f.lShiftTo(e,d)):(k.copyTo(g),f.copyTo(d));k=g.t;f=g[k-1];if(0!=f){var r=f*(1<<this.F1)+(1<k?g[k-2]>>this.F2:0),C=this.FV/r,r=(1<<
this.F1)/r,w=1<<this.F2,q=d.t,p=q-k,m=null==h?a():h;g.dlShiftTo(p,m);0<=d.compareTo(m)&&(d[d.t++]=1,d.subTo(m,d));c.ONE.dlShiftTo(k,m);for(m.subTo(g,g);g.t<k;)g[g.t++]=0;for(;0<=--p;){var y=d[--q]==f?this.DM:Math.floor(d[q]*C+(d[q-1]+w)*r);if((d[q]+=g.am(0,y,d,p,0,k))<y)for(g.dlShiftTo(p,m),d.subTo(m,d);d[q]<--y;)d.subTo(m,d)}null!=h&&(d.drShiftTo(k,h),l!=b&&c.ZERO.subTo(h,h));d.t=k;d.clamp();0<e&&d.rShiftTo(e,d);0>l&&c.ZERO.subTo(d,d)}}}};c.prototype.invDigit=function(){if(1>this.t)return 0;var c=
this[0];if(0==(c&1))return 0;var a=c&3,a=a*(2-(c&15)*a)&15,a=a*(2-(c&255)*a)&255,a=a*(2-((c&65535)*a&65535))&65535,a=a*(2-c*a%this.DV)%this.DV;return 0<a?this.DV-a:-a};c.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};c.prototype.exp=function(b,h){if(4294967295<b||1>b)return c.ONE;var d=a();var k=a();var f=h.convert(this),g=n(b)-1;for(f.copyTo(d);0<=--g;)if(h.sqrTo(d,k),0<(b&1<<g))h.mulTo(k,f,d);else{var e=d;d=k;k=e}return h.revert(d)};c.prototype.toString=function(c){if(0>this.s)return"-"+
this.negate().toString(c);if(16==c)c=4;else if(8==c)c=3;else if(2==c)c=1;else if(32==c)c=5;else if(4==c)c=2;else return this.toRadix(c);var a=(1<<c)-1,b,k=!1,h="",d=this.t,f=this.DB-d*this.DB%c;if(0<d--)for(f<this.DB&&0<(b=this[d]>>f)&&(k=!0,h="0123456789abcdefghijklmnopqrstuvwxyz".charAt(b));0<=d;)f<c?(b=(this[d]&(1<<f)-1)<<c-f,b|=this[--d]>>(f+=this.DB-c)):(b=this[d]>>(f-=c)&a,0>=f&&(f+=this.DB,--d)),0<b&&(k=!0),k&&(h+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(b));return k?h:"0"};c.prototype.negate=
function(){var b=a();c.ZERO.subTo(this,b);return b};c.prototype.abs=function(){return 0>this.s?this.negate():this};c.prototype.compareTo=function(c){var a=this.s-c.s;if(0!=a)return a;var b=this.t,a=b-c.t;if(0!=a)return a;for(;0<=--b;)if(0!=(a=this[b]-c[b]))return a;return 0};c.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+n(this[this.t-1]^this.s&this.DM)};c.prototype.mod=function(b){var h=a();this.abs().divRemTo(b,null,h);0>this.s&&0<h.compareTo(c.ZERO)&&b.subTo(h,h);return h};
c.prototype.modPowInt=function(c,a){a=256>c||a.isEven()?new h(a):new q(a);return this.exp(c,a)};c.ZERO=g(0);c.ONE=g(1);v.prototype.convert=m;v.prototype.revert=m;v.prototype.mulTo=function(c,a,b){c.multiplyTo(a,b)};v.prototype.sqrTo=function(c,a){c.squareTo(a)};A.prototype.convert=function(c){if(0>c.s||c.t>2*this.m.t)return c.mod(this.m);if(0>c.compareTo(this.m))return c;var b=a();c.copyTo(b);this.reduce(b);return b};A.prototype.revert=function(c){return c};A.prototype.reduce=function(c){c.drShiftTo(this.m.t-
1,this.r2);c.t>this.m.t+1&&(c.t=this.m.t+1,c.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>c.compareTo(this.r2);)c.dAddOffset(1,this.m.t+1);for(c.subTo(this.r2,c);0<=c.compareTo(this.m);)c.subTo(this.m,c)};A.prototype.mulTo=function(c,a,b){c.multiplyTo(a,b);this.reduce(b)};A.prototype.sqrTo=function(c,a){c.squareTo(a);this.reduce(a)};var z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],D=67108864/z[z.length-1];c.prototype.chunkSize=function(c){return Math.floor(Math.LN2*this.DB/Math.log(c))};c.prototype.toRadix=function(c){null==c&&(c=10);if(0==this.signum()||2>c||36<c)return"0";var b=this.chunkSize(c),b=Math.pow(c,
b),h=g(b),k=a(),d=a(),f="";for(this.divRemTo(h,k,d);0<k.signum();)f=(b+d.intValue()).toString(c).substr(1)+f,k.divRemTo(h,k,d);return d.intValue().toString(c)+f};c.prototype.fromRadix=function(a,b){this.fromInt(0);null==b&&(b=10);for(var h=this.chunkSize(b),k=Math.pow(b,h),d=!1,g=0,e=0,l=0;l<a.length;++l){var n=f(a,l);0>n?"-"==a.charAt(l)&&0==this.signum()&&(d=!0):(e=b*e+n,++g>=h&&(this.dMultiply(k),this.dAddOffset(e,0),e=g=0))}0<g&&(this.dMultiply(Math.pow(b,g)),this.dAddOffset(e,0));d&&c.ZERO.subTo(this,
this)};c.prototype.fromNumber=function(a,b,h){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,h),this.testBit(a-1)||this.bitwiseTo(c.ONE.shiftLeft(a-1),r,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(c.ONE.shiftLeft(a-1),this);else{h=[];var k=a&7;h.length=(a>>3)+1;b.nextBytes(h);h[0]=0<k?h[0]&(1<<k)-1:0;this.fromString(h,256)}};c.prototype.bitwiseTo=function(c,a,b){var k,h=Math.min(c.t,this.t);for(k=
0;k<h;++k)b[k]=a(this[k],c[k]);if(c.t<this.t){var d=c.s&this.DM;for(k=h;k<this.t;++k)b[k]=a(this[k],d);b.t=this.t}else{d=this.s&this.DM;for(k=h;k<c.t;++k)b[k]=a(d,c[k]);b.t=c.t}b.s=a(this.s,c.s);b.clamp()};c.prototype.changeBit=function(a,b){a=c.ONE.shiftLeft(a);this.bitwiseTo(a,b,a);return a};c.prototype.addTo=function(c,a){for(var b=0,k=0,h=Math.min(c.t,this.t);b<h;)k+=this[b]+c[b],a[b++]=k&this.DM,k>>=this.DB;if(c.t<this.t){for(k+=c.s;b<this.t;)k+=this[b],a[b++]=k&this.DM,k>>=this.DB;k+=this.s}else{for(k+=
this.s;b<c.t;)k+=c[b],a[b++]=k&this.DM,k>>=this.DB;k+=c.s}a.s=0>k?-1:0;0<k?a[b++]=k:-1>k&&(a[b++]=this.DV+k);a.t=b;a.clamp()};c.prototype.dMultiply=function(c){this[this.t]=this.am(0,c-1,this,0,0,this.t);++this.t;this.clamp()};c.prototype.dAddOffset=function(c,a){if(0!=c){for(;this.t<=a;)this[this.t++]=0;for(this[a]+=c;this[a]>=this.DV;)this[a]-=this.DV,++a>=this.t&&(this[this.t++]=0),++this[a]}};c.prototype.multiplyLowerTo=function(c,a,b){var k=Math.min(this.t+c.t,a);b.s=0;for(b.t=k;0<k;)b[--k]=
0;var h;for(h=b.t-this.t;k<h;++k)b[k+this.t]=this.am(0,c[k],b,k,0,this.t);for(h=Math.min(c.t,a);k<h;++k)this.am(0,c[k],b,k,0,a-k);b.clamp()};c.prototype.multiplyUpperTo=function(c,a,b){--a;var k=b.t=this.t+c.t-a;for(b.s=0;0<=--k;)b[k]=0;for(k=Math.max(a-this.t,0);k<c.t;++k)b[this.t+k-a]=this.am(a-k,c[k],b,0,0,this.t+k-a);b.clamp();b.drShiftTo(1,b)};c.prototype.modInt=function(c){if(0>=c)return 0;var a=this.DV%c,b=0>this.s?c-1:0;if(0<this.t)if(0==a)b=this[0]%c;else for(var k=this.t-1;0<=k;--k)b=(a*
b+this[k])%c;return b};c.prototype.millerRabin=function(b){var h=this.subtract(c.ONE),d=h.getLowestSetBit();if(0>=d)return!1;var k=h.shiftRight(d);b=b+1>>1;b>z.length&&(b=z.length);for(var f=a(),g=0;g<b;++g){f.fromInt(z[g]);var e=f.modPow(k,this);if(0!=e.compareTo(c.ONE)&&0!=e.compareTo(h)){for(var l=1;l++<d&&0!=e.compareTo(h);)if(e=e.modPowInt(2,this),0==e.compareTo(c.ONE))return!1;if(0!=e.compareTo(h))return!1}}return!0};c.prototype.clone=function(){var c=a();this.copyTo(c);return c};c.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};c.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};c.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};c.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};c.prototype.toByteArray=function(){var c=this.t,a=[];a[0]=this.s;var b=this.DB-
c*this.DB%8,k,h=0;if(0<c--)for(b<this.DB&&(k=this[c]>>b)!=(this.s&this.DM)>>b&&(a[h++]=k|this.s<<this.DB-b);0<=c;)if(8>b?(k=(this[c]&(1<<b)-1)<<8-b,k|=this[--c]>>(b+=this.DB-8)):(k=this[c]>>(b-=8)&255,0>=b&&(b+=this.DB,--c)),0!=(k&128)&&(k|=-256),0==h&&(this.s&128)!=(k&128)&&++h,0<h||k!=this.s)a[h++]=k;return a};c.prototype.equals=function(c){return 0==this.compareTo(c)};c.prototype.min=function(c){return 0>this.compareTo(c)?this:c};c.prototype.max=function(c){return 0<this.compareTo(c)?this:c};c.prototype.and=
function(c){var b=a();this.bitwiseTo(c,p,b);return b};c.prototype.or=function(c){var b=a();this.bitwiseTo(c,r,b);return b};c.prototype.xor=function(c){var b=a();this.bitwiseTo(c,l,b);return b};c.prototype.andNot=function(c){var b=a();this.bitwiseTo(c,t,b);return b};c.prototype.not=function(){for(var c=a(),b=0;b<this.t;++b)c[b]=this.DM&~this[b];c.t=this.t;c.s=~this.s;return c};c.prototype.shiftLeft=function(c){var b=a();0>c?this.rShiftTo(-c,b):this.lShiftTo(c,b);return b};c.prototype.shiftRight=function(c){var b=
a();0>c?this.lShiftTo(-c,b):this.rShiftTo(c,b);return b};c.prototype.getLowestSetBit=function(){for(var c=0;c<this.t;++c)if(0!=this[c]){var a=c*this.DB,c=this[c];if(0==c)c=-1;else{var b=0;0==(c&65535)&&(c>>=16,b+=16);0==(c&255)&&(c>>=8,b+=8);0==(c&15)&&(c>>=4,b+=4);0==(c&3)&&(c>>=2,b+=2);0==(c&1)&&++b;c=b}return a+c}return 0>this.s?this.t*this.DB:-1};c.prototype.bitCount=function(){for(var c=0,a=this.s&this.DM,b=0;b<this.t;++b){for(var k=this[b]^a,h=0;0!=k;)k&=k-1,++h;c+=h}return c};c.prototype.testBit=
function(c){var a=Math.floor(c/this.DB);return a>=this.t?0!=this.s:0!=(this[a]&1<<c%this.DB)};c.prototype.setBit=function(c){return this.changeBit(c,r)};c.prototype.clearBit=function(c){return this.changeBit(c,t)};c.prototype.flipBit=function(c){return this.changeBit(c,l)};c.prototype.add=function(c){var b=a();this.addTo(c,b);return b};c.prototype.subtract=function(c){var b=a();this.subTo(c,b);return b};c.prototype.multiply=function(c){var b=a();this.multiplyTo(c,b);return b};c.prototype.divide=function(c){var b=
a();this.divRemTo(c,b,null);return b};c.prototype.remainder=function(c){var b=a();this.divRemTo(c,null,b);return b};c.prototype.divideAndRemainder=function(c){var b=a(),h=a();this.divRemTo(c,b,h);return[b,h]};c.prototype.modPow=function(c,b){var d=c.bitLength(),k=g(1);if(0>=d)return k;var f=18>d?1:48>d?3:144>d?4:768>d?5:6;b=8>d?new h(b):b.isEven()?new A(b):new q(b);var e=[],l=3,r=f-1,p=(1<<f)-1;e[1]=b.convert(this);if(1<f)for(d=a(),b.sqrTo(e[1],d);l<=p;)e[l]=a(),b.mulTo(d,e[l-2],e[l]),l+=2;for(var m=
c.t-1,t,v=!0,w=a(),d=n(c[m])-1;0<=m;){d>=r?t=c[m]>>d-r&p:(t=(c[m]&(1<<d+1)-1)<<r-d,0<m&&(t|=c[m-1]>>this.DB+d-r));for(l=f;0==(t&1);)t>>=1,--l;0>(d-=l)&&(d+=this.DB,--m);if(v)e[t].copyTo(k),v=!1;else{for(;1<l;)b.sqrTo(k,w),b.sqrTo(w,k),l-=2;0<l?b.sqrTo(k,w):(l=k,k=w,w=l);b.mulTo(w,e[t],k)}for(;0<=m&&0==(c[m]&1<<d);)b.sqrTo(k,w),l=k,k=w,w=l,0>--d&&(d=this.DB-1,--m)}return b.revert(k)};c.prototype.modInverse=function(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return c.ZERO;for(var h=a.clone(),
k=this.clone(),d=g(1),f=g(0),e=g(0),l=g(1);0!=h.signum();){for(;h.isEven();)h.rShiftTo(1,h),b?(d.isEven()&&f.isEven()||(d.addTo(this,d),f.subTo(a,f)),d.rShiftTo(1,d)):f.isEven()||f.subTo(a,f),f.rShiftTo(1,f);for(;k.isEven();)k.rShiftTo(1,k),b?(e.isEven()&&l.isEven()||(e.addTo(this,e),l.subTo(a,l)),e.rShiftTo(1,e)):l.isEven()||l.subTo(a,l),l.rShiftTo(1,l);0<=h.compareTo(k)?(h.subTo(k,h),b&&d.subTo(e,d),f.subTo(l,f)):(k.subTo(h,k),b&&e.subTo(d,e),l.subTo(f,l))}if(0!=k.compareTo(c.ONE))return c.ZERO;
if(0<=l.compareTo(a))return l.subtract(a);if(0>l.signum())l.addTo(a,l);else return l;return 0>l.signum()?l.add(a):l};c.prototype.pow=function(c){return this.exp(c,new v)};c.prototype.gcd=function(c){var a=0>this.s?this.negate():this.clone();c=0>c.s?c.negate():c.clone();if(0>a.compareTo(c)){var b=a;a=c;c=b}b=a.getLowestSetBit();var k=c.getLowestSetBit();if(0>k)return a;b<k&&(k=b);for(0<k&&(a.rShiftTo(k,a),c.rShiftTo(k,c));0<a.signum();)0<(b=a.getLowestSetBit())&&a.rShiftTo(b,a),0<(b=c.getLowestSetBit())&&
c.rShiftTo(b,c),0<=a.compareTo(c)?(a.subTo(c,a),a.rShiftTo(1,a)):(c.subTo(a,c),c.rShiftTo(1,c));0<k&&c.lShiftTo(k,c);return c};c.prototype.isProbablePrime=function(c){var a,b=this.abs();if(1==b.t&&b[0]<=z[z.length-1]){for(a=0;a<z.length;++a)if(b[0]==z[a])return!0;return!1}if(b.isEven())return!1;for(a=1;a<z.length;){for(var k=z[a],h=a+1;h<z.length&&k<D;)k*=z[h++];for(k=b.modInt(k);a<h;)if(0==k%z[a++])return!1}return b.millerRabin(c)};return{BigInteger:c}}(),BigInteger=BigInteger.BigInteger;SSHyClient.hash={};SSHyClient.hash.SHA1=function(c){this.data=c||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var c=toByteArray(this.data),a=bytesToWords(c),e=8*c.length,c=[],d=1732584193,b=-271733879,f=-1732584194,g=271733878,n=-1009589776;a[e>>5]|=128<<24-e%32;a[(e+64>>>9<<4)+15]=e;for(e=0;e<a.length;e+=16){for(var h=d,q=b,p=f,r=g,l=n,t=0;80>t;t++){if(16>t)c[t]=a[e+t];else{var v=c[t-3]^c[t-8]^c[t-14]^c[t-16];c[t]=v<<1|v>>>31}v=(d<<5|d>>>27)+n+(c[t]>>>0)+(20>t?(b&f|~b&g)+1518500249:40>t?(b^f^g)+1859775393:60>t?(b&f|b&g|f&g)-1894007588:(b^f^g)-899497514);
n=g;g=f;f=b<<30|b>>>2;b=d;d=v}d+=h;b+=q;f+=p;g+=r;n+=l}return fromByteArray(wordsToBytes([d,b,f,g,n]))}};SSHyClient.hash.SHA256=function(c){this.data=c||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var c=toByteArray(this.data),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],e=bytesToWords(c),d=8*c.length,c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],b=[],f,g;e[d>>5]|=128<<24-d%32;e[(d+64>>9<<4)+15]=d;for(f=0;f<e.length;f+=16){d=c[0];var n=c[1];var h=c[2];var q=
c[3];var p=c[4];var r=c[5];var l=c[6];var t=c[7];for(g=0;64>g;g++){if(16>g)b[g]=e[g+f];else{var v=b[g-15];var m=b[g-2];b[g]=((v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3)+(b[g-7]>>>0)+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+(b[g-16]>>>0)}m=d&n^d&h^n&h;var A=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22);v=(t>>>0)+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&r^~p&l)+a[g]+(b[g]>>>0);m=A+m;t=l;l=r;r=p;p=q+v>>>0;q=h;h=n;n=d;d=v+m>>>0}c[0]+=d;c[1]+=n;c[2]+=h;c[3]+=q;c[4]+=p;c[5]+=r;c[6]+=l;c[7]+=t}return fromByteArray(wordsToBytes(c))}};
SSHyClient.hash.HMAC=function(c,a,e){e=digestmod="SHA-1"==e?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var d=new e,b=new e;64<c.length&&(c=(new e(c)).digest());c+=Array(64-c.length+1).join("\x00");e=toByteArray(c).slice(0);c=toByteArray(c).slice(0);for(var f=0;64>f;++f)e[f]^=92,c[f]^=54;d.data+=fromByteArray(e);b.data+=fromByteArray(c);b.data+=a;d.data+=b.digest();return d.digest()};
SSHyClient.hash.MD5=function(c){var a=toByteArray(c);c=bytesToWords(a);for(var e=8*a.length,a=1732584193,d=-271733879,b=-1732584194,f=271733878,g=0;g<c.length;g++)c[g]=(c[g]<<8|c[g]>>>24)&16711935|(c[g]<<24|c[g]>>>8)&4278255360;c[e>>>5]|=128<<e%32;c[(e+64>>>9<<4)+14]=e;for(var e=function(c,a,b,h,d,f,l){c=c+(a&b|~a&h)+(d>>>0)+l;return(c<<f|c>>>32-f)+a},n=function(c,a,b,h,d,f,l){c=c+(a&h|b&~h)+(d>>>0)+l;return(c<<f|c>>>32-f)+a},h=function(c,a,b,h,d,f,l){c=c+(a^b^h)+(d>>>0)+l;return(c<<f|c>>>32-f)+a},
q=function(c,a,b,h,d,f,l){c=c+(b^(a|~h))+(d>>>0)+l;return(c<<f|c>>>32-f)+a},g=0;g<c.length;g+=16)var p=a,r=d,l=b,t=f,a=e(a,d,b,f,c[g+0],7,-680876936),f=e(f,a,d,b,c[g+1],12,-389564586),b=e(b,f,a,d,c[g+2],17,606105819),d=e(d,b,f,a,c[g+3],22,-1044525330),a=e(a,d,b,f,c[g+4],7,-176418897),f=e(f,a,d,b,c[g+5],12,1200080426),b=e(b,f,a,d,c[g+6],17,-1473231341),d=e(d,b,f,a,c[g+7],22,-45705983),a=e(a,d,b,f,c[g+8],7,1770035416),f=e(f,a,d,b,c[g+9],12,-1958414417),b=e(b,f,a,d,c[g+10],17,-42063),d=e(d,b,f,a,c[g+
11],22,-1990404162),a=e(a,d,b,f,c[g+12],7,1804603682),f=e(f,a,d,b,c[g+13],12,-40341101),b=e(b,f,a,d,c[g+14],17,-1502002290),d=e(d,b,f,a,c[g+15],22,1236535329),a=n(a,d,b,f,c[g+1],5,-165796510),f=n(f,a,d,b,c[g+6],9,-1069501632),b=n(b,f,a,d,c[g+11],14,643717713),d=n(d,b,f,a,c[g+0],20,-373897302),a=n(a,d,b,f,c[g+5],5,-701558691),f=n(f,a,d,b,c[g+10],9,38016083),b=n(b,f,a,d,c[g+15],14,-660478335),d=n(d,b,f,a,c[g+4],20,-405537848),a=n(a,d,b,f,c[g+9],5,568446438),f=n(f,a,d,b,c[g+14],9,-1019803690),b=n(b,
f,a,d,c[g+3],14,-187363961),d=n(d,b,f,a,c[g+8],20,1163531501),a=n(a,d,b,f,c[g+13],5,-1444681467),f=n(f,a,d,b,c[g+2],9,-51403784),b=n(b,f,a,d,c[g+7],14,1735328473),d=n(d,b,f,a,c[g+12],20,-1926607734),a=h(a,d,b,f,c[g+5],4,-378558),f=h(f,a,d,b,c[g+8],11,-2022574463),b=h(b,f,a,d,c[g+11],16,1839030562),d=h(d,b,f,a,c[g+14],23,-35309556),a=h(a,d,b,f,c[g+1],4,-1530992060),f=h(f,a,d,b,c[g+4],11,1272893353),b=h(b,f,a,d,c[g+7],16,-155497632),d=h(d,b,f,a,c[g+10],23,-1094730640),a=h(a,d,b,f,c[g+13],4,681279174),
f=h(f,a,d,b,c[g+0],11,-358537222),b=h(b,f,a,d,c[g+3],16,-722521979),d=h(d,b,f,a,c[g+6],23,76029189),a=h(a,d,b,f,c[g+9],4,-640364487),f=h(f,a,d,b,c[g+12],11,-421815835),b=h(b,f,a,d,c[g+15],16,530742520),d=h(d,b,f,a,c[g+2],23,-995338651),a=q(a,d,b,f,c[g+0],6,-198630844),f=q(f,a,d,b,c[g+7],10,1126891415),b=q(b,f,a,d,c[g+14],15,-1416354905),d=q(d,b,f,a,c[g+5],21,-57434055),a=q(a,d,b,f,c[g+12],6,1700485571),f=q(f,a,d,b,c[g+3],10,-1894986606),b=q(b,f,a,d,c[g+10],15,-1051523),d=q(d,b,f,a,c[g+1],21,-2054922799),
a=q(a,d,b,f,c[g+8],6,1873313359),f=q(f,a,d,b,c[g+15],10,-30611744),b=q(b,f,a,d,c[g+6],15,-1560198380),d=q(d,b,f,a,c[g+13],21,1309151649),a=q(a,d,b,f,c[g+4],6,-145523070),f=q(f,a,d,b,c[g+11],10,-1120210379),b=q(b,f,a,d,c[g+2],15,718787259),d=q(d,b,f,a,c[g+9],21,-343485551),a=a+p>>>0,d=d+r>>>0,b=b+l>>>0,f=f+t>>>0;var v=function(c){if(c.constructor==Number)return(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;for(var a=0;a<c.length;a++)c[a]=v(c[a]);return c};return fromByteArray(wordsToBytes(v([a,d,
b,f])))};var symbols={"-2":"E","-1":"S",0:" ",1:".",2:"o",3:"+",4:"=",5:"*",6:"B",7:"O",8:"X",9:"@",10:"%",11:"&",12:"#",13:"/",14:"^"},bounds={width:17,height:9};function createBoard(c){for(var a=[],e=0;e<c.width;e++){a[e]=[];for(var d=0;d<c.height;d++)a[e][d]=0}return a}
function generateBoard(c){var a=createBoard(bounds),e=Math.floor(bounds.width/2),d=Math.floor(bounds.height/2);a[e][d]=-1;c.forEach(function(c){for(var b=0;8>b;b+=2){var g=c>>b&3;switch(g){case 0:case 1:0<d&&d--;break;case 2:case 3:d<bounds.height-1&&d++}switch(g){case 0:case 2:0<e&&e--;break;case 1:case 3:e<bounds.width-1&&e++}0<=a[e][d]&&a[e][d]++}});a[e][d]=-2;return a}
function boardToString(c){result=[];for(var a=0;a<bounds.height;a++){result[a]=[];for(var e=0;e<bounds.width;e++)result[a][e]=symbols[c[e][a]]||symbols[0];result[a]="|"+result[a].join("")+"|"}result.splice(0,0,"\n+---[ RSA2048 ]---+");result.push("+-----------------+");return result.join("\n")}
function randomart(c){for(var a=[],e=0,d=c.length;e<d;e++)a.push("0x"+c[e]);document.getElementById("hostKeyImg").innerHTML=boardToString(generateBoard(a));document.getElementById("hostKey").style.display="inline-block"};var struct={pack:function(c,a){var e="";switch(c){case "Q":c=new BigInteger("ff",16);e+=String.fromCharCode(a.shiftRight(56).and(c));e+=String.fromCharCode(a.shiftRight(48).and(c));e+=String.fromCharCode(a.shiftRight(40).and(c));e+=String.fromCharCode(a.shiftRight(32).and(c));e+=String.fromCharCode(a.shiftRight(24).and(c));e+=String.fromCharCode(a.shiftRight(16).and(c));e+=String.fromCharCode(a.shiftRight(8).and(c));e+=String.fromCharCode(a.and(c));break;case "I":e+=String.fromCharCode(a>>>24&255),
e+=String.fromCharCode(a>>>16&255),e+=String.fromCharCode(a>>>8&255);case "B":e+=String.fromCharCode(a&255)}return e},unpack:function(c,a){var e=[],d=0,b=0;switch(c){case "Q":b=new BigInteger("0",10);b=b.add((new BigInteger(a.charCodeAt(0).toString(),10)).shiftLeft(56));b=b.add((new BigInteger(a.charCodeAt(1).toString(),10)).shiftLeft(48));b=b.add((new BigInteger(a.charCodeAt(2).toString(),10)).shiftLeft(40));b=b.add((new BigInteger(a.charCodeAt(3).toString(),10)).shiftLeft(32));b=b.add((new BigInteger(a.charCodeAt(4).toString(),
10)).shiftLeft(24));b=b.add((new BigInteger(a.charCodeAt(5).toString(),10)).shiftLeft(16));b=b.add((new BigInteger(a.charCodeAt(6).toString(),10)).shiftLeft(8));b=b.add((new BigInteger(a.charCodeAt(7).toString(),10)).shiftLeft(0));e.push(b);break;case "I":b+=a.charCodeAt(0)<<24>>>0,b+=a.charCodeAt(1)<<16>>>0,b+=a.charCodeAt(2)<<8>>>0,d+=3;case "B":b+=a.charCodeAt(0+d)<<0>>>0,e.push(b)}return e}};function inflate_long(c){var a=new BigInteger("0",10);c.length%4&&(c=Array(4-c.length%4+1).join("\x00")+c);for(var e=0;e<c.length;e+=4)a=a.shiftLeft(32),a=a.add(new BigInteger(struct.unpack("I",c.substring(e,e+4))[0].toString(),10));return a}
function deflate_long(c,a){c="number"==typeof c?new BigInteger(c.toString(),10):c.clone();a=void 0==a?!0:a;for(var e="",d=new BigInteger("-1",10),b=new BigInteger("ffffffff",16);!c.equals(BigInteger.ZERO)&&!c.equals(d);)e=struct.pack("I",c.and(b))+e,c=c.shiftRight(32);for(var b=!1,f=0;f<e.length;++f){if(c.equals(BigInteger.ZERO)&&"\x00"!=e.charAt(f)){b=!0;break}if(c.equals(d)&&"\u00ff"!=e.charAt(f)){b=!0;break}}b||(f=0,e=c.equals(BigInteger.ZERO)?"\x00":"\u00ff");e=e.substring(f);a&&(c.equals(BigInteger.ZERO)&&
128<=e.charCodeAt(0)&&(e="\x00"+e),c.equals(d)&&128>e.charCodeAt(0)&&(e="\u00ff"+e));return e}function toByteArray(c){for(var a=new Uint8Array(c.length),e=0;e<c.length;e++)a[e]=c.charCodeAt(e);return a}function fromByteArray(c){return String.fromCharCode.apply(null,new Uint8Array(c))}function bytesToWords(c){for(var a=[],e=0,d=0;e<c.length;e++,d+=8)a[d>>>5]|=(c[e]&255)<<24-d%32;return a}function wordsToBytes(c){for(var a=[],e=0;e<32*c.length;e+=8)a.push(c[e>>>5]>>>24-e%32&255);return a}
function setCharAt(c,a,e){return c.substring(0,a)+e+c.substring(a+1)}function fromUtf8(c){for(var a,e="",d=toByteArray(c),b=0;b<c.length;b++){var f=c.charCodeAt(b);if(192<=f&&223>=f)a=d[++b],f=(f&31)<<6|a&63;else if(224<=f&&239>=f){a=d[++b];var g=d[++b],f=(f&15)<<12|(a&63)<<6|g&63}else 128<=f&&(f=".");e+=String.fromCharCode(f)}return e}function read_rng(c){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(c)))}
function filter(c,a){c=c.split(",");for(var e=0;e<c.length;++e)if(-1!=a.indexOf(c[e]))return c[e]}function splitSlice(c,a){a=void 0===a?5E3:a;for(var e=[],d=0,b=c.length;d<b;d+=a)e.push(c.slice(d,a+d));return e}function modColorPercent(c,a){var e=parseInt(c.slice(1),16);c=0>a?0:255;a=0>a?-1*a:a;var d=e>>16,b=e>>8&255,e=e&255;return"#"+(16777216+65536*(Math.round((c-d)*a)+d)+256*(Math.round((c-b)*a)+b)+(Math.round((c-e)*a)+e)).toString(16).slice(1)}
function ascii2hex(c){for(var a="",e=0;e<c.length;e++)a=1==c.charCodeAt(e).toString(16).length?a+("0"+c.charCodeAt(e).toString(16)):a+(""+c.charCodeAt(e).toString(16));return a};(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=c()})(function(){return function a(e,d,b){function f(h,n){if(!d[h]){if(!e[h]){var q="function"==typeof require&&require;if(!n&&q)return q(h,!0);if(g)return g(h,!0);n=Error("Cannot find module '"+h+"'");throw n.code="MODULE_NOT_FOUND",n;}n=d[h]={exports:{}};
e[h][0].call(n.exports,function(a){var b=e[h][1][a];return f(b?b:a)},n,n.exports,a,e,d,b)}return d[h].exports}for(var g="function"==typeof require&&require,n=0;n<b.length;n++)f(b[n]);return f}({1:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});d.CHARSETS={};d.DEFAULT_CHARSET=d.CHARSETS.B;d.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",
r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};d.CHARSETS.A={"#":"\u00a3"};d.CHARSETS.B=null;d.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};d.CHARSETS.C=d.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};d.CHARSETS.R={"#":"\u00a3","@":"\u00e0",
"[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};d.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};d.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};d.CHARSETS.Y={"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};
d.CHARSETS.E=d.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};d.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};d.CHARSETS.H=d.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};d.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7",
"]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],2:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a,b,d){this.textarea=a;this.compositionView=b;this.terminal=d;this.isSendingComposition=this.isComposing=!1;this.compositionPosition={start:null,end:null}}a.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=this.textarea.value.length;this.compositionView.textContent=
"";this.compositionView.classList.add("active")};a.prototype.compositionupdate=function(a){var b=this;this.compositionView.textContent=a.data;this.updateCompositionElements();setTimeout(function(){b.compositionPosition.end=b.textarea.value.length},0)};a.prototype.compositionend=function(){this.finalizeComposition(!0)};a.prototype.keydown=function(a){if(this.isComposing||this.isSendingComposition){if(229===a.keyCode||16===a.keyCode||17===a.keyCode||18===a.keyCode)return!1;this.finalizeComposition(!1)}return 229===
a.keyCode?(this.handleAnyTextareaChanges(),!1):!0};a.prototype.finalizeComposition=function(a){var b=this;this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(a){var d=this.compositionPosition.start,h=this.compositionPosition.end;this.isSendingComposition=!0;setTimeout(function(){if(b.isSendingComposition){b.isSendingComposition=!1;var a=b.isComposing?b.textarea.value.substring(d,h):b.textarea.value.substring(d);b.terminal.handler(a)}},0)}else this.isSendingComposition=
!1,a=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(a)};a.prototype.handleAnyTextareaChanges=function(){var a=this,b=this.textarea.value;setTimeout(function(){if(!a.isComposing){var d=a.textarea.value.replace(b,"");0<d.length&&a.terminal.handler(d)}},0)};a.prototype.updateCompositionElements=function(a){var b=this;if(this.isComposing){var d=this.terminal.element.querySelector(".terminal-cursor");if(d){var h=this.terminal.element.querySelector(".xterm-rows").offsetTop+
d.offsetTop;this.compositionView.style.left=d.offsetLeft+"px";this.compositionView.style.top=h+"px";this.compositionView.style.height=d.offsetHeight+"px";this.compositionView.style.lineHeight=d.offsetHeight+"px";var f=this.compositionView.getBoundingClientRect();this.textarea.style.left=d.offsetLeft+"px";this.textarea.style.top=h+"px";this.textarea.style.width=f.width+"px";this.textarea.style.height=f.height+"px";this.textarea.style.lineHeight=f.height+"px"}a||setTimeout(function(){return b.updateCompositionElements(!0)},
0)}};a.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""};return a}();d.CompositionHelper=a},{}],3:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=d.C0||(d.C0={});a.NUL="\x00";a.SOH="\u0001";a.STX="\u0002";a.ETX="\u0003";a.EOT="\u0004";a.ENQ="\u0005";a.ACK="\u0006";a.BEL="\u0007";a.BS="\b";a.HT="\t";a.LF="\n";a.VT="\x0B";a.FF="\f";a.CR="\r";a.SO="\u000e";a.SI="\u000f";a.DLE="\u0010";a.DC1="\u0011";a.DC2="\u0012";a.DC3="\u0013";a.DC4=
"\u0014";a.NAK="\u0015";a.SYN="\u0016";a.ETB="\u0017";a.CAN="\u0018";a.EM="\u0019";a.SUB="\u001a";a.ESC="\u001b";a.FS="\u001c";a.GS="\u001d";a.RS="\u001e";a.US="\u001f";a.SP=" ";a.DEL="\u007f"},{}],4:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(){this._events=this._events||{}}a.prototype.on=function(a,b){this._events[a]=this._events[a]||[];this._events[a].push(b)};a.prototype.off=function(a,b){if(this._events[a]){a=this._events[a];for(var d=a.length;d--;)if(a[d]===
b||a[d].listener===b){a.splice(d,1);break}}};a.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]};a.prototype.once=function(a,b){function d(){var h=Array.prototype.slice.call(arguments);this.off(a,d);return b.apply(this,h)}d.listener=b;return this.on(a,d)};a.prototype.emit=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(this._events[a])for(var d=this._events[a],h=0;h<d.length;h++)d[h].apply(this,b)};a.prototype.listeners=function(a){return this._events[a]||
[]};return a}();d.EventEmitter=a},{}],5:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});var b=a("./EscapeSequences"),f=a("./Charsets");a=function(){function a(a){this._terminal=a}a.prototype.addChar=function(a,b){if(" "<=a){b=g(b);this._terminal.charset&&this._terminal.charset[a]&&(a=this._terminal.charset[a]);var d=this._terminal.y+this._terminal.ybase;if(!b&&this._terminal.x)this._terminal.lines.get(d)[this._terminal.x-1]&&(this._terminal.lines.get(d)[this._terminal.x-1][2]?this._terminal.lines.get(d)[this._terminal.x-
1][1]+=a:this._terminal.lines.get(d)[this._terminal.x-2]&&(this._terminal.lines.get(d)[this._terminal.x-2][1]+=a),this._terminal.updateRange(this._terminal.y));else{if(this._terminal.x+b-1>=this._terminal.cols)if(this._terminal.wraparoundMode)this._terminal.x=0,this._terminal.y++,this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll(!0));else if(2===b)return;d=this._terminal.y+this._terminal.ybase;if(this._terminal.insertMode)for(var h=0;h<b;++h)0===this._terminal.lines.get(this._terminal.y+
this._terminal.ybase).pop()[2]&&this._terminal.lines.get(d)[this._terminal.cols-2]&&2===this._terminal.lines.get(d)[this._terminal.cols-2][2]&&(this._terminal.lines.get(d)[this._terminal.cols-2]=[this._terminal.curAttr," ",1]),this._terminal.lines.get(d).splice(this._terminal.x,0,[this._terminal.curAttr," ",1]);this._terminal.lines.get(d)[this._terminal.x]=[this._terminal.curAttr,a,b];this._terminal.x++;this._terminal.updateRange(this._terminal.y);2===b&&(this._terminal.lines.get(d)[this._terminal.x]=
[this._terminal.curAttr,"",0],this._terminal.x++)}}};a.prototype.bell=function(){var a=this;this._terminal.visualBell&&(this._terminal.element.style.borderColor="white",setTimeout(function(){return a._terminal.element.style.borderColor=""},10),this._terminal.popOnBell&&this._terminal.focus())};a.prototype.lineFeed=function(){this._terminal.convertEol&&(this._terminal.x=0);this._terminal.y++;this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll());this._terminal.x>=
this._terminal.cols&&this._terminal.x--};a.prototype.carriageReturn=function(){this._terminal.x=0};a.prototype.backspace=function(){0<this._terminal.x&&this._terminal.x--};a.prototype.tab=function(){this._terminal.x=this._terminal.nextStop()};a.prototype.shiftOut=function(){this._terminal.setgLevel(1)};a.prototype.shiftIn=function(){this._terminal.setgLevel(0)};a.prototype.insertChars=function(a){var b;a=a[0];1>a&&(a=1);var d=this._terminal.y+this._terminal.ybase;var h=this._terminal.x;for(b=[this._terminal.eraseAttr(),
" ",1];a--&&h<this._terminal.cols;)this._terminal.lines.get(d).splice(h++,0,b),this._terminal.lines.get(d).pop()};a.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this._terminal.y-=a;0>this._terminal.y&&(this._terminal.y=0)};a.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=this._terminal.cols&&this._terminal.x--};a.prototype.cursorForward=function(a){a=a[0];1>a&&(a=1);this._terminal.x+=
a;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};a.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this._terminal.x>=this._terminal.cols&&this._terminal.x--;this._terminal.x-=a;0>this._terminal.x&&(this._terminal.x=0)};a.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=0};a.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this._terminal.y-=
a;0>this._terminal.y&&(this._terminal.y=0);this._terminal.x=0};a.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.x=a-1};a.prototype.cursorPosition=function(a){var b=a[0]-1;a=2<=a.length?a[1]-1:0;0>b?b=0:b>=this._terminal.rows&&(b=this._terminal.rows-1);0>a?a=0:a>=this._terminal.cols&&(a=this._terminal.cols-1);this._terminal.x=a;this._terminal.y=b};a.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.x=this._terminal.nextStop()};a.prototype.eraseInDisplay=
function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);for(a=this._terminal.y+1;a<this._terminal.rows;a++)this._terminal.eraseLine(a);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);for(a=this._terminal.y;a--;)this._terminal.eraseLine(a);break;case 2:for(a=this._terminal.rows;a--;)this._terminal.eraseLine(a);break;case 3:a=this._terminal.lines.length-this._terminal.rows,0<a&&(this._terminal.lines.trimStart(a),this._terminal.ybase=Math.max(this._terminal.ybase-
a,0),this._terminal.ydisp=Math.max(this._terminal.ydisp-a,0))}};a.prototype.eraseInLine=function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);break;case 2:this._terminal.eraseLine(this._terminal.y)}};a.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;var d=this._terminal.rows-1-this._terminal.scrollBottom;for(d=this._terminal.rows-1+this._terminal.ybase-
d+1;a--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),this._terminal.ybase--,this._terminal.ydisp--,b--,d--),this._terminal.lines.splice(b,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(d,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};a.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;var d=this._terminal.rows-1-this._terminal.scrollBottom;
for(d=this._terminal.rows-1+this._terminal.ybase-d;a--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),--this._terminal.ybase,--this._terminal.ydisp),this._terminal.lines.splice(d+1,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(b,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};a.prototype.deleteChars=function(a){var b;a=a[0];1>a&&(a=1);var d=this._terminal.y+this._terminal.ybase;
for(b=[this._terminal.eraseAttr()," ",1];a--;)this._terminal.lines.get(d).splice(this._terminal.x,1),this._terminal.lines.get(d).push(b)};a.prototype.scrollUp=function(a){for(a=a[0]||1;a--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};a.prototype.scrollDown=
function(a){for(a=a[0]||1;a--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};a.prototype.eraseChars=function(a){var b;a=a[0];1>a&&(a=1);var d=this._terminal.y+this._terminal.ybase;var h=this._terminal.x;for(b=[this._terminal.eraseAttr()," ",1];a--&&h<this._terminal.cols;)this._terminal.lines.get(d)[h++]=
b};a.prototype.cursorBackwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.x=this._terminal.prevStop()};a.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.x=a-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};a.prototype.HPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.x+=a;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};a.prototype.repeatPrecedingCharacter=function(a){a=a[0]||1;for(var b=this._terminal.lines.get(this._terminal.ybase+
this._terminal.y),d=b[this._terminal.x-1]||[this._terminal.defAttr," ",1];a--;)b[this._terminal.x++]=d};a.prototype.sendDeviceAttributes=function(a){0<a[0]||(this._terminal.prefix?">"===this._terminal.prefix&&(this._terminal.is("xterm")?this._terminal.send(b.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.send(b.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.send(a[0]+"c"):this._terminal.is("screen")&&this._terminal.send(b.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||
this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.send(b.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.send(b.C0.ESC+"[?6c"))};a.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.y=a-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1)};a.prototype.VPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=
this._terminal.cols&&this._terminal.x--};a.prototype.HVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this._terminal.y=a[0]-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=a[1]-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};a.prototype.tabClear=function(a){a=a[0];0>=a?delete this._terminal.tabs[this._terminal.x]:3===a&&(this._terminal.tabs={})};a.prototype.setMode=function(a){if(1<a.length)for(var b=0;b<
a.length;b++)this.setMode([a[b]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!0}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=!0;break;case 2:this._terminal.setgCharset(0,f.DEFAULT_CHARSET);this._terminal.setgCharset(1,f.DEFAULT_CHARSET);this._terminal.setgCharset(2,f.DEFAULT_CHARSET);this._terminal.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);
break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===a[0];this._terminal.vt200Mouse=1E3===a[0];this._terminal.normalMouse=1E3<a[0];this._terminal.mouseEvents=!0;this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager.disable();
this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.normal||(a={lines:this._terminal.lines,ybase:this._terminal.ybase,ydisp:this._terminal.ydisp,x:this._terminal.x,y:this._terminal.y,scrollTop:this._terminal.scrollTop,scrollBottom:this._terminal.scrollBottom,
tabs:this._terminal.tabs},this._terminal.reset(),this._terminal.viewport.syncScrollArea(),this._terminal.normal=a,this._terminal.showCursor())}};a.prototype.resetMode=function(a){if(1<a.length)for(var b=0;b<a.length;b++)this.resetMode([a[b]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!1}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,
this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element.classList.remove("enable-mouse-events");
this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.normal&&(this._terminal.lines=this._terminal.normal.lines,this._terminal.ybase=this._terminal.normal.ybase,this._terminal.ydisp=this._terminal.normal.ydisp,this._terminal.x=this._terminal.normal.x,
this._terminal.y=this._terminal.normal.y,this._terminal.scrollTop=this._terminal.normal.scrollTop,this._terminal.scrollBottom=this._terminal.normal.scrollBottom,this._terminal.tabs=this._terminal.normal.tabs,this._terminal.normal=null,this._terminal.selectionManager.setBuffer(this._terminal.lines),this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport.syncScrollArea(),this._terminal.showCursor())}};a.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])this._terminal.curAttr=
this._terminal.defAttr;else{for(var b=a.length,d=0,e=this._terminal.curAttr>>18,l=this._terminal.curAttr>>9&511,f=this._terminal.curAttr&511,g;d<b;d++)g=a[d],30<=g&&37>=g?l=g-30:40<=g&&47>=g?f=g-40:90<=g&&97>=g?(g+=8,l=g-90):100<=g&&107>=g?(g+=8,f=g-100):0===g?(e=this._terminal.defAttr>>18,l=this._terminal.defAttr>>9&511,f=this._terminal.defAttr&511):1===g?e|=1:4===g?e|=2:5===g?e|=4:7===g?e|=8:8===g?e|=16:22===g?e&=-2:24===g?e&=-3:25===g?e&=-5:27===g?e&=-9:28===g?e&=-17:39===g?l=this._terminal.defAttr>>
9&511:49===g?f=this._terminal.defAttr&511:38===g?2===a[d+1]?(d+=2,l=this._terminal.matchColor(a[d]&255,a[d+1]&255,a[d+2]&255),-1===l&&(l=511),d+=2):5===a[d+1]&&(d+=2,l=g=a[d]&255):48===g?2===a[d+1]?(d+=2,f=this._terminal.matchColor(a[d]&255,a[d+1]&255,a[d+2]&255),-1===f&&(f=511),d+=2):5===a[d+1]&&(d+=2,f=g=a[d]&255):100===g?(l=this._terminal.defAttr>>9&511,f=this._terminal.defAttr&511):this._terminal.error("Unknown SGR attribute: %d.",g);this._terminal.curAttr=e<<18|l<<9|f}};a.prototype.deviceStatus=
function(a){if(!this._terminal.prefix)switch(a[0]){case 5:this._terminal.send(b.C0.ESC+"[0n");break;case 6:this._terminal.send(b.C0.ESC+"["+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}else if("?"===this._terminal.prefix)switch(a[0]){case 6:this._terminal.send(b.C0.ESC+"[?"+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}};a.prototype.softReset=function(a){this._terminal.cursorHidden=!1;this._terminal.insertMode=!1;this._terminal.originMode=!1;this._terminal.wraparoundMode=!0;this._terminal.applicationKeypad=
!1;this._terminal.viewport.syncScrollArea();this._terminal.applicationCursor=!1;this._terminal.scrollTop=0;this._terminal.scrollBottom=this._terminal.rows-1;this._terminal.curAttr=this._terminal.defAttr;this._terminal.x=this._terminal.y=0;this._terminal.charset=null;this._terminal.glevel=0;this._terminal.charsets=[null]};a.prototype.setCursorStyle=function(a){a=1>a[0]?1:a[0];switch(a){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle",
"underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",1===a%2)};a.prototype.setScrollRegion=function(a){this._terminal.prefix||(this._terminal.scrollTop=(a[0]||1)-1,this._terminal.scrollBottom=(a[1]&&a[1]<=this._terminal.rows?a[1]:this._terminal.rows)-1,this._terminal.x=0,this._terminal.y=0)};a.prototype.saveCursor=function(a){this._terminal.savedX=this._terminal.x;this._terminal.savedY=this._terminal.y};a.prototype.restoreCursor=function(a){this._terminal.x=
this._terminal.savedX||0;this._terminal.y=this._terminal.savedY||0};return a}();d.InputHandler=a;var g=function(a){var b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],
[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],
[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],
[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(d){if(0===d)return a.nul;if(32>d||127<=d&&160>d)return a.control;a:{var e=0;var f=b.length-1;if(!(d<b[0][0]||d>
b[f][1]))for(;f>=e;){var l=Math.floor((e+f)/2);if(d>b[l][1])e=l+1;else if(d<b[l][0])f=l-1;else{e=!0;break a}}e=!1}return e?0:4352<=d&&(4447>=d||9001===d||9002===d||11904<=d&&42191>=d&&12351!==d||44032<=d&&55203>=d||63744<=d&&64255>=d||65040<=d&&65049>=d||65072<=d&&65135>=d||65280<=d&&65376>=d||65504<=d&&65510>=d||131072<=d&&196605>=d||196608<=d&&262141>=d)?2:1}}({nul:0,control:0})},{"./Charsets":1,"./EscapeSequences":3}],6:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});var b=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?(\/[\/\w\.\-%~]*)*(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;
a=function(){function a(){this._nextLinkMatcherId=0;this._rowTimeoutIds=[];this._linkMatchers=[];this.registerLinkMatcher(b,null,{matchIndex:1})}a.prototype.attachToDom=function(a,b){this._document=a;this._rows=b};a.prototype.linkifyRow=function(b){if(this._document){var d=this._rowTimeoutIds[b];d&&clearTimeout(d);this._rowTimeoutIds[b]=setTimeout(this._linkifyRow.bind(this,b),a.TIME_BEFORE_LINKIFY)}};a.prototype.setHypertextLinkHandler=function(a){this._linkMatchers[0].handler=a};a.prototype.setHypertextValidationCallback=
function(a){this._linkMatchers[0].validationCallback=a};a.prototype.registerLinkMatcher=function(a,b,d){void 0===d&&(d={});if(0!==this._nextLinkMatcherId&&!b)throw Error("handler must be defined");a={id:this._nextLinkMatcherId++,regex:a,handler:b,matchIndex:d.matchIndex,validationCallback:d.validationCallback,priority:d.priority||0};this._addLinkMatcherToList(a);return a.id};a.prototype._addLinkMatcherToList=function(a){if(0===this._linkMatchers.length)this._linkMatchers.push(a);else{for(var b=this._linkMatchers.length-
1;0<=b;b--)if(a.priority<=this._linkMatchers[b].priority){this._linkMatchers.splice(b+1,0,a);return}this._linkMatchers.splice(0,0,a)}};a.prototype.deregisterLinkMatcher=function(a){for(var b=1;b<this._linkMatchers.length;b++)if(this._linkMatchers[b].id===a)return this._linkMatchers.splice(b,1),!0;return!1};a.prototype._linkifyRow=function(a){if(a=this._rows[a])for(var b=0;b<this._linkMatchers.length;b++){var d=this._linkMatchers[b],e=this._doLinkifyRow(a,d);if(0<e.length){if(d.validationCallback)for(a=
function(a){var b=e[a];d.validationCallback(b.textContent,b,function(a){a||b.classList.add("xterm-invalid-link")})},b=0;b<e.length;b++)a(b);break}}};a.prototype._doLinkifyRow=function(a,b){var d=[],e=0===b.id,f=a.childNodes,g=a.textContent.match(b.regex);if(!g||0===g.length)return d;for(var l=g["number"!==typeof b.matchIndex?0:b.matchIndex],n=g.index+l.length,v=0;v<f.length;v++){var m=f[v],A=m.textContent.indexOf(l);if(0<=A){g=this._createAnchorElement(l,b.handler,e);if(m.textContent.length===l.length)if(3===
m.nodeType)this._replaceNode(m,g);else{l=m;if("A"===l.nodeName)break;l.innerHTML="";l.appendChild(g)}else if(1<m.childNodes.length)for(A=0;A<m.childNodes.length;A++){var u=m.childNodes[A],x=u.textContent.indexOf(l);if(-1!==x){this._replaceNodeSubstringWithNode(u,g,l,x);break}}else l=this._replaceNodeSubstringWithNode(m,g,l,A),v+=l;d.push(g);g=a.textContent.substring(n).match(b.regex);if(!g||0===g.length)break;l=g["number"!==typeof b.matchIndex?0:b.matchIndex];n+=g.index+l.length}}return d};a.prototype._createAnchorElement=
function(a,b,d){var e=this._document.createElement("a");e.textContent=a;e.draggable=!1;d?(e.href=a,e.target="_blank",e.addEventListener("click",function(d){if(b)return b(d,a)})):e.addEventListener("click",function(d){if(!e.classList.contains("xterm-invalid-link"))return b(d,a)});return e};a.prototype._replaceNode=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];for(var d=a.parentNode,e=0;e<b.length;e++)d.insertBefore(b[e],a);d.removeChild(a)};a.prototype._replaceNodeSubstringWithNode=
function(a,b,d,e){1===a.childNodes.length&&(a=a.childNodes[0]);if(3!==a.nodeType)throw Error("targetNode must be a text node or only contain a single text node");var f=a.textContent;if(0===e){var g=f.substring(d.length),g=this._document.createTextNode(g);this._replaceNode(a,b,g);return 0}if(e===a.textContent.length-d.length)return g=f.substring(0,e),g=this._document.createTextNode(g),this._replaceNode(a,g,b),0;g=f.substring(0,e);g=this._document.createTextNode(g);d=f.substring(e+d.length);d=this._document.createTextNode(d);
this._replaceNode(a,g,b,d);return 1};return a}();a.TIME_BEFORE_LINKIFY=200;d.Linkifier=a},{}],7:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});var b=a("./EscapeSequences"),f=a("./Charsets"),g={};g[b.C0.BEL]=function(a,b){return b.bell()};g[b.C0.LF]=function(a,b){return b.lineFeed()};g[b.C0.VT]=g[b.C0.LF];g[b.C0.FF]=g[b.C0.LF];g[b.C0.CR]=function(a,b){return b.carriageReturn()};g[b.C0.BS]=function(a,b){return b.backspace()};g[b.C0.HT]=function(a,b){return b.tab()};g[b.C0.SO]=function(a,
b){return b.shiftOut()};g[b.C0.SI]=function(a,b){return b.shiftIn()};g[b.C0.ESC]=function(a,b){return a.setState(p.ESCAPED)};var n={"[":function(a,b){b.params=[];b.currentParam=0;a.setState(p.CSI_PARAM)},"]":function(a,b){b.params=[];b.currentParam=0;a.setState(p.OSC)},P:function(a,b){b.params=[];b.currentParam=0;a.setState(p.DCS)},_:function(a,b){a.setState(p.IGNORE)},"^":function(a,b){a.setState(p.IGNORE)},c:function(a,b){b.reset()},E:function(a,b){b.x=0;b.index();a.setState(p.NORMAL)},D:function(a,
b){b.index();a.setState(p.NORMAL)},M:function(a,b){b.reverseIndex();a.setState(p.NORMAL)},"%":function(a,b){b.setgLevel(0);b.setgCharset(0,f.DEFAULT_CHARSET);a.setState(p.NORMAL);a.skipNextChar()}};n[b.C0.CAN]=function(a){return a.setState(p.NORMAL)};var h={"?":function(a){return a.setPrefix("?")},">":function(a){return a.setPrefix(">")},"!":function(a){return a.setPrefix("!")},0:function(a){return a.setParam(10*a.getParam())},1:function(a){return a.setParam(10*a.getParam()+1)},2:function(a){return a.setParam(10*
a.getParam()+2)},3:function(a){return a.setParam(10*a.getParam()+3)},4:function(a){return a.setParam(10*a.getParam()+4)},5:function(a){return a.setParam(10*a.getParam()+5)},6:function(a){return a.setParam(10*a.getParam()+6)},7:function(a){return a.setParam(10*a.getParam()+7)},8:function(a){return a.setParam(10*a.getParam()+8)},9:function(a){return a.setParam(10*a.getParam()+9)},$:function(a){return a.setPostfix("$")},'"':function(a){return a.setPostfix('"')}," ":function(a){return a.setPostfix(" ")},
"'":function(a){return a.setPostfix("'")},";":function(a){return a.finalizeParam()}};h[b.C0.CAN]=function(a){return a.setState(p.NORMAL)};var q={"@":function(a,b,d){return a.insertChars(b)},A:function(a,b,d){return a.cursorUp(b)},B:function(a,b,d){return a.cursorDown(b)},C:function(a,b,d){return a.cursorForward(b)},D:function(a,b,d){return a.cursorBackward(b)},E:function(a,b,d){return a.cursorNextLine(b)},F:function(a,b,d){return a.cursorPrecedingLine(b)},G:function(a,b,d){return a.cursorCharAbsolute(b)},
H:function(a,b,d){return a.cursorPosition(b)},I:function(a,b,d){return a.cursorForwardTab(b)},J:function(a,b,d){return a.eraseInDisplay(b)},K:function(a,b,d){return a.eraseInLine(b)},L:function(a,b,d){return a.insertLines(b)},M:function(a,b,d){return a.deleteLines(b)},P:function(a,b,d){return a.deleteChars(b)},S:function(a,b,d){return a.scrollUp(b)},T:function(a,b,d){2>b.length&&!d&&a.scrollDown(b)},X:function(a,b,d){return a.eraseChars(b)},Z:function(a,b,d){return a.cursorBackwardTab(b)},"`":function(a,
b,d){return a.charPosAbsolute(b)},a:function(a,b,d){return a.HPositionRelative(b)},b:function(a,b,d){return a.repeatPrecedingCharacter(b)},c:function(a,b,d){return a.sendDeviceAttributes(b)},d:function(a,b,d){return a.linePosAbsolute(b)},e:function(a,b,d){return a.VPositionRelative(b)},f:function(a,b,d){return a.HVPosition(b)},g:function(a,b,d){return a.tabClear(b)},h:function(a,b,d){return a.setMode(b)},l:function(a,b,d){return a.resetMode(b)},m:function(a,b,d){return a.charAttributes(b)},n:function(a,
b,d){return a.deviceStatus(b)},p:function(a,b,d){switch(d){case "!":a.softReset(b)}},q:function(a,b,d,e){" "===e&&a.setCursorStyle(b)},r:function(a,b){return a.setScrollRegion(b)},s:function(a,b){return a.saveCursor(b)},u:function(a,b){return a.restoreCursor(b)}};q[b.C0.CAN]=function(a,b,d,e,f){return f.setState(p.NORMAL)};var p;(function(a){a[a.NORMAL=0]="NORMAL";a[a.ESCAPED=1]="ESCAPED";a[a.CSI_PARAM=2]="CSI_PARAM";a[a.CSI=3]="CSI";a[a.OSC=4]="OSC";a[a.CHARSET=5]="CHARSET";a[a.DCS=6]="DCS";a[a.IGNORE=
7]="IGNORE"})(p||(p={}));a=function(){function a(a,b){this._inputHandler=a;this._terminal=b;this._state=p.NORMAL}a.prototype.parse=function(a){var d=a.length;this._position=0;this._terminal.surrogate_high&&(a=this._terminal.surrogate_high+a,this._terminal.surrogate_high="");for(;this._position<d;this._position++){var e=a[this._position];var l=a.charCodeAt(this._position);if(55296<=l&&56319>=l){var r=a.charCodeAt(this._position+1);if(isNaN(r)){this._terminal.surrogate_high=e;continue}l=1024*(l-55296)+
(r-56320)+65536;e+=a.charAt(this._position+1)}if(!(56320<=l&&57343>=l))switch(this._state){case p.NORMAL:if(e in g)g[e](this,this._inputHandler);else this._inputHandler.addChar(e,l);break;case p.ESCAPED:if(e in n){n[e](this,this._terminal);break}switch(e){case "(":case ")":case "*":case "+":case "-":case ".":switch(e){case "(":this._terminal.gcharset=0;break;case ")":this._terminal.gcharset=1;break;case "*":this._terminal.gcharset=2;break;case "+":this._terminal.gcharset=3;break;case "-":this._terminal.gcharset=
1;break;case ".":this._terminal.gcharset=2}this._state=p.CHARSET;break;case "/":this._terminal.gcharset=3;this._state=p.CHARSET;this._position--;break;case "N":break;case "O":break;case "n":this._terminal.setgLevel(2);break;case "o":this._terminal.setgLevel(3);break;case "|":this._terminal.setgLevel(3);break;case "}":this._terminal.setgLevel(2);break;case "~":this._terminal.setgLevel(1);break;case "7":this._inputHandler.saveCursor();this._state=p.NORMAL;break;case "8":this._inputHandler.restoreCursor();
this._state=p.NORMAL;break;case "#":this._state=p.NORMAL;this._position++;break;case "H":this._terminal.tabSet();this._state=p.NORMAL;break;case "=":this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();this._state=p.NORMAL;break;case ">":this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._state=p.NORMAL;break;default:this._state=
p.NORMAL,this._terminal.error("Unknown ESC control: %s.",e)}break;case p.CHARSET:e in f.CHARSETS?(l=f.CHARSETS[e],"/"===e&&this.skipNextChar()):l=f.DEFAULT_CHARSET;this._terminal.setgCharset(this._terminal.gcharset,l);this._terminal.gcharset=null;this._state=p.NORMAL;break;case p.OSC:if(e===b.C0.ESC||e===b.C0.BEL){e===b.C0.ESC&&this._position++;this._terminal.params.push(this._terminal.currentParam);switch(this._terminal.params[0]){case 0:case 1:case 2:this._terminal.params[1]&&(this._terminal.title=
this._terminal.params[1],this._terminal.handleTitle(this._terminal.title))}this._terminal.params=[];this._terminal.currentParam=0;this._state=p.NORMAL}else this._terminal.params.length?this._terminal.currentParam+=e:"0"<=e&&"9">=e?this._terminal.currentParam=10*this._terminal.currentParam+e.charCodeAt(0)-48:";"===e&&(this._terminal.params.push(this._terminal.currentParam),this._terminal.currentParam="");break;case p.CSI_PARAM:if(e in h){h[e](this);break}this.finalizeParam();this._state=p.CSI;case p.CSI:if(e in
q)q[e](this._inputHandler,this._terminal.params,this._terminal.prefix,this._terminal.postfix,this);else this._terminal.error("Unknown CSI code: %s.",e);this._state=p.NORMAL;this._terminal.prefix="";this._terminal.postfix="";break;case p.DCS:if(e===b.C0.ESC||e===b.C0.BEL){e===b.C0.ESC&&this._position++;switch(this._terminal.prefix){case "":break;case "$q":e=this._terminal.currentParam;l=!1;switch(e){case '"q':e='0"q';break;case '"p':e='61"p';break;case "r":e=""+(this._terminal.scrollTop+1)+";"+(this._terminal.scrollBottom+
1)+"r";break;case "m":e="0m";break;default:this._terminal.error("Unknown DCS Pt: %s.",e),e=""}this._terminal.send(b.C0.ESC+"P"+ +l+"$r"+e+b.C0.ESC+"\\");break;case "+p":break;case "+q":e=this._terminal.currentParam;l=!1;this._terminal.send(b.C0.ESC+"P"+ +l+"+r"+e+b.C0.ESC+"\\");break;default:this._terminal.error("Unknown DCS prefix: %s.",this._terminal.prefix)}this._terminal.currentParam=0;this._terminal.prefix="";this._state=p.NORMAL}else this._terminal.currentParam?this._terminal.currentParam+=
e:this._terminal.prefix||"$"===e||"+"===e?2===this._terminal.prefix.length?this._terminal.currentParam=e:this._terminal.prefix+=e:this._terminal.currentParam=e;break;case p.IGNORE:if(e===b.C0.ESC||e===b.C0.BEL)e===b.C0.ESC&&this._position++,this._state=p.NORMAL}}return this._state};a.prototype.setState=function(a){this._state=a};a.prototype.setPrefix=function(a){this._terminal.prefix=a};a.prototype.setPostfix=function(a){this._terminal.postfix=a};a.prototype.setParam=function(a){this._terminal.currentParam=
a};a.prototype.getParam=function(){return this._terminal.currentParam};a.prototype.finalizeParam=function(){this._terminal.params.push(this._terminal.currentParam);this._terminal.currentParam=0};a.prototype.skipNextChar=function(){this._position++};return a}();d.Parser=a},{"./Charsets":1,"./EscapeSequences":3}],8:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});var b=a("./utils/DomElementObjectPool"),f;(function(a){a[a.BOLD=1]="BOLD";a[a.UNDERLINE=2]="UNDERLINE";a[a.BLINK=4]="BLINK";
a[a.INVERSE=8]="INVERSE";a[a.INVISIBLE=16]="INVISIBLE"})(f||(f={}));var g=null;a=function(){function a(a){this._terminal=a;this._refreshRowsQueue=[];this._refreshFramesSkipped=0;this._refreshAnimationFrame=null;this._spanElementObjectPool=new b.DomElementObjectPool("span");if(null===g){a=this._terminal.element;var d=a.ownerDocument.createElement("span");d.innerHTML="hello world";a.appendChild(d);var e=d.offsetWidth,f=d.offsetHeight;d.style.fontWeight="bold";var h=d.offsetWidth,n=d.offsetHeight;a.removeChild(d);
g=e!==h||f!==n}this._spanElementObjectPool=new b.DomElementObjectPool("span")}a.prototype.queueRefresh=function(a,b){this._refreshRowsQueue.push({start:a,end:b});this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this)))};a.prototype._refreshLoop=function(){if(0<this._terminal.writeBuffer.length&&5>=this._refreshFramesSkipped++)this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this));else{this._refreshFramesSkipped=
0;if(4<this._refreshRowsQueue.length){var a=0;var b=this._terminal.rows-1}else{a=this._refreshRowsQueue[0].start;b=this._refreshRowsQueue[0].end;for(var d=1;d<this._refreshRowsQueue.length;d++)this._refreshRowsQueue[d].start<a&&(a=this._refreshRowsQueue[d].start),this._refreshRowsQueue[d].end>b&&(b=this._refreshRowsQueue[d].end)}this._refreshRowsQueue=[];this._refreshAnimationFrame=null;this._refresh(a,b)}};a.prototype._refresh=function(a,b){var d;b-a>=this._terminal.rows/2&&(d=this._terminal.element.parentNode)&&
this._terminal.element.removeChild(this._terminal.rowContainer);var e=this._terminal.cols,h=a;b>=this._terminal.rows&&(this._terminal.log("`end` is too large. Most likely a bad CSR."),b=this._terminal.rows-1);for(;h<=b;h++){var n=this._terminal.lines.get(h+this._terminal.ydisp);var q=this._terminal.y===h-(this._terminal.ybase-this._terminal.ydisp)&&this._terminal.cursorState&&!this._terminal.cursorHidden?this._terminal.x:-1;for(var m=this._terminal.defAttr,A=document.createDocumentFragment(),u="",
x=void 0;this._terminal.children[h].children.length;){var B=this._terminal.children[h].children[0];this._terminal.children[h].removeChild(B);this._spanElementObjectPool.release(B)}for(B=0;B<e;B++){var z=n[B][0],D=n[B][1],C=n[B][2];if(C){B===q&&(z=-1);if(z!==m&&(m!==this._terminal.defAttr&&(u&&(x.innerHTML=u,u=""),A.appendChild(x),x=null),z!==this._terminal.defAttr))if(u&&!x&&(x=this._spanElementObjectPool.acquire()),x&&(u&&(x.innerHTML=u,u=""),A.appendChild(x)),x=this._spanElementObjectPool.acquire(),
-1===z)x.classList.add("reverse-video"),x.classList.add("terminal-cursor");else{var m=z&511,w=z>>9&511,y=z>>18;y&f.BOLD&&(g||x.classList.add("xterm-bold"),8>w&&(w+=8));y&f.UNDERLINE&&x.classList.add("xterm-underline");y&f.BLINK&&x.classList.add("xterm-blink");if(y&f.INVERSE){var k=m,m=w,w=k;y&1&&8>w&&(w+=8)}y&f.INVISIBLE&&x.classList.add("xterm-hidden");y&f.INVERSE&&(257===m&&(m=15),256===w&&(w=0));256>m&&x.classList.add("xterm-bg-color-"+m);256>w&&x.classList.add("xterm-color-"+w)}if(2===C)u+='<span class="xterm-wide-char">'+
D+"</span>";else if(255<D.charCodeAt(0))u+='<span class="xterm-normal-char">'+D+"</span>";else switch(D){case "&":u+="&amp;";break;case "<":u+="&lt;";break;case ">":u+="&gt;";break;default:u=" ">=D?u+"&nbsp;":u+D}m=z}}u&&!x&&(x=this._spanElementObjectPool.acquire());x&&(u&&(x.innerHTML=u),A.appendChild(x));this._terminal.children[h].appendChild(A)}d&&this._terminal.element.appendChild(this._terminal.rowContainer);this._terminal.emit("refresh",{element:this._terminal.element,start:a,end:b})};a.prototype.refreshSelection=
function(a,b){for(;this._terminal.selectionContainer.children.length;)this._terminal.selectionContainer.removeChild(this._terminal.selectionContainer.children[0]);if(a&&b){var d=a[1]-this._terminal.ydisp,e=b[1]-this._terminal.ydisp,f=Math.max(d,0),g=Math.min(e,this._terminal.rows-1);if(!(f>=this._terminal.rows||0>g)){var h=document.createDocumentFragment();h.appendChild(this._createSelectionElement(f,d===f?a[0]:0,f===g?b[0]:this._terminal.cols));h.appendChild(this._createSelectionElement(f+1,0,this._terminal.cols,
g-f-1));f!==g&&h.appendChild(this._createSelectionElement(g,0,e===g?b[0]:this._terminal.cols));this._terminal.selectionContainer.appendChild(h)}}};a.prototype._createSelectionElement=function(a,b,d,e){void 0===e&&(e=1);var f=document.createElement("div");f.style.height=e*this._terminal.charMeasure.height+"px";f.style.top=a*this._terminal.charMeasure.height+"px";f.style.left=b*this._terminal.charMeasure.width+"px";f.style.width=this._terminal.charMeasure.width*(d-b)+"px";return f};return a}();d.Renderer=
a},{"./utils/DomElementObjectPool":16}],9:[function(a,e,d){var b=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return function(b,d){function e(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)}}();Object.defineProperty(d,"__esModule",{value:!0});var f=a("./utils/Mouse"),g=a("./utils/Browser");e=a("./EventEmitter");
var n=a("./SelectionModel");a=String.fromCharCode(160);var h=new RegExp(a,"g"),q;(function(a){a[a.NORMAL=0]="NORMAL";a[a.WORD=1]="WORD";a[a.LINE=2]="LINE"})(q||(q={}));a=function(a){function d(b,d,e,f){var g=a.call(this)||this;g._terminal=b;g._buffer=d;g._rowContainer=e;g._charMeasure=f;g._initListeners();g.enable();g._model=new n.SelectionModel(b);g._lastMouseDownTime=0;g._activeSelectionMode=q.NORMAL;return g}b(d,a);d.prototype._initListeners=function(){var a=this;this._bufferTrimListener=function(b){return a._onTrim(b)};
this._mouseMoveListener=function(b){return a._onMouseMove(b)};this._mouseDownListener=function(b){return a._onMouseDown(b)};this._mouseUpListener=function(b){return a._onMouseUp(b)}};d.prototype.disable=function(){this.clearSelection();this._buffer.off("trim",this._bufferTrimListener);this._rowContainer.removeEventListener("mousedown",this._mouseDownListener)};d.prototype.enable=function(){this._buffer.on("trim",this._bufferTrimListener);this._rowContainer.addEventListener("mousedown",this._mouseDownListener)};
d.prototype.setBuffer=function(a){this._buffer=a;this.clearSelection()};Object.defineProperty(d.prototype,"hasSelection",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return a&&b?a[0]!==b[0]||a[1]!==b[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"selectionText",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!a||!b)return"";var d=a[1]===b[1]?b[0]:null;var e=[];e.push(this._translateBufferLineToString(this._buffer.get(a[1]),
!0,a[0],d));for(var f=a[1]+1;f<=b[1]-1;f++){var n=this._buffer.get(f);d=this._translateBufferLineToString(n,!0);n.isWrapped?e[e.length-1]+=d:e.push(d)}a[1]!==b[1]&&(n=this._buffer.get(b[1]),d=this._translateBufferLineToString(n,!0,0,b[0]),n.isWrapped?e[e.length-1]+=d:e.push(d));return e.map(function(a){return a.replace(h," ")}).join(g.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});d.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh()};
d.prototype._translateBufferLineToString=function(a,b,d,e){void 0===d&&(d=0);void 0===e&&(e=null);for(var f="",g=d,h=e,n=0;n<a.length;n++){var l=a[n],f=f+l[1];0===l[2]&&(d>=n&&g--,e>=n&&h--)}a=h||a.length;return b&&(b=f.search(/\s+$/),-1!==b&&(a=Math.min(a,b)),a<=g)?"":f.substring(g,a)};d.prototype.refresh=function(a){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()}));g.isLinux&&a&&this.selectionText.length&&this.emit("newselection",
this.selectionText)};d.prototype._refresh=function(){this._refreshAnimationFrame=null;this.emit("refresh",{start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd})};d.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh()};d.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()};d.prototype._getMouseBufferCoords=function(a){a=f.getCoords(a,this._rowContainer,this._charMeasure,this._terminal.cols,this._terminal.rows,!0);a[0]--;a[1]--;a[1]+=this._terminal.ydisp;
return a};d.prototype._getMouseEventScrollAmount=function(a){a=f.getCoordsRelativeToElement(a,this._rowContainer)[1];var b=this._terminal.rows*this._charMeasure.height;if(0<=a&&a<=b)return 0;a>b&&(a-=b);a=Math.min(Math.max(a,-50),50);a/=50;return a/Math.abs(a)+Math.round(14*a)};d.prototype._onMouseDown=function(a){0===a.button&&(a.preventDefault(),this._dragScrollAmount=0,this._setMouseClickCount(a),a.shiftKey?this._onShiftClick(a):1===this._clickCount?this._onSingleClick(a):2===this._clickCount?
this._onDoubleClick(a):3===this._clickCount&&this._onTripleClick(a),this._addMouseDownListeners(),this.refresh(!0))};d.prototype._addMouseDownListeners=function(){var a=this;this._rowContainer.ownerDocument.addEventListener("mousemove",this._mouseMoveListener);this._rowContainer.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return a._dragScroll()},50)};d.prototype._removeMouseDownListeners=function(){this._rowContainer.ownerDocument.removeEventListener("mousemove",
this._mouseMoveListener);this._rowContainer.ownerDocument.removeEventListener("mouseup",this._mouseUpListener);clearInterval(this._dragScrollIntervalTimer);this._dragScrollIntervalTimer=null};d.prototype._onShiftClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))};d.prototype._onSingleClick=function(a){this._model.selectionStartLength=0;this._model.isSelectAllActive=!1;this._activeSelectionMode=q.NORMAL;this._model.selectionStart=this._getMouseBufferCoords(a);
this._model.selectionStart&&(this._model.selectionEnd=null,0===this._buffer.get(this._model.selectionStart[1])[this._model.selectionStart[0]][2]&&this._model.selectionStart[0]++)};d.prototype._onDoubleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=q.WORD,this._selectWordAt(a)};d.prototype._onTripleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=q.LINE,this._selectLineAt(a[1])};d.prototype._setMouseClickCount=function(a){var b=(new Date).getTime();
if(400<b-this._lastMouseDownTime||10<this._distanceFromLastMousePosition(a))this._clickCount=0;this._lastMouseDownTime=b;this._lastMousePosition=[a.pageX,a.pageY];this._clickCount++};d.prototype._distanceFromLastMousePosition=function(a){return Math.max(Math.abs(this._lastMousePosition[0]-a.pageX),Math.abs(this._lastMousePosition[1]-a.pageY))};d.prototype._onMouseMove=function(a){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=
this._getMouseBufferCoords(a);this._activeSelectionMode===q.LINE?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:this._activeSelectionMode===q.WORD&&this._selectToWordAt(this._model.selectionEnd);this._dragScrollAmount=this._getMouseEventScrollAmount(a);0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols-1:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0);this._model.selectionEnd[1]<this._buffer.length&&(a=this._buffer.get(this._model.selectionEnd[1])[this._model.selectionEnd[0]])&&
0===a[2]&&this._model.selectionEnd[0]++;b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)};d.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollDisp(this._dragScrollAmount,!1),this._model.selectionEnd=0<this._dragScrollAmount?[this._terminal.cols-1,this._terminal.ydisp+this._terminal.rows]:[0,this._terminal.ydisp],this.refresh())};d.prototype._onMouseUp=function(a){this._removeMouseDownListeners()};d.prototype._convertViewportColToCharacterIndex=
function(a,b){for(var d=b[0],e=0;b[0]>=e;e++)0===a[e][2]&&d--;return d};d.prototype._getWordAt=function(a){var b=this._buffer.get(a[1]),d=this._translateBufferLineToString(b,!1),e=this._convertViewportColToCharacterIndex(b,a),f=e,g=a[0]-f,h=0,n=0;if(" "===d.charAt(f)){for(;0<f&&" "===d.charAt(f-1);)f--;for(;e<d.length&&" "===d.charAt(e+1);)e++}else{var l=a[0];a=a[0];0===b[l][2]&&(h++,l--);2===b[a][2]&&(n++,a++);for(;0<f&&!this._isCharWordSeparator(d.charAt(f-1));)0===b[l-1][2]&&(h++,l--),f--,l--;
for(;e+1<d.length&&!this._isCharWordSeparator(d.charAt(e+1));)2===b[a+1][2]&&(n++,a++),e++,a++}return{start:f+g-h,length:Math.min(e-f+h+n+1,this._terminal.cols)}};d.prototype._selectWordAt=function(a){var b=this._getWordAt(a);this._model.selectionStart=[b.start,a[1]];this._model.selectionStartLength=b.length};d.prototype._selectToWordAt=function(a){var b=this._getWordAt(a);this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,a[1]]};d.prototype._isCharWordSeparator=
function(a){return 0<=" ()[]{}'\"".indexOf(a)};d.prototype._selectLineAt=function(a){this._model.selectionStart=[0,a];this._model.selectionStartLength=this._terminal.cols};return d}(e.EventEmitter);d.SelectionManager=a},{"./EventEmitter":4,"./SelectionModel":10,"./utils/Browser":13,"./utils/Mouse":18}],10:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a){this._terminal=a;this.clearSelection()}a.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=
null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(a.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._terminal.cols,this._terminal.ybase+this._terminal.rows-1]:this.selectionStart?
!this.selectionEnd||this.areSelectionValuesReversed()?[this.selectionStart[0]+this.selectionStartLength,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:null},enumerable:!0,configurable:!0});a.prototype.areSelectionValuesReversed=function(){var a=this.selectionStart,b=this.selectionEnd;return a[1]>b[1]||a[1]===b[1]&&a[0]>b[0]};a.prototype.onTrim=
function(a){this.selectionStart&&(this.selectionStart[1]-=a);this.selectionEnd&&(this.selectionEnd[1]-=a);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return a}();d.SelectionModel=a},{}],11:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a,b,d,e){var f=this;this.terminal=a;this.viewportElement=b;this.scrollArea=d;this.charMeasure=e;this.lastRecordedViewportHeight=
this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));setTimeout(function(){return f.syncScrollArea()},0)}a.prototype.refresh=function(){if(0<this.charMeasure.height){var a=this.charMeasure.height!==this.currentRowHeight;a&&(this.currentRowHeight=this.charMeasure.height,this.viewportElement.style.lineHeight=this.charMeasure.height+
"px",this.terminal.rowContainer.style.lineHeight=this.charMeasure.height+"px");var b=this.lastRecordedViewportHeight!==this.terminal.rows;if(a||b)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=this.charMeasure.height*this.terminal.rows+"px",this.terminal.selectionContainer.style.height=this.viewportElement.style.height;this.scrollArea.style.height=this.charMeasure.height*this.lastRecordedBufferLength+"px"}};a.prototype.syncScrollArea=function(){this.lastRecordedBufferLength!==
this.terminal.lines.length?(this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh()):this.lastRecordedViewportHeight!==this.terminal.rows?this.refresh():this.charMeasure.height!==this.currentRowHeight&&this.refresh();var a=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==a&&(this.viewportElement.scrollTop=a)};a.prototype.onScroll=function(a){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};
a.prototype.onWheel=function(a){if(0!==a.deltaY){var b=1;a.deltaMode===WheelEvent.DOM_DELTA_LINE?b=this.currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=a.deltaY*b;a.preventDefault()}};a.prototype.onTouchStart=function(a){this.lastTouchY=a.touches[0].pageY};a.prototype.onTouchMove=function(a){var b=this.lastTouchY-a.touches[0].pageY;this.lastTouchY=a.touches[0].pageY;0!==b&&(this.viewportElement.scrollTop+=b,a.preventDefault())};
return a}();d.Viewport=a},{}],12:[function(a,e,d){function b(a,b){return b?a.replace(/\r?\n/g,"\r"):a}function f(a,b){b.style.position="fixed";b.style.width="20px";b.style.height="20px";b.style.left=a.clientX-10+"px";b.style.top=a.clientY-10+"px";b.style.zIndex="1000";b.focus();setTimeout(function(){b.style.position=null;b.style.width=null;b.style.height=null;b.style.left=null;b.style.top=null;b.style.zIndex=null},4)}Object.defineProperty(d,"__esModule",{value:!0});d.prepareTextForTerminal=b;d.copyHandler=
function(a,b,d){b.browser.isMSIE?window.clipboardData.setData("Text",d.selectionText):a.clipboardData.setData("text/plain",d.selectionText);a.preventDefault()};d.pasteHandler=function(a,d){a.stopPropagation();var e=function(e){e=b(e,d.browser.isMSWindows);d.handler(e);d.textarea.value="";d.emit("paste",e);return d.cancel(a)};if(d.browser.isMSIE){if(window.clipboardData){var f=window.clipboardData.getData("Text");e(f)}}else a.clipboardData&&(f=a.clipboardData.getData("text/plain"),e(f))};d.moveTextAreaUnderMouseCursor=
f;d.rightClickHandler=function(a,b,d){f(a,b);b.value=d.selectionText;b.select()}},{}],13:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=a("./Generic");var b="undefined"===typeof navigator?!0:!1;e=b?"node":navigator.userAgent;b=b?"node":navigator.platform;d.isFirefox=!!~e.indexOf("Firefox");d.isMSIE=!!~e.indexOf("MSIE")||!!~e.indexOf("Trident");d.isMac=a.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],b);d.isIpad="iPad"===b;d.isIphone="iPhone"===b;d.isMSWindows=a.contains(["Windows",
"Win16","Win32","WinCE"],b);d.isLinux=0<=b.indexOf("Linux")},{"./Generic":17}],14:[function(a,e,d){var b=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return function(b,d){function e(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)}}();Object.defineProperty(d,"__esModule",{value:!0});a=function(a){function d(b,
d){var e=a.call(this)||this;e._document=b;e._parentElement=d;return e}b(d,a);Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});d.prototype.measure=function(){var a=this;this._measureElement?this._doMeasure():(this._measureElement=this._document.createElement("span"),this._measureElement.style.position="absolute",this._measureElement.style.top=
"0",this._measureElement.style.left="-9999em",this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement),setTimeout(function(){return a._doMeasure()},0))};d.prototype._doMeasure=function(){var a=this._measureElement.getBoundingClientRect();0===a.width||0===a.height||this._width===a.width&&this._height===a.height||(this._width=a.width,this._height=a.height,this.emit("charsizechanged"))};return d}(a("../EventEmitter.js").EventEmitter);
d.CharMeasure=a},{"../EventEmitter.js":4}],15:[function(a,e,d){var b=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return function(b,d){function e(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)}}();Object.defineProperty(d,"__esModule",{value:!0});a=function(a){function d(b){var d=a.call(this)||this;d._array=
Array(b);d._startIndex=0;d._length=0;return d}b(d,a);Object.defineProperty(d.prototype,"maxLength",{get:function(){return this._array.length},set:function(a){for(var b=Array(a),d=0;d<Math.min(a,this.length);d++)b[d]=this._array[this._getCyclicIndex(d)];this._array=b;this._startIndex=0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)for(var b=this._length;b<a;b++)this._array[b]=void 0;this._length=a},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"forEach",{get:function(){var a=this;return function(b){for(var d=a.length,e=0;e<d;e++)b(a.get(e),e)}},enumerable:!0,configurable:!0});d.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]};d.prototype.set=function(a,b){this._array[this._getCyclicIndex(a)]=b};d.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a;this._length===this.maxLength?(this._startIndex++,this._startIndex===this.maxLength&&
(this._startIndex=0),this.emit("trim",1)):this._length++};d.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};d.prototype.splice=function(a,b){for(var d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];if(b){for(e=a;e<this._length-b;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+b)];this._length-=b}if(d&&d.length){for(e=this._length-1;e>=a;e--)this._array[this._getCyclicIndex(e+d.length)]=this._array[this._getCyclicIndex(e)];for(e=
0;e<d.length;e++)this._array[this._getCyclicIndex(a+e)]=d[e];this._length+d.length>this.maxLength?(d=this._length+d.length-this.maxLength,this._startIndex+=d,this._length=this.maxLength,this.emit("trim",d)):this._length+=d.length}};d.prototype.trimStart=function(a){a>this._length&&(a=this._length);this._startIndex+=a;this._length-=a;this.emit("trim",a)};d.prototype.shiftElements=function(a,b,d){if(!(0>=b)){if(0>a||a>=this._length)throw Error("start argument out of range");if(0>a+d)throw Error("Cannot shift elements in list beyond index 0");
if(0<d){for(var e=b-1;0<=e;e--)this.set(a+e+d,this.get(a+e));a=a+b+d-this._length;if(0<a)for(this._length+=a;this._length>this.maxLength;)this._length--,this._startIndex++,this.emit("trim",1)}else for(e=0;e<b;e++)this.set(a+e+d,this.get(a+e))}};d.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this.maxLength};return d}(a("../EventEmitter").EventEmitter);d.CircularList=a},{"../EventEmitter":4}],16:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function a(a){this._type=
this.type=a;this._pool=[];this._inUse={}}a.prototype.acquire=function(){var b=0===this._pool.length?this._createNew():this._pool.pop();return this._inUse[b.getAttribute(a.OBJECT_ID_ATTRIBUTE)]=b};a.prototype.release=function(b){if(!this._inUse[b.getAttribute(a.OBJECT_ID_ATTRIBUTE)])throw Error("Could not release an element not yet acquired");delete this._inUse[b.getAttribute(a.OBJECT_ID_ATTRIBUTE)];this._cleanElement(b);this._pool.push(b)};a.prototype._createNew=function(){var b=document.createElement(this._type),
d=a._objectCount++;b.setAttribute(a.OBJECT_ID_ATTRIBUTE,d.toString(10));return b};a.prototype._cleanElement=function(a){a.className="";a.innerHTML=""};return a}();a.OBJECT_ID_ATTRIBUTE="data-obj-id";a._objectCount=0;d.DomElementObjectPool=a},{}],17:[function(a,e,d){Object.defineProperty(d,"__esModule",{value:!0});d.contains=function(a,d){return 0<=a.indexOf(d)}},{}],18:[function(a,e,d){function b(a,b){if(null==a.pageX)return null;var d=a.pageX;for(a=a.pageY;b&&b!==self.document.documentElement;)d-=
b.offsetLeft,a-=b.offsetTop,b="offsetParent"in b?b.offsetParent:b.parentElement;return[d,a]}function f(a,d,e,f,p,r){a=b(a,d);a[0]=Math.ceil((a[0]+(r?e.width/2:0))/e.width);a[1]=Math.ceil(a[1]/e.height);a[0]=Math.min(Math.max(a[0],1),f+1);a[1]=Math.min(Math.max(a[1],1),p+1);return a}Object.defineProperty(d,"__esModule",{value:!0});d.getCoordsRelativeToElement=b;d.getCoords=f;d.getRawByteCoords=function(a,b,d,e,p){a=f(a,b,d,e,p);return{x:a[0]+32,y:a[1]+32}}},{}],19:[function(a,e,d){function b(a,d,e){var k=
this;if(!(this instanceof b))return new b(a,d,e);k.browser=C;k.cancel=b.cancel;r.EventEmitter.call(this);"number"===typeof a&&(a={cols:a,rows:d,handler:e});a=a||{};Object.keys(b.defaults).forEach(function(d){null==a[d]&&(a[d]=b.options[d],b[d]!==b.defaults[d]&&(a[d]=b[d]));k[d]=a[d]});8===a.colors.length?a.colors=a.colors.concat(b._colors.slice(8)):16===a.colors.length?a.colors=a.colors.concat(b._colors.slice(16)):10===a.colors.length?a.colors=a.colors.slice(0,-2).concat(b._colors.slice(8,-2),a.colors.slice(-2)):
18===a.colors.length&&(a.colors=a.colors.concat(b._colors.slice(16,-2),a.colors.slice(-2)));this.colors=a.colors;this.options=a;this.parent=a.body||a.parent||(y?y.getElementsByTagName("body")[0]:null);this.cols=a.cols||a.geometry[0];this.rows=a.rows||a.geometry[1];this.geometry=[this.cols,this.rows];if(a.handler)this.on("data",a.handler);this.cursorState=this.y=this.x=this.ydisp=this.ybase=0;this.cursorHidden=!1;this.convertEol;this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.cursorBlinkInterval=
this.customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;
this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.postfix=this.prefix="";this.inputHandler=new A.InputHandler(this);this.parser=new u.Parser(this.inputHandler,this);this.renderer=this.renderer||null;this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new B.Linkifier;this.writeBuffer=[];this.writeStopped=this.xoffSentToCatchUp=this.writeInProgress=!1;this.surrogate_high="";this.lines=new v.CircularList(this.scrollback);for(d=this.rows;d--;)this.lines.push(this.blankLine());
this.selectionManager&&this.selectionManager.setBuffer(this.lines);this.tabs;this.setupStops();this.userScrolling=!1}function f(a,b,d,e){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(b,d,e||!1)})}function g(a,b,d,e){a.removeEventListener(b,d,e||!1)}function n(a,b){function d(){this.constructor=a}d.prototype=b.prototype;a.prototype=new d}function h(a,b){a=a.browser.isMac&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.browser.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"==
b.type?a:a&&(!b.keyCode||47<b.keyCode)}function q(a,d,e){var k=a<<16|d<<8|e;if(null!=q._cache[k])return q._cache[k];for(var f=Infinity,g=-1,h=0,E,m,l;h<b.vcolors.length;h++){E=b.vcolors[h];m=E[0];l=E[1];E=E[2];m=q.distance(a,d,e,m,l,E);if(0===m){g=h;break}m<f&&(f=m,g=h)}return q._cache[k]=g}Object.defineProperty(d,"__esModule",{value:!0});var p=a("./CompositionHelper"),r=a("./EventEmitter"),l=a("./Viewport"),t=a("./handlers/Clipboard"),v=a("./utils/CircularList"),m=a("./EscapeSequences"),A=a("./InputHandler"),
u=a("./Parser"),x=a("./Renderer"),B=a("./Linkifier"),z=a("./SelectionManager"),D=a("./utils/CharMeasure"),C=a("./utils/Browser"),w=a("./utils/Mouse"),y="undefined"!=typeof window?window.document:null;n(b,r.EventEmitter);b.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};b.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");b.colors=function(){function a(a,b,k){e.push("#"+d(a)+
d(b)+d(k))}function d(a){a=a.toString(16);return 2>a.length?"0"+a:a}var e=b.tangoColors.slice(),f=[0,95,135,175,215,255],g;for(g=0;216>g;g++)a(f[g/36%6|0],f[g/6%6|0],f[g%6]);for(g=0;24>g;g++)f=8+10*g,a(f,f,f);return e}();b._colors=b.colors.slice();b.vcolors=function(){for(var a=[],d=b.colors,e=0,f;256>e;e++)f=parseInt(d[e].substring(1),16),a.push([f>>16&255,f>>8&255,f&255]);return a}();b.defaults={colors:b.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,cursorStyle:"block",
visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,tabStopWidth:8};b.options={};b.focus=null;(function(a,b,d){if(a.forEach)return a.forEach(b,d);for(var e=0;e<a.length;e++)b.call(d,a[e],e,a)})(function(a){if(Object.keys)return Object.keys(a);var b,d=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&d.push(b);return d}(b.defaults),function(a){b[a]=b.defaults[a];b.options[a]=b.defaults[a]});b.prototype.focus=function(){return this.textarea.focus()};
b.prototype.getOption=function(a,d){if(!(a in b.defaults))throw Error('No option with key "'+a+'"');return"undefined"!==typeof this.options[a]?this.options[a]:this[a]};b.prototype.setOption=function(a,d){if(!(a in b.defaults))throw Error('No option with key "'+a+'"');switch(a){case "scrollback":if(d<this.rows)return console.warn("Setting the scrollback value less than the number of rows "+("("+this.rows+") is not allowed.")),!1;if(this.options[a]!==d){if(this.lines.length>d){var e=this.lines.length-
d,k=0>this.ydisp-e;this.lines.trimStart(e);this.ybase=Math.max(this.ybase-e,0);this.ydisp=Math.max(this.ydisp-e,0);k&&this.refresh(0,this.rows-1)}this.lines.maxLength=d;this.viewport.syncScrollArea()}}this[a]=d;this.options[a]=d;switch(a){case "cursorBlink":this.setCursorBlinking(d);break;case "cursorStyle":this.element.classList.toggle("xterm-cursor-style-underline","underline"===d);this.element.classList.toggle("xterm-cursor-style-bar","bar"===d);break;case "tabStopWidth":this.setupStops()}};b.prototype.restartCursorBlinking=
function(){this.setCursorBlinking(this.options.cursorBlink)};b.prototype.setCursorBlinking=function(a){this.element.classList.toggle("xterm-cursor-blink",a);this.clearCursorBlinkingInterval();if(a){var b=this;this.cursorBlinkInterval=setInterval(function(){b.element.classList.toggle("xterm-cursor-blink-on")},600)}};b.prototype.clearCursorBlinkingInterval=function(){this.element.classList.remove("xterm-cursor-blink-on");this.cursorBlinkInterval&&(clearInterval(this.cursorBlinkInterval),this.cursorBlinkInterval=
null)};b.bindFocus=function(a){f(a.textarea,"focus",function(d){a.sendFocus&&a.send(m.C0.ESC+"[I");a.element.classList.add("focus");a.showCursor();a.restartCursorBlinking.apply(a);b.focus=a;a.emit("focus",{terminal:a})})};b.prototype.blur=function(){return this.textarea.blur()};b.bindBlur=function(a){f(a.textarea,"blur",function(d){a.refresh(a.y,a.y);a.sendFocus&&a.send(m.C0.ESC+"[O");a.element.classList.remove("focus");a.clearCursorBlinkingInterval.apply(a);b.focus=null;a.emit("blur",{terminal:a})})};
b.prototype.initGlobal=function(){var a=this,d=this;b.bindKeys(this);b.bindFocus(this);b.bindBlur(this);f(this.element,"copy",function(b){a.mouseEvents||t.copyHandler(b,d,a.selectionManager)});var e=function(a){return t.pasteHandler(a,d)};f(this.textarea,"paste",e);f(this.element,"paste",e);d.browser.isFirefox?f(this.element,"mousedown",function(b){2==b.button&&t.rightClickHandler(b,a.textarea,a.selectionManager)}):f(this.element,"contextmenu",function(b){t.rightClickHandler(b,a.textarea,a.selectionManager)});
d.browser.isLinux&&f(this.element,"auxclick",function(b){1===b.button&&t.moveTextAreaUnderMouseCursor(b,a.textarea,a.selectionManager)})};b.bindKeys=function(a){f(a.element,"keydown",function(b){y.activeElement==this&&a.keyDown(b)},!0);f(a.element,"keypress",function(b){y.activeElement==this&&a.keyPress(b)},!0);f(a.element,"keyup",function(b){16!==b.keyCode&&17!==b.keyCode&&18!==b.keyCode&&a.focus(a)},!0);f(a.textarea,"keydown",function(b){a.keyDown(b)},!0);f(a.textarea,"keypress",function(b){a.keyPress(b);
this.value=""},!0);f(a.textarea,"compositionstart",a.compositionHelper.compositionstart.bind(a.compositionHelper));f(a.textarea,"compositionupdate",a.compositionHelper.compositionupdate.bind(a.compositionHelper));f(a.textarea,"compositionend",a.compositionHelper.compositionend.bind(a.compositionHelper));a.on("refresh",a.compositionHelper.updateCompositionElements.bind(a.compositionHelper));a.on("refresh",function(b){a.queueLinkification(b.start,b.end)})};b.prototype.insertRow=function(a){"object"!=
typeof a&&(a=y.createElement("div"));this.rowContainer.appendChild(a);this.children.push(a);return a};b.prototype.open=function(a,b){var d=this,e=this,k=0;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");
this.element.classList.add("xterm-theme-"+this.theme);this.setCursorBlinking(this.options.cursorBlink);this.element.setAttribute("tabindex",0);this.viewportElement=y.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=y.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);this.selectionContainer=y.createElement("div");this.selectionContainer.classList.add("xterm-selection");
this.element.appendChild(this.selectionContainer);this.rowContainer=y.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.linkifier.attachToDom(y,this.children);this.helperContainer=y.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=y.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect",
"off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){e.emit("focus",{terminal:e})});this.textarea.addEventListener("blur",function(){e.emit("blur",{terminal:e})});this.helperContainer.appendChild(this.textarea);this.compositionView=y.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new p.CompositionHelper(this.textarea,this.compositionView,
this);this.helperContainer.appendChild(this.compositionView);this.charSizeStyleElement=y.createElement("style");for(this.helperContainer.appendChild(this.charSizeStyleElement);k<this.rows;k++)this.insertRow();this.parent.appendChild(this.element);this.charMeasure=new D.CharMeasure(y,this.helperContainer);this.charMeasure.on("charsizechanged",function(){e.updateCharSizeStyles()});this.charMeasure.measure();this.viewport=new l.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasure);
this.renderer=new x.Renderer(this);this.selectionManager=new z.SelectionManager(this,this.lines,this.rowContainer,this.charMeasure);this.selectionManager.on("refresh",function(a){d.renderer.refreshSelection(a.start,a.end)});this.selectionManager.on("newselection",function(a){d.textarea.value=a;d.textarea.focus();d.textarea.select()});this.on("scroll",function(){return d.selectionManager.refresh()});this.viewportElement.addEventListener("scroll",function(){return d.selectionManager.refresh()});this.refresh(0,
this.rows-1);this.initGlobal();"undefined"==typeof b&&(console.warn("You did not pass the `focus` argument in `Terminal.prototype.open()`.\nThe `focus` argument now defaults to `true` but starting with xterm.js 3.0 it will default to `false`."),b=!0);b&&this.focus();f(this.element,"click",function(){var a=y.getSelection(),b=a.isCollapsed;("boolean"==typeof b?b:"Range"!=a.type)&&e.focus()});this.bindMouse();this.emit("open")};b.loadAddon=function(b,f){if("object"===typeof d&&"object"===typeof e)return a("./addons/"+
b+"/"+b);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};b.prototype.updateCharSizeStyles=function(){this.charSizeStyleElement.textContent=".xterm-wide-char{width:"+2*this.charMeasure.width+"px;}"+(".xterm-normal-char{width:"+this.charMeasure.width+"px;}")+(".xterm-rows > div{height:"+this.charMeasure.height+"px;}")};b.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var b=null!=a.button?+a.button:null!=a.which?
a.which-1:null;l.browser.isMSIE&&(b=1===b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0<a.wheelDeltaY?64:65}var d=a.shiftKey?4:0;var k=a.metaKey?8:0;var f=a.ctrlKey?16:0;d=d|k|f;l.vt200Mouse?d&=f:l.normalMouse||(d=0);b=32+(d<<2)+b;if(f=w.getRawByteCoords(a,l.rowContainer,l.charMeasure,l.cols,l.rows))switch(e(b,f),a.overrideType||a.type){case "mousedown":n=b;break;case "mouseup":n=32}}function b(a){var b=n;(a=w.getRawByteCoords(a,l.rowContainer,
l.charMeasure,l.cols,l.rows))&&e(b+32,a)}function d(a,b){if(l.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(2047<b&&(b=2047),a.push(192|b>>6),a.push(128|b&63))}else{if(255===b)return a.push(0);127<b&&(b=127);a.push(b)}}function e(a,b){if(l.vt300Mouse){a&=3;b.x-=32;b.y-=32;var e=m.C0.ESC+"[24";if(0===a)e+="1";else if(1===a)e+="3";else if(2===a)e+="5";else{if(3===a)return;e+="0"}e+="~["+b.x+","+b.y+"]\r";l.send(e)}else l.decLocator?(a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&
(a=3),l.send(m.C0.ESC+"["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w")):l.urxvtMouse?(b.x-=32,b.y-=32,b.x++,b.y++,l.send(m.C0.ESC+"["+a+";"+b.x+";"+b.y+"M")):l.sgrMouse?(b.x-=32,b.y-=32,l.send(m.C0.ESC+"[<"+((3===(a&3)?a&-4:a)-32)+";"+b.x+";"+b.y+(3===(a&3)?"m":"M"))):(e=[],d(e,a),d(e,b.x),d(e,b.y),l.send(m.C0.ESC+"[M"+String.fromCharCode.apply(String,e)))}var h=this.element,l=this,n=32;f(h,"mousedown",function(d){if(l.mouseEvents){a(d);l.focus();if(l.vt200Mouse)return d.overrideType="mouseup",
a(d),l.cancel(d);l.normalMouse&&f(l.document,"mousemove",b);l.x10Mouse||f(l.document,"mouseup",function F(d){a(d);l.normalMouse&&g(l.document,"mousemove",b);g(l.document,"mouseup",F);return l.cancel(d)});return l.cancel(d)}});f(h,"wheel",function(b){if(l.mouseEvents&&!(l.x10Mouse||l.vt300Mouse||l.decLocator))return a(b),l.cancel(b)});f(h,"wheel",function(a){if(!l.mouseEvents)return l.viewport.onWheel(a),l.cancel(a)});f(h,"touchstart",function(a){if(!l.mouseEvents)return l.viewport.onTouchStart(a),
l.cancel(a)});f(h,"touchmove",function(a){if(!l.mouseEvents)return l.viewport.onTouchMove(a),l.cancel(a)})};b.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};b.prototype.refresh=function(a,b){this.renderer&&this.renderer.queueRefresh(a,b)};b.prototype.queueLinkification=function(a,b){if(this.linkifier)for(;a<=b;a++)this.linkifier.linkifyRow(a)};
b.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};b.prototype.scroll=function(a){this.lines.length===this.lines.maxLength&&(this.lines.trimStart(1),this.ybase--,0!==this.ydisp&&this.ydisp--);this.ybase++;this.userScrolling||(this.ydisp=this.ybase);var b=this.ybase+this.rows-1;b-=this.rows-1-this.scrollBottom;b===this.lines.length?this.lines.push(this.blankLine(void 0,a)):this.lines.splice(b,0,this.blankLine(void 0,a));0!==this.scrollTop&&(0!==this.ybase&&
(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};b.prototype.scrollDisp=function(a,b){if(0>a){if(0===this.ydisp)return;this.userScrolling=!0}else a+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=a;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);b||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-
1)};b.prototype.scrollPages=function(a){this.scrollDisp(a*(this.rows-1))};b.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};b.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};b.prototype.write=function(a){this.writeBuffer.push(a);this.options.useFlowControl&&!this.xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.send(m.C0.DC3),this.xoffSentToCatchUp=!0);if(!this.writeInProgress&&0<this.writeBuffer.length){this.writeInProgress=!0;var b=this;setTimeout(function(){b.innerWrite()})}};
b.prototype.innerWrite=function(){for(var a=this.writeBuffer.splice(0,300);0<a.length;){var b=a.shift();this.xoffSentToCatchUp&&0===a.length&&0===this.writeBuffer.length&&(this.send(m.C0.DC1),this.xoffSentToCatchUp=!1);this.refreshEnd=this.refreshStart=this.y;b=this.parser.parse(b);this.parser.setState(b);this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)}if(0<this.writeBuffer.length){var d=this;setTimeout(function(){d.innerWrite()},0)}else this.writeInProgress=!1};b.prototype.writeln=
function(a){this.write(a+"\r\n")};b.prototype.attachCustomKeydownHandler=function(a){console.warn("attachCustomKeydownHandler() is DEPRECATED and will be removed soon. Please use attachCustomKeyEventHandler() instead.");this.attachCustomKeyEventHandler(a)};b.prototype.attachCustomKeyEventHandler=function(a){this.customKeyEventHandler=a};b.prototype.setHypertextLinkHandler=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext link handler before Terminal.open is called");this.linkifier.setHypertextLinkHandler(a);
this.refresh(0,this.rows-1)};b.prototype.setHypertextValidationCallback=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext validation callback before Terminal.open is called");this.linkifier.setHypertextValidationCallback(a);this.refresh(0,this.rows-1)};b.prototype.registerLinkMatcher=function(a,b,d){if(this.linkifier)return a=this.linkifier.registerLinkMatcher(a,b,d),this.refresh(0,this.rows-1),a};b.prototype.deregisterLinkMatcher=function(a){this.linkifier&&this.linkifier.deregisterLinkMatcher(a)&&
this.refresh(0,this.rows-1)};b.prototype.hasSelection=function(){return this.selectionManager.hasSelection};b.prototype.getSelection=function(){return this.selectionManager.selectionText};b.prototype.clearSelection=function(){this.selectionManager.clearSelection()};b.prototype.selectAll=function(){this.selectionManager.selectAll()};b.prototype.keyDown=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;this.restartCursorBlinking();if(!this.compositionHelper.keydown.bind(this.compositionHelper)(a))return this.ybase!==
this.ydisp&&this.scrollToBottom(),!1;var b=this.evaluateKeyEscapeSequence(a);b.key===m.C0.DC3?this.writeStopped=!0:b.key===m.C0.DC1&&(this.writeStopped=!1);if(b.scrollDisp)return this.scrollDisp(b.scrollDisp),this.cancel(a,!0);if(h(this,a))return!0;b.cancel&&this.cancel(a,!0);if(!b.key)return!0;this.emit("keydown",a);this.emit("key",b.key,a);this.showCursor();this.handler(b.key);return this.cancel(a,!0)};b.prototype.evaluateKeyEscapeSequence=function(a){var b={cancel:!1,key:void 0,scrollDisp:void 0},
d=a.shiftKey<<0|a.altKey<<1|a.ctrlKey<<2|a.metaKey<<3;switch(a.keyCode){case 8:if(a.shiftKey){b.key=m.C0.BS;break}b.key=m.C0.DEL;break;case 9:if(a.shiftKey){b.key=m.C0.ESC+"[Z";break}b.key=m.C0.HT;b.cancel=!0;break;case 13:b.key=m.C0.CR;b.cancel=!0;break;case 27:b.key=m.C0.ESC;b.cancel=!0;break;case 37:d?(b.key=m.C0.ESC+"[1;"+(d+1)+"D",b.key==m.C0.ESC+"[1;3D"&&(b.key=this.browser.isMac?m.C0.ESC+"b":m.C0.ESC+"[1;5D")):b.key=this.applicationCursor?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:d?(b.key=
m.C0.ESC+"[1;"+(d+1)+"C",b.key==m.C0.ESC+"[1;3C"&&(b.key=this.browser.isMac?m.C0.ESC+"f":m.C0.ESC+"[1;5C")):b.key=this.applicationCursor?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:d?(b.key=m.C0.ESC+"[1;"+(d+1)+"A",b.key==m.C0.ESC+"[1;3A"&&(b.key=m.C0.ESC+"[1;5A")):b.key=this.applicationCursor?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:d?(b.key=m.C0.ESC+"[1;"+(d+1)+"B",b.key==m.C0.ESC+"[1;3B"&&(b.key=m.C0.ESC+"[1;5B")):b.key=this.applicationCursor?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:a.shiftKey||
a.ctrlKey||(b.key=m.C0.ESC+"[2~");break;case 46:b.key=d?m.C0.ESC+"[3;"+(d+1)+"~":m.C0.ESC+"[3~";break;case 36:b.key=d?m.C0.ESC+"[1;"+(d+1)+"H":this.applicationCursor?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:b.key=d?m.C0.ESC+"[1;"+(d+1)+"F":this.applicationCursor?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:a.shiftKey?b.scrollDisp=-(this.rows-1):b.key=m.C0.ESC+"[5~";break;case 34:a.shiftKey?b.scrollDisp=this.rows-1:b.key=m.C0.ESC+"[6~";break;case 112:b.key=d?m.C0.ESC+"[1;"+(d+1)+"P":m.C0.ESC+"OP";break;
case 113:b.key=d?m.C0.ESC+"[1;"+(d+1)+"Q":m.C0.ESC+"OQ";break;case 114:b.key=d?m.C0.ESC+"[1;"+(d+1)+"R":m.C0.ESC+"OR";break;case 115:b.key=d?m.C0.ESC+"[1;"+(d+1)+"S":m.C0.ESC+"OS";break;case 116:b.key=d?m.C0.ESC+"[15;"+(d+1)+"~":m.C0.ESC+"[15~";break;case 117:b.key=d?m.C0.ESC+"[17;"+(d+1)+"~":m.C0.ESC+"[17~";break;case 118:b.key=d?m.C0.ESC+"[18;"+(d+1)+"~":m.C0.ESC+"[18~";break;case 119:b.key=d?m.C0.ESC+"[19;"+(d+1)+"~":m.C0.ESC+"[19~";break;case 120:b.key=d?m.C0.ESC+"[20;"+(d+1)+"~":m.C0.ESC+"[20~";
break;case 121:b.key=d?m.C0.ESC+"[21;"+(d+1)+"~":m.C0.ESC+"[21~";break;case 122:b.key=d?m.C0.ESC+"[23;"+(d+1)+"~":m.C0.ESC+"[23~";break;case 123:b.key=d?m.C0.ESC+"[24;"+(d+1)+"~":m.C0.ESC+"[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?this.browser.isMac||!a.altKey||a.ctrlKey||a.metaKey?this.browser.isMac&&!a.altKey&&!a.ctrlKey&&a.metaKey&&65===a.keyCode&&this.selectAll():65<=a.keyCode&&90>=a.keyCode?b.key=m.C0.ESC+String.fromCharCode(a.keyCode+32):192===a.keyCode?b.key=m.C0.ESC+
"`":48<=a.keyCode&&57>=a.keyCode&&(b.key=m.C0.ESC+(a.keyCode-48)):65<=a.keyCode&&90>=a.keyCode?b.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?b.key=String.fromCharCode(0):51<=a.keyCode&&55>=a.keyCode?b.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?b.key=String.fromCharCode(127):219===a.keyCode?b.key=String.fromCharCode(27):220===a.keyCode?b.key=String.fromCharCode(28):221===a.keyCode&&(b.key=String.fromCharCode(29))}return b};b.prototype.setgLevel=function(a){this.glevel=a;this.charset=
this.charsets[a]};b.prototype.setgCharset=function(a,b){this.charsets[a]=b;this.glevel===a&&(this.charset=b)};b.prototype.keyPress=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;this.cancel(a);if(a.charCode)var b=a.charCode;else if(null==a.which)b=a.keyCode;else if(0!==a.which&&0!==a.charCode)b=a.which;else return!1;if(!b||(a.altKey||a.ctrlKey||a.metaKey)&&!h(this,a))return!1;b=String.fromCharCode(b);this.emit("keypress",b,a);this.emit("key",b,a);this.showCursor();
this.handler(b);return!0};b.prototype.send=function(a){var b=this;this.queue||setTimeout(function(){b.handler(b.queue);b.queue=""},1);this.queue+=a};b.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white";setTimeout(function(){a.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};b.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,
a)}};b.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,a)}};b.prototype.resize=function(a,b){if(!isNaN(a)&&!isNaN(b)){b>this.getOption("scrollback")&&this.setOption("scrollback",b);var d;if(a!==this.cols||b!==this.rows){1>a&&(a=1);1>b&&(b=1);var e=this.cols;if(e<a)for(e=[this.defAttr," ",1],d=this.lines.length;d--;)for(;this.lines.get(d).length<a;)this.lines.get(d).push(e);
this.cols=a;this.setupStops(this.cols);e=this.rows;var f=0;if(e<b)for(;e++<b;)this.lines.length<b+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+this.y+f+1?(this.ybase--,f++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<b&&this.insertRow();else for(;e-- >b;)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>b&&(d=this.children.shift())&&d.parentNode.removeChild(d);
this.rows=b;this.y>=b&&(this.y=b-1);f&&(this.y+=f);this.x>=a&&(this.x=a-1);this.scrollTop=0;this.scrollBottom=b-1;this.charMeasure.measure();this.refresh(0,this.rows-1);this.normal=null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:a,rows:b})}}};b.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};b.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};b.prototype.setupStops=function(a){null!=
a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this.cols;a+=this.getOption("tabStopWidth"))this.tabs[a]=!0};b.prototype.prevStop=function(a){null==a&&(a=this.x);for(;!this.tabs[--a]&&0<a;);return a>=this.cols?this.cols-1:0>a?0:a};b.prototype.nextStop=function(a){null==a&&(a=this.x);for(;!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a};b.prototype.eraseRight=function(a,b){var d=this.lines.get(this.ybase+b);if(d){for(var e=[this.eraseAttr()," ",1];a<this.cols;a++)d[a]=
e;this.updateRange(b)}};b.prototype.eraseLeft=function(a,b){var d=this.lines.get(this.ybase+b);if(d){var e=[this.eraseAttr()," ",1];for(a++;a--;)d[a]=e;this.updateRange(b)}};b.prototype.clear=function(){if(0!==this.ybase||0!==this.y){this.lines.set(0,this.lines.get(this.ybase+this.y));this.lines.length=1;this.y=this.ybase=this.ydisp=0;for(var a=1;a<this.rows;a++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};b.prototype.eraseLine=function(a){this.eraseRight(0,
a)};b.prototype.blankLine=function(a,b){a=[a?this.eraseAttr():this.defAttr," ",1];var d=[],e=0;b&&(d.isWrapped=b);for(;e<this.cols;e++)d[e]=a;return d};b.prototype.ch=function(a){return a?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};b.prototype.is=function(a){return 0===(this.termName+"").indexOf(a)};b.prototype.handler=function(a){this.options.disableStdin||(this.ybase!==this.ydisp&&this.scrollToBottom(),this.emit("data",a))};b.prototype.handleTitle=function(a){this.emit("title",a)};b.prototype.index=
function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.x>=this.cols&&this.x--};b.prototype.reverseIndex=function(){this.y===this.scrollTop?(this.lines.shiftElements(this.y+this.ybase,this.rows-1,1),this.lines.set(this.y+this.ybase,this.blankLine(!0)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)):this.y--};b.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this.customKeyEventHandler,d=this.cursorBlinkInterval;b.call(this,
this.options);this.customKeyEventHandler=a;this.cursorBlinkInterval=d;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};b.prototype.tabSet=function(){this.tabs[this.x]=!0};b.prototype.matchColor=q;q._cache={};q.distance=function(a,b,d,e,f,g){return Math.pow(30*(a-e),2)+Math.pow(59*(b-f),2)+Math.pow(11*(d-g),2)};b.EventEmitter=r.EventEmitter;b.inherits=n;b.on=f;b.off=g;b.cancel=function(a,b){if(this.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1};e.exports=b},{"./CompositionHelper":2,
"./EscapeSequences":3,"./EventEmitter":4,"./InputHandler":5,"./Linkifier":6,"./Parser":7,"./Renderer":8,"./SelectionManager":9,"./Viewport":11,"./handlers/Clipboard":12,"./utils/Browser":13,"./utils/CharMeasure":14,"./utils/CircularList":15,"./utils/Mouse":18}]},{},[19])(19)});SSHyClient.auth=function(c){this.parceler=c;this.authenticated=null;this.awaitingAuthentication=!1;this.hostname=wsproxyURL?wsproxyURL.split("/")[2].split(":")[0]:"";this.termUsername="";this.termPassword=void 0;this.failedAttempts=0};
SSHyClient.auth.prototype={request_auth:function(){var c=new SSHyClient.Message;c.add_bytes(String.fromCharCode(SSHyClient.MSG_SERVICE_REQUEST));c.add_string("ssh-userauth");this.parceler.send(c)},ssh_connection:function(){if(this.termUsername&&this.termPassword){var c=new SSHyClient.Message;c.add_bytes(String.fromCharCode(SSHyClient.MSG_USERAUTH_REQUEST));c.add_string(this.termUsername);c.add_string("ssh-connection");c.add_string("password");c.add_boolean(!1);c.add_string(this.termPassword);this.awaitingAuthentication=
!0;this.parceler.send(c)}else term||startxtermjs()},auth_success:function(c){c&&(document.title=this.termUsername+"@"+this.hostname,this.termUsername="",this.termPassword=void 0,term||startxtermjs(),transport.settings.setKeepAlive(240),document.getElementById("keepAlive").value=240,this.open_channel("session"))},open_channel:function(c,a){a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_OPEN));a.add_string(c);a.add_int(1);a.add_int(SSHyClient.WINDOW_SIZE);a.add_int(SSHyClient.MAX_PACKET_SIZE);
this.parceler.send(a)},get_pty:function(c,a,e){var d=new SSHyClient.Message;d.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));d.add_int(0);d.add_string("pty-req");d.add_boolean(!1);d.add_string(c);d.add_int(a);d.add_int(e);d.add_int(0);d.add_int(0);d.add_string("");this.parceler.send(d);this.invoke_shell()},resize_pty:function(c,a){var e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));e.add_int(0);e.add_string("window-change");e.add_boolean(!1);
e.add_int(c);e.add_int(a);e.add_int(0);e.add_int(0);this.parceler.send(e)},invoke_shell:function(){var c=new SSHyClient.Message;c.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));c.add_int(0);c.add_string("shell");c.add_boolean(!1);this.parceler.send(c);void 0===this.termPassword?term.write("\n\r"):startxtermjs()},authFailure:function(){term?(term.write("Access Denied\r\n"),5<=++this.failedAttempts?(term.write("Too many failed authentication attempts"),transport.disconnect()):(term.write(this.termUsername+
"@"+this.hostname+"'s password:"),this.termPassword="")):display_error("Invalid Username or Password")}};SSHyClient.crypto={};SSHyClient.crypto.AES=function(c,a,e,d){this.cipher=new sjcl.cipher.aes(sjcl.codec.bytes.toBits(toByteArray(c)),a);this.mode=a;this.mode==SSHyClient.AES_CBC&&(this.iv=toByteArray(e));this.counter=d};
SSHyClient.crypto.AES.prototype={encrypt:function(c){c=this.cipher.encrypt(toByteArray(c),this.iv,this.counter);this.mode==SSHyClient.AES_CBC&&(this.iv=c.slice(-16));return fromByteArray(c)},decrypt:function(c){c=toByteArray(c);if(this.mode==SSHyClient.AES_CBC){var a=this.cipher.decrypt(c,this.iv);this.iv=c.slice(-16)}else a=this.cipher.encrypt(c,this.iv,this.counter);return fromByteArray(a)}};
SSHyClient.crypto.counter=function(c,a){a=void 0===a?1:a;this.blocksize=c/8;this.overflow=0;0===a?this.value=(new array(this.blocksize+1)).join("\u00ff"):(c=deflate_long(a.subtract(BigInteger.ONE),!1),this.value=Array(this.blocksize-c.length+1).join("\x00")+c)};
SSHyClient.crypto.counter.prototype={increment:function(){for(var c=this.blocksize;c--;){var a=String.fromCharCode((this.value.charCodeAt(c)+1)%256);this.value=setCharAt(this.value,c,a);if("\x00"!=a)return this.value}c=deflate_long(this.overflow,!1);return this.value=Array(this.blocksize-c.length+1).join("\x00")+c}};SSHyClient.kex={K:null,H:null,sessionId:null};function verifyKey(c,a){if(!(new SSHyClient.RSAKey(new SSHyClient.Message(c))).verify(SSHyClient.kex.H,new SSHyClient.Message(a)))throw transport.disconnect(),"RSA signature verification failed, disconnecting.";}
SSHyClient.kex.DiffieHellman=function(c,a,e){this.transport=c;this.SHAVersion=e;this.group=a;void 0===this.group?(this.p=this.q=this.g=this.x=this.e=this.f=null,this.minBits=1024,this.maxBits=8192,this.preferredBits=2048):(1===this.group?this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE65381FFFFFFFFFFFFFFFF",
16):14===this.group&&(this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AACAA68FFFFFFFFFFFFFFFF",
16)),this.x=this.e=this.f=new BigInteger("0",10),this.G=new BigInteger("2",10))};
SSHyClient.kex.DiffieHellman.prototype={start:function(){var c=new SSHyClient.Message;void 0===this.group?(c.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_REQUEST)),c.add_int(this.minBits),c.add_int(this.preferredBits),c.add_int(this.maxBits)):(this.x=inflate_long(read_rng(128)),this.e=this.G.modPow(this.x,this.P),c.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_INIT)),c.add_mpint(this.e));this.transport.send_packet(c)},parse_reply:function(c,a){void 0===this.group&&c==SSHyClient.MSG_KEXDH_GEX_GROUP?
this.parse_gex_group(a):this.handleDHReply(a)},handleDHReply:function(c){c=new SSHyClient.Message(c);var a=c.get_string();if(transport.settings.rsaCheckEnabled){var e=wsproxyURL.split("/")[3],d=ascii2hex(a),b=ascii2hex(SSHyClient.hash.MD5(a)).match(/.{2}/g);randomart(b);var f=localStorage.getItem(e);if(f){if(f!=d)if(confirm("WARNING - POTENTIAL SECURITY BREACH!\r\n\nThe servers host key does not match the one SSHy has cached in local storage. This means that either the server administrator has changed the host key, or you have actually connected to another computer pretending to be the server.\r\nThe new rsa2 key fingerprint is:\r\nssh-rsa 2048 "+
b.join(":")+"\r\nIf you were expecting this change and trust the new key, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this new key, hit `Cancel` to abandon the connection"))localStorage.setItem(e,d);else throw ws.close(),"Error: Locally stored rsa key does not match remote key";}else if(confirm("The server's host key is not cached in local storage. You have no guarentee that the server is the computer you think it is.\n\rThe server's rsa2 key finterprint is:\r\nssh-rsa 2048 "+
b.join(":")+"\r\nIf you trust the host, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this host, hit `Cancel` to abandon the connection"))localStorage.setItem(e,d);else throw ws.close(),"User has declined the rsa-key and closed the connection";}this.f=c.get_mpint();c=c.get_string();e=this.f.modPow(this.x,this.p);d=new SSHyClient.Message;d.add_string(this.transport.local_version);d.add_string(this.transport.remote_version);d.add_string(this.transport.local_kex_message);
d.add_string(this.transport.remote_kex_message);d.add_string(a);void 0===this.group&&(d.add_int(this.minBits),d.add_int(this.preferredBits),d.add_int(this.maxBits),d.add_mpint(this.p),d.add_mpint(this.g));d.add_mpint(this.e);d.add_mpint(this.f);d.add_mpint(e);SSHyClient.kex.K=e;SSHyClient.kex.sessionId=SSHyClient.kex.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(d.toString())).digest():(new SSHyClient.hash.SHA256(d.toString())).digest();transport.settings.rsaCheckEnabled&&verifyKey(a,c);this.transport.send_new_keys()},
generate_x:function(){for(var c=this.p.subtract(BigInteger.ONE),c=c.divide(new BigInteger("2",10)),a=deflate_long(c,0),e=a[0].charCodeAt(0),a=a.length,d=255;!(e&128);)e<<=1,d>>=1;for(;!(e=read_rng(a),e=String.fromCharCode(e[0].charCodeAt(0)&d)+e.substring(1),e=inflate_long(e,1),0<e.compareTo(BigInteger.ONE)&&0<c.compareTo(e)););this.x=e},parse_gex_group:function(c){c=new SSHyClient.Message(c);this.p=c.get_mpint();this.g=c.get_mpint();this.generate_x();this.e=this.g.modPow(this.x,this.p);c=new SSHyClient.Message;
c.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_INIT));c.add_mpint(this.e);this.transport.send_packet(c)}};SSHyClient.Message=function(c){this.position=0;this.packet=void 0===c?String():String(c)};
SSHyClient.Message.prototype={toString:function(){return this.packet},get_bytes:function(c){var a=this.packet.substring(this.position,this.position+c);this.position+=c;return a.length<c&&1048576>c?a+Array(c-a.length+1).join("\x00"):a},get_int:function(){return struct.unpack("I",this.get_bytes(4))[0]},get_string:function(){return this.get_bytes(this.get_int())},get_mpint:function(){return inflate_long(this.get_string())},add_bytes:function(c){this.packet+=c;return this},add_boolean:function(c){this.add_bytes(!0===
c?"\u0001":"\x00");return this},add_int:function(c){this.packet+=struct.pack("I",c);return this},add_mpint:function(c){this.add_string(deflate_long(c));return this},add_string:function(c){this.add_int(c.length);this.packet+=c;return this}};SSHyClient.parceler=function(c,a){this.socket=c;this.transport=a;this.encrypting=!1;this.hmacSHAVersion=this.inbound_iv=this.inbound_enc_key=this.inbound_mac_key=this.inbound_cipher=this.outbound_enc_iv=this.outbound_enc_key=this.outbound_mac_key=this.outbound_cipher=null;this.outbound_sequence_num=this.inbound_sequence_num=this.macSize=0;this.block_size=8;this.prevHeader=this.inbound_buffer="";this.windowSize=SSHyClient.WINDOW_SIZE;this.recieveData=this.transmitData=0};
SSHyClient.parceler.prototype={send:function(c){packet=this.pack_message(c.toString());this.encrypting&&(packet=this.outbound_cipher.encrypt(packet)+SSHyClient.hash.HMAC(this.outbound_mac_key,struct.pack("I",this.outbound_sequence_num)+packet,this.hmacSHAVersion));this.socket.sendB64(packet);this.outbound_sequence_num++},pack_message:function(c){var a=3+this.block_size-(c.length+8)%this.block_size;c=struct.pack("I",c.length+a+1)+struct.pack("B",a)+c;return c+=this.encrypting?read_rng(a):Array(a+1).join("\x00")},
handle:function(c){this.recieveData+=c.length;this.transport.settings.setNetTraffic(transport.parceler.recieveData,!0);if(this.encrypting)this.inbound_buffer+=c,this.decrypt();else if(this.transport.remote_version)this.inbound_buffer+=c,this.decrypt(c);else this.transport.handler_table[0](this.transport,c)},decrypt:function(){for(var c=" ",a;null!==c;){if(this.prevHeader)a=this.prevHeader,this.prevHeader="";else{a=this.read_ibuffer();if(!a)break;this.encrypting&&(a=this.inbound_cipher.decrypt(a))}var e=
struct.unpack("I",a.substring(0,4))[0],d=a.substring(4),c=this.read_ibuffer(e+this.macSize-d.length);if(!c){this.prevHeader=a;break}a=c.substring(0,e-d.length);this.encrypting&&(a=this.inbound_cipher.decrypt(a));a=d+a;if(this.macSize){var d=c.substring(e-d.length),b=struct.pack("I",this.inbound_sequence_num)+struct.pack("I",e)+a;if(SSHyClient.hash.HMAC(this.inbound_mac_key,b,this.hmacSHAVersion)!=d)throw this.transport.disconnect(),"Inbound MAC verification failed - Mismatched MAC";}this.inbound_sequence_num++;
this.windowSize-=e;0>=this.windowSize&&this.transport.winAdjust();this.transport.handle_dec(a)}},read_ibuffer:function(c){c=void 0===c?this.block_size:c;if(this.inbound_buffer.length<c)return null;var a=this.inbound_buffer.substring(0,c);this.inbound_buffer=this.inbound_buffer.substring(c);return a}};SSHyClient.RSAKey=function(c){c.get_string();this.e=c.get_mpint();this.n=c.get_mpint()};SSHyClient.RSAKey.prototype={pkcs1imify:function(c){return"\x00\u0001"+Array(deflate_long(this.n,0).length-15-c.length-3+1).join("\u00ff")+"\x000!0\t\u0006\u0005+\u000e\u0003\u0002\u001a\u0005\x00\u0004\u0014"+c},verify:function(c,a){if("ssh-rsa"!=a.get_string())return!1;a=inflate_long(a.get_string(),!0);c=inflate_long(this.pkcs1imify((new SSHyClient.hash.SHA1(c)).digest()),!0);return a.modPow(this.e,this.n).equals(c)}};SSHyClient.settings=function(){this.localEcho=0;this.fsHintEnter="\u001b[?1";this.fsHintLeave=SSHyClient.bashFsHintLeave;this.autoEchoState=!1;this.autoEchoTimeout=0;this.blockedKeys=[":"];this.keepAliveInterval=void 0;this.fontSize=16;this.colorTango=!0;this.colorCounter=0;this.colorNames=Object.keys(this.colorSchemes);this.shellString="";this.sidenavElementState=0;this.rxElement=document.getElementById("rxTraffic");this.txElement=document.getElementById("txTraffic");this.autoEchoElement=document.getElementById("autoEchoState");
this.rsaCheckEnabled=!0};
SSHyClient.settings.prototype={colorSchemes:{Tango:function(){return!0},Solarized:function(){return"#002b36 #002b36 #dc322f #859900 #b58900 #268bd2 #6c71c4 #2aa198 #93a1a1 #657b83 #dc322f #859900 #b58900 #268bd2 #6c71c4 #2aa198 #fdf6e3 #93a1a1 #93a1a1".split(" ")},Material:function(){return"#263238 #263238 #ff9800 #8bc34a #ffc107 #03a9f4 #e91e63 #009688 #cfd8dc #37474f #ffa74d #9ccc65 #ffa000 #81d4fa #ad1457 #26a69a #eceff1 #eceff1 #eceff1".split(" ")},Monokai:function(){return"#272822 #272822 #dc2566 #8fc029 #d4c96e #55bcce #9358fe #56b7a5 #acada1 #76715e #fa2772 #a7e22e #e7db75 #66d9ee #ae82ff #66efd5 #cfd0c2 #f1ebeb #f1ebeb".split(" ")},Ashes:function(){return"#1c2023 #1c2023 #c7ae95 #95c7ae #aec795 #ae95c7 #c795ae #95aec7 #c7ccd1 #747c84 #c7ae95 #95c7ae #aec795 #ae95c7 #c795ae #95aec7 #f3f4f5 #c7ccd1 #c7ccd1".split(" ")},
Google:function(){return"#ffffff #ffffff #cc342b #198844 #fba922 #3971ed #a36ac7 #3971ed #c5c8c6 #969896 #cc342b #198844 #fba922 #3971ed #a36ac7 #3971ed #ffffff #373b41 #373b41".split(" ")},"Mono Light":function(){return"#f7f7f7 #f7f7f7 #7c7c7c #8e8e8e #a0a0a0 #686868 #747474 #868686 #b9b9b9 #525252 #7c7c7c #8e8e8e #a0a0a0 #686868 #747474 #868686 #f7f7f7 #464646 #464646".split(" ")},"Mono Dark":function(){return"#000000 #000000 #6b6b6b #c4c4c4 #b3b3b3 #999999 #717171 #8a8a8a #b5cabb #202020 #464646 #f8f8f8 #eeeeee #7c7c7c #adadad #c0c0c0 #99ac9e #ffffff #ffffff".split(" ")}},
testShell:function(c){-1===c.substring(0,2).indexOf("]")&&(0===this.shellString.length||7<this.shellString.length)?this.shellString="":(this.shellString+=c,7>this.shellString.length||(-1!==this.shellString.indexOf("]0;fish")?(this.shellString="",this.fsHintLeave=SSHyClient.fishFsHintLeave):-1!==this.shellString.indexOf("@")&&(this.shellString="",this.fsHintLeave=SSHyClient.bashFsHintLeave)))},setLocalEcho:function(c){this.localEcho=Math.min(Math.max(this.localEcho+=c,0),2);document.getElementById("currentLEcho").innerHTML=
["Force Off","Auto","Force On"][this.localEcho];c=document.getElementById("autoEchoState");1===this.localEcho?(c.style.visibility="visible",c.innerHTML="State: "+(!1===this.autoEchoState?"Disabled":"Enabled")):c.style.visibility="hidden"},parseLocalEcho:function(c){if(1===this.localEcho){var a=performance.now();if(!(100>a-this.autoEchoTimeout))if(c=c.substring(0,64),!this.autoEchoState)-1!=c.indexOf(this.fsHintLeave)&&-1!=c.indexOf("@")&&(this.autoEchoState=!0,this.autoEchoElement.innerHTML="State: Enabled",
this.autoEchoTimeout=a);else if(-1!=c.indexOf(this.fsHintEnter)||-1!=c.toLowerCase().indexOf("password"))this.autoEchoState=!1,this.autoEchoElement.innerHTML="State: Disabled",this.autoEchoTimeout=a}},parseKey:function(c){1===this.localEcho&&!1===this.autoEchoState||1<c.key.length||this.blockedKeys.includes(c.key)||c.altKey||c.ctrlKey||c.metaKey||(transport.lastKey||term.write(c.key),transport.lastKey+=c.key)},setKeepAlive:function(c){c=void 0===c?0:1E3*Math.floor(c);if(0===c||void 0!==this.keepAliveInterval)if(clearInterval(this.keepAliveInterval),
this.keepAliveInterval=void 0,!c)return;this.keepAliveInterval=setInterval(transport.keepAlive,c)},setColorScheme:function(c,a){var e=document.styleSheets[0],d;if(!this.colorTango)for(d=0;37>d;d++)e.deleteRule(13);if(!0===c)this.colorTango=!0,this.getColorSchemeName(!0);else{e.insertRule(".terminal .terminal-cursor {background-color: "+c[17]+"; color: "+c[0]+" !important;}",13);e.insertRule(".terminal:not(.focus) .terminal-cursor {outline: 1px solid "+c[17]+" !important;}",13);e.insertRule(".terminal .xterm-viewport {background-color: "+
c[0]+" !important;}",13);e.insertRule("html, body {background-color: "+c[0]+" !important;}",13);e.insertRule("textarea {background-color: "+c[0]+" !important;}",13);e.insertRule(".terminal {color: "+c[18]+" !important;}",13);e.insertRule(".sidenav {background-color: "+modColorPercent(c[0],-.2)+" !important;}",13);e.insertRule(".sidenav .netTraffic .leftarrow {color: "+c[11]+" !important;}",13);e.insertRule(".sidenav .netTraffic .rightarrow {color: "+c[12]+" !important;}",13);for(d=1;16>d;d++)e.insertRule(".terminal .xterm-color-"+
(d-1)+" {color: "+c[d]+" !important;}",13),e.insertRule(".terminal .xterm-bg-color-"+(d-1)+" {background-color: "+c[d]+" !important;}",13);this.colorTango=!1;this.getColorSchemeName(c,a)}},getColorSchemeName:function(c,a){if(!a){c=c.toString();for(var e=0,d=this.colorNames.length;e<d;e++)if(c==this.colorSchemes[this.colorNames[e]]().toString()){a=this.colorNames[e];this.colorCounter=e;break}}document.getElementById("currentColor").innerHTML=void 0===a?"Custom":a},importXresources:function(){var c=
new FileReader,a=document.getElementById("Xresources").files[0];c.readAsText(a);c.onload=function(){var e=c.result.split("\n"),e=e.sort((new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"})).compare);colorScheme_custom=[];for(var d=0;d<e.length;d++){var b=e[d].match(/#([0-9a-f]{3}){1,2}/ig);if(b&&(colorScheme_custom.push(b[0]),19<=colorScheme_custom.length))break}if(19!==colorScheme_custom.length)return alert("Uploaded file could not be parsed correctly.");transport.settings.setColorScheme(colorScheme_custom,
".Xresources"===a.name?void 0:a.name.split(".")[0])}},cycleColorSchemes:function(c){this.colorCounter=0===c?--this.colorCounter:++this.colorCounter;if(this.colorCounter>this.colorNames.length-1||0>this.colorCounter)this.colorCounter=1===c?0:this.colorNames.length-1;this.setColorScheme(this.colorSchemes[this.colorNames[this.colorCounter]]())},modFontSize:function(c){this.fontSize+=c;document.getElementById("terminal").style.fontSize=this.fontSize+"px";c=term.rowContainer.firstElementChild;var a=c.innerHTML;
c.style.display="inline";c.innerHTML="W";var e=c.getBoundingClientRect();c.style.display="";c.innerHTML=a;fontWidth=e.width+.15;fontHeight=Math.floor(e.height);document.getElementById("currentFontSize").innerHTML=transport.settings.fontSize+"px";resize()},modTerm:function(c,a){c?termRows=a:termCols=a;this.changeTermSize(!0)},changeTermSize:function(c){term.resize(termCols,termRows);transport.auth.resize_pty(termCols,termRows);var a=document.getElementsByClassName("xterm-rows");a&&(a[0].style.lineHeight=
null);void 0===c&&(document.getElementById("termCols").value=termCols,document.getElementById("termRows").value=termRows)},setNetTraffic:function(c,a){if(this.sidenavElementState){switch(!0){case 1024>c:c+="Bytes";break;case 1024<=c&&1048576>c:c=(c/1024).toFixed(3)+"KB";break;case 1048576<=c&&1073741824>c:c=(c/1048576).toFixed(3)+"MB";break;default:c=(c/1073741824).toFixed(3)+"GB"}element=!0===a?this.rxElement:this.txElement;element.innerHTML=c}}};var ws,transport,term=null,isFirefox=-1<navigator.userAgent.toLowerCase().indexOf("firefox");window.msCrypto&&(window.crypto={},window.crypto.getRandomValues=function(c){return window.msCrypto.getRandomValues(c)},Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}));var termRows,termCols=0,fontWidth=10,fontHeight=18,resizeInterval;
window.onload=function(){document.body.innerHTML+='<div id="settingsNav" class="sidenav">\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="closebtn" onclick="toggleNav(0)">&times;</a>\n\t\t\t\t\t\t\t\t\t<span class="title large">Terminal Options</span>\n\t\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px">Font Size</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.modFontSize(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentFontSize">16px</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.modFontSize(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:40px">Terminal Size</span>\n\t\t\t\t\t\t\t\t\t<span class="leftarrow">Cols:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termCols" min="5" oninput="transport.settings.modTerm(0, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="rightarrow">Rows:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termRows" min="5" oninput="transport.settings.modTerm(1, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:60px;">Local Echo</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary nomargin">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext" style="visibility:visible;" id="autoEchoState">State: Enabled</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" id="currentLEcho">Auto</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:50px">Colours</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(0)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentColor">Monokai</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">Format: Xresources</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" style="width:220px;">Upload</span>\n\t\t\t\t\t\t\t\t\t\t<input type="file" title=" " id="Xresources" class="upload" onchange="transport.settings.importXresources()" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Keep Alive</span>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">0 to disable</span>\n\t\t\t\t\t\t\t\t\t\t<input type="number" class="large" id="keepAlive" onchange="transport.settings.setKeepAlive(this.value);" placeholder="0">\n\t\t\t\t\t\t\t\t\t\t<span style="font-size:16px;"> seconds</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="pasteDiv">\n\t\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Paste</span>\n\t\t\t\t\t\t\t\t\t\t<textarea id="pasteTextArea" class="pasteTextArea" onchange="term.textarea.onpaste(this.value)"></textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Network Traffic</span>\n\t\t\t\t\t\t\t\t\t<div class="netTraffic">\n\t\t\t\t\t\t\t\t\t\t<span class="leftarrow">rx: <span id="rxTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t\t<span class="rightarrow">tx: <span id="txTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="hostKey" style="display: none;">\n\t\t\t\t\t\t\t\t        <span class="title" style="padding-top:20px;">Host Key</span>\n\t\t\t\t\t\t\t\t        <span id="hostKeyImg" class="hostKeyImg"></span>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span id="gear" class="gear" style="visibility:visible;" onclick="toggleNav(250)">&#9881</span>';isFirefox||
(document.getElementById("pasteDiv").style.display="none");startSSHy()};window.onresize=function(){clearTimeout(resizeInterval);resizeInterval=setTimeout(resize,400)};window.onbeforeunload=function(){(ws||transport)&&transport.disconnect()};function resize(){termCols=Math.floor((window.innerWidth-10)/fontWidth);termRows=Math.floor((window.innerHeight-10)/fontHeight)-(isFirefox?3:1);ws&&transport&&term&&transport.settings.changeTermSize()}
function toggleNav(c){document.getElementById("settingsNav").style.width=c;if(transport.settings.sidenavElementState=c)transport.settings.setNetTraffic(transport.parceler.recieveData,!0),transport.settings.setNetTraffic(transport.parceler.transmitData,!1);c=document.getElementById("gear").style;c.visibility="hidden"===c.visibility?"visible":"hidden"}
function startSSHy(){document.title="SSHy Client";ws=new WebSocket(wsproxyURL,"base64");ws.onopen=function(c){transport=new SSHyClient.Transport(ws);transport.settings.rsaCheckEnabled=!1};ws.onmessage=function(c){transport.parceler.handle(atob(c.data))};ws.onclose=function(c){term?transport.closing||(term.write("\n\n\rWebsocket connection to "+transport.auth.hostname+" was unexpectedly closed."),transport.settings.keepAliveInterval||term.write("\n\n\rThis was likely caused by he remote SSH server timing out the session due to inactivity.\r\n- Session Keep Alive interval can be set in the settings to prevent this behaviour.")):
(termInit(),term.write("WebSocket connection failed: Error in connection establishment: code "+c.code))};ws.sendB64=function(c){this.send(btoa(c));transport.parceler.transmitData+=c.length;transport.settings.setNetTraffic(transport.parceler.transmitData,!1)}}
function termInit(){resize();term=new Terminal({cols:termCols,rows:termRows});term.open(document.getElementById("terminal"),!0);document.getElementById("termCols").value=termCols;document.getElementById("termRows").value=termRows;transport.settings.setColorScheme(transport.settings.colorSchemes.Material())}
function startxtermjs(){termInit();transport.auth.authenticated||term.write("Login as: ");term.textarea.onkeydown=function(c){if(ws&&transport&&!(5<=transport.auth.failedAttempts)&&!transport.auth.awaitingAuthentication){var a=c.char&&1==c.char.length?c.char:c.key;if(!(1<a.length&&(c.altKey||c.ctrlKey||c.metaKey||c.shiftKey)&&"Backspace"!=a)){if(transport.auth.authenticated){if(1==a.length&&(!(c.altKey||c.ctrlKey||c.metaKey)||c.altKey&&c.ctrlKey))var e=a;else if(1==a.length&&c.shiftKey&&c.ctrlKey){if("V"!=
c.key){c.preventDefault();return}}else e=term.evaluateKeyEscapeSequence(c).key;transport.settings.localEcho&&transport.settings.parseKey(c);return null===e?null:transport.expect_key(e)}if(!(c.altKey||c.ctrlKey||c.metaKey||1<a.length&&13!=c.keyCode&&8!=c.keyCode))switch(c.keyCode){case 8:void 0===transport.auth.termPassword?0<transport.auth.termUsername.length&&(term.write("\b"),term.eraseRight(term.x-1,term.y),transport.auth.termUsername=transport.auth.termUsername.slice(0,transport.auth.termUsername.length-
1)):transport.auth.termPassword=transport.auth.termPassword.slice(0,transport.auth.termPassword.length-1);break;case 13:void 0===transport.auth.termPassword?(term.write("\n\r"+transport.auth.termUsername+"@"+transport.auth.hostname+"'s password:"),transport.auth.termPassword=""):(term.write("\n\r"),transport.auth.ssh_connection());break;default:void 0===transport.auth.termPassword?(transport.auth.termUsername+=a,term.write(a)):transport.auth.termPassword+=a}}}};term.textarea.onpaste=function(c){isFirefox?
document.getElementById("pasteTextArea").value="":c=c.clipboardData.getData("text/plain");if(c)if(1E6>c.length)if(5E3<c.length){c=splitSlice(c);for(var a=0;a<c.length-1;a++)transport.expect_key(c[a])}else transport.expect_key(c);else alert("Error: Pasting large strings is not permitted.")}};SSHyClient.Transport=function(c,a){this.local_version="SSH-2.0-SSHyClient";this.remote_version="";this.remote_kex_message=this.local_kex_message=null;this.preferred_algorithms="diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha256,diffie-hellman-group1-sha1 ssh-rsa aes128-ctr hmac-sha2-256,hmac-sha1 none ".split(" ");this.preferred_hash=this.preferred_mac=this.preferred_kex=null;this.parceler=
new SSHyClient.parceler(c,this);this.auth=new SSHyClient.auth(this.parceler);this.settings=void 0===a?new SSHyClient.settings:a;this.lastKey="";this.closing=!1};
SSHyClient.Transport.prototype={kex_info:{"diffie-hellman-group1-sha1":function(c){return new SSHyClient.kex.DiffieHellman(c,1,"SHA-1")},"diffie-hellman-group14-sha1":function(c){return new SSHyClient.kex.DiffieHellman(c,14,"SHA-1")},"diffie-hellman-group-exchange-sha1":function(c){return new SSHyClient.kex.DiffieHellman(c,void 0,"SHA-1")},"diffie-hellman-group1-sha256":function(c){return new SSHyClient.kex.DiffieHellman(c,1,"SHA-256")},"diffie-hellman-group14-sha256":function(c){return new SSHyClient.kex.DiffieHellman(c,
14,"SHA-256")},"diffie-hellman-group-exchange-sha256":function(c){return new SSHyClient.kex.DiffieHellman(c,void 0,"SHA-256")}},mac_info:{"hmac-sha1":function(c){c.parceler.hmacSHAVersion="SHA-1";c.preferred_hash=20},"hmac-sha2-256":function(c){c.parceler.hmacSHAVersion="SHA-256";c.preferred_hash=32}},handler_table:{0:function(c,a){c.parceler.socket.sendB64(c.local_version+"\r\n");c.remote_version=a.slice(0,a.length-2);c.send_kex_init()},1:function(c,a){c.disconnect()},2:function(c,a){},3:function(c,
a){},6:function(c,a){"ssh-userauth"==(new SSHyClient.Message(a.slice(1))).get_string()&&c.auth.ssh_connection()},20:function(c,a){c.parse_kex_reply(a);c.remote_kex_message=a;c.preferred_kex.start()},21:function(c){c.activate_encryption()},31:function(c,a){c.preferred_kex.parse_reply(31,a.slice(1))},33:function(c,a){c.preferred_kex.parse_reply(33,a.slice(1))},51:function(c,a){c.auth.awaitingAuthentication=!1;c.auth.authFailure()},52:function(c,a){c.auth.authenticated=!0;c.auth.awaitingAuthentication=
!1;c.auth.auth_success(!0)},80:function(c,a){},91:function(c,a){c.auth.get_pty("xterm",termCols,termRows)},93:function(c,a){},94:function(c,a){a=a.slice(9);if(c.settings.localEcho&&(c.settings.testShell(a),c.settings.parseLocalEcho(a),c.lastKey)){if(a==c.lastKey.substring(0,1)){c.lastKey=c.lastKey.slice(1);return}c.lastKey=c.lastKey.slice(1);term.write("\b")}term.write(fromUtf8(a))},96:function(c,a){},97:function(c,a){c.disconnect()},98:function(c,a){}},winAdjust:function(){var c=new SSHyClient.Message;
c.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_WINDOW_ADJUST));c.add_int(0);c.add_int(SSHyClient.WINDOW_SIZE);this.send_packet(c.toString());this.parceler.windowSize=SSHyClient.WINDOW_SIZE},disconnect:function(c){this.closing=!0;c=void 0===c?11:c;var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_DISCONNECT));a.add_int(c);this.send_packet(a.toString());ws.close();term.write("\r\nConnection to "+this.auth.hostname+" closed.")},keepAlive:function(){if(3!==ws.readyState){var c=
new SSHyClient.Message;c.add_bytes(String.fromCharCode(SSHyClient.MSG_IGNORE));c.add_string("");transport.send_packet(c.toString())}},cut_padding:function(c){return c.substring(1,c.length-c[0].charCodeAt(0))},send_packet:function(c){this.parceler.send(c)},send_kex_init:function(){var c=new SSHyClient.Message;c.add_bytes(String.fromCharCode(SSHyClient.MSG_KEX_INIT));c.add_bytes(read_rng(16));c.add_string(this.preferred_algorithms[0]);c.add_string(this.preferred_algorithms[1]);for(var a=2;6>a;a++)c.add_string(this.preferred_algorithms[a]),
c.add_string(this.preferred_algorithms[a]);c.add_boolean(!1);c.add_int(0);this.local_kex_message=c=c.toString();this.send_packet(c)},parse_kex_reply:function(c){c=new SSHyClient.Message(c);c.get_bytes(17);var a=filter(this.preferred_algorithms[0],c.get_string().split(",")),e=filter(this.preferred_algorithms[1],c.get_string().split(","));c.get_string();var d=filter(this.preferred_algorithms[2],c.get_string().split(","));c.get_string();c=filter(this.preferred_algorithms[3],c.get_string().split(","));
if(!(a&&e&&d&&c))throw"Chosen Algs = kex="+a+", keys="+e+", cipher="+d+", mac="+c;this.preferred_kex=this.kex_info[a](this);this.preferred_mac=this.mac_info[c](this)},generate_key:function(c,a){var e=new SSHyClient.Message;e.add_mpint(SSHyClient.kex.K);e.add_bytes(SSHyClient.kex.H);e.add_bytes(c);e.add_bytes(SSHyClient.kex.sessionId);return"SHA-1"==this.preferred_kex.SHAVersion?(new SSHyClient.hash.SHA1(e.toString())).digest().substring(0,a):(new SSHyClient.hash.SHA256(e.toString())).digest().substring(0,
a)},activate_encryption:function(){this.parceler.block_size=16;this.parceler.macSize=this.preferred_hash;this.parceler.outbound_enc_iv=this.generate_key("A",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_enc_key=this.generate_key("C",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_mac_key=this.generate_key("E",this.parceler.macSize,this.preferred_kex.SHAVersion);this.parceler.outbound_cipher=new SSHyClient.crypto.AES(this.parceler.outbound_enc_key,
SSHyClient.AES_CTR,this.parceler.outbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.outbound_enc_iv)));this.parceler.inbound_enc_iv=this.generate_key("B",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_enc_key=this.generate_key("D",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_mac_key=this.generate_key("F",this.parceler.macSize,this.preferred_kex.SHAVersion);this.parceler.inbound_cipher=
new SSHyClient.crypto.AES(this.parceler.inbound_enc_key,SSHyClient.AES_CTR,this.parceler.inbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.inbound_enc_iv)));this.parceler.encrypting=!0;this.auth.request_auth()},handle_dec:function(c){c=this.cut_padding(c);try{this.handler_table[c.substring(0,1).charCodeAt(0)](this,c)}catch(a){console.log(a),console.log("Error! code - "+c.substring(0,1).charCodeAt(0)+" does not exist!")}},str_to_bytes:function(c){return unescape(encodeURIComponent(c))},
expect_key:function(c){if(c){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_DATA));a.add_int(0);a.add_string(this.str_to_bytes(c.toString()));this.parceler.send(a)}},send_new_keys:function(c){c=new SSHyClient.Message;c.add_bytes(String.fromCharCode(SSHyClient.MSG_NEW_KEYS));this.send_packet(c)}};

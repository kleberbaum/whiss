var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,f){a!=Array.prototype&&a!=Object.prototype&&(a[e]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,h={next:function(){if(f<a.length){var d=f++;return{value:e(d,a[d]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(a,e,f,h){if(e){f=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var d=a[h];d in f||(f[d]={});f=f[d]}a=a[a.length-1];h=f[a];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");function SSHyClient(){}
SSHyClient={MSG_DISCONNECT:1,MSG_IGNORE:2,MSG_UNIMPLEMENTED:3,MSG_DEBUG:4,MSG_SERVICE_REQUEST:5,MSG_SERVICE_ACCEPT:6,MSG_KEX_INIT:20,MSG_NEW_KEYS:21,MSG_KEXDH_INIT:30,MSG_KEXDH_GEX_GROUP:31,MSG_KEXDH_GEX_INIT:32,MSG_KEXDH_GEX_REPLY:33,MSG_KEXDH_GEX_REQUEST:34,MSG_USERAUTH_REQUEST:50,MSG_USERAUTH_FAILURE:51,MSG_USERAUTH_SUCCESS:52,MSG_USERAUTH_BANNER:53,MSG_GLOBAL_REQUEST:80,MSG_REQUEST_SUCCESS:81,MSG_REQUEST_FAILURE:82,MSG_CHANNEL_OPEN:90,MSG_CHANNEL_OPEN_SUCCESS:91,MSG_CHANNEL_OPEN_FAILURE:92,MSG_CHANNEL_WINDOW_ADJUST:93,
MSG_CHANNEL_DATA:94,MSG_CHANNEL_EXTENDED_DATA:95,MSG_CHANNEL_EOF:96,MSG_CHANNEL_CLOSE:97,MSG_CHANNEL_REQUEST:98,MSG_CHANNEL_SUCCESS:99,MSG_CHANNEL_FAILURE:100,WINDOW_SIZE:1048576,MAX_PACKET_SIZE:16384,AES_CBC:2,AES_CTR:6};var BigInteger=function(){function a(a,b,n){null!=a&&("number"==typeof a?this.fromNumber(a,b,n):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function e(){return new a(null)}function f(a,b,n,d,e,l){for(;0<=--l;){var g=b*this[a++]+n[d]+e;e=Math.floor(g/67108864);n[d++]=g&67108863}return e}function h(a,b,n,d,e,l){var g=b&32767;for(b>>=15;0<=--l;){var p=this[a]&32767,f=this[a++]>>15,r=b*p+f*g,p=g*p+((r&32767)<<15)+n[d]+(e&1073741823);e=(p>>>30)+(r>>>15)+b*f+(e>>>30);n[d++]=
p&1073741823}return e}function d(a,b,n,d,e,l){var g=b&16383;for(b>>=14;0<=--l;){var p=this[a]&16383,f=this[a++]>>14,r=b*p+f*g,p=g*p+((r&16383)<<14)+n[d]+e;e=(p>>28)+(r>>14)+b*f;n[d++]=p&268435455}return e}function k(a,p){a=b[a.charCodeAt(p)];return null==a?-1:a}function m(a){var b=e();b.fromInt(a);return b}function t(a){var b=1,g;0!=(g=a>>>16)&&(a=g,b+=16);0!=(g=a>>8)&&(a=g,b+=8);0!=(g=a>>4)&&(a=g,b+=4);0!=(g=a>>2)&&(a=g,b+=2);0!=a>>1&&(b+=1);return b}function u(a){this.m=a}function v(a){this.m=a;
this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function q(a,b){return a&b}function w(a,b){return a|b}function B(a,b){return a^b}function y(a,b){return a&~b}function z(){}function C(a){return a}function A(b){this.r2=e();this.q3=e();a.ONE.dlShiftTo(2*b.t,this.r2);this.mu=this.r2.divide(b);this.m=b}var D;"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=h,D=30):"Netscape"!=navigator.appName?(a.prototype.am=f,D=26):(a.prototype.am=
d,D=28);a.prototype.DB=D;a.prototype.DM=(1<<D)-1;a.prototype.DV=1<<D;a.prototype.FV=Math.pow(2,52);a.prototype.F1=52-D;a.prototype.F2=2*D-52;var b=[],l;D=48;for(l=0;9>=l;++l)b[D++]=l;D=97;for(l=10;36>l;++l)b[D++]=l;D=65;for(l=10;36>l;++l)b[D++]=l;u.prototype.convert=function(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};u.prototype.revert=function(a){return a};u.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};u.prototype.mulTo=function(a,b,n){a.multiplyTo(b,n);this.reduce(n)};u.prototype.sqrTo=
function(a,b){a.squareTo(b);this.reduce(b)};v.prototype.convert=function(b){var g=e();b.abs().dlShiftTo(this.m.t,g);g.divRemTo(this.m,null,g);0>b.s&&0<g.compareTo(a.ZERO)&&this.m.subTo(g,g);return g};v.prototype.revert=function(a){var b=e();a.copyTo(b);this.reduce(b);return b};v.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var g=a[b]&32767,d=g*this.mpl+((g*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM,g=b+this.m.t;for(a[g]+=this.m.am(0,d,a,b,0,this.m.t);a[g]>=
a.DV;)a[g]-=a.DV,a[++g]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};v.prototype.mulTo=function(a,b,n){a.multiplyTo(b,n);this.reduce(n)};v.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};a.prototype.copyTo=function(a){for(var b=this.t-1;0<=b;--b)a[b]=this[b];a.t=this.t;a.s=this.s};a.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};a.prototype.fromString=function(b,p){if(16==p)p=4;else if(8==p)p=3;else if(256==
p)p=8;else if(2==p)p=1;else if(32==p)p=5;else if(4==p)p=2;else{this.fromRadix(b,p);return}this.s=this.t=0;for(var g=b.length,d=!1,e=0;0<=--g;){var l=8==p?b[g]&255:k(b,g);0>l?"-"==b.charAt(g)&&(d=!0):(d=!1,0==e?this[this.t++]=l:e+p>this.DB?(this[this.t-1]|=(l&(1<<this.DB-e)-1)<<e,this[this.t++]=l>>this.DB-e):this[this.t-1]|=l<<e,e+=p,e>=this.DB&&(e-=this.DB))}8==p&&0!=(b[0]&128)&&(this.s=-1,0<e&&(this[this.t-1]|=(1<<this.DB-e)-1<<e));this.clamp();d&&a.ZERO.subTo(this,this)};a.prototype.clamp=function(){for(var a=
this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};a.prototype.dlShiftTo=function(a,b){var g;for(g=this.t-1;0<=g;--g)b[g+a]=this[g];for(g=a-1;0<=g;--g)b[g]=0;b.t=this.t+a;b.s=this.s};a.prototype.drShiftTo=function(a,b){for(var g=a;g<this.t;++g)b[g-a]=this[g];b.t=Math.max(this.t-a,0);b.s=this.s};a.prototype.lShiftTo=function(a,b){var g=a%this.DB,d=this.DB-g,p=(1<<d)-1;a=Math.floor(a/this.DB);var e=this.s<<g&this.DM,l;for(l=this.t-1;0<=l;--l)b[l+a+1]=this[l]>>d|e,e=(this[l]&p)<<g;for(l=a-1;0<=l;--l)b[l]=
0;b[a]=e;b.t=this.t+a+1;b.s=this.s;b.clamp()};a.prototype.rShiftTo=function(a,b){b.s=this.s;var g=Math.floor(a/this.DB);if(g>=this.t)b.t=0;else{a%=this.DB;var d=this.DB-a,p=(1<<a)-1;b[0]=this[g]>>a;for(var e=g+1;e<this.t;++e)b[e-g-1]|=(this[e]&p)<<d,b[e-g]=this[e]>>a;0<a&&(b[this.t-g-1]|=(this.s&p)<<d);b.t=this.t-g;b.clamp()}};a.prototype.subTo=function(a,b){for(var g=0,d=0,e=Math.min(a.t,this.t);g<e;)d+=this[g]-a[g],b[g++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;g<this.t;)d+=this[g],b[g++]=
d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;g<a.t;)d-=a[g],b[g++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0;-1>d?b[g++]=this.DV+d:0<d&&(b[g++]=d);b.t=g;b.clamp()};a.prototype.multiplyTo=function(b,d){var g=this.abs(),e=b.abs(),p=g.t;for(d.t=p+e.t;0<=--p;)d[p]=0;for(p=0;p<e.t;++p)d[p+g.t]=g.am(0,e[p],d,p,0,g.t);d.s=0;d.clamp();this.s!=b.s&&a.ZERO.subTo(d,d)};a.prototype.squareTo=function(a){for(var b=this.abs(),g=a.t=2*b.t;0<=--g;)a[g]=0;for(g=0;g<b.t-1;++g){var d=b.am(g,b[g],a,2*g,0,1);(a[g+
b.t]+=b.am(g+1,2*b[g],a,2*g+1,d,b.t-g-1))>=b.DV&&(a[g+b.t]-=b.DV,a[g+b.t+1]=1)}0<a.t&&(a[a.t-1]+=b.am(g,b[g],a,2*g,0,1));a.s=0;a.clamp()};a.prototype.divRemTo=function(b,d,n){var g=b.abs();if(!(0>=g.t)){var p=this.abs();if(p.t<g.t)null!=d&&d.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=e());var l=e(),f=this.s;b=b.s;var r=this.DB-t(g[g.t-1]);0<r?(g.lShiftTo(r,l),p.lShiftTo(r,n)):(g.copyTo(l),p.copyTo(n));g=l.t;p=l[g-1];if(0!=p){var k=p*(1<<this.F1)+(1<g?l[g-2]>>this.F2:0),E=this.FV/k,k=(1<<
this.F1)/k,h=1<<this.F2,m=n.t,u=m-g,q=null==d?e():d;l.dlShiftTo(u,q);0<=n.compareTo(q)&&(n[n.t++]=1,n.subTo(q,n));a.ONE.dlShiftTo(g,q);for(q.subTo(l,l);l.t<g;)l[l.t++]=0;for(;0<=--u;){var v=n[--m]==p?this.DM:Math.floor(n[m]*E+(n[m-1]+h)*k);if((n[m]+=l.am(0,v,n,u,0,g))<v)for(l.dlShiftTo(u,q),n.subTo(q,n);n[m]<--v;)n.subTo(q,n)}null!=d&&(n.drShiftTo(g,d),f!=b&&a.ZERO.subTo(d,d));n.t=g;n.clamp();0<r&&n.rShiftTo(r,n);0>f&&a.ZERO.subTo(n,n)}}}};a.prototype.invDigit=function(){if(1>this.t)return 0;var a=
this[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b};a.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};a.prototype.exp=function(b,d){if(4294967295<b||1>b)return a.ONE;var g=e();var p=e();var l=d.convert(this),f=t(b)-1;for(l.copyTo(g);0<=--f;)if(d.sqrTo(g,p),0<(b&1<<f))d.mulTo(p,l,g);else{var r=g;g=p;p=r}return d.revert(g)};a.prototype.toString=function(a){if(0>this.s)return"-"+
this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var b=(1<<a)-1,g,d=!1,e="",l=this.t,f=this.DB-l*this.DB%a;if(0<l--)for(f<this.DB&&0<(g=this[l]>>f)&&(d=!0,e="0123456789abcdefghijklmnopqrstuvwxyz".charAt(g));0<=l;)f<a?(g=(this[l]&(1<<f)-1)<<a-f,g|=this[--l]>>(f+=this.DB-a)):(g=this[l]>>(f-=a)&b,0>=f&&(f+=this.DB,--l)),0<g&&(d=!0),d&&(e+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(g));return d?e:"0"};a.prototype.negate=
function(){var b=e();a.ZERO.subTo(this,b);return b};a.prototype.abs=function(){return 0>this.s?this.negate():this};a.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var g=this.t,b=g-a.t;if(0!=b)return b;for(;0<=--g;)if(0!=(b=this[g]-a[g]))return b;return 0};a.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+t(this[this.t-1]^this.s&this.DM)};a.prototype.mod=function(b){var g=e();this.abs().divRemTo(b,null,g);0>this.s&&0<g.compareTo(a.ZERO)&&b.subTo(g,g);return g};
a.prototype.modPowInt=function(a,b){b=256>a||b.isEven()?new u(b):new v(b);return this.exp(a,b)};a.ZERO=m(0);a.ONE=m(1);z.prototype.convert=C;z.prototype.revert=C;z.prototype.mulTo=function(a,b,d){a.multiplyTo(b,d)};z.prototype.sqrTo=function(a,b){a.squareTo(b)};A.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var b=e();a.copyTo(b);this.reduce(b);return b};A.prototype.revert=function(a){return a};A.prototype.reduce=function(a){a.drShiftTo(this.m.t-
1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};A.prototype.mulTo=function(a,b,d){a.multiplyTo(b,d);this.reduce(d)};A.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};var r=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],E=67108864/r[r.length-1];a.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};a.prototype.toRadix=function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var b=this.chunkSize(a),b=Math.pow(a,
b),d=m(b),g=e(),l=e(),f="";for(this.divRemTo(d,g,l);0<g.signum();)f=(b+l.intValue()).toString(a).substr(1)+f,g.divRemTo(d,g,l);return l.intValue().toString(a)+f};a.prototype.fromRadix=function(b,d){this.fromInt(0);null==d&&(d=10);for(var g=this.chunkSize(d),e=Math.pow(d,g),l=!1,p=0,f=0,r=0;r<b.length;++r){var E=k(b,r);0>E?"-"==b.charAt(r)&&0==this.signum()&&(l=!0):(f=d*f+E,++p>=g&&(this.dMultiply(e),this.dAddOffset(f,0),f=p=0))}0<p&&(this.dMultiply(Math.pow(d,p)),this.dAddOffset(f,0));l&&a.ZERO.subTo(this,
this)};a.prototype.fromNumber=function(b,d,e){if("number"==typeof d)if(2>b)this.fromInt(1);else for(this.fromNumber(b,e),this.testBit(b-1)||this.bitwiseTo(a.ONE.shiftLeft(b-1),w,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(d);)this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(a.ONE.shiftLeft(b-1),this);else{e=[];var g=b&7;e.length=(b>>3)+1;d.nextBytes(e);e[0]=0<g?e[0]&(1<<g)-1:0;this.fromString(e,256)}};a.prototype.bitwiseTo=function(a,b,d){var g,e=Math.min(a.t,this.t);for(g=
0;g<e;++g)d[g]=b(this[g],a[g]);if(a.t<this.t){var l=a.s&this.DM;for(g=e;g<this.t;++g)d[g]=b(this[g],l);d.t=this.t}else{l=this.s&this.DM;for(g=e;g<a.t;++g)d[g]=b(l,a[g]);d.t=a.t}d.s=b(this.s,a.s);d.clamp()};a.prototype.changeBit=function(b,d){b=a.ONE.shiftLeft(b);this.bitwiseTo(b,d,b);return b};a.prototype.addTo=function(a,b){for(var d=0,g=0,e=Math.min(a.t,this.t);d<e;)g+=this[d]+a[d],b[d++]=g&this.DM,g>>=this.DB;if(a.t<this.t){for(g+=a.s;d<this.t;)g+=this[d],b[d++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=
this.s;d<a.t;)g+=a[d],b[d++]=g&this.DM,g>>=this.DB;g+=a.s}b.s=0>g?-1:0;0<g?b[d++]=g:-1>g&&(b[d++]=this.DV+g);b.t=d;b.clamp()};a.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};a.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}};a.prototype.multiplyLowerTo=function(a,b,d){var g=Math.min(this.t+a.t,b);d.s=0;for(d.t=g;0<g;)d[--g]=
0;var e;for(e=d.t-this.t;g<e;++g)d[g+this.t]=this.am(0,a[g],d,g,0,this.t);for(e=Math.min(a.t,b);g<e;++g)this.am(0,a[g],d,g,0,b-g);d.clamp()};a.prototype.multiplyUpperTo=function(a,b,d){--b;var g=d.t=this.t+a.t-b;for(d.s=0;0<=--g;)d[g]=0;for(g=Math.max(b-this.t,0);g<a.t;++g)d[this.t+g-b]=this.am(b-g,a[g],d,0,0,this.t+g-b);d.clamp();d.drShiftTo(1,d)};a.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,d=0>this.s?a-1:0;if(0<this.t)if(0==b)d=this[0]%a;else for(var g=this.t-1;0<=g;--g)d=(b*
d+this[g])%a;return d};a.prototype.millerRabin=function(b){var d=this.subtract(a.ONE),g=d.getLowestSetBit();if(0>=g)return!1;var l=d.shiftRight(g);b=b+1>>1;b>r.length&&(b=r.length);for(var f=e(),k=0;k<b;++k){f.fromInt(r[k]);var E=f.modPow(l,this);if(0!=E.compareTo(a.ONE)&&0!=E.compareTo(d)){for(var h=1;h++<g&&0!=E.compareTo(d);)if(E=E.modPowInt(2,this),0==E.compareTo(a.ONE))return!1;if(0!=E.compareTo(d))return!1}}return!0};a.prototype.clone=function(){var a=e();this.copyTo(a);return a};a.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};a.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};a.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};a.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};a.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var d=this.DB-
a*this.DB%8,e,l=0;if(0<a--)for(d<this.DB&&(e=this[a]>>d)!=(this.s&this.DM)>>d&&(b[l++]=e|this.s<<this.DB-d);0<=a;)if(8>d?(e=(this[a]&(1<<d)-1)<<8-d,e|=this[--a]>>(d+=this.DB-8)):(e=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(e&128)&&(e|=-256),0==l&&(this.s&128)!=(e&128)&&++l,0<l||e!=this.s)b[l++]=e;return b};a.prototype.equals=function(a){return 0==this.compareTo(a)};a.prototype.min=function(a){return 0>this.compareTo(a)?this:a};a.prototype.max=function(a){return 0<this.compareTo(a)?this:a};a.prototype.and=
function(a){var b=e();this.bitwiseTo(a,q,b);return b};a.prototype.or=function(a){var b=e();this.bitwiseTo(a,w,b);return b};a.prototype.xor=function(a){var b=e();this.bitwiseTo(a,B,b);return b};a.prototype.andNot=function(a){var b=e();this.bitwiseTo(a,y,b);return b};a.prototype.not=function(){for(var a=e(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];a.t=this.t;a.s=~this.s;return a};a.prototype.shiftLeft=function(a){var b=e();0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b);return b};a.prototype.shiftRight=function(a){var b=
e();0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b);return b};a.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this.DB,a=this[a];if(0==a)a=-1;else{var d=0;0==(a&65535)&&(a>>=16,d+=16);0==(a&255)&&(a>>=8,d+=8);0==(a&15)&&(a>>=4,d+=4);0==(a&3)&&(a>>=2,d+=2);0==(a&1)&&++d;a=d}return b+a}return 0>this.s?this.t*this.DB:-1};a.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,d=0;d<this.t;++d){for(var e=this[d]^b,l=0;0!=e;)e&=e-1,++l;a+=l}return a};a.prototype.testBit=
function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)};a.prototype.setBit=function(a){return this.changeBit(a,w)};a.prototype.clearBit=function(a){return this.changeBit(a,y)};a.prototype.flipBit=function(a){return this.changeBit(a,B)};a.prototype.add=function(a){var b=e();this.addTo(a,b);return b};a.prototype.subtract=function(a){var b=e();this.subTo(a,b);return b};a.prototype.multiply=function(a){var b=e();this.multiplyTo(a,b);return b};a.prototype.divide=function(a){var b=
e();this.divRemTo(a,b,null);return b};a.prototype.remainder=function(a){var b=e();this.divRemTo(a,null,b);return b};a.prototype.divideAndRemainder=function(a){var b=e(),d=e();this.divRemTo(a,b,d);return[b,d]};a.prototype.modPow=function(a,b){var d=a.bitLength(),g=m(1);if(0>=d)return g;var l=18>d?1:48>d?3:144>d?4:768>d?5:6;b=8>d?new u(b):b.isEven()?new A(b):new v(b);var f=[],r=3,k=l-1,E=(1<<l)-1;f[1]=b.convert(this);if(1<l)for(d=e(),b.sqrTo(f[1],d);r<=E;)f[r]=e(),b.mulTo(d,f[r-2],f[r]),r+=2;for(var p=
a.t-1,h,q=!0,w=e(),d=t(a[p])-1;0<=p;){d>=k?h=a[p]>>d-k&E:(h=(a[p]&(1<<d+1)-1)<<k-d,0<p&&(h|=a[p-1]>>this.DB+d-k));for(r=l;0==(h&1);)h>>=1,--r;0>(d-=r)&&(d+=this.DB,--p);if(q)f[h].copyTo(g),q=!1;else{for(;1<r;)b.sqrTo(g,w),b.sqrTo(w,g),r-=2;0<r?b.sqrTo(g,w):(r=g,g=w,w=r);b.mulTo(w,f[h],g)}for(;0<=p&&0==(a[p]&1<<d);)b.sqrTo(g,w),r=g,g=w,w=r,0>--d&&(d=this.DB-1,--p)}return b.revert(g)};a.prototype.modInverse=function(b){var d=b.isEven();if(this.isEven()&&d||0==b.signum())return a.ZERO;for(var e=b.clone(),
g=this.clone(),l=m(1),f=m(0),r=m(0),k=m(1);0!=e.signum();){for(;e.isEven();)e.rShiftTo(1,e),d?(l.isEven()&&f.isEven()||(l.addTo(this,l),f.subTo(b,f)),l.rShiftTo(1,l)):f.isEven()||f.subTo(b,f),f.rShiftTo(1,f);for(;g.isEven();)g.rShiftTo(1,g),d?(r.isEven()&&k.isEven()||(r.addTo(this,r),k.subTo(b,k)),r.rShiftTo(1,r)):k.isEven()||k.subTo(b,k),k.rShiftTo(1,k);0<=e.compareTo(g)?(e.subTo(g,e),d&&l.subTo(r,l),f.subTo(k,f)):(g.subTo(e,g),d&&r.subTo(l,r),k.subTo(f,k))}if(0!=g.compareTo(a.ONE))return a.ZERO;
if(0<=k.compareTo(b))return k.subtract(b);if(0>k.signum())k.addTo(b,k);else return k;return 0>k.signum()?k.add(b):k};a.prototype.pow=function(a){return this.exp(a,new z)};a.prototype.gcd=function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var d=b;b=a;a=d}d=b.getLowestSetBit();var e=a.getLowestSetBit();if(0>e)return b;d<e&&(e=d);for(0<e&&(b.rShiftTo(e,b),a.rShiftTo(e,a));0<b.signum();)0<(d=b.getLowestSetBit())&&b.rShiftTo(d,b),0<(d=a.getLowestSetBit())&&
a.rShiftTo(d,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));0<e&&a.lShiftTo(e,a);return a};a.prototype.isProbablePrime=function(a){var b,d=this.abs();if(1==d.t&&d[0]<=r[r.length-1]){for(b=0;b<r.length;++b)if(d[0]==r[b])return!0;return!1}if(d.isEven())return!1;for(b=1;b<r.length;){for(var e=r[b],g=b+1;g<r.length&&e<E;)e*=r[g++];for(e=d.modInt(e);b<g;)if(0==e%r[b++])return!1}return d.millerRabin(a)};return{BigInteger:a}}(),BigInteger=BigInteger.BigInteger;var struct={pack:function(a,e){var f="";switch(a){case "Q":a=new BigInteger("ff",16);f+=String.fromCharCode(e.shiftRight(56).and(a));f+=String.fromCharCode(e.shiftRight(48).and(a));f+=String.fromCharCode(e.shiftRight(40).and(a));f+=String.fromCharCode(e.shiftRight(32).and(a));f+=String.fromCharCode(e.shiftRight(24).and(a));f+=String.fromCharCode(e.shiftRight(16).and(a));f+=String.fromCharCode(e.shiftRight(8).and(a));f+=String.fromCharCode(e.and(a));break;case "I":f+=String.fromCharCode(e>>>24&255),
f+=String.fromCharCode(e>>>16&255),f+=String.fromCharCode(e>>>8&255);case "B":f+=String.fromCharCode(e&255)}return f},unpack:function(a,e){var f=[],h=0,d=0;switch(a){case "Q":d=new BigInteger("0",10);d=d.add((new BigInteger(e.charCodeAt(0).toString(),10)).shiftLeft(56));d=d.add((new BigInteger(e.charCodeAt(1).toString(),10)).shiftLeft(48));d=d.add((new BigInteger(e.charCodeAt(2).toString(),10)).shiftLeft(40));d=d.add((new BigInteger(e.charCodeAt(3).toString(),10)).shiftLeft(32));d=d.add((new BigInteger(e.charCodeAt(4).toString(),
10)).shiftLeft(24));d=d.add((new BigInteger(e.charCodeAt(5).toString(),10)).shiftLeft(16));d=d.add((new BigInteger(e.charCodeAt(6).toString(),10)).shiftLeft(8));d=d.add((new BigInteger(e.charCodeAt(7).toString(),10)).shiftLeft(0));f.push(d);break;case "I":d+=e.charCodeAt(0)<<24>>>0,d+=e.charCodeAt(1)<<16>>>0,d+=e.charCodeAt(2)<<8>>>0,h+=3;case "B":d+=e.charCodeAt(0+h)<<0>>>0,f.push(d)}return f}};function inflate_long(a){var e=new BigInteger("0",10);a.length%4&&(a=Array(4-a.length%4+1).join("\x00")+a);for(var f=0;f<a.length;f+=4)e=e.shiftLeft(32),e=e.add(new BigInteger(struct.unpack("I",a.substring(f,f+4))[0].toString(),10));return e}
function deflate_long(a,e){a="number"==typeof a?new BigInteger(a.toString(),10):a.clone();e=void 0==e?!0:e;for(var f="",h=new BigInteger("-1",10),d=new BigInteger("ffffffff",16);!a.equals(BigInteger.ZERO)&&!a.equals(h);)f=struct.pack("I",a.and(d))+f,a=a.shiftRight(32);for(var d=!1,k=0;k<f.length;++k){if(a.equals(BigInteger.ZERO)&&"\x00"!=f.charAt(k)){d=!0;break}if(a.equals(h)&&"\u00ff"!=f.charAt(k)){d=!0;break}}d||(k=0,f=a.equals(BigInteger.ZERO)?"\x00":"\u00ff");f=f.substring(k);e&&(a.equals(BigInteger.ZERO)&&
128<=f.charCodeAt(0)&&(f="\x00"+f),a.equals(h)&&128>f.charCodeAt(0)&&(f="\u00ff"+f));return f}function toByteArray(a){for(var e=new Uint8Array(a.length),f=0;f<a.length;f++)e[f]=a.charCodeAt(f);return e}function fromByteArray(a){return String.fromCharCode.apply(null,new Uint8Array(a))}function bytesToWords(a){for(var e=[],f=0,h=0;f<a.length;f++,h+=8)e[h>>>5]|=(a[f]&255)<<24-h%32;return e}function wordsToBytes(a){for(var e=[],f=0;f<32*a.length;f+=8)e.push(a[f>>>5]>>>24-f%32&255);return e}
function hex2ascii(a){for(var e="",f=0;f<a.length;f+=2)e+=String.fromCharCode(parseInt(a.substr(f,2),16));return e}function ascii2hex(a){for(var e="",f=0;f<a.length;f++)e=1==a.charCodeAt(f).toString(16).length?e+("0"+a.charCodeAt(f).toString(16)):e+(""+a.charCodeAt(f).toString(16));return e}function setCharAt(a,e,f){return a.substr(0,e)+f+a.substr(e+1)};sjcl={cipher:{}};
sjcl.cipher.aes=function(a,e){this._tables[0][0][0]||this._precompute();this.mode=e;var f,h,d=this._tables[0][4],k=this._tables[1];e=a.length;var m=1;if(4!==e&&6!==e&&8!==e)throw"invalid aes key size";this._key=[f=a.slice(0),h=[]];for(a=e;a<4*e+28;a++){var t=f[a-1];if(0===a%e||8===e&&4===a%e)t=d[t>>>24]<<24^d[t>>16&255]<<16^d[t>>8&255]<<8^d[t&255],0===a%e&&(t=t<<8^t>>>24^m<<24,m=m<<1^283*(m>>7));f[a]=f[a-e]^t}for(e=0;a;e++,a--)t=f[e&3?a:a-4],h[e]=4>=a||4>e?t:k[0][d[t>>>24]]^k[1][d[t>>16&255]]^k[2][d[t>>
8&255]]^k[3][d[t&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(a,e,f){e=this.mode==sjcl.cipher.aes.MODE_CBC?e:[];for(var h=[],d=0;d<a.length/16;d++){var k=a.slice(16*d,16*(d+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var m=0;16>m;m++)k[m]^=e[m];e=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(k),0))}else for(e=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(f.increment())),0)),m=0;16>m;m++)e[m]^=k[m];h=h.concat(e)}return h},decrypt:function(a,e){for(var f=[],h=0;h<a.length/
16;h++){var d=a.slice(16*h,16*(h+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(d),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var k=0;16>k;k++)ct[k]^=e[k];e=d}f=f.concat(ct)}return f},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var a=this._tables[0],e=this._tables[1],f=a[4],h=e[4],d,k,m,t=[],u=[],v;for(d=0;256>d;d++)u[(t[d]=d<<1^283*(d>>7))^d]=d;for(k=m=0;!f[k];k^=v||1,m=u[m]||1){var q=m^m<<1^m<<2^m<<3^m<<4;q=q>>8^q&255^99;f[k]=q;h[q]=k;var w=t[d=
t[v=t[k]]];var B=16843009*w^65537*d^257*v^16843008*k;w=257*t[q]^16843008*q;for(d=0;4>d;d++)a[d][k]=w=w<<24^w>>>8,e[d][q]=B=B<<24^B>>>8}for(d=0;5>d;d++)a[d]=a[d].slice(0),e[d]=e[d].slice(0)},_crypt:function(a,e){if(4!==a.length)throw"invalid aes block size";var f=this._key[e],h=a[0]^f[0],d=a[e?3:1]^f[1],k=a[2]^f[2];a=a[e?1:3]^f[3];var m=f.length/4-2,t,u=4,v=[0,0,0,0];var q=this._tables[e];var w=q[0],B=q[1],y=q[2],z=q[3],C=q[4];for(t=0;t<m;t++){q=w[h>>>24]^B[d>>16&255]^y[k>>8&255]^z[a&255]^f[u];var A=
w[d>>>24]^B[k>>16&255]^y[a>>8&255]^z[h&255]^f[u+1];var D=w[k>>>24]^B[a>>16&255]^y[h>>8&255]^z[d&255]^f[u+2];a=w[a>>>24]^B[h>>16&255]^y[d>>8&255]^z[k&255]^f[u+3];u+=4;h=q;d=A;k=D}for(t=0;4>t;t++)v[e?3&-t:t]=C[h>>>24]<<24^C[d>>16&255]<<16^C[k>>8&255]<<8^C[a&255]^f[u++],q=h,h=d,d=k,k=a,a=q;return v}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(a){var e=[],f=sjcl.bitArray.bitLength(a),h,d;for(h=0;h<f/8;h++)0===(h&3)&&(d=a[h/4]),e.push(d>>>24),d<<=8;return e},toBits:function(a){var e=[],f,h=0;for(f=0;f<a.length;f++)h=h<<8|a[f],3===(f&3)&&(e.push(h),h=0);f&3&&e.push(sjcl.bitArray.partial(8*(f&3),h));return e}};
sjcl.bitArray={bitLength:function(a){var e=a.length;return 0===e?0:32*(e-1)+sjcl.bitArray.getPartial(a[e-1])},partial:function(a,e,f){return 32===a?e:(f?e|0:e<<32-a)+1099511627776*a},getPartial:function(a){return Math.round(a/1099511627776)||32}};SSHyClient.hash={};SSHyClient.hash.SHA1=function(a){this.data=a||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var a=toByteArray(this.data),e=bytesToWords(a),f=8*a.length,a=[],h=1732584193,d=-271733879,k=-1732584194,m=271733878,t=-1009589776;e[f>>5]|=128<<24-f%32;e[(f+64>>>9<<4)+15]=f;for(f=0;f<e.length;f+=16){for(var u=h,v=d,q=k,w=m,B=t,y=0;80>y;y++){if(16>y)a[y]=e[f+y];else{var z=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=z<<1|z>>>31}z=(h<<5|h>>>27)+t+(a[y]>>>0)+(20>y?(d&k|~d&m)+1518500249:40>y?(d^k^m)+1859775393:60>y?(d&k|d&m|k&m)-1894007588:(d^k^m)-899497514);
t=m;m=k;k=d<<30|d>>>2;d=h;h=z}h+=u;d+=v;k+=q;m+=w;t+=B}return fromByteArray(wordsToBytes([h,d,k,m,t]))}};SSHyClient.hash.SHA256=function(a){this.data=a||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var a=toByteArray(this.data),e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=bytesToWords(a),h=8*a.length,a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],d=[],k,m;f[h>>5]|=128<<24-h%32;f[(h+64>>9<<4)+15]=h;for(k=0;k<f.length;k+=16){h=a[0];var t=a[1];var u=a[2];var v=
a[3];var q=a[4];var w=a[5];var B=a[6];var y=a[7];for(m=0;64>m;m++){if(16>m)d[m]=f[m+k];else{var z=d[m-15];var C=d[m-2];d[m]=((z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3)+(d[m-7]>>>0)+((C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10)+(d[m-16]>>>0)}C=h&t^h&u^t&u;var A=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22);z=(y>>>0)+((q<<26|q>>>6)^(q<<21|q>>>11)^(q<<7|q>>>25))+(q&w^~q&B)+e[m]+(d[m]>>>0);C=A+C;y=B;B=w;w=q;q=v+z>>>0;v=u;u=t;t=h;h=z+C>>>0}a[0]+=h;a[1]+=t;a[2]+=u;a[3]+=v;a[4]+=q;a[5]+=w;a[6]+=B;a[7]+=y}return fromByteArray(wordsToBytes(a))}};SSHyClient.hash.HMAC=function(a,e,f){f=digestmod="SHA-1"==f?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var h=new f,d=new f;64<a.length&&(a=(new f(a)).digest());a+=Array(64-a.length+1).join("\x00");f=toByteArray(a).slice(0);a=toByteArray(a).slice(0);for(var k=0;64>k;++k)f[k]^=92,a[k]^=54;h.data+=fromByteArray(f);d.data+=fromByteArray(a);d.data+=e;h.data+=d.digest();return h.digest()};(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=a()})(function(){return function e(f,h,d){function k(t,v){if(!h[t]){if(!f[t]){var q="function"==typeof require&&require;if(!v&&q)return q(t,!0);if(m)return m(t,!0);q=Error("Cannot find module '"+t+"'");throw q.code="MODULE_NOT_FOUND",q;}q=h[t]={exports:{}};
f[t][0].call(q.exports,function(d){var e=f[t][1][d];return k(e?e:d)},q,q.exports,e,f,h,d)}return h[t].exports}for(var m="function"==typeof require&&require,t=0;t<d.length;t++)k(d[t]);return k}({1:[function(e,f,h){function d(d,e,f){this.textarea=d;this.compositionView=e;this.terminal=f;this.isComposing=!1;this.compositionText=null;this.compositionPosition={start:null,end:null};this.isSendingComposition=!1}h.CompositionHelper=d;d.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=
this.textarea.value.length;this.compositionView.textContent="";this.compositionView.classList.add("active")};d.prototype.compositionupdate=function(d){this.compositionView.textContent=d.data;this.updateCompositionElements();var e=this;setTimeout(function(){e.compositionPosition.end=e.textarea.value.length},0)};d.prototype.compositionend=function(){this.finalizeComposition(!0)};d.prototype.keydown=function(d){if(this.isComposing||this.isSendingComposition){if(229===d.keyCode||16===d.keyCode||17===
d.keyCode||18===d.keyCode)return!1;this.finalizeComposition(!1)}return 229===d.keyCode?(this.handleAnyTextareaChanges(),!1):!0};d.prototype.finalizeComposition=function(d){this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(d){var e=this.compositionPosition.start,f=this.compositionPosition.end,k=this;this.isSendingComposition=!0;setTimeout(function(){if(k.isSendingComposition){k.isSendingComposition=!1;var d=k.isComposing?k.textarea.value.substring(e,
f):k.textarea.value.substring(e);k.terminal.handler(d)}},0)}else this.isSendingComposition=!1,d=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(d)};d.prototype.handleAnyTextareaChanges=function(){var d=this.textarea.value,e=this;setTimeout(function(){if(!e.isComposing){var f=e.textarea.value.replace(d,"");0<f.length&&e.terminal.handler(f)}},0)};d.prototype.updateCompositionElements=function(d){if(this.isComposing){var e=this.terminal.element.querySelector(".terminal-cursor");
if(e){var f=this.terminal.element.querySelector(".xterm-rows").offsetTop+e.offsetTop;this.compositionView.style.left=e.offsetLeft+"px";this.compositionView.style.top=f+"px";this.compositionView.style.height=e.offsetHeight+"px";this.compositionView.style.lineHeight=e.offsetHeight+"px";var k=this.compositionView.getBoundingClientRect();this.textarea.style.left=e.offsetLeft+"px";this.textarea.style.top=f+"px";this.textarea.style.width=k.width+"px";this.textarea.style.height=k.height+"px";this.textarea.style.lineHeight=
k.height+"px"}d||setTimeout(this.updateCompositionElements.bind(this,!0),0)}};d.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""}},{}],2:[function(e,f,h){function d(){this._events=this._events||{}}h.EventEmitter=d;d.prototype.addListener=function(d,e){this._events[d]=this._events[d]||[];this._events[d].push(e)};d.prototype.on=d.prototype.addListener;d.prototype.removeListener=function(d,e){if(this._events[d]){d=this._events[d];for(var f=d.length;f--;)if(d[f]===
e||d[f].listener===e){d.splice(f,1);break}}};d.prototype.off=d.prototype.removeListener;d.prototype.removeAllListeners=function(d){this._events[d]&&delete this._events[d]};d.prototype.once=function(d,e){function f(){var k=Array.prototype.slice.call(arguments);this.removeListener(d,f);return e.apply(this,k)}f.listener=e;return this.on(d,f)};d.prototype.emit=function(d){if(this._events[d])for(var e=Array.prototype.slice.call(arguments,1),f=this._events[d],k=f.length,h=0;h<k;h++)f[h].apply(this,e)};
d.prototype.listeners=function(d){return this._events[d]=this._events[d]||[]}},{}],3:[function(e,f,h){function d(d,e,f,h){this.terminal=d;this.viewportElement=e;this.scrollArea=f;this.charMeasureElement=h;this.lastRecordedViewportHeight=this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));this.syncScrollArea()}
h.Viewport=d;d.prototype.refresh=function(d){d=d||this.charMeasureElement.getBoundingClientRect();if(0<d.height){var e=d.height!==this.currentRowHeight;e&&(this.currentRowHeight=d.height,this.viewportElement.style.lineHeight=d.height+"px",this.terminal.rowContainer.style.lineHeight=d.height+"px");var f=this.lastRecordedViewportHeight!==this.terminal.rows;if(e||f)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=d.height*this.terminal.rows+"px";this.scrollArea.style.height=
d.height*this.lastRecordedBufferLength+"px"}};d.prototype.syncScrollArea=function(){if(this.lastRecordedBufferLength!==this.terminal.lines.length)this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh();else if(this.lastRecordedViewportHeight!==this.terminal.rows)this.refresh();else{var d=this.charMeasureElement.getBoundingClientRect();d.height!==this.currentRowHeight&&this.refresh(d)}d=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==d&&(this.viewportElement.scrollTop=
d)};d.prototype.onScroll=function(d){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};d.prototype.onWheel=function(d){if(0!==d.deltaY){var e=1;d.deltaMode===WheelEvent.DOM_DELTA_LINE?e=this.currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=d.deltaY*e;d.preventDefault()}}},{}],4:[function(e,f,h){function d(d){var e=String.fromCharCode(32),f=String.fromCharCode(160),
h=new RegExp(f,"g");return d.split("\n").map(function(d){return d.replace(/\s+$/g,"").replace(h,e)}).join("\n")}h.prepareTextForClipboard=d;h.copyHandler=function(e,f){var h=window.getSelection().toString(),h=d(h);f.browser.isMSIE?window.clipboardData.setData("Text",h):e.clipboardData.setData("text/plain",h);e.preventDefault()};h.pasteHandler=function(d,e){d.stopPropagation();var f=function(f){e.handler(f);e.textarea.value="";return e.cancel(d)};if(e.browser.isMSIE){if(window.clipboardData){var h=
window.clipboardData.getData("Text");f(h)}}else d.clipboardData&&(h=d.clipboardData.getData("text/plain"),f(h))};h.rightClickHandler=function(e,f){var h=document.getSelection();var k=d(h.toString()),m=!1;if(h.rangeCount){h=h.getRangeAt(0).getClientRects();var q=e.clientX;var w=e.clientY;for(e=0;e<h.length&&!(m=h[e],m=q>m.left&&q<m.right&&w>m.top&&w<m.bottom);e++);if(k.match(/^\s$/)||!k.length)m=!1}m||(f.textarea.style.position="fixed",f.textarea.style.width="20px",f.textarea.style.height="20px",f.textarea.style.left=
q-10+"px",f.textarea.style.top=w-10+"px",f.textarea.style.zIndex=1E3,f.textarea.focus(),setTimeout(function(){f.textarea.style.position=null;f.textarea.style.width=null;f.textarea.style.height=null;f.textarea.style.left=null;f.textarea.style.top=null;f.textarea.style.zIndex=null},4))}},{}],5:[function(e,f,h){e=e("./Generic.js");var d="undefined"==typeof navigator?!0:!1;f=d?"node":navigator.userAgent;d=d?"node":navigator.platform;h.isFirefox=!!~f.indexOf("Firefox");h.isMSIE=!!~f.indexOf("MSIE")||!!~f.indexOf("Trident");
h.isMac=e.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],d);h.isIpad="iPad"===d;h.isIphone="iPhone"===d;h.isMSWindows=e.contains(["Windows","Win16","Win32","WinCE"],d)},{"./Generic.js":6}],6:[function(e,f,h){h.contains=function(d,e){return 0<=d.indexOf(e)}},{}],7:[function(e,f,h){function d(b,e,f){var l=this;if(!(this instanceof d))return new d(b,e,f);l.browser=C;l.cancel=d.cancel;B.EventEmitter.call(this);"number"===typeof b&&(b={cols:b,rows:e,handler:f});b=b||{};Object.keys(d.defaults).forEach(function(e){null==
b[e]&&(b[e]=d.options[e],d[e]!==d.defaults[e]&&(b[e]=d[e]));l[e]=b[e]});8===b.colors.length?b.colors=b.colors.concat(d._colors.slice(8)):16===b.colors.length?b.colors=b.colors.concat(d._colors.slice(16)):10===b.colors.length?b.colors=b.colors.slice(0,-2).concat(d._colors.slice(8,-2),b.colors.slice(-2)):18===b.colors.length&&(b.colors=b.colors.concat(d._colors.slice(16,-2),b.colors.slice(-2)));this.colors=b.colors;this.options=b;this.parent=b.body||b.parent||(A?A.getElementsByTagName("body")[0]:null);
this.cols=b.cols||b.geometry[0];this.rows=b.rows||b.geometry[1];this.geometry=[this.cols,this.rows];if(b.handler)this.on("data",b.handler);this.y=this.x=this.ydisp=this.ybase=0;this.isRefreshing=!1;this.cursorState=0;this.cursorHidden=!1;this.convertEol;this.state=0;this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.customKeydownHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=
null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.surrogate_high=this.postfix=this.prefix="";this.lines=[];for(e=this.rows;e--;)this.lines.push(this.blankLine());
this.tabs;this.setupStops();this.userScrolling=!1}function k(b,d,e,f){Array.isArray(b)||(b=[b]);b.forEach(function(b){b.addEventListener(d,e,f||!1)})}function m(b,d,e,f){b.removeEventListener(d,e,f||!1)}function t(b,d){function e(){this.constructor=b}e.prototype=d.prototype;b.prototype=new e}function u(b){var d=b.getElementsByTagName("body")[0];b=b.createElement("span");b.innerHTML="hello world";d.appendChild(b);var e=b.scrollWidth;b.style.fontWeight="bold";var f=b.scrollWidth;d.removeChild(b);return e!==
f}function v(b,d){b=b.browser.isMac&&d.altKey&&!d.ctrlKey&&!d.metaKey||b.browser.isMSWindows&&d.altKey&&d.ctrlKey&&!d.metaKey;return"keypress"==d.type?b:b&&(!d.keyCode||47<d.keyCode)}function q(b,e,f){var l=b<<16|e<<8|f;if(null!=q._cache[l])return q._cache[l];for(var g=Infinity,r=-1,h=0,k,m,F;h<d.vcolors.length;h++){k=d.vcolors[h];m=k[0];F=k[1];k=k[2];m=q.distance(b,e,f,m,F,k);if(0===m){r=h;break}m<g&&(g=m,r=h)}return q._cache[l]=r}var w=e("./CompositionHelper.js"),B=e("./EventEmitter.js"),y=e("./Viewport.js"),
z=e("./handlers/Clipboard.js"),C=e("./utils/Browser"),A="undefined"!=typeof window?window.document:null;t(d,B.EventEmitter);d.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};d.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");d.colors=function(){function b(b,d,g){f.push("#"+e(b)+e(d)+e(g))}function e(b){b=b.toString(16);return 2>b.length?"0"+b:b}var f=d.tangoColors.slice(),
h=[0,95,135,175,215,255],g;for(g=0;216>g;g++)b(h[g/36%6|0],h[g/6%6|0],h[g%6]);for(g=0;24>g;g++)h=8+10*g,b(h,h,h);return f}();d._colors=d.colors.slice();d.vcolors=function(){for(var b=[],e=d.colors,f=0,h;256>f;f++)h=parseInt(e[f].substring(1),16),b.push([h>>16&255,h>>8&255,h&255]);return b}();d.defaults={colors:d.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1};d.options={};d.focus=
null;(function(b,d,e){if(b.forEach)return b.forEach(d,e);for(var f=0;f<b.length;f++)d.call(e,b[f],f,b)})(function(b){if(Object.keys)return Object.keys(b);var d,e=[];for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&e.push(d);return e}(d.defaults),function(b){d[b]=d.defaults[b];d.options[b]=d.defaults[b]});d.prototype.focus=function(){return this.textarea.focus()};d.prototype.getOption=function(b,e){if(!(b in d.defaults))throw Error('No option with key "'+b+'"');return"undefined"!==typeof this.options[b]?
this.options[b]:this[b]};d.prototype.setOption=function(b,e){if(!(b in d.defaults))throw Error('No option with key "'+b+'"');this[b]=e;this.options[b]=e};d.bindFocus=function(b){k(b.textarea,"focus",function(e){b.sendFocus&&b.send("\u001b[I");b.element.classList.add("focus");b.showCursor();d.focus=b;b.emit("focus",{terminal:b})})};d.prototype.blur=function(){return this.textarea.blur()};d.bindBlur=function(b){k(b.textarea,"blur",function(e){b.refresh(b.y,b.y);b.sendFocus&&b.send("\u001b[O");b.element.classList.remove("focus");
d.focus=null;b.emit("blur",{terminal:b})})};d.prototype.initGlobal=function(){function b(b){z.rightClickHandler.call(this,b,e)}var e=this;d.bindKeys(this);d.bindFocus(this);d.bindBlur(this);k(this.element,"copy",function(b){z.copyHandler.call(this,b,e)});k(this.textarea,"paste",function(b){z.pasteHandler.call(this,b,e)});e.browser.isFirefox?k(this.element,"mousedown",function(d){2==d.button&&b(d)}):k(this.element,"contextmenu",b)};d.bindKeys=function(b){k(b.element,"keydown",function(d){A.activeElement==
this&&b.keyDown(d)},!0);k(b.element,"keypress",function(d){A.activeElement==this&&b.keyPress(d)},!0);k(b.element,"keyup",b.focus.bind(b));k(b.textarea,"keydown",function(d){b.keyDown(d)},!0);k(b.textarea,"keypress",function(d){b.keyPress(d);this.value=""},!0);k(b.textarea,"compositionstart",b.compositionHelper.compositionstart.bind(b.compositionHelper));k(b.textarea,"compositionupdate",b.compositionHelper.compositionupdate.bind(b.compositionHelper));k(b.textarea,"compositionend",b.compositionHelper.compositionend.bind(b.compositionHelper));
b.on("refresh",b.compositionHelper.updateCompositionElements.bind(b.compositionHelper))};d.prototype.insertRow=function(b){"object"!=typeof b&&(b=A.createElement("div"));this.rowContainer.appendChild(b);this.children.push(b);return b};d.prototype.open=function(b){var e=this,f=0;this.parent=b||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];
this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.classList.add("xterm-theme-"+this.theme);this.element.style.height;this.element.setAttribute("tabindex",0);this.viewportElement=A.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=A.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);
this.rowContainer=A.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.helperContainer=A.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=A.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck",
"false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){e.emit("focus",{terminal:e})});this.textarea.addEventListener("blur",function(){e.emit("blur",{terminal:e})});this.helperContainer.appendChild(this.textarea);this.compositionView=A.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new w.CompositionHelper(this.textarea,this.compositionView,this);this.helperContainer.appendChild(this.compositionView);this.charMeasureElement=
A.createElement("div");this.charMeasureElement.classList.add("xterm-char-measure-element");this.charMeasureElement.innerHTML="W";for(this.helperContainer.appendChild(this.charMeasureElement);f<this.rows;f++)this.insertRow();this.parent.appendChild(this.element);this.viewport=new y.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasureElement);this.refresh(0,this.rows-1);this.initGlobal();this.focus();k(this.element,"click",function(){var b=A.getSelection(),d=b.isCollapsed;("boolean"==
typeof d?d:"Range"!=b.type)&&e.focus()});this.bindMouse();null==d.brokenBold&&(d.brokenBold=u(this.document));this.emit("open")};d.loadAddon=function(b,d){if("object"===typeof h&&"object"===typeof f)return e("./addons/"+b+"/"+b);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};d.prototype.bindMouse=function(){function b(b){switch(b.overrideType||b.type){case "mousedown":var d=null!=b.button?+b.button:null!=b.which?b.which-1:null;n.browser.isMSIE&&(d=1===
d?0:4===d?1:d);break;case "mouseup":d=3;break;case "DOMMouseScroll":d=0>b.detail?64:65;break;case "wheel":d=0<b.wheelDeltaY?64:65}var e=b.shiftKey?4:0;var l=b.metaKey?8:0;var r=b.ctrlKey?16:0;e=e|l|r;n.vt200Mouse?e&=r:n.normalMouse||(e=0);d=32+(e<<2)+d;if(r=g(b))switch(f(d,r),b.overrideType||b.type){case "mousedown":q=d;break;case "mouseup":q=32}}function d(b){var d=q;(b=g(b))&&f(d+32,b)}function e(b,d){if(n.utfMouse){if(2047===d)return b.push(0);127>d?b.push(d):(2047<d&&(d=2047),b.push(192|d>>6),
b.push(128|d&63))}else{if(255===d)return b.push(0);127<d&&(d=127);b.push(d)}}function f(b,d){if(n.vt300Mouse){b&=3;d.x-=32;d.y-=32;var f="\u001b[24";if(0===b)f+="1";else if(1===b)f+="3";else if(2===b)f+="5";else{if(3===b)return;f+="0"}f+="~["+d.x+","+d.y+"]\r";n.send(f)}else n.decLocator?(b&=3,d.x-=32,d.y-=32,0===b?b=2:1===b?b=4:2===b?b=6:3===b&&(b=3),n.send("\u001b["+b+";"+(3===b?4:0)+";"+d.y+";"+d.x+";"+(d.page||0)+"&w")):n.urxvtMouse?(d.x-=32,d.y-=32,d.x++,d.y++,n.send("\u001b["+b+";"+d.x+";"+
d.y+"M")):n.sgrMouse?(d.x-=32,d.y-=32,n.send("\u001b[<"+(3===(b&3)?b&-4:b)+";"+d.x+";"+d.y+(3===(b&3)?"m":"M"))):(f=[],e(f,b),e(f,d.x),e(f,d.y),n.send("\u001b[M"+String.fromCharCode.apply(String,f)))}function g(b){var d;if(null!=b.pageX){var e=b.pageX;b=b.pageY;for(d=n.element;d&&d!==n.document.documentElement;)e-=d.offsetLeft,b-=d.offsetTop,d="offsetParent"in d?d.offsetParent:d.parentNode;d=n.element.clientWidth;var f=n.element.clientHeight;e=Math.ceil(e/d*n.cols);b=Math.ceil(b/f*n.rows);0>e&&(e=
0);e>n.cols&&(e=n.cols);0>b&&(b=0);b>n.rows&&(b=n.rows);return{x:e+32,y:b+32,type:"wheel"}}}var h=this.element,n=this,q=32;k(h,"mousedown",function(e){if(n.mouseEvents){b(e);n.focus();if(n.vt200Mouse)return e.overrideType="mouseup",b(e),n.cancel(e);n.normalMouse&&k(n.document,"mousemove",d);n.x10Mouse||k(n.document,"mouseup",function G(e){b(e);n.normalMouse&&m(n.document,"mousemove",d);m(n.document,"mouseup",G);return n.cancel(e)});return n.cancel(e)}});k(h,"wheel",function(d){if(n.mouseEvents&&!(n.x10Mouse||
n.vt300Mouse||n.decLocator))return b(d),n.cancel(d)});k(h,"wheel",function(b){if(!n.mouseEvents)return n.viewport.onWheel(b),n.cancel(b)})};d.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=function(){};this.write=function(){};this.element.parentNode&&this.element.parentNode.removeChild(this.element)};d.flags={BOLD:1,UNDERLINE:2,BLINK:4,INVERSE:8,INVISIBLE:16};d.prototype.refresh=function(b,e,f){var l=this;if("undefined"==typeof f||f)this._refreshIsQueued?
this._fullRefreshNext=!0:(setTimeout(function(){l.refresh(b,e,!1)},34),this._refreshIsQueued=!0);else{this._refreshIsQueued=!1;this._fullRefreshNext&&(b=0,e=this.rows-1,this._fullRefreshNext=!1);var g,r,h,k,m;e-b>=this.rows/2&&(m=this.element.parentNode)&&this.element.removeChild(this.rowContainer);var q=this.cols;f=b;for(e>=this.rows.length&&(this.log("`end` is too large. Most likely a bad CSR."),e=this.rows.length-1);f<=e;f++){var t=f+this.ydisp;var w=this.lines[t];var u="";t=this.y===f-(this.ybase-
this.ydisp)&&this.cursorState&&!this.cursorHidden?this.x:-1;var v=this.defAttr;for(g=0;g<q;g++)if(k=w[g][0],r=w[g][1],h=w[g][2]){g===t&&(k=-1);if(k!==v&&(v!==this.defAttr&&(u+="</span>"),k!==this.defAttr))if(-1===k)u+='<span class="reverse-video terminal-cursor',this.cursorBlink&&(u+=" blinking"),u+='">';else{var y=[];h=k&511;v=k>>9&511;var z=k>>18;z&d.flags.BOLD&&(d.brokenBold||y.push("xterm-bold"),8>v&&(v+=8));z&d.flags.UNDERLINE&&y.push("xterm-underline");z&d.flags.BLINK&&y.push("xterm-blink");
z&d.flags.INVERSE&&(h=[v,v=h][0],z&1&&8>v&&(v+=8));z&d.flags.INVISIBLE&&y.push("xterm-hidden");z&d.flags.INVERSE&&(257==h&&(h=15),256==v&&(v=0));256>h&&y.push("xterm-bg-color-"+h);256>v&&y.push("xterm-color-"+v);u+="<span";y.length&&(u+=' class="'+y.join(" ")+'"');u+=">"}switch(r){case "&":u+="&amp;";break;case "<":u+="&lt;";break;case ">":u+="&gt;";break;default:u=" ">=r?u+"&nbsp;":u+r}v=k}v!==this.defAttr&&(u+="</span>");this.children[f].innerHTML=u}m&&this.element.appendChild(this.rowContainer);
this.emit("refresh",{element:this.element,start:b,end:e})}};d.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};d.prototype.scroll=function(){++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1));this.userScrolling||(this.ydisp=this.ybase);var b=this.ybase+this.rows-1;b-=this.rows-1-this.scrollBottom;b===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(b,0,this.blankLine());
0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};d.prototype.scrollDisp=function(b,d){0>b?this.userScrolling=!0:b+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=b;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);d||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-
1)};d.prototype.scrollPages=function(b){this.scrollDisp(b*(this.rows-1))};d.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};d.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};d.prototype.write=function(b){var e=b.length,f=0;this.refreshEnd=this.refreshStart=this.y;for(this.surrogate_high&&(b=this.surrogate_high+b,this.surrogate_high="");f<e;f++){var h=b[f];var g=b.charCodeAt(f);if(55296<=g&&56319>=g){var k=b.charCodeAt(f+1);if(isNaN(k)){this.surrogate_high=
h;continue}g=1024*(g-55296)+(k-56320)+65536;h+=b.charAt(f+1)}if(!(56320<=g&&57343>=g))switch(this.state){case 0:switch(h){case "\u0007":this.bell();break;case "\n":case "\x0B":case "\f":this.convertEol&&(this.x=0);this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());break;case "\r":this.x=0;break;case "\b":0<this.x&&this.x--;break;case "\t":this.x=this.nextStop();break;case "\u000e":this.setgLevel(1);break;case "\u000f":this.setgLevel(0);break;case "\u001b":this.state=1;break;default:if(g=
D(g)," "<=h)if(this.charset&&this.charset[h]&&(h=this.charset[h]),k=this.y+this.ybase,!g&&this.x)this.lines[k][this.x-1]&&(this.lines[k][this.x-1][2]?this.lines[k][this.x-1][1]+=h:this.lines[k][this.x-2]&&(this.lines[k][this.x-2][1]+=h),this.updateRange(this.y));else{if(this.x+g-1>=this.cols)if(this.wraparoundMode)this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());else if(this.x=this.cols-1,2===g)continue;k=this.y+this.ybase;if(this.insertMode)for(var n=0;n<g;++n)0===this.lines[this.y+
this.ybase].pop()[2]&&this.lines[k][this.cols-2]&&2===this.lines[k][this.cols-2][2]&&(this.lines[k][this.cols-2]=[this.curAttr," ",1]),this.lines[k].splice(this.x,0,[this.curAttr," ",1]);this.lines[k][this.x]=[this.curAttr,h,g];this.x++;this.updateRange(this.y);2===g&&(this.lines[k][this.x]=[this.curAttr,"",0],this.x++)}}break;case 1:switch(h){case "[":this.params=[];this.currentParam=0;this.state=2;break;case "]":this.params=[];this.currentParam=0;this.state=3;break;case "P":this.params=[];this.currentParam=
0;this.state=5;break;case "_":this.state=6;break;case "^":this.state=6;break;case "c":this.reset();break;case "E":this.x=0;case "D":this.index();break;case "M":this.reverseIndex();break;case "%":this.setgLevel(0);this.setgCharset(0,d.charsets.US);this.state=0;f++;break;case "(":case ")":case "*":case "+":case "-":case ".":switch(h){case "(":this.gcharset=0;break;case ")":this.gcharset=1;break;case "*":this.gcharset=2;break;case "+":this.gcharset=3;break;case "-":this.gcharset=1;break;case ".":this.gcharset=
2}this.state=4;break;case "/":this.gcharset=3;this.state=4;f--;break;case "N":break;case "O":break;case "n":this.setgLevel(2);break;case "o":this.setgLevel(3);break;case "|":this.setgLevel(3);break;case "}":this.setgLevel(2);break;case "~":this.setgLevel(1);break;case "7":this.saveCursor();this.state=0;break;case "8":this.restoreCursor();this.state=0;break;case "#":this.state=0;f++;break;case "H":this.tabSet();break;case "=":this.log("Serial port requested application keypad.");this.applicationKeypad=
!0;this.viewport.syncScrollArea();this.state=0;break;case ">":this.log("Switching back to normal keypad.");this.applicationKeypad=!1;this.viewport.syncScrollArea();this.state=0;break;default:this.state=0,this.error("Unknown ESC control: %s.",h)}break;case 4:switch(h){case "0":h=d.charsets.SCLD;break;case "A":h=d.charsets.UK;break;case "B":h=d.charsets.US;break;case "4":h=d.charsets.Dutch;break;case "C":case "5":h=d.charsets.Finnish;break;case "R":h=d.charsets.French;break;case "Q":h=d.charsets.FrenchCanadian;
break;case "K":h=d.charsets.German;break;case "Y":h=d.charsets.Italian;break;case "E":case "6":h=d.charsets.NorwegianDanish;break;case "Z":h=d.charsets.Spanish;break;case "H":case "7":h=d.charsets.Swedish;break;case "=":h=d.charsets.Swiss;break;case "/":h=d.charsets.ISOLatin;f++;break;default:h=d.charsets.US}this.setgCharset(this.gcharset,h);this.gcharset=null;this.state=0;break;case 3:if("\u001b"===h||"\u0007"===h){"\u001b"===h&&f++;this.params.push(this.currentParam);switch(this.params[0]){case 0:case 1:case 2:this.params[1]&&
(this.title=this.params[1],this.handleTitle(this.title))}this.params=[];this.state=this.currentParam=0}else this.params.length?this.currentParam+=h:"0"<=h&&"9">=h?this.currentParam=10*this.currentParam+h.charCodeAt(0)-48:";"===h&&(this.params.push(this.currentParam),this.currentParam="");break;case 2:if("?"===h||">"===h||"!"===h){this.prefix=h;break}if("0"<=h&&"9">=h){this.currentParam=10*this.currentParam+h.charCodeAt(0)-48;break}if("$"===h||'"'===h||" "===h||"'"===h){this.postfix=h;break}this.params.push(this.currentParam);
this.currentParam=0;if(";"===h)break;this.state=0;switch(h){case "A":this.cursorUp(this.params);break;case "B":this.cursorDown(this.params);break;case "C":this.cursorForward(this.params);break;case "D":this.cursorBackward(this.params);break;case "H":this.cursorPos(this.params);break;case "J":this.eraseInDisplay(this.params);break;case "K":this.eraseInLine(this.params);break;case "m":this.prefix||this.charAttributes(this.params);break;case "n":this.prefix||this.deviceStatus(this.params);break;case "@":this.insertChars(this.params);
break;case "E":this.cursorNextLine(this.params);break;case "F":this.cursorPrecedingLine(this.params);break;case "G":this.cursorCharAbsolute(this.params);break;case "L":this.insertLines(this.params);break;case "M":this.deleteLines(this.params);break;case "P":this.deleteChars(this.params);break;case "X":this.eraseChars(this.params);break;case "`":this.charPosAbsolute(this.params);break;case "a":this.HPositionRelative(this.params);break;case "c":this.sendDeviceAttributes(this.params);break;case "d":this.linePosAbsolute(this.params);
break;case "e":this.VPositionRelative(this.params);break;case "f":this.HVPosition(this.params);break;case "h":this.setMode(this.params);break;case "l":this.resetMode(this.params);break;case "r":this.setScrollRegion(this.params);break;case "s":this.saveCursor(this.params);break;case "u":this.restoreCursor(this.params);break;case "I":this.cursorForwardTab(this.params);break;case "S":this.scrollUp(this.params);break;case "T":2>this.params.length&&!this.prefix&&this.scrollDown(this.params);break;case "Z":this.cursorBackwardTab(this.params);
break;case "b":this.repeatPrecedingCharacter(this.params);break;case "g":this.tabClear(this.params);break;case "p":switch(this.prefix){case "!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",h)}this.postfix=this.prefix="";break;case 5:if("\u001b"===h||"\u0007"===h){"\u001b"===h&&f++;switch(this.prefix){case "":break;case "$q":h=this.currentParam;g=!1;switch(h){case '"q':h='0"q';break;case '"p':h='61"p';break;case "r":h=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+
"r";break;case "m":h="0m";break;default:this.error("Unknown DCS Pt: %s.",h),h=""}this.send("\u001bP"+ +g+"$r"+h+"\u001b\\");break;case "+p":break;case "+q":h=this.currentParam;g=!1;this.send("\u001bP"+ +g+"+r"+h+"\u001b\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0;this.prefix="";this.state=0}else this.currentParam?this.currentParam+=h:this.prefix||"$"===h||"+"===h?2===this.prefix.length?this.currentParam=h:this.prefix+=h:this.currentParam=h;break;case 6:if("\u001b"===
h||"\u0007"===h)"\u001b"===h&&f++,this.state=0}}this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)};d.prototype.writeln=function(b){this.write(b+"\r\n")};d.prototype.attachCustomKeydownHandler=function(b){this.customKeydownHandler=b};d.prototype.keyDown=function(b){this.ybase!==this.ydisp&&this.scrollToBottom();if(this.customKeydownHandler&&!1===this.customKeydownHandler(b)||!this.compositionHelper.keydown.bind(this.compositionHelper)(b))return!1;var d=this.evaluateKeyEscapeSequence(b);
if(d.scrollDisp)return this.scrollDisp(d.scrollDisp),this.cancel(b,!0);if(v(this,b))return!0;d.cancel&&this.cancel(b,!0);if(!d.key)return!0;this.emit("keydown",b);this.emit("key",d.key,b);this.showCursor();this.handler(d.key);return this.cancel(b,!0)};d.prototype.evaluateKeyEscapeSequence=function(b){var d={cancel:!1,key:void 0,scrollDisp:void 0},e=b.shiftKey<<0|b.altKey<<1|b.ctrlKey<<2|b.metaKey<<3;switch(b.keyCode){case 8:if(b.shiftKey){d.key="\b";break}d.key="\u007f";break;case 9:if(b.shiftKey){d.key=
"\u001b[Z";break}d.key="\t";d.cancel=!0;break;case 13:d.key="\r";d.cancel=!0;break;case 27:d.key="\u001b";d.cancel=!0;break;case 37:e?(d.key="\u001b[1;"+(e+1)+"D","\u001b[1;3D"==d.key&&(d.key="\u001b[1;5D")):d.key=this.applicationCursor?"\u001bOD":"\u001b[D";break;case 39:e?(d.key="\u001b[1;"+(e+1)+"C","\u001b[1;3C"==d.key&&(d.key="\u001b[1;5C")):d.key=this.applicationCursor?"\u001bOC":"\u001b[C";break;case 38:e?(d.key="\u001b[1;"+(e+1)+"A","\u001b[1;3A"==d.key&&(d.key="\u001b[1;5A")):d.key=this.applicationCursor?
"\u001bOA":"\u001b[A";break;case 40:e?(d.key="\u001b[1;"+(e+1)+"B","\u001b[1;3B"==d.key&&(d.key="\u001b[1;5B")):d.key=this.applicationCursor?"\u001bOB":"\u001b[B";break;case 45:b.shiftKey||b.ctrlKey||(d.key="\u001b[2~");break;case 46:d.key=e?"\u001b[3;"+(e+1)+"~":"\u001b[3~";break;case 36:d.key=e?"\u001b[1;"+(e+1)+"H":this.applicationCursor?"\u001bOH":"\u001b[H";break;case 35:d.key=e?"\u001b[1;"+(e+1)+"F":this.applicationCursor?"\u001bOF":"\u001b[F";break;case 33:b.shiftKey?d.scrollDisp=-(this.rows-
1):d.key="\u001b[5~";break;case 34:b.shiftKey?d.scrollDisp=this.rows-1:d.key="\u001b[6~";break;case 112:d.key=e?"\u001b[1;"+(e+1)+"P":"\u001bOP";break;case 113:d.key=e?"\u001b[1;"+(e+1)+"Q":"\u001bOQ";break;case 114:d.key=e?"\u001b[1;"+(e+1)+"R":"\u001bOR";break;case 115:d.key=e?"\u001b[1;"+(e+1)+"S":"\u001bOS";break;case 116:d.key=e?"\u001b[15;"+(e+1)+"~":"\u001b[15~";break;case 117:d.key=e?"\u001b[17;"+(e+1)+"~":"\u001b[17~";break;case 118:d.key=e?"\u001b[18;"+(e+1)+"~":"\u001b[18~";break;case 119:d.key=
e?"\u001b[19;"+(e+1)+"~":"\u001b[19~";break;case 120:d.key=e?"\u001b[20;"+(e+1)+"~":"\u001b[20~";break;case 121:d.key=e?"\u001b[21;"+(e+1)+"~":"\u001b[21~";break;case 122:d.key=e?"\u001b[23;"+(e+1)+"~":"\u001b[23~";break;case 123:d.key=e?"\u001b[24;"+(e+1)+"~":"\u001b[24~";break;default:!b.ctrlKey||b.shiftKey||b.altKey||b.metaKey?this.browser.isMac||!b.altKey||b.ctrlKey||b.metaKey||(65<=b.keyCode&&90>=b.keyCode?d.key="\u001b"+String.fromCharCode(b.keyCode+32):192===b.keyCode?d.key="\u001b`":48<=b.keyCode&&
57>=b.keyCode&&(d.key="\u001b"+(b.keyCode-48))):65<=b.keyCode&&90>=b.keyCode?d.key=String.fromCharCode(b.keyCode-64):32===b.keyCode?d.key=String.fromCharCode(0):51<=b.keyCode&&55>=b.keyCode?d.key=String.fromCharCode(b.keyCode-51+27):56===b.keyCode?d.key=String.fromCharCode(127):219===b.keyCode?d.key=String.fromCharCode(27):221===b.keyCode&&(d.key=String.fromCharCode(29))}return d};d.prototype.setgLevel=function(b){this.glevel=b;this.charset=this.charsets[b]};d.prototype.setgCharset=function(b,d){this.charsets[b]=
d;this.glevel===b&&(this.charset=d)};d.prototype.keyPress=function(b){this.cancel(b);if(b.charCode)var d=b.charCode;else if(null==b.which)d=b.keyCode;else if(0!==b.which&&0!==b.charCode)d=b.which;else return!1;if(!d||(b.altKey||b.ctrlKey||b.metaKey)&&!v(this,b))return!1;d=String.fromCharCode(d);this.emit("keypress",d,b);this.emit("key",d,b);this.showCursor();this.handler(d);return!1};d.prototype.send=function(b){var d=this;this.queue||setTimeout(function(){d.handler(d.queue);d.queue=""},1);this.queue+=
b};d.prototype.bell=function(){if(this.visualBell){var b=this;this.element.style.borderColor="white";setTimeout(function(){b.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};d.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var b=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,b)}};d.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var b=Array.prototype.slice.call(arguments);
this.context.console.error.apply(this.context.console,b)}};d.prototype.resize=function(b,d){var e;if(b!==this.cols||d!==this.rows){1>b&&(b=1);1>d&&(d=1);var f=this.cols;if(f<b){var g=[this.defAttr," ",1];for(e=this.lines.length;e--;)for(;this.lines[e].length<b;)this.lines[e].push(g)}else for(e=this.lines.length;e--;)for(;this.lines[e].length>b;)this.lines[e].pop();this.setupStops(f);this.cols=b;f=this.rows;g=0;if(f<d)for(;f++<d;)this.lines.length<d+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+
this.y+g+1?(this.ybase--,g++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<d&&this.insertRow();else for(;f-- >d;)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>d&&(e=this.children.shift())&&e.parentNode.removeChild(e);this.rows=d;this.y>=d&&(this.y=d-1);g&&(this.y+=g);this.x>=b&&(this.x=b-1);this.scrollTop=0;this.scrollBottom=d-1;this.refresh(0,this.rows-1);this.normal=
null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:b,rows:d})}};d.prototype.updateRange=function(b){b<this.refreshStart&&(this.refreshStart=b);b>this.refreshEnd&&(this.refreshEnd=b)};d.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};d.prototype.setupStops=function(b){for(null!=b?this.tabs[b]||(b=this.prevStop(b)):(this.tabs={},b=0);b<this.cols;b+=8)this.tabs[b]=!0};d.prototype.prevStop=function(b){for(null==b&&(b=this.x);!this.tabs[--b]&&
0<b;);return b>=this.cols?this.cols-1:0>b?0:b};d.prototype.nextStop=function(b){for(null==b&&(b=this.x);!this.tabs[++b]&&b<this.cols;);return b>=this.cols?this.cols-1:0>b?0:b};d.prototype.eraseRight=function(b,d){for(var e=this.lines[this.ybase+d],f=[this.eraseAttr()," ",1];b<this.cols;b++)e[b]=f;this.updateRange(d)};d.prototype.eraseLeft=function(b,d){var e=this.lines[this.ybase+d],f=[this.eraseAttr()," ",1];for(b++;b--;)e[b]=f;this.updateRange(d)};d.prototype.clear=function(){if(0!==this.ybase||
0!==this.y){this.lines=[this.lines[this.ybase+this.y]];this.y=this.ybase=this.ydisp=0;for(var b=1;b<this.rows;b++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};d.prototype.eraseLine=function(b){this.eraseRight(0,b)};d.prototype.blankLine=function(b){b=[b?this.eraseAttr():this.defAttr," ",1];for(var d=[],e=0;e<this.cols;e++)d[e]=b;return d};d.prototype.ch=function(b){return b?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};d.prototype.is=function(b){return 0===
(this.termName+"").indexOf(b)};d.prototype.handler=function(b){this.emit("data",b)};d.prototype.handleTitle=function(b){this.emit("title",b)};d.prototype.index=function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.state=0};d.prototype.reverseIndex=function(){var b;this.y--;this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),b=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-b+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom));
this.state=0};d.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var b=this.customKeydownHandler;d.call(this,this.options);this.customKeydownHandler=b;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};d.prototype.tabSet=function(){this.tabs[this.x]=!0;this.state=0};d.prototype.cursorUp=function(b){b=b[0];1>b&&(b=1);this.y-=b;0>this.y&&(this.y=0)};d.prototype.cursorDown=function(b){b=b[0];1>b&&(b=1);this.y+=b;this.y>=this.rows&&(this.y=this.rows-1)};d.prototype.cursorForward=
function(b){b=b[0];1>b&&(b=1);this.x+=b;this.x>=this.cols&&(this.x=this.cols-1)};d.prototype.cursorBackward=function(b){b=b[0];1>b&&(b=1);this.x-=b;0>this.x&&(this.x=0)};d.prototype.cursorPos=function(b){var d=b[0]-1;b=2<=b.length?b[1]-1:0;0>d?d=0:d>=this.rows&&(d=this.rows-1);0>b?b=0:b>=this.cols&&(b=this.cols-1);this.x=b;this.y=d};d.prototype.eraseInDisplay=function(b){switch(b[0]){case 0:this.eraseRight(this.x,this.y);for(b=this.y+1;b<this.rows;b++)this.eraseLine(b);break;case 1:this.eraseLeft(this.x,
this.y);for(b=this.y;b--;)this.eraseLine(b);break;case 2:for(b=this.rows;b--;)this.eraseLine(b)}};d.prototype.eraseInLine=function(b){switch(b[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}};d.prototype.charAttributes=function(b){if(1===b.length&&0===b[0])this.curAttr=this.defAttr;else{for(var d=b.length,e=0,f=this.curAttr>>18,g=this.curAttr>>9&511,h=this.curAttr&511,k;e<d;e++)k=b[e],30<=k&&37>=k?g=k-30:40<=k&&47>=k?h=k-40:
90<=k&&97>=k?(k+=8,g=k-90):100<=k&&107>=k?(k+=8,h=k-100):0===k?(f=this.defAttr>>18,g=this.defAttr>>9&511,h=this.defAttr&511):1===k?f|=1:4===k?f|=2:5===k?f|=4:7===k?f|=8:8===k?f|=16:22===k?f&=-2:24===k?f&=-3:25===k?f&=-5:27===k?f&=-9:28===k?f&=-17:39===k?g=this.defAttr>>9&511:49===k?h=this.defAttr&511:38===k?2===b[e+1]?(e+=2,g=q(b[e]&255,b[e+1]&255,b[e+2]&255),-1===g&&(g=511),e+=2):5===b[e+1]&&(e+=2,g=b[e]&255):48===k?2===b[e+1]?(e+=2,h=q(b[e]&255,b[e+1]&255,b[e+2]&255),-1===h&&(h=511),e+=2):5===b[e+
1]&&(e+=2,h=b[e]&255):100===k?(g=this.defAttr>>9&511,h=this.defAttr&511):this.error("Unknown SGR attribute: %d.",k);this.curAttr=f<<18|g<<9|h}};d.prototype.deviceStatus=function(b){if(!this.prefix)switch(b[0]){case 5:this.send("\u001b[0n");break;case 6:this.send("\u001b["+(this.y+1)+";"+(this.x+1)+"R")}else if("?"===this.prefix)switch(b[0]){case 6:this.send("\u001b[?"+(this.y+1)+";"+(this.x+1)+"R")}};d.prototype.insertChars=function(b){var d;b=b[0];1>b&&(b=1);var e=this.y+this.ybase;var f=this.x;
for(d=[this.eraseAttr()," ",1];b--&&f<this.cols;)this.lines[e].splice(f++,0,d),this.lines[e].pop()};d.prototype.cursorNextLine=function(b){b=b[0];1>b&&(b=1);this.y+=b;this.y>=this.rows&&(this.y=this.rows-1);this.x=0};d.prototype.cursorPrecedingLine=function(b){b=b[0];1>b&&(b=1);this.y-=b;0>this.y&&(this.y=0);this.x=0};d.prototype.cursorCharAbsolute=function(b){b=b[0];1>b&&(b=1);this.x=b-1};d.prototype.insertLines=function(b){b=b[0];1>b&&(b=1);var d=this.y+this.ybase;var e=this.rows-1-this.scrollBottom;
for(e=this.rows-1+this.ybase-e+1;b--;)this.lines.splice(d,0,this.blankLine(!0)),this.lines.splice(e,1);this.updateRange(this.y);this.updateRange(this.scrollBottom)};d.prototype.deleteLines=function(b){b=b[0];1>b&&(b=1);var d=this.y+this.ybase;var e=this.rows-1-this.scrollBottom;for(e=this.rows-1+this.ybase-e;b--;)this.lines.splice(e+1,0,this.blankLine(!0)),this.lines.splice(d,1);this.updateRange(this.y);this.updateRange(this.scrollBottom)};d.prototype.deleteChars=function(b){var d;b=b[0];1>b&&(b=
1);var e=this.y+this.ybase;for(d=[this.eraseAttr()," ",1];b--;)this.lines[e].splice(this.x,1),this.lines[e].push(d)};d.prototype.eraseChars=function(b){var d;b=b[0];1>b&&(b=1);var e=this.y+this.ybase;var f=this.x;for(d=[this.eraseAttr()," ",1];b--&&f<this.cols;)this.lines[e][f++]=d};d.prototype.charPosAbsolute=function(b){b=b[0];1>b&&(b=1);this.x=b-1;this.x>=this.cols&&(this.x=this.cols-1)};d.prototype.HPositionRelative=function(b){b=b[0];1>b&&(b=1);this.x+=b;this.x>=this.cols&&(this.x=this.cols-
1)};d.prototype.sendDeviceAttributes=function(b){0<b[0]||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("\u001b[>0;276;0c"):this.is("rxvt-unicode")?this.send("\u001b[>85;95;0c"):this.is("linux")?this.send(b[0]+"c"):this.is("screen")&&this.send("\u001b[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("\u001b[?1;2c"):this.is("linux")&&this.send("\u001b[?6c"))};d.prototype.linePosAbsolute=function(b){b=b[0];1>b&&(b=1);this.y=b-1;this.y>=this.rows&&(this.y=
this.rows-1)};d.prototype.VPositionRelative=function(b){b=b[0];1>b&&(b=1);this.y+=b;this.y>=this.rows&&(this.y=this.rows-1)};d.prototype.HVPosition=function(b){1>b[0]&&(b[0]=1);1>b[1]&&(b[1]=1);this.y=b[0]-1;this.y>=this.rows&&(this.y=this.rows-1);this.x=b[1]-1;this.x>=this.cols&&(this.x=this.cols-1)};d.prototype.setMode=function(b){if("object"===typeof b)for(var e=b.length,f=0;f<e;f++)this.setMode(b[f]);else if(!this.prefix)switch(b){case 4:this.insertMode=!0}else if("?"===this.prefix)switch(b){case 1:this.applicationCursor=
!0;break;case 2:this.setgCharset(0,d.charsets.US);this.setgCharset(1,d.charsets.US);this.setgCharset(2,d.charsets.US);this.setgCharset(3,d.charsets.US);break;case 3:this.savedCols=this.cols;this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 66:this.log("Serial port requested application keypad.");this.applicationKeypad=!0;this.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this.x10Mouse=9===b;this.vt200Mouse=1E3===b;this.normalMouse=
1E3<b;this.mouseEvents=!0;this.element.style.cursor="default";this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:this.normal||(b={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs},this.reset(),this.normal=b,this.showCursor())}};
d.prototype.resetMode=function(b){if("object"===typeof b)for(var d=b.length,e=0;e<d;e++)this.resetMode(b[e]);else if(!this.prefix)switch(b){case 4:this.insertMode=!1}else if("?"===this.prefix)switch(b){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows);delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 66:this.log("Switching back to normal keypad.");this.applicationKeypad=!1;this.viewport.syncScrollArea();
break;case 9:case 1E3:case 1002:case 1003:this.mouseEvents=this.normalMouse=this.vt200Mouse=this.x10Mouse=!1;this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,
this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}};d.prototype.setScrollRegion=function(b){this.prefix||(this.scrollTop=(b[0]||1)-1,this.scrollBottom=(b[1]||this.rows)-1,this.y=this.x=0)};d.prototype.saveCursor=function(b){this.savedX=this.x;this.savedY=this.y};d.prototype.restoreCursor=function(b){this.x=this.savedX||0;this.y=this.savedY||0};d.prototype.cursorForwardTab=function(b){for(b=b[0]||1;b--;)this.x=this.nextStop()};
d.prototype.scrollUp=function(b){for(b=b[0]||1;b--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom)};d.prototype.scrollDown=function(b){for(b=b[0]||1;b--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom)};d.prototype.initMouseTracking=
function(b){};d.prototype.resetTitleModes=function(b){};d.prototype.cursorBackwardTab=function(b){for(b=b[0]||1;b--;)this.x=this.prevStop()};d.prototype.repeatPrecedingCharacter=function(b){b=b[0]||1;for(var d=this.lines[this.ybase+this.y],e=d[this.x-1]||[this.defAttr," ",1];b--;)d[this.x++]=e};d.prototype.tabClear=function(b){b=b[0];0>=b?delete this.tabs[this.x]:3===b&&(this.tabs={})};d.prototype.mediaCopy=function(b){};d.prototype.setResources=function(b){};d.prototype.disableModifiers=function(b){};
d.prototype.setPointerMode=function(b){};d.prototype.softReset=function(b){this.applicationKeypad=this.wraparoundMode=this.originMode=this.insertMode=this.cursorHidden=!1;this.viewport.syncScrollArea();this.applicationCursor=!1;this.scrollTop=0;this.scrollBottom=this.rows-1;this.curAttr=this.defAttr;this.x=this.y=0;this.charset=null;this.glevel=0;this.charsets=[null]};d.prototype.requestAnsiMode=function(b){};d.prototype.requestPrivateMode=function(b){};d.prototype.setConformanceLevel=function(b){};
d.prototype.loadLEDs=function(b){};d.prototype.setCursorStyle=function(b){};d.prototype.setCharProtectionAttr=function(b){};d.prototype.restorePrivateValues=function(b){};d.prototype.setAttrInRectangle=function(b){for(var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k,m;d<f+1;d++)for(k=this.lines[this.ybase+d],m=e;m<g;m++)k[m]=[h,k[m][1]];this.updateRange(b[0]);this.updateRange(b[2])};d.prototype.fillRectangle=function(b){for(var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k,m;e<g+1;e++)for(k=this.lines[this.ybase+
e],m=f;m<h;m++)k[m]=[k[m][0],String.fromCharCode(d)];this.updateRange(b[1]);this.updateRange(b[3])};d.prototype.enableLocatorReporting=function(b){};d.prototype.eraseRectangle=function(b){var d=b[0],e=b[1],f=b[2],g=b[3],h,k;for(k=[this.eraseAttr()," ",1];d<f+1;d++){var m=this.lines[this.ybase+d];for(h=e;h<g;h++)m[h]=k}this.updateRange(b[0]);this.updateRange(b[2])};d.prototype.insertColumns=function(){for(var b=params[0],d=this.ybase+this.rows,e=[this.eraseAttr()," ",1],f;b--;)for(f=this.ybase;f<d;f++)this.lines[f].splice(this.x+
1,0,e),this.lines[f].pop();this.maxRange()};d.prototype.deleteColumns=function(){for(var b=params[0],d=this.ybase+this.rows,e=[this.eraseAttr()," ",1],f;b--;)for(f=this.ybase;f<d;f++)this.lines[f].splice(this.x,1),this.lines[f].push(e);this.maxRange()};d.charsets={};d.charsets.SCLD={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",
v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};d.charsets.UK=null;d.charsets.US=null;d.charsets.Dutch=null;d.charsets.Finnish=null;d.charsets.French=null;d.charsets.FrenchCanadian=null;d.charsets.German=null;d.charsets.Italian=null;d.charsets.NorwegianDanish=null;d.charsets.Spanish=null;d.charsets.Swedish=null;d.charsets.Swiss=null;d.charsets.ISOLatin=null;q._cache={};q.distance=function(b,d,e,f,g,h){return Math.pow(30*(b-f),2)+Math.pow(59*
(d-g),2)+Math.pow(11*(e-h),2)};var D=function(b){var d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,
2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,
3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],
[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(e){if(0===e)return b.nul;if(32>e||127<=e&&160>e)return b.control;a:{var f=0;var g=d.length-1,h;if(!(e<d[0][0]||e>d[g][1]))for(;g>=f;)if(h=Math.floor((f+g)/2),e>d[h][1])f=h+1;
else if(e<d[h][0])g=h-1;else{f=!0;break a}f=!1}return f?0:1+(4352<=e&&(4447>=e||9001==e||9002==e||11904<=e&&42191>=e&&12351!=e||44032<=e&&55203>=e||63744<=e&&64255>=e||65040<=e&&65049>=e||65072<=e&&65135>=e||65280<=e&&65376>=e||65504<=e&&65510>=e||131072<=e&&196605>=e||196608<=e&&262141>=e))}}({nul:0,control:0});d.EventEmitter=B.EventEmitter;d.CompositionHelper=w.CompositionHelper;d.Viewport=y.Viewport;d.inherits=t;d.on=k;d.off=m;d.cancel=function(b,d){if(this.cancelEvents||d)return b.preventDefault(),
b.stopPropagation(),!1};f.exports=d},{"./CompositionHelper.js":1,"./EventEmitter.js":2,"./Viewport.js":3,"./handlers/Clipboard.js":4,"./utils/Browser":5}]},{},[7])(7)});var colorScheme_tango=!0,colorScheme_solarized="#002b36 #002b36 #dc322f #859900 #b58900 #268bd2 #6c71c4 #2aa198 #93a1a1 #657b83 #dc322f #859900 #b58900 #268bd2 #6c71c4 #2aa198 #fdf6e3 #93a1a1 #93a1a1".split(" "),colorScheme_monokai="#272822 #48483e #dc2566 #8fc029 #d4c96e #55bcce #9358fe #56b7a5 #acada1 #76715e #fa2772 #a7e22e #e7db75 #66d9ee #ae82ff #66efd5 #cfd0c2 #f1ebeb #f1ebeb".split(" "),colorScheme_ashes="#1c2023 #1c2023 #c7ae95 #95c7ae #aec795 #ae95c7 #c795ae #95aec7 #c7ccd1 #747c84 #c7ae95 #95c7ae #aec795 #ae95c7 #c795ae #95aec7 #f3f4f5 #c7ccd1 #c7ccd1".split(" "),
colorSchemes=["",colorScheme_solarized,colorScheme_monokai,colorScheme_ashes],c=0;
function setColorScheme(a){var e=document.styleSheets[0];if(!colorScheme_tango){for(var f=0;33>f;f++)e.removeRule(13);if(!a){colorScheme_tango=!0;return}}e.insertRule(".terminal .terminal-cursor {background-color: "+a[17]+"; color: "+a[0]+" !important;}",13);e.insertRule(".terminal:not(.focus) .terminal-cursor {outline: 1px solid "+a[17]+" !important;}",13);e.insertRule(".terminal .xterm-viewport {background-color: "+a[0]+" !important;}",13);e.insertRule("html, body {background-color: "+a[0]+" !important;}",
13);e.insertRule(".terminal {color: "+a[18]+" !important;}",13);for(f=1;16>f;f++)e.insertRule(".terminal .xterm-color-"+(f-1)+" {color: "+a[f]+" !important;}",13),e.insertRule(".terminal .xterm-bg-color-"+(f-1)+" {background-color: "+a[f]+" !important;}",13);colorScheme_tango=!1}
function importXresources(){var a=document.getElementById("Xresources").value.split("\n"),a=a.sort((new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"})).compare);colorScheme_custom=[];for(var e=0;e<a.length;e++)-1!=a[e].indexOf("#")&&colorScheme_custom.push("#"+a[e].split("#")[1]);setColorScheme(colorScheme_custom)}function cycleColorSchemes(a){setColorScheme(colorSchemes[(1==a?++c:0>--c?c=colorSchemes.length-1:c)>colorSchemes.length-1?c=0:c])};function read_rng(a){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(a)))}SSHyClient.crypto={};SSHyClient.crypto.AES=function(a,e,f,h){this.cipher=new sjcl.cipher.aes(sjcl.codec.bytes.toBits(toByteArray(a)),e);this.mode=e;this.mode==SSHyClient.AES_CBC&&(this.iv=toByteArray(f));this.counter=h};
SSHyClient.crypto.AES.prototype={encrypt:function(a){a=this.cipher.encrypt(toByteArray(a),this.iv,this.counter);this.mode==SSHyClient.AES_CBC&&(this.iv=a.slice(-16));return fromByteArray(a)},decrypt:function(a){a=toByteArray(a);if(this.mode==SSHyClient.AES_CBC){var e=this.cipher.decrypt(a,this.iv);this.iv=a.slice(-16)}else e=this.cipher.encrypt(a,this.iv,this.counter);return fromByteArray(e)}};
SSHyClient.crypto.counter=function(a,e){e=void 0==e?1:e;this.blocksize=a/8;this.overflow=0;0==e?this.value=(new array(this.blocksize+1)).join("\u00ff"):(a=deflate_long(e.subtract(BigInteger.ONE),!1),this.value=Array(this.blocksize-a.length+1).join("\x00")+a)};
SSHyClient.crypto.counter.prototype={increment:function(){for(var a=this.blocksize-1;-1<a;){var e=String.fromCharCode((this.value.charCodeAt(a)+1)%256);this.value=setCharAt(this.value,a,e);if("\x00"!=e)return this.value;--a}return this.value=Array(this.blocksize-deflate_long(this.overflow,!1).length+1).join("\x00")+x}};SSHyClient.Message=function(a){this.position=0;this.packet=null==a?new String:new String(a)};
SSHyClient.Message.prototype={toString:function(){return this.packet},get_bytes:function(a){var e=this.packet.substring(this.position,this.position+a);this.position+=a;return e.length<a&&1048576>a?e+Array(a-e.length+1).join("\x00"):e},get_int:function(){return struct.unpack("I",this.get_bytes(4))[0]},get_string:function(){return this.get_bytes(this.get_int())},get_mpint:function(){return inflate_long(this.get_string())},add_bytes:function(a){this.packet+=a;return this},add_boolean:function(a){this.add_bytes(1==
a?"\u0001":"\x00");return this},add_int:function(a){this.packet+=struct.pack("I",a);return this},add_mpint:function(a){this.add_string(deflate_long(a));return this},add_string:function(a){this.add_int(a.length);this.packet+=a;return this}};SSHyClient.Transport=function(a){this.local_version="SSH-2.0-SSHyClient";this.remote_version="";this.H=this.K=this.remote_kex_message=this.local_kex_message=null;this.preferred_algorithms=["diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha256,diffie-hellman-group1-sha1","ssh-rsa","aes128-ctr","hmac-sha2-256,hmac-sha1","none"];this.session_id=this.preferred_compression=this.preferred_mac=this.preferred_cipher=
this.preferred_keys=this.preferred_kex=null;this.parceler=new SSHyClient.parceler(a,this);this.auth=new SSHyClient.auth(this.parceler);this.need_buffer=!1;this.temp_buffer=""};
SSHyClient.Transport.prototype={kex_info:{"diffie-hellman-group1-sha1":function(a){return new SSHyClient.dhGroup1(a,1,"SHA-1")},"diffie-hellman-group14-sha1":function(a){return new SSHyClient.dhGroup1(a,14,"SHA-1")},"diffie-hellman-group-exchange-sha1":function(a){return new SSHyClient.dhGroupEx(a,"SHA-1")},"diffie-hellman-group1-sha256":function(a){return new SSHyClient.dhGroup1(a,1,"SHA-256")},"diffie-hellman-group14-sha256":function(a){return new SSHyClient.dhGroup1(a,14,"SHA-256")},"diffie-hellman-group-exchange-sha256":function(a){return new SSHyClient.dhGroupEx(a,
"SHA-256")}},mac_info:{"hmac-sha1":function(a){a.parceler.hmacSHAVersion="SHA-1";a.parceler.macSize=20},"hmac-sha2-256":function(a){a.parceler.hmacSHAVersion="SHA-256";a.parceler.macSize=32}},handle:function(a){if(this.parceler.encrypting)this.parceler.inbound_buffer+=a,this.parceler.decrypt();else if(this.remote_version)if((new SSHyClient.Message(a)).get_int()>a.length&&!this.need_buffer&&(this.need_buffer=!0),this.need_buffer)this.temp_buffer?(this.temp_buffer+=a,this.parceler.inbound_sequence_num++,
this.need_buffer=!1,this.handler_table[this.temp_buffer.substring(5,6).charCodeAt(0)](this,this.temp_buffer)):this.temp_buffer=a;else{this.parceler.inbound_sequence_num++;try{this.handler_table[a.substring(5,6).charCodeAt(0)](this,a)}catch(e){console.log(e),console.log("Error! code - "+a.substring(5,6).charCodeAt(0)+" does not exist!")}}else this.parceler.send(this.local_version+"\r\n",!0),this.remote_version=a.slice(0,a.length-2),this.send_kex_init()},handler_table:{1:function(a,e){a.disconnect()},
2:function(a,e){},3:function(a,e){},6:function(a,e){"ssh-userauth"==(new SSHyClient.Message(e.slice(1))).get_string()&&a.auth.ssh_connection()},20:function(a,e){e=(new SSHyClient.Message(e)).get_string();a.parse_kex_reply(e);a.remote_kex_message=a.cut_padding(e);a.preferred_kex.start()},31:function(a,e){a.preferred_kex.parse_reply(31,e.slice(6))},33:function(a,e){a.preferred_kex.parse_reply(33,e.slice(6))},51:function(a,e){a.auth.awaitingAuthentication=!1;auth_failure()},52:function(a,e){a.auth.authenticated=
!0;a.auth.awaitingAuthentication=!1;a.auth.auth_success(!0)},80:function(a,e){},91:function(a,e){a.auth.get_pty("xterm-256color",termCols,termRows)},93:function(a,e){SSHyClient.WINDOW_SIZE+=(new SSHyClient.Message(e.slice(5))).get_int()},94:function(a,e){term.write(e.slice(9))},96:function(a,e){},97:function(a,e){a.disconnect()},98:function(a,e){}},disconnect:function(a){a=void 0===a?11:a;var e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_DISCONNECT));e.add_int(a);this.send_packet(e.toString());
ws.close();term.write("\r\nConnection to "+wsproxyURL.split("/")[3].split(":")[0]+" closed.")},cut_padding:function(a){return a.substring(1,a.length-a[0].charCodeAt(0))},send_packet:function(a){this.parceler.send(a)},send_kex_init:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEX_INIT));a.add_bytes(read_rng(16));a.add_string(this.preferred_algorithms[0]);a.add_string(this.preferred_algorithms[1]);a.add_string(this.preferred_algorithms[2]);a.add_string(this.preferred_algorithms[2]);
a.add_string(this.preferred_algorithms[3]);a.add_string(this.preferred_algorithms[3]);a.add_string(this.preferred_algorithms[4]);a.add_string(this.preferred_algorithms[4]);a.add_string("");a.add_string("");a.add_boolean(!1);a.add_int(0);this.local_kex_message=a.toString();this.send_packet(a.toString())},parse_kex_reply:function(a){function e(a,d){a=a.split(",");for(var e=0;e<a.length;++e)if(-1!=d.indexOf(a[e]))return a[e]}a=new SSHyClient.Message(a);a.get_bytes(18);var f=a.get_string().split(","),
h=a.get_string().split(",");a.get_string().split(",");var d=a.get_string().split(",");a.get_string().split(",");a=a.get_string().split(",");f=e(this.preferred_algorithms[0],f);h=e(this.preferred_algorithms[1],h);d=e(this.preferred_algorithms[2],d);a=e(this.preferred_algorithms[3],a);if(!(f&&h&&d&&a)){var k="";f||(k+="KEX Algorithm,");h||(k+="Host Keys,");d||(k+="Encryption Cipher,");a||(k+="MAC Algorithm");display_error("Incompatable ssh server (no compatable - "+k+" )");throw"Chosen Algs = kex="+
f+", keys="+h+", cipher="+d+", mac="+a;}this.preferred_kex=this.kex_info[f](this);this.preferred_mac=this.mac_info[a](this)},generate_key:function(a,e,f){var h=new SSHyClient.Message;h.add_mpint(this.K);h.add_bytes(this.H);h.add_bytes(a);h.add_bytes(this.session_id);return"SHA-1"==f?(new SSHyClient.hash.SHA1(h.toString())).digest().substring(0,e):(new SSHyClient.hash.SHA256(h.toString())).digest().substring(0,e)},activate_encryption:function(a){this.parceler.outbound_enc_iv=this.generate_key("A",
16,a);this.parceler.outbound_enc_key=this.generate_key("C",16,a);this.parceler.outbound_mac_key=this.generate_key("E",this.parceler.macSize,a);this.parceler.outbound_cipher=new SSHyClient.crypto.AES(this.parceler.outbound_enc_key,SSHyClient.AES_CTR,this.parceler.outbound_enc_iv,new SSHyClient.crypto.counter(128,inflate_long(this.parceler.outbound_enc_iv)));this.parceler.inbound_enc_iv=this.generate_key("B",16,a);this.parceler.inbound_enc_key=this.generate_key("D",16,a);this.parceler.inbound_mac_key=
this.generate_key("F",this.parceler.macSize,a);this.parceler.inbound_cipher=new SSHyClient.crypto.AES(this.parceler.inbound_enc_key,SSHyClient.AES_CTR,this.parceler.inbound_enc_iv,new SSHyClient.crypto.counter(128,inflate_long(this.parceler.inbound_enc_iv)));this.parceler.encrypting=!0;this.parceler.block_size=16;this.auth.request_auth()},handle_dec:function(a){a=this.cut_padding(a);try{this.handler_table[a.substring(0,1).charCodeAt(0)](this,a)}catch(e){console.log(e),console.log("Error! code - "+
a.substring(0,1).charCodeAt(0)+" does not exist!")}},expect_key:function(a){this.auth.send_command(a)},send_new_keys:function(a){var e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_NEW_KEYS));this.send_packet(e);this.activate_encryption(a);this.parceler.inbound_sequence_num++}};SSHyClient.parceler=function(a,e){this.socket=a;this.transport=e;this.encrypting=!1;this.macSize=this.hmacSHAVersion=this.inbound_cipher=this.inbound_mac_key=this.inbound_enc_key=this.inbound_iv=this.outbound_cipher=this.outbound_mac_key=this.outbound_enc_key=this.outbound_enc_iv=null;this.inbound_sequence_num=this.outbound_sequence_num=0;this.block_size=8;this.inbound_buffer=this.decrypted_header=""};
SSHyClient.parceler.prototype={send:function(a,e){a=a.toString();(void 0===e?0:e)?this.socket.send(btoa(a)):(this.encrypting?(a=this.pack_message(a),e=this.outbound_cipher.encrypt(a),e+=SSHyClient.hash.HMAC(this.outbound_mac_key,struct.pack("I",this.outbound_sequence_num)+a,this.hmacSHAVersion),this.socket.send(btoa(e))):this.socket.send(btoa(this.pack_message(a))),this.outbound_sequence_num++)},pack_message:function(a){var e=3+this.block_size-(a.length+8)%this.block_size;a=struct.pack("I",a.length+
e+1)+struct.pack("B",e)+a;return a+=this.encrypting?read_rng(e):Array(e+1).join("\x00")},decrypt:function(){for(var a,e=" ";null!=e;){if(this.decrypted_header)a=this.decrypted_header,this.decrypted_header="";else{a=this.read_ibuffer();if(!a)break;a=this.inbound_cipher.decrypt(a)}var f=struct.unpack("I",a.substring(0,4))[0],h=a.substring(4),e=this.read_ibuffer(f+this.macSize-h.length);if(!e){this.decrypted_header=a;break}a=e.substring(0,f-h.length);var d=e.substring(f-h.length);a=this.inbound_cipher.decrypt(a);
a=h+a;f=struct.pack("I",this.inbound_sequence_num)+struct.pack("I",f)+a;if(SSHyClient.hash.HMAC(this.inbound_mac_key,f,this.hmacSHAVersion)!=d)throw display_error("Inbound MAC verification failed - Mismatched MAC"),"Inbound MAC verification failed - Mismatched MAC";this.inbound_sequence_num++;this.transport.handle_dec(a)}},read_ibuffer:function(a){a=void 0===a?this.block_size:a;if(this.inbound_buffer.length<a)return null;var e=this.inbound_buffer.substring(0,a);this.inbound_buffer=this.inbound_buffer.substring(a);
return e}};SSHyClient.auth=function(a){this.parceler=a;this.authenticated=this.password=this.username=null;this.awaitingAuthentication=!1};
SSHyClient.auth.prototype={request_auth:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_SERVICE_REQUEST));a.add_string("ssh-userauth");this.parceler.send(a)},ssh_connection:function(){if(isWrapper&&term){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_USERAUTH_REQUEST));a.add_string(termUsername);a.add_string("ssh-connection");a.add_string("password");a.add_boolean(!1);a.add_string(termPassword);this.parceler.send(a);this.awaitingAuthentication=
!0}else startxtermjs()},auth_success:function(a){a&&(document.title=termUsername+"@"+wsproxyURL.split("/")[3].split(":")[0],termUsername="",termPassword=void 0,this.open_channel("session"))},open_channel:function(a,e){e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_OPEN));e.add_string(a);e.add_int(1);e.add_int(SSHyClient.WINDOW_SIZE);e.add_int(SSHyClient.MAX_PACKET_SIZE);this.parceler.send(e)},get_pty:function(a,e,f){var h=new SSHyClient.Message;h.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));
h.add_int(0);h.add_string("pty-req");h.add_boolean(!1);h.add_string(a||"xterm");h.add_int(e||80);h.add_int(f||24);h.add_int(0);h.add_int(0);h.add_string("");this.parceler.send(h);this.invoke_shell()},resize_pty:function(a,e){var f=new SSHyClient.Message;f.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));f.add_int(0);f.add_string("window-change");f.add_boolean(!1);f.add_int(a||80);f.add_int(e||24);f.add_int(0);f.add_int(0);this.parceler.send(f)},invoke_shell:function(){var a=new SSHyClient.Message;
a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));a.add_int(0);a.add_string("shell");a.add_boolean(!1);this.parceler.send(a);void 0==termPassword?term.write("\n\r"):startxtermjs()},send_command:function(a){var e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_DATA));e.add_int(0);e.add_string(a.toString());this.parceler.send(e)}};SSHyClient.dhGroup1=function(a,e,f){this.transport=a;this.SHAVersion=f;this.x=new BigInteger("0",10);this.e=new BigInteger("0",10);this.f=new BigInteger("0",10);this.P=1==e?new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE65381FFFFFFFFFFFFFFFF",16):new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AACAA68FFFFFFFFFFFFFFFF",
16);this.G=new BigInteger("2",10)};
SSHyClient.dhGroup1.prototype={start:function(){this.x=inflate_long(read_rng(128));this.e=this.G.modPow(this.x,this.P);var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_INIT));a.add_mpint(this.e);this.transport.send_packet(a)},parse_reply:function(a,e){e=new SSHyClient.Message(e);a=e.get_string();this.f=e.get_mpint();e.get_string();e=this.f.modPow(this.x,this.P);var f=new SSHyClient.Message;f.add_string(this.transport.local_version);f.add_string(this.transport.remote_version);
f.add_string(this.transport.local_kex_message);f.add_string(this.transport.remote_kex_message);f.add_string(a);f.add_mpint(this.e);f.add_mpint(this.f);f.add_mpint(e);this.transport.K=e;this.transport.session_id=this.transport.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(f.toString())).digest():(new SSHyClient.hash.SHA256(f.toString())).digest();this.transport.send_new_keys(this.SHAVersion)}};SSHyClient.dhGroupEx=function(a,e){this.transport=a;this.SHAVersion=e;this.f=this.e=this.x=this.g=this.q=this.p=null;this.min_bits=1024;this.max_bits=8192;this.preferred_bits=2048};
SSHyClient.dhGroupEx.prototype={start:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_REQUEST));a.add_int(this.min_bits);a.add_int(this.preferred_bits);a.add_int(this.max_bits);this.transport.send_packet(a)},parse_reply:function(a,e){a==SSHyClient.MSG_KEXDH_GEX_GROUP?this.parse_gex_group(e):a==SSHyClient.MSG_KEXDH_GEX_REPLY&&this.parse_gex_reply(e)},generate_x:function(){for(var a=this.p.subtract(BigInteger.ONE),a=a.divide(new BigInteger("2",10)),e=
deflate_long(a,0),f=e[0].charCodeAt(0),e=e.length,h=255;!(f&128);)f<<=1,h>>=1;for(;!(f=read_rng(e),f=String.fromCharCode(f[0].charCodeAt(0)&h)+f.substring(1),f=inflate_long(f,1),0<f.compareTo(BigInteger.ONE)&&0<a.compareTo(f)););this.x=f},parse_gex_group:function(a){a=new SSHyClient.Message(a);this.p=a.get_mpint();this.g=a.get_mpint();this.generate_x();this.e=this.g.modPow(this.x,this.p);a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_INIT));a.add_mpint(this.e);this.transport.send_packet(a)},
parse_gex_reply:function(a){a=new SSHyClient.Message(a);var e=a.get_string();this.f=a.get_mpint();a.get_string();a=this.f.modPow(this.x,this.p);var f=new SSHyClient.Message;f.add_string(this.transport.local_version);f.add_string(this.transport.remote_version);f.add_string(this.transport.local_kex_message);f.add_string(this.transport.remote_kex_message);f.add_string(e);f.add_int(this.min_bits);f.add_int(this.preferred_bits);f.add_int(this.max_bits);f.add_mpint(this.p);f.add_mpint(this.g);f.add_mpint(this.e);
f.add_mpint(this.f);f.add_mpint(a);this.transport.K=a;this.transport.session_id=this.transport.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(f.toString())).digest():(new SSHyClient.hash.SHA256(f.toString())).digest();this.transport.send_new_keys(this.SHAVersion)}};var ws,transport,term=null,isFirefox=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),isWrapper=!0,termCols=Math.floor(window.innerWidth/10)-(isFirefox?-2:0),termRows=Math.floor(window.innerHeight/19)-(isFirefox?1:-2),termUsername="",termPassword,failedAttempts=0;window.onload=function(){setColorScheme(colorScheme_ashes);startSSHy()};
window.onresize=function(){termCols=Math.floor(window.innerWidth/10)-(isFirefox?-2:0);termRows=Math.floor(window.innerHeight/19)-(isFirefox?1:-2);ws&&transport&&(term.resize(termCols,termRows),transport.auth.resize_pty(termCols,termRows))};
function auth_failure(){term.write("\n\rAccess Denied");5<=++failedAttempts?(term.write("\n\rToo many failed authentication attempts"),transport.disconnect()):(term.write("\n\r"+termUsername+"@"+wsproxyURL.split("/")[3].split(":")[0]+"'s password:"),termPassword="")}function startSSHy(){document.title="SSHy Client";ws=new WebSocket(wsproxyURL,"base64");ws.onopen=function(a){transport=new SSHyClient.Transport(ws)};ws.onmessage=function(a){transport.handle(atob(a.data))}}
function startxtermjs(){term=new Terminal({cols:termCols,rows:termRows});term.open(document.getElementById("terminal"),!0);transport.auth.authenticated||term.write("Login as: ");term.textarea.onkeydown=function(a){if(!(!ws||!transport||5<=failedAttempts||transport.auth.awaitingAuthentication||1<a.key.length&&(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey))){if(transport.auth.authenticated){var e={key:null};1!=a.key.length||a.altKey||a.ctrlKey||a.metaKey?1==a.key.length&&a.shiftKey&&a.ctrlKey?"V"!=a.key&&
a.preventDefault():e=term.evaluateKeyEscapeSequence(a):e.key=a.key;return null==e.key?null:transport.expect_key(e.key)}if(!(a.altKey||a.ctrlKey||a.metaKey))switch(a.keyCode){case 8:void 0==termPassword?0<termUsername.length&&(term.write("\b"),term.eraseRight(term.x,term.y),termUsername=termUsername.slice(0,termUsername.length-1)):termPassword=termPassword.slice(0,termPassword.length-1);break;case 13:void 0==termPassword?(term.write("\n\r"+termUsername+"@"+wsproxyURL.split("/")[3].split(":")[0]+"'s password:"),
termPassword=""):transport.auth.ssh_connection();break;default:void 0==termPassword?(termUsername+=a.key,term.write(a.key)):termPassword+=a.key}}};term.textarea.onpaste=function(a){a.clipboardData&&(a=a.clipboardData.getData("text/plain"),transport.expect_key(a))}};

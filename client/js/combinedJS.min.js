var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,f){b!=Array.prototype&&b!=Object.prototype&&(b[e]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var e=0;return $jscomp.iteratorPrototype(function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,e){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var f=0,h={next:function(){if(f<b.length){var d=f++;return{value:e(d,b[d]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(b,e,f,h){if(e){f=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var d=b[h];d in f||(f[d]={});f=f[d]}b=b[b.length-1];h=f[b];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");function SSHyClient(){}
SSHyClient={MSG_DISCONNECT:1,MSG_IGNORE:2,MSG_UNIMPLEMENTED:3,MSG_DEBUG:4,MSG_SERVICE_REQUEST:5,MSG_SERVICE_ACCEPT:6,MSG_KEX_INIT:20,MSG_NEW_KEYS:21,MSG_KEXDH_INIT:30,MSG_KEXDH_GEX_GROUP:31,MSG_KEXDH_GEX_INIT:32,MSG_KEXDH_GEX_REPLY:33,MSG_KEXDH_GEX_REQUEST:34,MSG_USERAUTH_REQUEST:50,MSG_USERAUTH_FAILURE:51,MSG_USERAUTH_SUCCESS:52,MSG_USERAUTH_BANNER:53,MSG_GLOBAL_REQUEST:80,MSG_REQUEST_SUCCESS:81,MSG_REQUEST_FAILURE:82,MSG_CHANNEL_OPEN:90,MSG_CHANNEL_OPEN_SUCCESS:91,MSG_CHANNEL_OPEN_FAILURE:92,MSG_CHANNEL_WINDOW_ADJUST:93,
MSG_CHANNEL_DATA:94,MSG_CHANNEL_EXTENDED_DATA:95,MSG_CHANNEL_EOF:96,MSG_CHANNEL_CLOSE:97,MSG_CHANNEL_REQUEST:98,MSG_CHANNEL_SUCCESS:99,MSG_CHANNEL_FAILURE:100,WINDOW_SIZE:1048576,MAX_PACKET_SIZE:16384,AES_CBC:2,AES_CTR:6};var BigInteger=function(){function b(b,a,n){null!=b&&("number"==typeof b?this.fromNumber(b,a,n):null==a&&"string"!=typeof b?this.fromString(b,256):this.fromString(b,a))}function e(){return new b(null)}function f(b,a,n,d,e,l){for(;0<=--l;){var g=a*this[b++]+n[d]+e;e=Math.floor(g/67108864);n[d++]=g&67108863}return e}function h(b,a,n,d,e,l){var g=a&32767;for(a>>=15;0<=--l;){var p=this[b]&32767,f=this[b++]>>15,r=a*p+f*g,p=g*p+((r&32767)<<15)+n[d]+(e&1073741823);e=(p>>>30)+(r>>>15)+a*f+(e>>>30);n[d++]=
p&1073741823}return e}function d(b,a,n,d,e,l){var g=a&16383;for(a>>=14;0<=--l;){var p=this[b]&16383,f=this[b++]>>14,r=a*p+f*g,p=g*p+((r&16383)<<14)+n[d]+e;e=(p>>28)+(r>>14)+a*f;n[d++]=p&268435455}return e}function k(b,p){b=a[b.charCodeAt(p)];return null==b?-1:b}function m(b){var a=e();a.fromInt(b);return a}function t(b){var a=1,g;0!=(g=b>>>16)&&(b=g,a+=16);0!=(g=b>>8)&&(b=g,a+=8);0!=(g=b>>4)&&(b=g,a+=4);0!=(g=b>>2)&&(b=g,a+=2);0!=b>>1&&(a+=1);return a}function u(b){this.m=b}function v(b){this.m=b;
this.mp=b.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<b.DB-15)-1;this.mt2=2*b.t}function q(b,a){return b&a}function w(b,a){return b|a}function B(b,a){return b^a}function y(b,a){return b&~a}function z(){}function C(b){return b}function A(a){this.r2=e();this.q3=e();b.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}var D;"Microsoft Internet Explorer"==navigator.appName?(b.prototype.am=h,D=30):"Netscape"!=navigator.appName?(b.prototype.am=f,D=26):(b.prototype.am=
d,D=28);b.prototype.DB=D;b.prototype.DM=(1<<D)-1;b.prototype.DV=1<<D;b.prototype.FV=Math.pow(2,52);b.prototype.F1=52-D;b.prototype.F2=2*D-52;var a=[],l;D=48;for(l=0;9>=l;++l)a[D++]=l;D=97;for(l=10;36>l;++l)a[D++]=l;D=65;for(l=10;36>l;++l)a[D++]=l;u.prototype.convert=function(b){return 0>b.s||0<=b.compareTo(this.m)?b.mod(this.m):b};u.prototype.revert=function(b){return b};u.prototype.reduce=function(b){b.divRemTo(this.m,null,b)};u.prototype.mulTo=function(b,a,n){b.multiplyTo(a,n);this.reduce(n)};u.prototype.sqrTo=
function(b,a){b.squareTo(a);this.reduce(a)};v.prototype.convert=function(a){var g=e();a.abs().dlShiftTo(this.m.t,g);g.divRemTo(this.m,null,g);0>a.s&&0<g.compareTo(b.ZERO)&&this.m.subTo(g,g);return g};v.prototype.revert=function(b){var a=e();b.copyTo(a);this.reduce(a);return a};v.prototype.reduce=function(b){for(;b.t<=this.mt2;)b[b.t++]=0;for(var a=0;a<this.m.t;++a){var g=b[a]&32767,d=g*this.mpl+((g*this.mph+(b[a]>>15)*this.mpl&this.um)<<15)&b.DM,g=a+this.m.t;for(b[g]+=this.m.am(0,d,b,a,0,this.m.t);b[g]>=
b.DV;)b[g]-=b.DV,b[++g]++}b.clamp();b.drShiftTo(this.m.t,b);0<=b.compareTo(this.m)&&b.subTo(this.m,b)};v.prototype.mulTo=function(b,a,n){b.multiplyTo(a,n);this.reduce(n)};v.prototype.sqrTo=function(b,a){b.squareTo(a);this.reduce(a)};b.prototype.copyTo=function(b){for(var a=this.t-1;0<=a;--a)b[a]=this[a];b.t=this.t;b.s=this.s};b.prototype.fromInt=function(b){this.t=1;this.s=0>b?-1:0;0<b?this[0]=b:-1>b?this[0]=b+DV:this.t=0};b.prototype.fromString=function(a,p){if(16==p)p=4;else if(8==p)p=3;else if(256==
p)p=8;else if(2==p)p=1;else if(32==p)p=5;else if(4==p)p=2;else{this.fromRadix(a,p);return}this.s=this.t=0;for(var g=a.length,d=!1,e=0;0<=--g;){var l=8==p?a[g]&255:k(a,g);0>l?"-"==a.charAt(g)&&(d=!0):(d=!1,0==e?this[this.t++]=l:e+p>this.DB?(this[this.t-1]|=(l&(1<<this.DB-e)-1)<<e,this[this.t++]=l>>this.DB-e):this[this.t-1]|=l<<e,e+=p,e>=this.DB&&(e-=this.DB))}8==p&&0!=(a[0]&128)&&(this.s=-1,0<e&&(this[this.t-1]|=(1<<this.DB-e)-1<<e));this.clamp();d&&b.ZERO.subTo(this,this)};b.prototype.clamp=function(){for(var b=
this.s&this.DM;0<this.t&&this[this.t-1]==b;)--this.t};b.prototype.dlShiftTo=function(b,a){var g;for(g=this.t-1;0<=g;--g)a[g+b]=this[g];for(g=b-1;0<=g;--g)a[g]=0;a.t=this.t+b;a.s=this.s};b.prototype.drShiftTo=function(b,a){for(var g=b;g<this.t;++g)a[g-b]=this[g];a.t=Math.max(this.t-b,0);a.s=this.s};b.prototype.lShiftTo=function(b,a){var g=b%this.DB,d=this.DB-g,p=(1<<d)-1;b=Math.floor(b/this.DB);var e=this.s<<g&this.DM,l;for(l=this.t-1;0<=l;--l)a[l+b+1]=this[l]>>d|e,e=(this[l]&p)<<g;for(l=b-1;0<=l;--l)a[l]=
0;a[b]=e;a.t=this.t+b+1;a.s=this.s;a.clamp()};b.prototype.rShiftTo=function(b,a){a.s=this.s;var g=Math.floor(b/this.DB);if(g>=this.t)a.t=0;else{b%=this.DB;var d=this.DB-b,p=(1<<b)-1;a[0]=this[g]>>b;for(var e=g+1;e<this.t;++e)a[e-g-1]|=(this[e]&p)<<d,a[e-g]=this[e]>>b;0<b&&(a[this.t-g-1]|=(this.s&p)<<d);a.t=this.t-g;a.clamp()}};b.prototype.subTo=function(b,a){for(var g=0,d=0,e=Math.min(b.t,this.t);g<e;)d+=this[g]-b[g],a[g++]=d&this.DM,d>>=this.DB;if(b.t<this.t){for(d-=b.s;g<this.t;)d+=this[g],a[g++]=
d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;g<b.t;)d-=b[g],a[g++]=d&this.DM,d>>=this.DB;d-=b.s}a.s=0>d?-1:0;-1>d?a[g++]=this.DV+d:0<d&&(a[g++]=d);a.t=g;a.clamp()};b.prototype.multiplyTo=function(a,d){var g=this.abs(),e=a.abs(),p=g.t;for(d.t=p+e.t;0<=--p;)d[p]=0;for(p=0;p<e.t;++p)d[p+g.t]=g.am(0,e[p],d,p,0,g.t);d.s=0;d.clamp();this.s!=a.s&&b.ZERO.subTo(d,d)};b.prototype.squareTo=function(b){for(var a=this.abs(),g=b.t=2*a.t;0<=--g;)b[g]=0;for(g=0;g<a.t-1;++g){var d=a.am(g,a[g],b,2*g,0,1);(b[g+
a.t]+=a.am(g+1,2*a[g],b,2*g+1,d,a.t-g-1))>=a.DV&&(b[g+a.t]-=a.DV,b[g+a.t+1]=1)}0<b.t&&(b[b.t-1]+=a.am(g,a[g],b,2*g,0,1));b.s=0;b.clamp()};b.prototype.divRemTo=function(a,d,n){var g=a.abs();if(!(0>=g.t)){var p=this.abs();if(p.t<g.t)null!=d&&d.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=e());var l=e(),f=this.s;a=a.s;var r=this.DB-t(g[g.t-1]);0<r?(g.lShiftTo(r,l),p.lShiftTo(r,n)):(g.copyTo(l),p.copyTo(n));g=l.t;p=l[g-1];if(0!=p){var k=p*(1<<this.F1)+(1<g?l[g-2]>>this.F2:0),E=this.FV/k,k=(1<<
this.F1)/k,h=1<<this.F2,m=n.t,u=m-g,q=null==d?e():d;l.dlShiftTo(u,q);0<=n.compareTo(q)&&(n[n.t++]=1,n.subTo(q,n));b.ONE.dlShiftTo(g,q);for(q.subTo(l,l);l.t<g;)l[l.t++]=0;for(;0<=--u;){var v=n[--m]==p?this.DM:Math.floor(n[m]*E+(n[m-1]+h)*k);if((n[m]+=l.am(0,v,n,u,0,g))<v)for(l.dlShiftTo(u,q),n.subTo(q,n);n[m]<--v;)n.subTo(q,n)}null!=d&&(n.drShiftTo(g,d),f!=a&&b.ZERO.subTo(d,d));n.t=g;n.clamp();0<r&&n.rShiftTo(r,n);0>f&&b.ZERO.subTo(n,n)}}}};b.prototype.invDigit=function(){if(1>this.t)return 0;var b=
this[0];if(0==(b&1))return 0;var a=b&3,a=a*(2-(b&15)*a)&15,a=a*(2-(b&255)*a)&255,a=a*(2-((b&65535)*a&65535))&65535,a=a*(2-b*a%this.DV)%this.DV;return 0<a?this.DV-a:-a};b.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};b.prototype.exp=function(a,d){if(4294967295<a||1>a)return b.ONE;var g=e();var p=e();var l=d.convert(this),f=t(a)-1;for(l.copyTo(g);0<=--f;)if(d.sqrTo(g,p),0<(a&1<<f))d.mulTo(p,l,g);else{var r=g;g=p;p=r}return d.revert(g)};b.prototype.toString=function(b){if(0>this.s)return"-"+
this.negate().toString(b);if(16==b)b=4;else if(8==b)b=3;else if(2==b)b=1;else if(32==b)b=5;else if(4==b)b=2;else return this.toRadix(b);var a=(1<<b)-1,g,d=!1,e="",l=this.t,f=this.DB-l*this.DB%b;if(0<l--)for(f<this.DB&&0<(g=this[l]>>f)&&(d=!0,e="0123456789abcdefghijklmnopqrstuvwxyz".charAt(g));0<=l;)f<b?(g=(this[l]&(1<<f)-1)<<b-f,g|=this[--l]>>(f+=this.DB-b)):(g=this[l]>>(f-=b)&a,0>=f&&(f+=this.DB,--l)),0<g&&(d=!0),d&&(e+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(g));return d?e:"0"};b.prototype.negate=
function(){var a=e();b.ZERO.subTo(this,a);return a};b.prototype.abs=function(){return 0>this.s?this.negate():this};b.prototype.compareTo=function(b){var a=this.s-b.s;if(0!=a)return a;var g=this.t,a=g-b.t;if(0!=a)return a;for(;0<=--g;)if(0!=(a=this[g]-b[g]))return a;return 0};b.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+t(this[this.t-1]^this.s&this.DM)};b.prototype.mod=function(a){var g=e();this.abs().divRemTo(a,null,g);0>this.s&&0<g.compareTo(b.ZERO)&&a.subTo(g,g);return g};
b.prototype.modPowInt=function(b,a){a=256>b||a.isEven()?new u(a):new v(a);return this.exp(b,a)};b.ZERO=m(0);b.ONE=m(1);z.prototype.convert=C;z.prototype.revert=C;z.prototype.mulTo=function(b,a,d){b.multiplyTo(a,d)};z.prototype.sqrTo=function(b,a){b.squareTo(a)};A.prototype.convert=function(b){if(0>b.s||b.t>2*this.m.t)return b.mod(this.m);if(0>b.compareTo(this.m))return b;var a=e();b.copyTo(a);this.reduce(a);return a};A.prototype.revert=function(b){return b};A.prototype.reduce=function(b){b.drShiftTo(this.m.t-
1,this.r2);b.t>this.m.t+1&&(b.t=this.m.t+1,b.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>b.compareTo(this.r2);)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);0<=b.compareTo(this.m);)b.subTo(this.m,b)};A.prototype.mulTo=function(b,a,d){b.multiplyTo(a,d);this.reduce(d)};A.prototype.sqrTo=function(b,a){b.squareTo(a);this.reduce(a)};var r=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],E=67108864/r[r.length-1];b.prototype.chunkSize=function(b){return Math.floor(Math.LN2*this.DB/Math.log(b))};b.prototype.toRadix=function(b){null==b&&(b=10);if(0==this.signum()||2>b||36<b)return"0";var a=this.chunkSize(b),a=Math.pow(b,
a),d=m(a),g=e(),l=e(),f="";for(this.divRemTo(d,g,l);0<g.signum();)f=(a+l.intValue()).toString(b).substr(1)+f,g.divRemTo(d,g,l);return l.intValue().toString(b)+f};b.prototype.fromRadix=function(a,d){this.fromInt(0);null==d&&(d=10);for(var g=this.chunkSize(d),e=Math.pow(d,g),l=!1,p=0,f=0,r=0;r<a.length;++r){var E=k(a,r);0>E?"-"==a.charAt(r)&&0==this.signum()&&(l=!0):(f=d*f+E,++p>=g&&(this.dMultiply(e),this.dAddOffset(f,0),f=p=0))}0<p&&(this.dMultiply(Math.pow(d,p)),this.dAddOffset(f,0));l&&b.ZERO.subTo(this,
this)};b.prototype.fromNumber=function(a,d,e){if("number"==typeof d)if(2>a)this.fromInt(1);else for(this.fromNumber(a,e),this.testBit(a-1)||this.bitwiseTo(b.ONE.shiftLeft(a-1),w,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(d);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(b.ONE.shiftLeft(a-1),this);else{e=[];var g=a&7;e.length=(a>>3)+1;d.nextBytes(e);e[0]=0<g?e[0]&(1<<g)-1:0;this.fromString(e,256)}};b.prototype.bitwiseTo=function(b,a,d){var g,e=Math.min(b.t,this.t);for(g=
0;g<e;++g)d[g]=a(this[g],b[g]);if(b.t<this.t){var l=b.s&this.DM;for(g=e;g<this.t;++g)d[g]=a(this[g],l);d.t=this.t}else{l=this.s&this.DM;for(g=e;g<b.t;++g)d[g]=a(l,b[g]);d.t=b.t}d.s=a(this.s,b.s);d.clamp()};b.prototype.changeBit=function(a,d){a=b.ONE.shiftLeft(a);this.bitwiseTo(a,d,a);return a};b.prototype.addTo=function(b,a){for(var d=0,g=0,e=Math.min(b.t,this.t);d<e;)g+=this[d]+b[d],a[d++]=g&this.DM,g>>=this.DB;if(b.t<this.t){for(g+=b.s;d<this.t;)g+=this[d],a[d++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=
this.s;d<b.t;)g+=b[d],a[d++]=g&this.DM,g>>=this.DB;g+=b.s}a.s=0>g?-1:0;0<g?a[d++]=g:-1>g&&(a[d++]=this.DV+g);a.t=d;a.clamp()};b.prototype.dMultiply=function(b){this[this.t]=this.am(0,b-1,this,0,0,this.t);++this.t;this.clamp()};b.prototype.dAddOffset=function(b,a){if(0!=b){for(;this.t<=a;)this[this.t++]=0;for(this[a]+=b;this[a]>=this.DV;)this[a]-=this.DV,++a>=this.t&&(this[this.t++]=0),++this[a]}};b.prototype.multiplyLowerTo=function(b,a,d){var g=Math.min(this.t+b.t,a);d.s=0;for(d.t=g;0<g;)d[--g]=
0;var e;for(e=d.t-this.t;g<e;++g)d[g+this.t]=this.am(0,b[g],d,g,0,this.t);for(e=Math.min(b.t,a);g<e;++g)this.am(0,b[g],d,g,0,a-g);d.clamp()};b.prototype.multiplyUpperTo=function(b,a,d){--a;var g=d.t=this.t+b.t-a;for(d.s=0;0<=--g;)d[g]=0;for(g=Math.max(a-this.t,0);g<b.t;++g)d[this.t+g-a]=this.am(a-g,b[g],d,0,0,this.t+g-a);d.clamp();d.drShiftTo(1,d)};b.prototype.modInt=function(b){if(0>=b)return 0;var a=this.DV%b,d=0>this.s?b-1:0;if(0<this.t)if(0==a)d=this[0]%b;else for(var g=this.t-1;0<=g;--g)d=(a*
d+this[g])%b;return d};b.prototype.millerRabin=function(a){var d=this.subtract(b.ONE),g=d.getLowestSetBit();if(0>=g)return!1;var l=d.shiftRight(g);a=a+1>>1;a>r.length&&(a=r.length);for(var f=e(),k=0;k<a;++k){f.fromInt(r[k]);var E=f.modPow(l,this);if(0!=E.compareTo(b.ONE)&&0!=E.compareTo(d)){for(var h=1;h++<g&&0!=E.compareTo(d);)if(E=E.modPowInt(2,this),0==E.compareTo(b.ONE))return!1;if(0!=E.compareTo(d))return!1}}return!0};b.prototype.clone=function(){var b=e();this.copyTo(b);return b};b.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};b.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};b.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};b.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};b.prototype.toByteArray=function(){var b=this.t,a=[];a[0]=this.s;var d=this.DB-
b*this.DB%8,e,l=0;if(0<b--)for(d<this.DB&&(e=this[b]>>d)!=(this.s&this.DM)>>d&&(a[l++]=e|this.s<<this.DB-d);0<=b;)if(8>d?(e=(this[b]&(1<<d)-1)<<8-d,e|=this[--b]>>(d+=this.DB-8)):(e=this[b]>>(d-=8)&255,0>=d&&(d+=this.DB,--b)),0!=(e&128)&&(e|=-256),0==l&&(this.s&128)!=(e&128)&&++l,0<l||e!=this.s)a[l++]=e;return a};b.prototype.equals=function(b){return 0==this.compareTo(b)};b.prototype.min=function(b){return 0>this.compareTo(b)?this:b};b.prototype.max=function(b){return 0<this.compareTo(b)?this:b};b.prototype.and=
function(b){var a=e();this.bitwiseTo(b,q,a);return a};b.prototype.or=function(b){var a=e();this.bitwiseTo(b,w,a);return a};b.prototype.xor=function(b){var a=e();this.bitwiseTo(b,B,a);return a};b.prototype.andNot=function(b){var a=e();this.bitwiseTo(b,y,a);return a};b.prototype.not=function(){for(var b=e(),a=0;a<this.t;++a)b[a]=this.DM&~this[a];b.t=this.t;b.s=~this.s;return b};b.prototype.shiftLeft=function(b){var a=e();0>b?this.rShiftTo(-b,a):this.lShiftTo(b,a);return a};b.prototype.shiftRight=function(b){var a=
e();0>b?this.lShiftTo(-b,a):this.rShiftTo(b,a);return a};b.prototype.getLowestSetBit=function(){for(var b=0;b<this.t;++b)if(0!=this[b]){var a=b*this.DB,b=this[b];if(0==b)b=-1;else{var d=0;0==(b&65535)&&(b>>=16,d+=16);0==(b&255)&&(b>>=8,d+=8);0==(b&15)&&(b>>=4,d+=4);0==(b&3)&&(b>>=2,d+=2);0==(b&1)&&++d;b=d}return a+b}return 0>this.s?this.t*this.DB:-1};b.prototype.bitCount=function(){for(var b=0,a=this.s&this.DM,d=0;d<this.t;++d){for(var e=this[d]^a,l=0;0!=e;)e&=e-1,++l;b+=l}return b};b.prototype.testBit=
function(b){var a=Math.floor(b/this.DB);return a>=this.t?0!=this.s:0!=(this[a]&1<<b%this.DB)};b.prototype.setBit=function(b){return this.changeBit(b,w)};b.prototype.clearBit=function(b){return this.changeBit(b,y)};b.prototype.flipBit=function(b){return this.changeBit(b,B)};b.prototype.add=function(b){var a=e();this.addTo(b,a);return a};b.prototype.subtract=function(b){var a=e();this.subTo(b,a);return a};b.prototype.multiply=function(b){var a=e();this.multiplyTo(b,a);return a};b.prototype.divide=function(b){var a=
e();this.divRemTo(b,a,null);return a};b.prototype.remainder=function(b){var a=e();this.divRemTo(b,null,a);return a};b.prototype.divideAndRemainder=function(b){var a=e(),d=e();this.divRemTo(b,a,d);return[a,d]};b.prototype.modPow=function(b,a){var d=b.bitLength(),g=m(1);if(0>=d)return g;var l=18>d?1:48>d?3:144>d?4:768>d?5:6;a=8>d?new u(a):a.isEven()?new A(a):new v(a);var f=[],r=3,k=l-1,E=(1<<l)-1;f[1]=a.convert(this);if(1<l)for(d=e(),a.sqrTo(f[1],d);r<=E;)f[r]=e(),a.mulTo(d,f[r-2],f[r]),r+=2;for(var p=
b.t-1,h,q=!0,w=e(),d=t(b[p])-1;0<=p;){d>=k?h=b[p]>>d-k&E:(h=(b[p]&(1<<d+1)-1)<<k-d,0<p&&(h|=b[p-1]>>this.DB+d-k));for(r=l;0==(h&1);)h>>=1,--r;0>(d-=r)&&(d+=this.DB,--p);if(q)f[h].copyTo(g),q=!1;else{for(;1<r;)a.sqrTo(g,w),a.sqrTo(w,g),r-=2;0<r?a.sqrTo(g,w):(r=g,g=w,w=r);a.mulTo(w,f[h],g)}for(;0<=p&&0==(b[p]&1<<d);)a.sqrTo(g,w),r=g,g=w,w=r,0>--d&&(d=this.DB-1,--p)}return a.revert(g)};b.prototype.modInverse=function(a){var d=a.isEven();if(this.isEven()&&d||0==a.signum())return b.ZERO;for(var e=a.clone(),
g=this.clone(),l=m(1),f=m(0),r=m(0),k=m(1);0!=e.signum();){for(;e.isEven();)e.rShiftTo(1,e),d?(l.isEven()&&f.isEven()||(l.addTo(this,l),f.subTo(a,f)),l.rShiftTo(1,l)):f.isEven()||f.subTo(a,f),f.rShiftTo(1,f);for(;g.isEven();)g.rShiftTo(1,g),d?(r.isEven()&&k.isEven()||(r.addTo(this,r),k.subTo(a,k)),r.rShiftTo(1,r)):k.isEven()||k.subTo(a,k),k.rShiftTo(1,k);0<=e.compareTo(g)?(e.subTo(g,e),d&&l.subTo(r,l),f.subTo(k,f)):(g.subTo(e,g),d&&r.subTo(l,r),k.subTo(f,k))}if(0!=g.compareTo(b.ONE))return b.ZERO;
if(0<=k.compareTo(a))return k.subtract(a);if(0>k.signum())k.addTo(a,k);else return k;return 0>k.signum()?k.add(a):k};b.prototype.pow=function(b){return this.exp(b,new z)};b.prototype.gcd=function(b){var a=0>this.s?this.negate():this.clone();b=0>b.s?b.negate():b.clone();if(0>a.compareTo(b)){var d=a;a=b;b=d}d=a.getLowestSetBit();var e=b.getLowestSetBit();if(0>e)return a;d<e&&(e=d);for(0<e&&(a.rShiftTo(e,a),b.rShiftTo(e,b));0<a.signum();)0<(d=a.getLowestSetBit())&&a.rShiftTo(d,a),0<(d=b.getLowestSetBit())&&
b.rShiftTo(d,b),0<=a.compareTo(b)?(a.subTo(b,a),a.rShiftTo(1,a)):(b.subTo(a,b),b.rShiftTo(1,b));0<e&&b.lShiftTo(e,b);return b};b.prototype.isProbablePrime=function(b){var a,d=this.abs();if(1==d.t&&d[0]<=r[r.length-1]){for(a=0;a<r.length;++a)if(d[0]==r[a])return!0;return!1}if(d.isEven())return!1;for(a=1;a<r.length;){for(var e=r[a],g=a+1;g<r.length&&e<E;)e*=r[g++];for(e=d.modInt(e);a<g;)if(0==e%r[a++])return!1}return d.millerRabin(b)};return{BigInteger:b}}(),BigInteger=BigInteger.BigInteger;var struct={pack:function(b,e){var f="";switch(b){case "Q":b=new BigInteger("ff",16);f+=String.fromCharCode(e.shiftRight(56).and(b));f+=String.fromCharCode(e.shiftRight(48).and(b));f+=String.fromCharCode(e.shiftRight(40).and(b));f+=String.fromCharCode(e.shiftRight(32).and(b));f+=String.fromCharCode(e.shiftRight(24).and(b));f+=String.fromCharCode(e.shiftRight(16).and(b));f+=String.fromCharCode(e.shiftRight(8).and(b));f+=String.fromCharCode(e.and(b));break;case "I":f+=String.fromCharCode(e>>>24&255),
f+=String.fromCharCode(e>>>16&255),f+=String.fromCharCode(e>>>8&255);case "B":f+=String.fromCharCode(e&255)}return f},unpack:function(b,e){var f=[],h=0,d=0;switch(b){case "Q":d=new BigInteger("0",10);d=d.add((new BigInteger(e.charCodeAt(0).toString(),10)).shiftLeft(56));d=d.add((new BigInteger(e.charCodeAt(1).toString(),10)).shiftLeft(48));d=d.add((new BigInteger(e.charCodeAt(2).toString(),10)).shiftLeft(40));d=d.add((new BigInteger(e.charCodeAt(3).toString(),10)).shiftLeft(32));d=d.add((new BigInteger(e.charCodeAt(4).toString(),
10)).shiftLeft(24));d=d.add((new BigInteger(e.charCodeAt(5).toString(),10)).shiftLeft(16));d=d.add((new BigInteger(e.charCodeAt(6).toString(),10)).shiftLeft(8));d=d.add((new BigInteger(e.charCodeAt(7).toString(),10)).shiftLeft(0));f.push(d);break;case "I":d+=e.charCodeAt(0)<<24>>>0,d+=e.charCodeAt(1)<<16>>>0,d+=e.charCodeAt(2)<<8>>>0,h+=3;case "B":d+=e.charCodeAt(0+h)<<0>>>0,f.push(d)}return f}};function inflate_long(b){var e=new BigInteger("0",10);b.length%4&&(b=Array(4-b.length%4+1).join("\x00")+b);for(var f=0;f<b.length;f+=4)e=e.shiftLeft(32),e=e.add(new BigInteger(struct.unpack("I",b.substring(f,f+4))[0].toString(),10));return e}
function deflate_long(b,e){b="number"==typeof b?new BigInteger(b.toString(),10):b.clone();e=void 0==e?!0:e;for(var f="",h=new BigInteger("-1",10),d=new BigInteger("ffffffff",16);!b.equals(BigInteger.ZERO)&&!b.equals(h);)f=struct.pack("I",b.and(d))+f,b=b.shiftRight(32);for(var d=!1,k=0;k<f.length;++k){if(b.equals(BigInteger.ZERO)&&"\x00"!=f.charAt(k)){d=!0;break}if(b.equals(h)&&"\u00ff"!=f.charAt(k)){d=!0;break}}d||(k=0,f=b.equals(BigInteger.ZERO)?"\x00":"\u00ff");f=f.substring(k);e&&(b.equals(BigInteger.ZERO)&&
128<=f.charCodeAt(0)&&(f="\x00"+f),b.equals(h)&&128>f.charCodeAt(0)&&(f="\u00ff"+f));return f}function toByteArray(b){for(var e=new Uint8Array(b.length),f=0;f<b.length;f++)e[f]=b.charCodeAt(f);return e}function fromByteArray(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function bytesToWords(b){for(var e=[],f=0,h=0;f<b.length;f++,h+=8)e[h>>>5]|=(b[f]&255)<<24-h%32;return e}function wordsToBytes(b){for(var e=[],f=0;f<32*b.length;f+=8)e.push(b[f>>>5]>>>24-f%32&255);return e}
function hex2ascii(b){for(var e="",f=0;f<b.length;f+=2)e+=String.fromCharCode(parseInt(b.substr(f,2),16));return e}function ascii2hex(b){for(var e="",f=0;f<b.length;f++)e=1==b.charCodeAt(f).toString(16).length?e+("0"+b.charCodeAt(f).toString(16)):e+(""+b.charCodeAt(f).toString(16));return e}function setCharAt(b,e,f){return b.substr(0,e)+f+b.substr(e+1)};sjcl={cipher:{}};
sjcl.cipher.aes=function(b,e){this._tables[0][0][0]||this._precompute();this.mode=e;var f,h,d=this._tables[0][4],k=this._tables[1];e=b.length;var m=1;if(4!==e&&6!==e&&8!==e)throw"invalid aes key size";this._key=[f=b.slice(0),h=[]];for(b=e;b<4*e+28;b++){var t=f[b-1];if(0===b%e||8===e&&4===b%e)t=d[t>>>24]<<24^d[t>>16&255]<<16^d[t>>8&255]<<8^d[t&255],0===b%e&&(t=t<<8^t>>>24^m<<24,m=m<<1^283*(m>>7));f[b]=f[b-e]^t}for(e=0;b;e++,b--)t=f[e&3?b:b-4],h[e]=4>=b||4>e?t:k[0][d[t>>>24]]^k[1][d[t>>16&255]]^k[2][d[t>>
8&255]]^k[3][d[t&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(b,e,f){e=this.mode==sjcl.cipher.aes.MODE_CBC?e:[];for(var h=[],d=0;d<b.length/16;d++){var k=b.slice(16*d,16*(d+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var m=0;16>m;m++)k[m]^=e[m];e=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(k),0))}else for(e=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(f.increment())),0)),m=0;16>m;m++)e[m]^=k[m];h=h.concat(e)}return h},decrypt:function(b,e){for(var f=[],h=0;h<b.length/
16;h++){var d=b.slice(16*h,16*(h+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(d),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var k=0;16>k;k++)ct[k]^=e[k];e=d}f=f.concat(ct)}return f},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var b=this._tables[0],e=this._tables[1],f=b[4],h=e[4],d,k,m,t=[],u=[],v;for(d=0;256>d;d++)u[(t[d]=d<<1^283*(d>>7))^d]=d;for(k=m=0;!f[k];k^=v||1,m=u[m]||1){var q=m^m<<1^m<<2^m<<3^m<<4;q=q>>8^q&255^99;f[k]=q;h[q]=k;var w=t[d=
t[v=t[k]]];var B=16843009*w^65537*d^257*v^16843008*k;w=257*t[q]^16843008*q;for(d=0;4>d;d++)b[d][k]=w=w<<24^w>>>8,e[d][q]=B=B<<24^B>>>8}for(d=0;5>d;d++)b[d]=b[d].slice(0),e[d]=e[d].slice(0)},_crypt:function(b,e){if(4!==b.length)throw"invalid aes block size";var f=this._key[e],h=b[0]^f[0],d=b[e?3:1]^f[1],k=b[2]^f[2];b=b[e?1:3]^f[3];var m=f.length/4-2,t,u=4,v=[0,0,0,0];var q=this._tables[e];var w=q[0],B=q[1],y=q[2],z=q[3],C=q[4];for(t=0;t<m;t++){q=w[h>>>24]^B[d>>16&255]^y[k>>8&255]^z[b&255]^f[u];var A=
w[d>>>24]^B[k>>16&255]^y[b>>8&255]^z[h&255]^f[u+1];var D=w[k>>>24]^B[b>>16&255]^y[h>>8&255]^z[d&255]^f[u+2];b=w[b>>>24]^B[h>>16&255]^y[d>>8&255]^z[k&255]^f[u+3];u+=4;h=q;d=A;k=D}for(t=0;4>t;t++)v[e?3&-t:t]=C[h>>>24]<<24^C[d>>16&255]<<16^C[k>>8&255]<<8^C[b&255]^f[u++],q=h,h=d,d=k,k=b,b=q;return v}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(b){var e=[],f=sjcl.bitArray.bitLength(b),h,d;for(h=0;h<f/8;h++)0===(h&3)&&(d=b[h/4]),e.push(d>>>24),d<<=8;return e},toBits:function(b){var e=[],f,h=0;for(f=0;f<b.length;f++)h=h<<8|b[f],3===(f&3)&&(e.push(h),h=0);f&3&&e.push(sjcl.bitArray.partial(8*(f&3),h));return e}};
sjcl.bitArray={bitLength:function(b){var e=b.length;return 0===e?0:32*(e-1)+sjcl.bitArray.getPartial(b[e-1])},partial:function(b,e,f){return 32===b?e:(f?e|0:e<<32-b)+1099511627776*b},getPartial:function(b){return Math.round(b/1099511627776)||32}};SSHyClient.hash={};SSHyClient.hash.SHA1=function(b){this.data=b||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var b=toByteArray(this.data),e=bytesToWords(b),f=8*b.length,b=[],h=1732584193,d=-271733879,k=-1732584194,m=271733878,t=-1009589776;e[f>>5]|=128<<24-f%32;e[(f+64>>>9<<4)+15]=f;for(f=0;f<e.length;f+=16){for(var u=h,v=d,q=k,w=m,B=t,y=0;80>y;y++){if(16>y)b[y]=e[f+y];else{var z=b[y-3]^b[y-8]^b[y-14]^b[y-16];b[y]=z<<1|z>>>31}z=(h<<5|h>>>27)+t+(b[y]>>>0)+(20>y?(d&k|~d&m)+1518500249:40>y?(d^k^m)+1859775393:60>y?(d&k|d&m|k&m)-1894007588:(d^k^m)-899497514);
t=m;m=k;k=d<<30|d>>>2;d=h;h=z}h+=u;d+=v;k+=q;m+=w;t+=B}return fromByteArray(wordsToBytes([h,d,k,m,t]))}};SSHyClient.hash.SHA256=function(b){this.data=b||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var b=toByteArray(this.data),e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=bytesToWords(b),h=8*b.length,b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],d=[],k,m;f[h>>5]|=128<<24-h%32;f[(h+64>>9<<4)+15]=h;for(k=0;k<f.length;k+=16){h=b[0];var t=b[1];var u=b[2];var v=
b[3];var q=b[4];var w=b[5];var B=b[6];var y=b[7];for(m=0;64>m;m++){if(16>m)d[m]=f[m+k];else{var z=d[m-15];var C=d[m-2];d[m]=((z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3)+(d[m-7]>>>0)+((C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10)+(d[m-16]>>>0)}C=h&t^h&u^t&u;var A=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22);z=(y>>>0)+((q<<26|q>>>6)^(q<<21|q>>>11)^(q<<7|q>>>25))+(q&w^~q&B)+e[m]+(d[m]>>>0);C=A+C;y=B;B=w;w=q;q=v+z>>>0;v=u;u=t;t=h;h=z+C>>>0}b[0]+=h;b[1]+=t;b[2]+=u;b[3]+=v;b[4]+=q;b[5]+=w;b[6]+=B;b[7]+=y}return fromByteArray(wordsToBytes(b))}};SSHyClient.hash.HMAC=function(b,e){var f=digestmod=SSHyClient.hash.SHA1,h=new f,d=new f;64<b.length&&(b=(new f(b)).digest());b+=Array(64-b.length+1).join("\x00");f=toByteArray(b).slice(0);b=toByteArray(b).slice(0);for(var k=0;64>k;++k)f[k]^=92,b[k]^=54;h.data+=fromByteArray(f);d.data+=fromByteArray(b);d.data+=e;h.data+=d.digest();return h.digest()};(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=b()})(function(){return function e(f,h,d){function k(t,v){if(!h[t]){if(!f[t]){var q="function"==typeof require&&require;if(!v&&q)return q(t,!0);if(m)return m(t,!0);q=Error("Cannot find module '"+t+"'");throw q.code="MODULE_NOT_FOUND",q;}q=h[t]={exports:{}};
f[t][0].call(q.exports,function(d){var e=f[t][1][d];return k(e?e:d)},q,q.exports,e,f,h,d)}return h[t].exports}for(var m="function"==typeof require&&require,t=0;t<d.length;t++)k(d[t]);return k}({1:[function(e,f,h){function d(d,e,f){this.textarea=d;this.compositionView=e;this.terminal=f;this.isComposing=!1;this.compositionText=null;this.compositionPosition={start:null,end:null};this.isSendingComposition=!1}h.CompositionHelper=d;d.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=
this.textarea.value.length;this.compositionView.textContent="";this.compositionView.classList.add("active")};d.prototype.compositionupdate=function(d){this.compositionView.textContent=d.data;this.updateCompositionElements();var e=this;setTimeout(function(){e.compositionPosition.end=e.textarea.value.length},0)};d.prototype.compositionend=function(){this.finalizeComposition(!0)};d.prototype.keydown=function(d){if(this.isComposing||this.isSendingComposition){if(229===d.keyCode||16===d.keyCode||17===
d.keyCode||18===d.keyCode)return!1;this.finalizeComposition(!1)}return 229===d.keyCode?(this.handleAnyTextareaChanges(),!1):!0};d.prototype.finalizeComposition=function(d){this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(d){var e=this.compositionPosition.start,f=this.compositionPosition.end,k=this;this.isSendingComposition=!0;setTimeout(function(){if(k.isSendingComposition){k.isSendingComposition=!1;var d=k.isComposing?k.textarea.value.substring(e,
f):k.textarea.value.substring(e);k.terminal.handler(d)}},0)}else this.isSendingComposition=!1,d=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(d)};d.prototype.handleAnyTextareaChanges=function(){var d=this.textarea.value,e=this;setTimeout(function(){if(!e.isComposing){var f=e.textarea.value.replace(d,"");0<f.length&&e.terminal.handler(f)}},0)};d.prototype.updateCompositionElements=function(d){if(this.isComposing){var e=this.terminal.element.querySelector(".terminal-cursor");
if(e){var f=this.terminal.element.querySelector(".xterm-rows").offsetTop+e.offsetTop;this.compositionView.style.left=e.offsetLeft+"px";this.compositionView.style.top=f+"px";this.compositionView.style.height=e.offsetHeight+"px";this.compositionView.style.lineHeight=e.offsetHeight+"px";var k=this.compositionView.getBoundingClientRect();this.textarea.style.left=e.offsetLeft+"px";this.textarea.style.top=f+"px";this.textarea.style.width=k.width+"px";this.textarea.style.height=k.height+"px";this.textarea.style.lineHeight=
k.height+"px"}d||setTimeout(this.updateCompositionElements.bind(this,!0),0)}};d.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""}},{}],2:[function(e,f,h){function d(){this._events=this._events||{}}h.EventEmitter=d;d.prototype.addListener=function(d,e){this._events[d]=this._events[d]||[];this._events[d].push(e)};d.prototype.on=d.prototype.addListener;d.prototype.removeListener=function(d,e){if(this._events[d]){d=this._events[d];for(var f=d.length;f--;)if(d[f]===
e||d[f].listener===e){d.splice(f,1);break}}};d.prototype.off=d.prototype.removeListener;d.prototype.removeAllListeners=function(d){this._events[d]&&delete this._events[d]};d.prototype.once=function(d,e){function f(){var k=Array.prototype.slice.call(arguments);this.removeListener(d,f);return e.apply(this,k)}f.listener=e;return this.on(d,f)};d.prototype.emit=function(d){if(this._events[d])for(var e=Array.prototype.slice.call(arguments,1),f=this._events[d],k=f.length,h=0;h<k;h++)f[h].apply(this,e)};
d.prototype.listeners=function(d){return this._events[d]=this._events[d]||[]}},{}],3:[function(e,f,h){function d(d,e,f,h){this.terminal=d;this.viewportElement=e;this.scrollArea=f;this.charMeasureElement=h;this.lastRecordedViewportHeight=this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));this.syncScrollArea()}
h.Viewport=d;d.prototype.refresh=function(d){d=d||this.charMeasureElement.getBoundingClientRect();if(0<d.height){var e=d.height!==this.currentRowHeight;e&&(this.currentRowHeight=d.height,this.viewportElement.style.lineHeight=d.height+"px",this.terminal.rowContainer.style.lineHeight=d.height+"px");var f=this.lastRecordedViewportHeight!==this.terminal.rows;if(e||f)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=d.height*this.terminal.rows+"px";this.scrollArea.style.height=
d.height*this.lastRecordedBufferLength+"px"}};d.prototype.syncScrollArea=function(){if(this.lastRecordedBufferLength!==this.terminal.lines.length)this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh();else if(this.lastRecordedViewportHeight!==this.terminal.rows)this.refresh();else{var d=this.charMeasureElement.getBoundingClientRect();d.height!==this.currentRowHeight&&this.refresh(d)}d=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==d&&(this.viewportElement.scrollTop=
d)};d.prototype.onScroll=function(d){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};d.prototype.onWheel=function(d){if(0!==d.deltaY){var e=1;d.deltaMode===WheelEvent.DOM_DELTA_LINE?e=this.currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=d.deltaY*e;d.preventDefault()}}},{}],4:[function(e,f,h){function d(d){var e=String.fromCharCode(32),f=String.fromCharCode(160),
h=new RegExp(f,"g");return d.split("\n").map(function(d){return d.replace(/\s+$/g,"").replace(h,e)}).join("\n")}h.prepareTextForClipboard=d;h.copyHandler=function(e,f){var h=window.getSelection().toString(),h=d(h);f.browser.isMSIE?window.clipboardData.setData("Text",h):e.clipboardData.setData("text/plain",h);e.preventDefault()};h.pasteHandler=function(d,e){d.stopPropagation();var f=function(f){e.handler(f);e.textarea.value="";return e.cancel(d)};if(e.browser.isMSIE){if(window.clipboardData){var h=
window.clipboardData.getData("Text");f(h)}}else d.clipboardData&&(h=d.clipboardData.getData("text/plain"),f(h))};h.rightClickHandler=function(e,f){var h=document.getSelection();var k=d(h.toString()),m=!1;if(h.rangeCount){h=h.getRangeAt(0).getClientRects();var q=e.clientX;var w=e.clientY;for(e=0;e<h.length&&!(m=h[e],m=q>m.left&&q<m.right&&w>m.top&&w<m.bottom);e++);if(k.match(/^\s$/)||!k.length)m=!1}m||(f.textarea.style.position="fixed",f.textarea.style.width="20px",f.textarea.style.height="20px",f.textarea.style.left=
q-10+"px",f.textarea.style.top=w-10+"px",f.textarea.style.zIndex=1E3,f.textarea.focus(),setTimeout(function(){f.textarea.style.position=null;f.textarea.style.width=null;f.textarea.style.height=null;f.textarea.style.left=null;f.textarea.style.top=null;f.textarea.style.zIndex=null},4))}},{}],5:[function(e,f,h){e=e("./Generic.js");var d="undefined"==typeof navigator?!0:!1;f=d?"node":navigator.userAgent;d=d?"node":navigator.platform;h.isFirefox=!!~f.indexOf("Firefox");h.isMSIE=!!~f.indexOf("MSIE")||!!~f.indexOf("Trident");
h.isMac=e.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],d);h.isIpad="iPad"===d;h.isIphone="iPhone"===d;h.isMSWindows=e.contains(["Windows","Win16","Win32","WinCE"],d)},{"./Generic.js":6}],6:[function(e,f,h){h.contains=function(d,e){return 0<=d.indexOf(e)}},{}],7:[function(e,f,h){function d(a,e,f){var l=this;if(!(this instanceof d))return new d(a,e,f);l.browser=C;l.cancel=d.cancel;B.EventEmitter.call(this);"number"===typeof a&&(a={cols:a,rows:e,handler:f});a=a||{};Object.keys(d.defaults).forEach(function(e){null==
a[e]&&(a[e]=d.options[e],d[e]!==d.defaults[e]&&(a[e]=d[e]));l[e]=a[e]});8===a.colors.length?a.colors=a.colors.concat(d._colors.slice(8)):16===a.colors.length?a.colors=a.colors.concat(d._colors.slice(16)):10===a.colors.length?a.colors=a.colors.slice(0,-2).concat(d._colors.slice(8,-2),a.colors.slice(-2)):18===a.colors.length&&(a.colors=a.colors.concat(d._colors.slice(16,-2),a.colors.slice(-2)));this.colors=a.colors;this.options=a;this.parent=a.body||a.parent||(A?A.getElementsByTagName("body")[0]:null);
this.cols=a.cols||a.geometry[0];this.rows=a.rows||a.geometry[1];this.geometry=[this.cols,this.rows];if(a.handler)this.on("data",a.handler);this.y=this.x=this.ydisp=this.ybase=0;this.isRefreshing=!1;this.cursorState=0;this.cursorHidden=!1;this.convertEol;this.state=0;this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.customKeydownHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=
null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.surrogate_high=this.postfix=this.prefix="";this.lines=[];for(e=this.rows;e--;)this.lines.push(this.blankLine());
this.tabs;this.setupStops();this.userScrolling=!1}function k(a,d,e,f){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(d,e,f||!1)})}function m(a,d,e,f){a.removeEventListener(d,e,f||!1)}function t(a,d){function e(){this.constructor=a}e.prototype=d.prototype;a.prototype=new e}function u(a){var d=a.getElementsByTagName("body")[0];a=a.createElement("span");a.innerHTML="hello world";d.appendChild(a);var e=a.scrollWidth;a.style.fontWeight="bold";var f=a.scrollWidth;d.removeChild(a);return e!==
f}function v(a,d){a=a.browser.isMac&&d.altKey&&!d.ctrlKey&&!d.metaKey||a.browser.isMSWindows&&d.altKey&&d.ctrlKey&&!d.metaKey;return"keypress"==d.type?a:a&&(!d.keyCode||47<d.keyCode)}function q(a,e,f){var l=a<<16|e<<8|f;if(null!=q._cache[l])return q._cache[l];for(var g=Infinity,r=-1,h=0,k,m,F;h<d.vcolors.length;h++){k=d.vcolors[h];m=k[0];F=k[1];k=k[2];m=q.distance(a,e,f,m,F,k);if(0===m){r=h;break}m<g&&(g=m,r=h)}return q._cache[l]=r}var w=e("./CompositionHelper.js"),B=e("./EventEmitter.js"),y=e("./Viewport.js"),
z=e("./handlers/Clipboard.js"),C=e("./utils/Browser"),A="undefined"!=typeof window?window.document:null;t(d,B.EventEmitter);d.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};d.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");d.colors=function(){function a(a,d,g){f.push("#"+e(a)+e(d)+e(g))}function e(a){a=a.toString(16);return 2>a.length?"0"+a:a}var f=d.tangoColors.slice(),
h=[0,95,135,175,215,255],g;for(g=0;216>g;g++)a(h[g/36%6|0],h[g/6%6|0],h[g%6]);for(g=0;24>g;g++)h=8+10*g,a(h,h,h);return f}();d._colors=d.colors.slice();d.vcolors=function(){for(var a=[],e=d.colors,f=0,h;256>f;f++)h=parseInt(e[f].substring(1),16),a.push([h>>16&255,h>>8&255,h&255]);return a}();d.defaults={colors:d.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1};d.options={};d.focus=
null;(function(a,d,e){if(a.forEach)return a.forEach(d,e);for(var f=0;f<a.length;f++)d.call(e,a[f],f,a)})(function(a){if(Object.keys)return Object.keys(a);var d,e=[];for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.push(d);return e}(d.defaults),function(a){d[a]=d.defaults[a];d.options[a]=d.defaults[a]});d.prototype.focus=function(){return this.textarea.focus()};d.prototype.getOption=function(a,e){if(!(a in d.defaults))throw Error('No option with key "'+a+'"');return"undefined"!==typeof this.options[a]?
this.options[a]:this[a]};d.prototype.setOption=function(a,e){if(!(a in d.defaults))throw Error('No option with key "'+a+'"');this[a]=e;this.options[a]=e};d.bindFocus=function(a){k(a.textarea,"focus",function(e){a.sendFocus&&a.send("\u001b[I");a.element.classList.add("focus");a.showCursor();d.focus=a;a.emit("focus",{terminal:a})})};d.prototype.blur=function(){return this.textarea.blur()};d.bindBlur=function(a){k(a.textarea,"blur",function(e){a.refresh(a.y,a.y);a.sendFocus&&a.send("\u001b[O");a.element.classList.remove("focus");
d.focus=null;a.emit("blur",{terminal:a})})};d.prototype.initGlobal=function(){function a(a){z.rightClickHandler.call(this,a,e)}var e=this;d.bindKeys(this);d.bindFocus(this);d.bindBlur(this);k(this.element,"copy",function(a){z.copyHandler.call(this,a,e)});k(this.textarea,"paste",function(a){z.pasteHandler.call(this,a,e)});e.browser.isFirefox?k(this.element,"mousedown",function(d){2==d.button&&a(d)}):k(this.element,"contextmenu",a)};d.bindKeys=function(a){k(a.element,"keydown",function(d){A.activeElement==
this&&a.keyDown(d)},!0);k(a.element,"keypress",function(d){A.activeElement==this&&a.keyPress(d)},!0);k(a.element,"keyup",a.focus.bind(a));k(a.textarea,"keydown",function(d){a.keyDown(d)},!0);k(a.textarea,"keypress",function(d){a.keyPress(d);this.value=""},!0);k(a.textarea,"compositionstart",a.compositionHelper.compositionstart.bind(a.compositionHelper));k(a.textarea,"compositionupdate",a.compositionHelper.compositionupdate.bind(a.compositionHelper));k(a.textarea,"compositionend",a.compositionHelper.compositionend.bind(a.compositionHelper));
a.on("refresh",a.compositionHelper.updateCompositionElements.bind(a.compositionHelper))};d.prototype.insertRow=function(a){"object"!=typeof a&&(a=A.createElement("div"));this.rowContainer.appendChild(a);this.children.push(a);return a};d.prototype.open=function(a){var e=this,f=0;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];
this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.classList.add("xterm-theme-"+this.theme);this.element.style.height;this.element.setAttribute("tabindex",0);this.viewportElement=A.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=A.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);
this.rowContainer=A.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.helperContainer=A.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=A.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck",
"false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){e.emit("focus",{terminal:e})});this.textarea.addEventListener("blur",function(){e.emit("blur",{terminal:e})});this.helperContainer.appendChild(this.textarea);this.compositionView=A.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new w.CompositionHelper(this.textarea,this.compositionView,this);this.helperContainer.appendChild(this.compositionView);this.charMeasureElement=
A.createElement("div");this.charMeasureElement.classList.add("xterm-char-measure-element");this.charMeasureElement.innerHTML="W";for(this.helperContainer.appendChild(this.charMeasureElement);f<this.rows;f++)this.insertRow();this.parent.appendChild(this.element);this.viewport=new y.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasureElement);this.refresh(0,this.rows-1);this.initGlobal();this.focus();k(this.element,"click",function(){var a=A.getSelection(),d=a.isCollapsed;("boolean"==
typeof d?d:"Range"!=a.type)&&e.focus()});this.bindMouse();null==d.brokenBold&&(d.brokenBold=u(this.document));this.emit("open")};d.loadAddon=function(a,d){if("object"===typeof h&&"object"===typeof f)return e("./addons/"+a+"/"+a);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};d.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var d=null!=a.button?+a.button:null!=a.which?a.which-1:null;n.browser.isMSIE&&(d=1===
d?0:4===d?1:d);break;case "mouseup":d=3;break;case "DOMMouseScroll":d=0>a.detail?64:65;break;case "wheel":d=0<a.wheelDeltaY?64:65}var e=a.shiftKey?4:0;var l=a.metaKey?8:0;var r=a.ctrlKey?16:0;e=e|l|r;n.vt200Mouse?e&=r:n.normalMouse||(e=0);d=32+(e<<2)+d;if(r=g(a))switch(f(d,r),a.overrideType||a.type){case "mousedown":q=d;break;case "mouseup":q=32}}function d(a){var d=q;(a=g(a))&&f(d+32,a)}function e(a,d){if(n.utfMouse){if(2047===d)return a.push(0);127>d?a.push(d):(2047<d&&(d=2047),a.push(192|d>>6),
a.push(128|d&63))}else{if(255===d)return a.push(0);127<d&&(d=127);a.push(d)}}function f(a,d){if(n.vt300Mouse){a&=3;d.x-=32;d.y-=32;var f="\u001b[24";if(0===a)f+="1";else if(1===a)f+="3";else if(2===a)f+="5";else{if(3===a)return;f+="0"}f+="~["+d.x+","+d.y+"]\r";n.send(f)}else n.decLocator?(a&=3,d.x-=32,d.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&(a=3),n.send("\u001b["+a+";"+(3===a?4:0)+";"+d.y+";"+d.x+";"+(d.page||0)+"&w")):n.urxvtMouse?(d.x-=32,d.y-=32,d.x++,d.y++,n.send("\u001b["+a+";"+d.x+";"+
d.y+"M")):n.sgrMouse?(d.x-=32,d.y-=32,n.send("\u001b[<"+(3===(a&3)?a&-4:a)+";"+d.x+";"+d.y+(3===(a&3)?"m":"M"))):(f=[],e(f,a),e(f,d.x),e(f,d.y),n.send("\u001b[M"+String.fromCharCode.apply(String,f)))}function g(a){var d;if(null!=a.pageX){var e=a.pageX;a=a.pageY;for(d=n.element;d&&d!==n.document.documentElement;)e-=d.offsetLeft,a-=d.offsetTop,d="offsetParent"in d?d.offsetParent:d.parentNode;d=n.element.clientWidth;var f=n.element.clientHeight;e=Math.ceil(e/d*n.cols);a=Math.ceil(a/f*n.rows);0>e&&(e=
0);e>n.cols&&(e=n.cols);0>a&&(a=0);a>n.rows&&(a=n.rows);return{x:e+32,y:a+32,type:"wheel"}}}var h=this.element,n=this,q=32;k(h,"mousedown",function(e){if(n.mouseEvents){a(e);n.focus();if(n.vt200Mouse)return e.overrideType="mouseup",a(e),n.cancel(e);n.normalMouse&&k(n.document,"mousemove",d);n.x10Mouse||k(n.document,"mouseup",function G(e){a(e);n.normalMouse&&m(n.document,"mousemove",d);m(n.document,"mouseup",G);return n.cancel(e)});return n.cancel(e)}});k(h,"wheel",function(d){if(n.mouseEvents&&!(n.x10Mouse||
n.vt300Mouse||n.decLocator))return a(d),n.cancel(d)});k(h,"wheel",function(a){if(!n.mouseEvents)return n.viewport.onWheel(a),n.cancel(a)})};d.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=function(){};this.write=function(){};this.element.parentNode&&this.element.parentNode.removeChild(this.element)};d.flags={BOLD:1,UNDERLINE:2,BLINK:4,INVERSE:8,INVISIBLE:16};d.prototype.refresh=function(a,e,f){var l=this;if("undefined"==typeof f||f)this._refreshIsQueued?
this._fullRefreshNext=!0:(setTimeout(function(){l.refresh(a,e,!1)},34),this._refreshIsQueued=!0);else{this._refreshIsQueued=!1;this._fullRefreshNext&&(a=0,e=this.rows-1,this._fullRefreshNext=!1);var g,r,h,k,m;e-a>=this.rows/2&&(m=this.element.parentNode)&&this.element.removeChild(this.rowContainer);var q=this.cols;f=a;for(e>=this.rows.length&&(this.log("`end` is too large. Most likely a bad CSR."),e=this.rows.length-1);f<=e;f++){var t=f+this.ydisp;var w=this.lines[t];var u="";t=this.y===f-(this.ybase-
this.ydisp)&&this.cursorState&&!this.cursorHidden?this.x:-1;var v=this.defAttr;for(g=0;g<q;g++)if(k=w[g][0],r=w[g][1],h=w[g][2]){g===t&&(k=-1);if(k!==v&&(v!==this.defAttr&&(u+="</span>"),k!==this.defAttr))if(-1===k)u+='<span class="reverse-video terminal-cursor',this.cursorBlink&&(u+=" blinking"),u+='">';else{var y=[];h=k&511;v=k>>9&511;var z=k>>18;z&d.flags.BOLD&&(d.brokenBold||y.push("xterm-bold"),8>v&&(v+=8));z&d.flags.UNDERLINE&&y.push("xterm-underline");z&d.flags.BLINK&&y.push("xterm-blink");
z&d.flags.INVERSE&&(h=[v,v=h][0],z&1&&8>v&&(v+=8));z&d.flags.INVISIBLE&&y.push("xterm-hidden");z&d.flags.INVERSE&&(257==h&&(h=15),256==v&&(v=0));256>h&&y.push("xterm-bg-color-"+h);256>v&&y.push("xterm-color-"+v);u+="<span";y.length&&(u+=' class="'+y.join(" ")+'"');u+=">"}switch(r){case "&":u+="&amp;";break;case "<":u+="&lt;";break;case ">":u+="&gt;";break;default:u=" ">=r?u+"&nbsp;":u+r}v=k}v!==this.defAttr&&(u+="</span>");this.children[f].innerHTML=u}m&&this.element.appendChild(this.rowContainer);
this.emit("refresh",{element:this.element,start:a,end:e})}};d.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};d.prototype.scroll=function(){++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1));this.userScrolling||(this.ydisp=this.ybase);var a=this.ybase+this.rows-1;a-=this.rows-1-this.scrollBottom;a===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(a,0,this.blankLine());
0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};d.prototype.scrollDisp=function(a,d){0>a?this.userScrolling=!0:a+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=a;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);d||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-
1)};d.prototype.scrollPages=function(a){this.scrollDisp(a*(this.rows-1))};d.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};d.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};d.prototype.write=function(a){var e=a.length,f=0;this.refreshEnd=this.refreshStart=this.y;for(this.surrogate_high&&(a=this.surrogate_high+a,this.surrogate_high="");f<e;f++){var h=a[f];var g=a.charCodeAt(f);if(55296<=g&&56319>=g){var k=a.charCodeAt(f+1);if(isNaN(k)){this.surrogate_high=
h;continue}g=1024*(g-55296)+(k-56320)+65536;h+=a.charAt(f+1)}if(!(56320<=g&&57343>=g))switch(this.state){case 0:switch(h){case "\u0007":this.bell();break;case "\n":case "\x0B":case "\f":this.convertEol&&(this.x=0);this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());break;case "\r":this.x=0;break;case "\b":0<this.x&&this.x--;break;case "\t":this.x=this.nextStop();break;case "\u000e":this.setgLevel(1);break;case "\u000f":this.setgLevel(0);break;case "\u001b":this.state=1;break;default:if(g=
D(g)," "<=h)if(this.charset&&this.charset[h]&&(h=this.charset[h]),k=this.y+this.ybase,!g&&this.x)this.lines[k][this.x-1]&&(this.lines[k][this.x-1][2]?this.lines[k][this.x-1][1]+=h:this.lines[k][this.x-2]&&(this.lines[k][this.x-2][1]+=h),this.updateRange(this.y));else{if(this.x+g-1>=this.cols)if(this.wraparoundMode)this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());else if(this.x=this.cols-1,2===g)continue;k=this.y+this.ybase;if(this.insertMode)for(var n=0;n<g;++n)0===this.lines[this.y+
this.ybase].pop()[2]&&this.lines[k][this.cols-2]&&2===this.lines[k][this.cols-2][2]&&(this.lines[k][this.cols-2]=[this.curAttr," ",1]),this.lines[k].splice(this.x,0,[this.curAttr," ",1]);this.lines[k][this.x]=[this.curAttr,h,g];this.x++;this.updateRange(this.y);2===g&&(this.lines[k][this.x]=[this.curAttr,"",0],this.x++)}}break;case 1:switch(h){case "[":this.params=[];this.currentParam=0;this.state=2;break;case "]":this.params=[];this.currentParam=0;this.state=3;break;case "P":this.params=[];this.currentParam=
0;this.state=5;break;case "_":this.state=6;break;case "^":this.state=6;break;case "c":this.reset();break;case "E":this.x=0;case "D":this.index();break;case "M":this.reverseIndex();break;case "%":this.setgLevel(0);this.setgCharset(0,d.charsets.US);this.state=0;f++;break;case "(":case ")":case "*":case "+":case "-":case ".":switch(h){case "(":this.gcharset=0;break;case ")":this.gcharset=1;break;case "*":this.gcharset=2;break;case "+":this.gcharset=3;break;case "-":this.gcharset=1;break;case ".":this.gcharset=
2}this.state=4;break;case "/":this.gcharset=3;this.state=4;f--;break;case "N":break;case "O":break;case "n":this.setgLevel(2);break;case "o":this.setgLevel(3);break;case "|":this.setgLevel(3);break;case "}":this.setgLevel(2);break;case "~":this.setgLevel(1);break;case "7":this.saveCursor();this.state=0;break;case "8":this.restoreCursor();this.state=0;break;case "#":this.state=0;f++;break;case "H":this.tabSet();break;case "=":this.log("Serial port requested application keypad.");this.applicationKeypad=
!0;this.viewport.syncScrollArea();this.state=0;break;case ">":this.log("Switching back to normal keypad.");this.applicationKeypad=!1;this.viewport.syncScrollArea();this.state=0;break;default:this.state=0,this.error("Unknown ESC control: %s.",h)}break;case 4:switch(h){case "0":h=d.charsets.SCLD;break;case "A":h=d.charsets.UK;break;case "B":h=d.charsets.US;break;case "4":h=d.charsets.Dutch;break;case "C":case "5":h=d.charsets.Finnish;break;case "R":h=d.charsets.French;break;case "Q":h=d.charsets.FrenchCanadian;
break;case "K":h=d.charsets.German;break;case "Y":h=d.charsets.Italian;break;case "E":case "6":h=d.charsets.NorwegianDanish;break;case "Z":h=d.charsets.Spanish;break;case "H":case "7":h=d.charsets.Swedish;break;case "=":h=d.charsets.Swiss;break;case "/":h=d.charsets.ISOLatin;f++;break;default:h=d.charsets.US}this.setgCharset(this.gcharset,h);this.gcharset=null;this.state=0;break;case 3:if("\u001b"===h||"\u0007"===h){"\u001b"===h&&f++;this.params.push(this.currentParam);switch(this.params[0]){case 0:case 1:case 2:this.params[1]&&
(this.title=this.params[1],this.handleTitle(this.title))}this.params=[];this.state=this.currentParam=0}else this.params.length?this.currentParam+=h:"0"<=h&&"9">=h?this.currentParam=10*this.currentParam+h.charCodeAt(0)-48:";"===h&&(this.params.push(this.currentParam),this.currentParam="");break;case 2:if("?"===h||">"===h||"!"===h){this.prefix=h;break}if("0"<=h&&"9">=h){this.currentParam=10*this.currentParam+h.charCodeAt(0)-48;break}if("$"===h||'"'===h||" "===h||"'"===h){this.postfix=h;break}this.params.push(this.currentParam);
this.currentParam=0;if(";"===h)break;this.state=0;switch(h){case "A":this.cursorUp(this.params);break;case "B":this.cursorDown(this.params);break;case "C":this.cursorForward(this.params);break;case "D":this.cursorBackward(this.params);break;case "H":this.cursorPos(this.params);break;case "J":this.eraseInDisplay(this.params);break;case "K":this.eraseInLine(this.params);break;case "m":this.prefix||this.charAttributes(this.params);break;case "n":this.prefix||this.deviceStatus(this.params);break;case "@":this.insertChars(this.params);
break;case "E":this.cursorNextLine(this.params);break;case "F":this.cursorPrecedingLine(this.params);break;case "G":this.cursorCharAbsolute(this.params);break;case "L":this.insertLines(this.params);break;case "M":this.deleteLines(this.params);break;case "P":this.deleteChars(this.params);break;case "X":this.eraseChars(this.params);break;case "`":this.charPosAbsolute(this.params);break;case "a":this.HPositionRelative(this.params);break;case "c":this.sendDeviceAttributes(this.params);break;case "d":this.linePosAbsolute(this.params);
break;case "e":this.VPositionRelative(this.params);break;case "f":this.HVPosition(this.params);break;case "h":this.setMode(this.params);break;case "l":this.resetMode(this.params);break;case "r":this.setScrollRegion(this.params);break;case "s":this.saveCursor(this.params);break;case "u":this.restoreCursor(this.params);break;case "I":this.cursorForwardTab(this.params);break;case "S":this.scrollUp(this.params);break;case "T":2>this.params.length&&!this.prefix&&this.scrollDown(this.params);break;case "Z":this.cursorBackwardTab(this.params);
break;case "b":this.repeatPrecedingCharacter(this.params);break;case "g":this.tabClear(this.params);break;case "p":switch(this.prefix){case "!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",h)}this.postfix=this.prefix="";break;case 5:if("\u001b"===h||"\u0007"===h){"\u001b"===h&&f++;switch(this.prefix){case "":break;case "$q":h=this.currentParam;g=!1;switch(h){case '"q':h='0"q';break;case '"p':h='61"p';break;case "r":h=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+
"r";break;case "m":h="0m";break;default:this.error("Unknown DCS Pt: %s.",h),h=""}this.send("\u001bP"+ +g+"$r"+h+"\u001b\\");break;case "+p":break;case "+q":h=this.currentParam;g=!1;this.send("\u001bP"+ +g+"+r"+h+"\u001b\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0;this.prefix="";this.state=0}else this.currentParam?this.currentParam+=h:this.prefix||"$"===h||"+"===h?2===this.prefix.length?this.currentParam=h:this.prefix+=h:this.currentParam=h;break;case 6:if("\u001b"===
h||"\u0007"===h)"\u001b"===h&&f++,this.state=0}}this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)};d.prototype.writeln=function(a){this.write(a+"\r\n")};d.prototype.attachCustomKeydownHandler=function(a){this.customKeydownHandler=a};d.prototype.keyDown=function(a){this.ybase!==this.ydisp&&this.scrollToBottom();if(this.customKeydownHandler&&!1===this.customKeydownHandler(a)||!this.compositionHelper.keydown.bind(this.compositionHelper)(a))return!1;var d=this.evaluateKeyEscapeSequence(a);
if(d.scrollDisp)return this.scrollDisp(d.scrollDisp),this.cancel(a,!0);if(v(this,a))return!0;d.cancel&&this.cancel(a,!0);if(!d.key)return!0;this.emit("keydown",a);this.emit("key",d.key,a);this.showCursor();this.handler(d.key);return this.cancel(a,!0)};d.prototype.evaluateKeyEscapeSequence=function(a){var d={cancel:!1,key:void 0,scrollDisp:void 0},e=a.shiftKey<<0|a.altKey<<1|a.ctrlKey<<2|a.metaKey<<3;switch(a.keyCode){case 8:if(a.shiftKey){d.key="\b";break}d.key="\u007f";break;case 9:if(a.shiftKey){d.key=
"\u001b[Z";break}d.key="\t";d.cancel=!0;break;case 13:d.key="\r";d.cancel=!0;break;case 27:d.key="\u001b";d.cancel=!0;break;case 37:e?(d.key="\u001b[1;"+(e+1)+"D","\u001b[1;3D"==d.key&&(d.key="\u001b[1;5D")):d.key=this.applicationCursor?"\u001bOD":"\u001b[D";break;case 39:e?(d.key="\u001b[1;"+(e+1)+"C","\u001b[1;3C"==d.key&&(d.key="\u001b[1;5C")):d.key=this.applicationCursor?"\u001bOC":"\u001b[C";break;case 38:e?(d.key="\u001b[1;"+(e+1)+"A","\u001b[1;3A"==d.key&&(d.key="\u001b[1;5A")):d.key=this.applicationCursor?
"\u001bOA":"\u001b[A";break;case 40:e?(d.key="\u001b[1;"+(e+1)+"B","\u001b[1;3B"==d.key&&(d.key="\u001b[1;5B")):d.key=this.applicationCursor?"\u001bOB":"\u001b[B";break;case 45:a.shiftKey||a.ctrlKey||(d.key="\u001b[2~");break;case 46:d.key=e?"\u001b[3;"+(e+1)+"~":"\u001b[3~";break;case 36:d.key=e?"\u001b[1;"+(e+1)+"H":this.applicationCursor?"\u001bOH":"\u001b[H";break;case 35:d.key=e?"\u001b[1;"+(e+1)+"F":this.applicationCursor?"\u001bOF":"\u001b[F";break;case 33:a.shiftKey?d.scrollDisp=-(this.rows-
1):d.key="\u001b[5~";break;case 34:a.shiftKey?d.scrollDisp=this.rows-1:d.key="\u001b[6~";break;case 112:d.key=e?"\u001b[1;"+(e+1)+"P":"\u001bOP";break;case 113:d.key=e?"\u001b[1;"+(e+1)+"Q":"\u001bOQ";break;case 114:d.key=e?"\u001b[1;"+(e+1)+"R":"\u001bOR";break;case 115:d.key=e?"\u001b[1;"+(e+1)+"S":"\u001bOS";break;case 116:d.key=e?"\u001b[15;"+(e+1)+"~":"\u001b[15~";break;case 117:d.key=e?"\u001b[17;"+(e+1)+"~":"\u001b[17~";break;case 118:d.key=e?"\u001b[18;"+(e+1)+"~":"\u001b[18~";break;case 119:d.key=
e?"\u001b[19;"+(e+1)+"~":"\u001b[19~";break;case 120:d.key=e?"\u001b[20;"+(e+1)+"~":"\u001b[20~";break;case 121:d.key=e?"\u001b[21;"+(e+1)+"~":"\u001b[21~";break;case 122:d.key=e?"\u001b[23;"+(e+1)+"~":"\u001b[23~";break;case 123:d.key=e?"\u001b[24;"+(e+1)+"~":"\u001b[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?this.browser.isMac||!a.altKey||a.ctrlKey||a.metaKey||(65<=a.keyCode&&90>=a.keyCode?d.key="\u001b"+String.fromCharCode(a.keyCode+32):192===a.keyCode?d.key="\u001b`":48<=a.keyCode&&
57>=a.keyCode&&(d.key="\u001b"+(a.keyCode-48))):65<=a.keyCode&&90>=a.keyCode?d.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?d.key=String.fromCharCode(0):51<=a.keyCode&&55>=a.keyCode?d.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?d.key=String.fromCharCode(127):219===a.keyCode?d.key=String.fromCharCode(27):221===a.keyCode&&(d.key=String.fromCharCode(29))}return d};d.prototype.setgLevel=function(a){this.glevel=a;this.charset=this.charsets[a]};d.prototype.setgCharset=function(a,d){this.charsets[a]=
d;this.glevel===a&&(this.charset=d)};d.prototype.keyPress=function(a){this.cancel(a);if(a.charCode)var d=a.charCode;else if(null==a.which)d=a.keyCode;else if(0!==a.which&&0!==a.charCode)d=a.which;else return!1;if(!d||(a.altKey||a.ctrlKey||a.metaKey)&&!v(this,a))return!1;d=String.fromCharCode(d);this.emit("keypress",d,a);this.emit("key",d,a);this.showCursor();this.handler(d);return!1};d.prototype.send=function(a){var d=this;this.queue||setTimeout(function(){d.handler(d.queue);d.queue=""},1);this.queue+=
a};d.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white";setTimeout(function(){a.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};d.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,a)}};d.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);
this.context.console.error.apply(this.context.console,a)}};d.prototype.resize=function(a,d){var e;if(a!==this.cols||d!==this.rows){1>a&&(a=1);1>d&&(d=1);var f=this.cols;if(f<a){var g=[this.defAttr," ",1];for(e=this.lines.length;e--;)for(;this.lines[e].length<a;)this.lines[e].push(g)}else for(e=this.lines.length;e--;)for(;this.lines[e].length>a;)this.lines[e].pop();this.setupStops(f);this.cols=a;f=this.rows;g=0;if(f<d)for(;f++<d;)this.lines.length<d+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+
this.y+g+1?(this.ybase--,g++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<d&&this.insertRow();else for(;f-- >d;)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>d&&(e=this.children.shift())&&e.parentNode.removeChild(e);this.rows=d;this.y>=d&&(this.y=d-1);g&&(this.y+=g);this.x>=a&&(this.x=a-1);this.scrollTop=0;this.scrollBottom=d-1;this.refresh(0,this.rows-1);this.normal=
null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:a,rows:d})}};d.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};d.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};d.prototype.setupStops=function(a){for(null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this.cols;a+=8)this.tabs[a]=!0};d.prototype.prevStop=function(a){for(null==a&&(a=this.x);!this.tabs[--a]&&
0<a;);return a>=this.cols?this.cols-1:0>a?0:a};d.prototype.nextStop=function(a){for(null==a&&(a=this.x);!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a};d.prototype.eraseRight=function(a,d){for(var e=this.lines[this.ybase+d],f=[this.eraseAttr()," ",1];a<this.cols;a++)e[a]=f;this.updateRange(d)};d.prototype.eraseLeft=function(a,d){var e=this.lines[this.ybase+d],f=[this.eraseAttr()," ",1];for(a++;a--;)e[a]=f;this.updateRange(d)};d.prototype.clear=function(){if(0!==this.ybase||
0!==this.y){this.lines=[this.lines[this.ybase+this.y]];this.y=this.ybase=this.ydisp=0;for(var a=1;a<this.rows;a++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};d.prototype.eraseLine=function(a){this.eraseRight(0,a)};d.prototype.blankLine=function(a){a=[a?this.eraseAttr():this.defAttr," ",1];for(var d=[],e=0;e<this.cols;e++)d[e]=a;return d};d.prototype.ch=function(a){return a?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};d.prototype.is=function(a){return 0===
(this.termName+"").indexOf(a)};d.prototype.handler=function(a){this.emit("data",a)};d.prototype.handleTitle=function(a){this.emit("title",a)};d.prototype.index=function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.state=0};d.prototype.reverseIndex=function(){var a;this.y--;this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),a=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-a+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom));
this.state=0};d.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this.customKeydownHandler;d.call(this,this.options);this.customKeydownHandler=a;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};d.prototype.tabSet=function(){this.tabs[this.x]=!0;this.state=0};d.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this.y-=a;0>this.y&&(this.y=0)};d.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this.y+=a;this.y>=this.rows&&(this.y=this.rows-1)};d.prototype.cursorForward=
function(a){a=a[0];1>a&&(a=1);this.x+=a;this.x>=this.cols&&(this.x=this.cols-1)};d.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this.x-=a;0>this.x&&(this.x=0)};d.prototype.cursorPos=function(a){var d=a[0]-1;a=2<=a.length?a[1]-1:0;0>d?d=0:d>=this.rows&&(d=this.rows-1);0>a?a=0:a>=this.cols&&(a=this.cols-1);this.x=a;this.y=d};d.prototype.eraseInDisplay=function(a){switch(a[0]){case 0:this.eraseRight(this.x,this.y);for(a=this.y+1;a<this.rows;a++)this.eraseLine(a);break;case 1:this.eraseLeft(this.x,
this.y);for(a=this.y;a--;)this.eraseLine(a);break;case 2:for(a=this.rows;a--;)this.eraseLine(a)}};d.prototype.eraseInLine=function(a){switch(a[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}};d.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])this.curAttr=this.defAttr;else{for(var d=a.length,e=0,f=this.curAttr>>18,g=this.curAttr>>9&511,h=this.curAttr&511,k;e<d;e++)k=a[e],30<=k&&37>=k?g=k-30:40<=k&&47>=k?h=k-40:
90<=k&&97>=k?(k+=8,g=k-90):100<=k&&107>=k?(k+=8,h=k-100):0===k?(f=this.defAttr>>18,g=this.defAttr>>9&511,h=this.defAttr&511):1===k?f|=1:4===k?f|=2:5===k?f|=4:7===k?f|=8:8===k?f|=16:22===k?f&=-2:24===k?f&=-3:25===k?f&=-5:27===k?f&=-9:28===k?f&=-17:39===k?g=this.defAttr>>9&511:49===k?h=this.defAttr&511:38===k?2===a[e+1]?(e+=2,g=q(a[e]&255,a[e+1]&255,a[e+2]&255),-1===g&&(g=511),e+=2):5===a[e+1]&&(e+=2,g=a[e]&255):48===k?2===a[e+1]?(e+=2,h=q(a[e]&255,a[e+1]&255,a[e+2]&255),-1===h&&(h=511),e+=2):5===a[e+
1]&&(e+=2,h=a[e]&255):100===k?(g=this.defAttr>>9&511,h=this.defAttr&511):this.error("Unknown SGR attribute: %d.",k);this.curAttr=f<<18|g<<9|h}};d.prototype.deviceStatus=function(a){if(!this.prefix)switch(a[0]){case 5:this.send("\u001b[0n");break;case 6:this.send("\u001b["+(this.y+1)+";"+(this.x+1)+"R")}else if("?"===this.prefix)switch(a[0]){case 6:this.send("\u001b[?"+(this.y+1)+";"+(this.x+1)+"R")}};d.prototype.insertChars=function(a){var d;a=a[0];1>a&&(a=1);var e=this.y+this.ybase;var f=this.x;
for(d=[this.eraseAttr()," ",1];a--&&f<this.cols;)this.lines[e].splice(f++,0,d),this.lines[e].pop()};d.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this.y+=a;this.y>=this.rows&&(this.y=this.rows-1);this.x=0};d.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this.y-=a;0>this.y&&(this.y=0);this.x=0};d.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this.x=a-1};d.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);var d=this.y+this.ybase;var e=this.rows-1-this.scrollBottom;
for(e=this.rows-1+this.ybase-e+1;a--;)this.lines.splice(d,0,this.blankLine(!0)),this.lines.splice(e,1);this.updateRange(this.y);this.updateRange(this.scrollBottom)};d.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var d=this.y+this.ybase;var e=this.rows-1-this.scrollBottom;for(e=this.rows-1+this.ybase-e;a--;)this.lines.splice(e+1,0,this.blankLine(!0)),this.lines.splice(d,1);this.updateRange(this.y);this.updateRange(this.scrollBottom)};d.prototype.deleteChars=function(a){var d;a=a[0];1>a&&(a=
1);var e=this.y+this.ybase;for(d=[this.eraseAttr()," ",1];a--;)this.lines[e].splice(this.x,1),this.lines[e].push(d)};d.prototype.eraseChars=function(a){var d;a=a[0];1>a&&(a=1);var e=this.y+this.ybase;var f=this.x;for(d=[this.eraseAttr()," ",1];a--&&f<this.cols;)this.lines[e][f++]=d};d.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this.x=a-1;this.x>=this.cols&&(this.x=this.cols-1)};d.prototype.HPositionRelative=function(a){a=a[0];1>a&&(a=1);this.x+=a;this.x>=this.cols&&(this.x=this.cols-
1)};d.prototype.sendDeviceAttributes=function(a){0<a[0]||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("\u001b[>0;276;0c"):this.is("rxvt-unicode")?this.send("\u001b[>85;95;0c"):this.is("linux")?this.send(a[0]+"c"):this.is("screen")&&this.send("\u001b[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("\u001b[?1;2c"):this.is("linux")&&this.send("\u001b[?6c"))};d.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this.y=a-1;this.y>=this.rows&&(this.y=
this.rows-1)};d.prototype.VPositionRelative=function(a){a=a[0];1>a&&(a=1);this.y+=a;this.y>=this.rows&&(this.y=this.rows-1)};d.prototype.HVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this.y=a[0]-1;this.y>=this.rows&&(this.y=this.rows-1);this.x=a[1]-1;this.x>=this.cols&&(this.x=this.cols-1)};d.prototype.setMode=function(a){if("object"===typeof a)for(var e=a.length,f=0;f<e;f++)this.setMode(a[f]);else if(!this.prefix)switch(a){case 4:this.insertMode=!0}else if("?"===this.prefix)switch(a){case 1:this.applicationCursor=
!0;break;case 2:this.setgCharset(0,d.charsets.US);this.setgCharset(1,d.charsets.US);this.setgCharset(2,d.charsets.US);this.setgCharset(3,d.charsets.US);break;case 3:this.savedCols=this.cols;this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 66:this.log("Serial port requested application keypad.");this.applicationKeypad=!0;this.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this.x10Mouse=9===a;this.vt200Mouse=1E3===a;this.normalMouse=
1E3<a;this.mouseEvents=!0;this.element.style.cursor="default";this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:this.normal||(a={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs},this.reset(),this.normal=a,this.showCursor())}};
d.prototype.resetMode=function(a){if("object"===typeof a)for(var d=a.length,e=0;e<d;e++)this.resetMode(a[e]);else if(!this.prefix)switch(a){case 4:this.insertMode=!1}else if("?"===this.prefix)switch(a){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows);delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 66:this.log("Switching back to normal keypad.");this.applicationKeypad=!1;this.viewport.syncScrollArea();
break;case 9:case 1E3:case 1002:case 1003:this.mouseEvents=this.normalMouse=this.vt200Mouse=this.x10Mouse=!1;this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,
this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}};d.prototype.setScrollRegion=function(a){this.prefix||(this.scrollTop=(a[0]||1)-1,this.scrollBottom=(a[1]||this.rows)-1,this.y=this.x=0)};d.prototype.saveCursor=function(a){this.savedX=this.x;this.savedY=this.y};d.prototype.restoreCursor=function(a){this.x=this.savedX||0;this.y=this.savedY||0};d.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this.x=this.nextStop()};
d.prototype.scrollUp=function(a){for(a=a[0]||1;a--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom)};d.prototype.scrollDown=function(a){for(a=a[0]||1;a--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom)};d.prototype.initMouseTracking=
function(a){};d.prototype.resetTitleModes=function(a){};d.prototype.cursorBackwardTab=function(a){for(a=a[0]||1;a--;)this.x=this.prevStop()};d.prototype.repeatPrecedingCharacter=function(a){a=a[0]||1;for(var d=this.lines[this.ybase+this.y],e=d[this.x-1]||[this.defAttr," ",1];a--;)d[this.x++]=e};d.prototype.tabClear=function(a){a=a[0];0>=a?delete this.tabs[this.x]:3===a&&(this.tabs={})};d.prototype.mediaCopy=function(a){};d.prototype.setResources=function(a){};d.prototype.disableModifiers=function(a){};
d.prototype.setPointerMode=function(a){};d.prototype.softReset=function(a){this.applicationKeypad=this.wraparoundMode=this.originMode=this.insertMode=this.cursorHidden=!1;this.viewport.syncScrollArea();this.applicationCursor=!1;this.scrollTop=0;this.scrollBottom=this.rows-1;this.curAttr=this.defAttr;this.x=this.y=0;this.charset=null;this.glevel=0;this.charsets=[null]};d.prototype.requestAnsiMode=function(a){};d.prototype.requestPrivateMode=function(a){};d.prototype.setConformanceLevel=function(a){};
d.prototype.loadLEDs=function(a){};d.prototype.setCursorStyle=function(a){};d.prototype.setCharProtectionAttr=function(a){};d.prototype.restorePrivateValues=function(a){};d.prototype.setAttrInRectangle=function(a){for(var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k,m;d<f+1;d++)for(k=this.lines[this.ybase+d],m=e;m<g;m++)k[m]=[h,k[m][1]];this.updateRange(a[0]);this.updateRange(a[2])};d.prototype.fillRectangle=function(a){for(var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k,m;e<g+1;e++)for(k=this.lines[this.ybase+
e],m=f;m<h;m++)k[m]=[k[m][0],String.fromCharCode(d)];this.updateRange(a[1]);this.updateRange(a[3])};d.prototype.enableLocatorReporting=function(a){};d.prototype.eraseRectangle=function(a){var d=a[0],e=a[1],f=a[2],g=a[3],h,k;for(k=[this.eraseAttr()," ",1];d<f+1;d++){var m=this.lines[this.ybase+d];for(h=e;h<g;h++)m[h]=k}this.updateRange(a[0]);this.updateRange(a[2])};d.prototype.insertColumns=function(){for(var a=params[0],d=this.ybase+this.rows,e=[this.eraseAttr()," ",1],f;a--;)for(f=this.ybase;f<d;f++)this.lines[f].splice(this.x+
1,0,e),this.lines[f].pop();this.maxRange()};d.prototype.deleteColumns=function(){for(var a=params[0],d=this.ybase+this.rows,e=[this.eraseAttr()," ",1],f;a--;)for(f=this.ybase;f<d;f++)this.lines[f].splice(this.x,1),this.lines[f].push(e);this.maxRange()};d.charsets={};d.charsets.SCLD={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",
v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};d.charsets.UK=null;d.charsets.US=null;d.charsets.Dutch=null;d.charsets.Finnish=null;d.charsets.French=null;d.charsets.FrenchCanadian=null;d.charsets.German=null;d.charsets.Italian=null;d.charsets.NorwegianDanish=null;d.charsets.Spanish=null;d.charsets.Swedish=null;d.charsets.Swiss=null;d.charsets.ISOLatin=null;q._cache={};q.distance=function(a,d,e,f,g,h){return Math.pow(30*(a-f),2)+Math.pow(59*
(d-g),2)+Math.pow(11*(e-h),2)};var D=function(a){var d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,
2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,
3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],
[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(e){if(0===e)return a.nul;if(32>e||127<=e&&160>e)return a.control;a:{var f=0;var g=d.length-1,h;if(!(e<d[0][0]||e>d[g][1]))for(;g>=f;)if(h=Math.floor((f+g)/2),e>d[h][1])f=h+1;
else if(e<d[h][0])g=h-1;else{f=!0;break a}f=!1}return f?0:1+(4352<=e&&(4447>=e||9001==e||9002==e||11904<=e&&42191>=e&&12351!=e||44032<=e&&55203>=e||63744<=e&&64255>=e||65040<=e&&65049>=e||65072<=e&&65135>=e||65280<=e&&65376>=e||65504<=e&&65510>=e||131072<=e&&196605>=e||196608<=e&&262141>=e))}}({nul:0,control:0});d.EventEmitter=B.EventEmitter;d.CompositionHelper=w.CompositionHelper;d.Viewport=y.Viewport;d.inherits=t;d.on=k;d.off=m;d.cancel=function(a,d){if(this.cancelEvents||d)return a.preventDefault(),
a.stopPropagation(),!1};f.exports=d},{"./CompositionHelper.js":1,"./EventEmitter.js":2,"./Viewport.js":3,"./handlers/Clipboard.js":4,"./utils/Browser":5}]},{},[7])(7)});var colorScheme_tango=!0,colorScheme_solarized="#002b36 #002b36 #dc322f #859900 #b58900 #268bd2 #6c71c4 #2aa198 #93a1a1 #657b83 #dc322f #859900 #b58900 #268bd2 #6c71c4 #2aa198 #fdf6e3 #93a1a1 #93a1a1".split(" "),colorScheme_monokai="#272822 #48483e #dc2566 #8fc029 #d4c96e #55bcce #9358fe #56b7a5 #acada1 #76715e #fa2772 #a7e22e #e7db75 #66d9ee #ae82ff #66efd5 #cfd0c2 #f1ebeb #f1ebeb".split(" "),colorScheme_ashes="#1c2023 #1c2023 #c7ae95 #95c7ae #aec795 #ae95c7 #c795ae #95aec7 #c7ccd1 #747c84 #c7ae95 #95c7ae #aec795 #ae95c7 #c795ae #95aec7 #f3f4f5 #c7ccd1 #c7ccd1".split(" "),
colorSchemes=["",colorScheme_solarized,colorScheme_monokai,colorScheme_ashes],c=0;
function setColorScheme(b){var e=document.styleSheets[0];if(!colorScheme_tango){for(var f=0;33>f;f++)e.removeRule(13);if(!b){colorScheme_tango=!0;return}}e.insertRule(".terminal .terminal-cursor {background-color: "+b[17]+"; color: "+b[0]+" !important;}",13);e.insertRule(".terminal:not(.focus) .terminal-cursor {outline: 1px solid "+b[17]+" !important;}",13);e.insertRule(".terminal .xterm-viewport {background-color: "+b[0]+" !important;}",13);e.insertRule("html, body {background-color: "+b[0]+" !important;}",
13);e.insertRule(".terminal {color: "+b[18]+" !important;}",13);for(f=1;16>f;f++)e.insertRule(".terminal .xterm-color-"+(f-1)+" {color: "+b[f]+" !important;}",13),e.insertRule(".terminal .xterm-bg-color-"+(f-1)+" {background-color: "+b[f]+" !important;}",13);colorScheme_tango=!1}
function importXresources(){var b=document.getElementById("Xresources").value.split("\n"),b=b.sort((new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"})).compare);colorScheme_custom=[];for(var e=0;e<b.length;e++)-1!=b[e].indexOf("#")&&colorScheme_custom.push("#"+b[e].split("#")[1]);setColorScheme(colorScheme_custom)}function cycleColorSchemes(b){setColorScheme(colorSchemes[(1==b?++c:0>--c?c=colorSchemes.length-1:c)>colorSchemes.length-1?c=0:c])};function read_rng(b){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(b)))}SSHyClient.crypto={};SSHyClient.crypto.AES=function(b,e,f,h){this.cipher=new sjcl.cipher.aes(sjcl.codec.bytes.toBits(toByteArray(b)),e);this.mode=e;this.mode==SSHyClient.AES_CBC&&(this.iv=toByteArray(f));this.counter=h};
SSHyClient.crypto.AES.prototype={encrypt:function(b){b=this.cipher.encrypt(toByteArray(b),this.iv,this.counter);this.mode==SSHyClient.AES_CBC&&(this.iv=b.slice(-16));return fromByteArray(b)},decrypt:function(b){b=toByteArray(b);if(this.mode==SSHyClient.AES_CBC){var e=this.cipher.decrypt(b,this.iv);this.iv=b.slice(-16)}else e=this.cipher.encrypt(b,this.iv,this.counter);return fromByteArray(e)}};
SSHyClient.crypto.counter=function(b,e){e=void 0==e?1:e;this.blocksize=b/8;this.overflow=0;0==e?this.value=(new array(this.blocksize+1)).join("\u00ff"):(b=deflate_long(e.subtract(BigInteger.ONE),!1),this.value=Array(this.blocksize-b.length+1).join("\x00")+b)};
SSHyClient.crypto.counter.prototype={increment:function(){for(var b=this.blocksize-1;-1<b;){var e=String.fromCharCode((this.value.charCodeAt(b)+1)%256);this.value=setCharAt(this.value,b,e);if("\x00"!=e)return this.value;--b}return this.value=Array(this.blocksize-deflate_long(this.overflow,!1).length+1).join("\x00")+x}};SSHyClient.Message=function(b){this.position=0;this.packet=null==b?new String:new String(b)};
SSHyClient.Message.prototype={toString:function(){return this.packet},get_bytes:function(b){var e=this.packet.substring(this.position,this.position+b);this.position+=b;return e.length<b&&1048576>b?e+Array(b-e.length+1).join("\x00"):e},get_int:function(){return struct.unpack("I",this.get_bytes(4))[0]},get_string:function(){return this.get_bytes(this.get_int())},get_mpint:function(){return inflate_long(this.get_string())},add_bytes:function(b){this.packet+=b;return this},add_boolean:function(b){this.add_bytes(1==
b?"\u0001":"\x00");return this},add_int:function(b){this.packet+=struct.pack("I",b);return this},add_mpint:function(b){this.add_string(deflate_long(b));return this},add_string:function(b){this.add_int(b.length);this.packet+=b;return this}};SSHyClient.Transport=function(b){this.local_version="SSH-2.0-SSHyClient";this.remote_version="";this.H=this.K=this.remote_kex_message=this.local_kex_message=null;this.preferred_algorithms=["diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha256,diffie-hellman-group1-sha1","ssh-rsa","aes128-ctr","hmac-sha1","none"];this.session_id=this.preferred_compression=this.preferred_mac=this.preferred_cipher=
this.preferred_keys=this.preferred_kex=null;this.parceler=new SSHyClient.parceler(b,this);this.auth=new SSHyClient.auth(this.parceler);this.need_buffer=!1;this.temp_buffer=""};
SSHyClient.Transport.prototype={kex_info:{"diffie-hellman-group1-sha1":function(b){return new SSHyClient.dhGroup1(b,1,"SHA-1")},"diffie-hellman-group14-sha1":function(b){return new SSHyClient.dhGroup1(b,14,"SHA-1")},"diffie-hellman-group-exchange-sha1":function(b){return new SSHyClient.dhGroupEx(b,"SHA-1")},"diffie-hellman-group1-sha256":function(b){return new SSHyClient.dhGroup1(b,1,"SHA-256")},"diffie-hellman-group14-sha256":function(b){return new SSHyClient.dhGroup1(b,14,"SHA-256")},"diffie-hellman-group-exchange-sha256":function(b){return new SSHyClient.dhGroupEx(b,
"SHA-256")}},handle:function(b){if(this.parceler.encrypting)this.parceler.inbound_buffer+=b,this.parceler.decrypt();else if(this.remote_version)if((new SSHyClient.Message(b)).get_int()>b.length&&!this.need_buffer&&(this.need_buffer=!0),this.need_buffer)this.temp_buffer?(this.temp_buffer+=b,this.parceler.inbound_sequence_num++,this.need_buffer=!1,this.handler_table[this.temp_buffer.substring(5,6).charCodeAt(0)](this,this.temp_buffer)):this.temp_buffer=b;else{this.parceler.inbound_sequence_num++;try{this.handler_table[b.substring(5,
6).charCodeAt(0)](this,b)}catch(e){console.log(e),console.log("Error! code - "+b.substring(5,6).charCodeAt(0)+" does not exist!")}}else this.parceler.send(this.local_version+"\r\n",!0),this.remote_version=b.slice(0,b.length-2),this.send_kex_init()},handler_table:{1:function(b,e){term.write("Connection to "+document.getElementById("ipaddress").value+" closed.")},2:function(b,e){},6:function(b,e){"ssh-userauth"==(new SSHyClient.Message(e.slice(1))).get_string()&&b.auth.ssh_connection()},20:function(b,
e){e=(new SSHyClient.Message(e)).get_string();b.parse_kex_reply(e);b.remote_kex_message=b.cut_padding(e);b.preferred_kex.start()},31:function(b,e){b.preferred_kex.parse_reply(31,e.slice(6))},33:function(b,e){b.preferred_kex.parse_reply(33,e.slice(6))},51:function(b,e){b.auth.awaitingAuthentication=!1;auth_failure()},52:function(b,e){b.auth.authenticated=!0;b.auth.awaitingAuthentication=!1;b.auth.auth_success(!0)},80:function(b,e){},91:function(b,e){b.auth.get_pty("xterm-256color",termCols,termRows)},
93:function(b,e){SSHyClient.WINDOW_SIZE+=(new SSHyClient.Message(e.slice(5))).get_int()},94:function(b,e){term.write(e.slice(9))},96:function(b,e){term.write("logout\n\r")},97:function(b,e){term.write("Connection to "+html_ipaddress+" closed.")},98:function(b,e){}},cut_padding:function(b){return b.substring(1,b.length-b[0].charCodeAt(0))},send_packet:function(b){this.parceler.send(b)},send_kex_init:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEX_INIT));b.add_bytes(read_rng(16));
b.add_string(this.preferred_algorithms[0]);b.add_string(this.preferred_algorithms[1]);b.add_string(this.preferred_algorithms[2]);b.add_string(this.preferred_algorithms[2]);b.add_string(this.preferred_algorithms[3]);b.add_string(this.preferred_algorithms[3]);b.add_string(this.preferred_algorithms[4]);b.add_string(this.preferred_algorithms[4]);b.add_string("");b.add_string("");b.add_boolean(!1);b.add_int(0);this.local_kex_message=b.toString();this.send_packet(b.toString())},parse_kex_reply:function(b){function e(b,
d){b=b.split(",");for(var e=0;e<b.length;++e)if(-1!=d.indexOf(b[e]))return b[e]}b=new SSHyClient.Message(b);b.get_bytes(18);var f=b.get_string().split(","),h=b.get_string().split(",");b.get_string().split(",");var d=b.get_string().split(",");b.get_string().split(",");b=b.get_string().split(",");f=e(this.preferred_algorithms[0],f);h=e(this.preferred_algorithms[1],h);d=e(this.preferred_algorithms[2],d);b=e(this.preferred_algorithms[3],b);if(!(f&&h&&d&&b)){var k="";f||(k+="KEX Algorithm,");h||(k+="Host Keys,");
d||(k+="Encryption Cipher,");b||(k+="MAC Algorithm");display_error("Incompatable ssh server (no compatable - "+k+" )");throw"Chosen Algs = kex="+f+", keys="+h+", cipher="+d+", mac="+b;}this.preferred_kex=this.kex_info[f](this)},generate_key:function(b,e,f){var h=new SSHyClient.Message;h.add_mpint(this.K);h.add_bytes(this.H);h.add_bytes(b);h.add_bytes(this.session_id);return"SHA-1"==f?(new SSHyClient.hash.SHA1(h.toString())).digest().substring(0,e):(new SSHyClient.hash.SHA256(h.toString())).digest().substring(0,
e)},activate_encryption:function(b){this.parceler.outbound_enc_iv=this.generate_key("A",16,b);this.parceler.outbound_enc_key=this.generate_key("C",16,b);this.parceler.outbound_mac_key=this.generate_key("E",20,b);this.parceler.outbound_cipher=new SSHyClient.crypto.AES(this.parceler.outbound_enc_key,SSHyClient.AES_CTR,this.parceler.outbound_enc_iv,new SSHyClient.crypto.counter(128,inflate_long(this.parceler.outbound_enc_iv)));this.parceler.inbound_enc_iv=this.generate_key("B",16,b);this.parceler.inbound_enc_key=
this.generate_key("D",16,b);this.parceler.inbound_mac_key=this.generate_key("F",20,b);this.parceler.inbound_cipher=new SSHyClient.crypto.AES(this.parceler.inbound_enc_key,SSHyClient.AES_CTR,this.parceler.inbound_enc_iv,new SSHyClient.crypto.counter(128,inflate_long(this.parceler.inbound_enc_iv)));this.parceler.encrypting=!0;this.parceler.block_size=16;this.auth.request_auth()},handle_dec:function(b){b=this.cut_padding(b);try{this.handler_table[b.substring(0,1).charCodeAt(0)](this,b)}catch(e){console.log(e),
console.log("Error! code - "+b.substring(0,1).charCodeAt(0)+" does not exist!")}},expect_key:function(b){this.auth.send_command(b)},send_new_keys:function(b){var e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_NEW_KEYS));this.send_packet(e);this.activate_encryption(b);this.parceler.inbound_sequence_num++}};SSHyClient.parceler=function(b,e){this.socket=b;this.transport=e;this.encrypting=!1;this.inbound_cipher=this.inbound_mac_key=this.inbound_enc_key=this.inbound_iv=this.outbound_cipher=this.outbound_mac_key=this.outbound_enc_key=this.outbound_enc_iv=null;this.inbound_sequence_num=this.outbound_sequence_num=0;this.block_size=8;this.inbound_buffer=this.decrypted_header=""};
SSHyClient.parceler.prototype={send:function(b,e){b=b.toString();(void 0===e?0:e)?this.socket.send(btoa(b)):(this.encrypting?(b=this.pack_message(b),e=this.outbound_cipher.encrypt(b),e+=SSHyClient.hash.HMAC(this.outbound_mac_key,struct.pack("I",this.outbound_sequence_num)+b),this.socket.send(btoa(e))):this.socket.send(btoa(this.pack_message(b))),this.outbound_sequence_num++)},pack_message:function(b){var e=3+this.block_size-(b.length+8)%this.block_size;b=struct.pack("I",b.length+e+1)+struct.pack("B",
e)+b;return b+=this.encrypting?read_rng(e):Array(e+1).join("\x00")},decrypt:function(){for(var b,e=" ";null!=e;){if(this.decrypted_header)b=this.decrypted_header,this.decrypted_header="";else{b=this.read_ibuffer();if(!b)break;b=this.inbound_cipher.decrypt(b)}var f=struct.unpack("I",b.substring(0,4))[0],h=b.substring(4),e=this.read_ibuffer(f+20-h.length);if(!e){this.decrypted_header=b;break}b=e.substring(0,f-h.length);var d=e.substring(f-h.length);b=this.inbound_cipher.decrypt(b);b=h+b;f=struct.pack("I",
this.inbound_sequence_num)+struct.pack("I",f)+b;if(SSHyClient.hash.HMAC(this.inbound_mac_key,f)!=d)throw display_error("Inbound MAC verification failed - Mismatched MAC"),"Inbound MAC verification failed - Mismatched MAC";this.inbound_sequence_num++;this.transport.handle_dec(b)}},read_ibuffer:function(b){b=void 0===b?this.block_size:b;if(this.inbound_buffer.length<b)return null;var e=this.inbound_buffer.substring(0,b);this.inbound_buffer=this.inbound_buffer.substring(b);return e}};SSHyClient.auth=function(b){this.parceler=b;this.authenticated=this.password=this.username=null;this.awaitingAuthentication=!1};
SSHyClient.auth.prototype={request_auth:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_SERVICE_REQUEST));b.add_string("ssh-userauth");this.parceler.send(b)},ssh_connection:function(){if(termUsername&&termPassword){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_USERAUTH_REQUEST));b.add_string(termUsername);b.add_string("ssh-connection");b.add_string("password");b.add_boolean(!1);b.add_string(termPassword);this.parceler.send(b);this.awaitingAuthentication=
!0}else startxtermjs()},auth_success:function(b){b&&(termUsername="",termPassword=void 0,this.open_channel("session"))},open_channel:function(b,e){e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_OPEN));e.add_string(b);e.add_int(1);e.add_int(SSHyClient.WINDOW_SIZE);e.add_int(SSHyClient.MAX_PACKET_SIZE);this.parceler.send(e)},get_pty:function(b,e,f){var h=new SSHyClient.Message;h.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));h.add_int(0);h.add_string("pty-req");
h.add_boolean(!1);h.add_string(b||"xterm");h.add_int(e||80);h.add_int(f||24);h.add_int(0);h.add_int(0);h.add_string("");this.parceler.send(h);this.invoke_shell()},resize_pty:function(b,e){var f=new SSHyClient.Message;f.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));f.add_int(0);f.add_string("window-change");f.add_boolean(!1);f.add_int(b||80);f.add_int(e||24);f.add_int(0);f.add_int(0);this.parceler.send(f)},invoke_shell:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));
b.add_int(0);b.add_string("shell");b.add_boolean(!1);this.parceler.send(b);void 0==termPassword?term.write("\n\r"):startxtermjs()},send_command:function(b){var e=new SSHyClient.Message;e.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_DATA));e.add_int(0);e.add_string(b.toString());this.parceler.send(e)}};SSHyClient.dhGroup1=function(b,e,f){this.transport=b;this.SHAVersion=f;this.x=new BigInteger("0",10);this.e=new BigInteger("0",10);this.f=new BigInteger("0",10);this.P=1==e?new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE65381FFFFFFFFFFFFFFFF",16):new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AACAA68FFFFFFFFFFFFFFFF",
16);this.G=new BigInteger("2",10)};
SSHyClient.dhGroup1.prototype={start:function(){this.x=inflate_long(read_rng(128));this.e=this.G.modPow(this.x,this.P);var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_INIT));b.add_mpint(this.e);this.transport.send_packet(b)},parse_reply:function(b,e){e=new SSHyClient.Message(e);b=e.get_string();this.f=e.get_mpint();e.get_string();e=this.f.modPow(this.x,this.P);var f=new SSHyClient.Message;f.add_string(this.transport.local_version);f.add_string(this.transport.remote_version);
f.add_string(this.transport.local_kex_message);f.add_string(this.transport.remote_kex_message);f.add_string(b);f.add_mpint(this.e);f.add_mpint(this.f);f.add_mpint(e);this.transport.K=e;this.transport.session_id=this.transport.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(f.toString())).digest():(new SSHyClient.hash.SHA256(f.toString())).digest();this.transport.send_new_keys(this.SHAVersion)}};SSHyClient.dhGroupEx=function(b,e){this.transport=b;this.SHAVersion=e;this.f=this.e=this.x=this.g=this.q=this.p=null;this.min_bits=1024;this.max_bits=8192;this.preferred_bits=2048};
SSHyClient.dhGroupEx.prototype={start:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_REQUEST));b.add_int(this.min_bits);b.add_int(this.preferred_bits);b.add_int(this.max_bits);this.transport.send_packet(b)},parse_reply:function(b,e){b==SSHyClient.MSG_KEXDH_GEX_GROUP?this.parse_gex_group(e):b==SSHyClient.MSG_KEXDH_GEX_REPLY&&this.parse_gex_reply(e)},generate_x:function(){for(var b=this.p.subtract(BigInteger.ONE),b=b.divide(new BigInteger("2",10)),e=
deflate_long(b,0),f=e[0].charCodeAt(0),e=e.length,h=255;!(f&128);)f<<=1,h>>=1;for(;!(f=read_rng(e),f=String.fromCharCode(f[0].charCodeAt(0)&h)+f.substring(1),f=inflate_long(f,1),0<f.compareTo(BigInteger.ONE)&&0<b.compareTo(f)););this.x=f},parse_gex_group:function(b){b=new SSHyClient.Message(b);this.p=b.get_mpint();this.g=b.get_mpint();this.generate_x();this.e=this.g.modPow(this.x,this.p);b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_INIT));b.add_mpint(this.e);this.transport.send_packet(b)},
parse_gex_reply:function(b){b=new SSHyClient.Message(b);var e=b.get_string();this.f=b.get_mpint();b.get_string();b=this.f.modPow(this.x,this.p);var f=new SSHyClient.Message;f.add_string(this.transport.local_version);f.add_string(this.transport.remote_version);f.add_string(this.transport.local_kex_message);f.add_string(this.transport.remote_kex_message);f.add_string(e);f.add_int(this.min_bits);f.add_int(this.preferred_bits);f.add_int(this.max_bits);f.add_mpint(this.p);f.add_mpint(this.g);f.add_mpint(this.e);
f.add_mpint(this.f);f.add_mpint(b);this.transport.K=b;this.transport.session_id=this.transport.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(f.toString())).digest():(new SSHyClient.hash.SHA256(f.toString())).digest();this.transport.send_new_keys(this.SHAVersion)}};var ws,transport,term=null,isFirefox=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),termCols=Math.floor(window.innerWidth/10)-(isFirefox?-2:0),termRows=Math.floor(window.innerHeight/19)-(isFirefox?1:-2),termUsername="",termPassword,failedAttempts=0;window.onload=function(){setColorScheme(colorScheme_ashes);startSSHy()};
window.onresize=function(){termCols=Math.floor(window.innerWidth/10)-(isFirefox?-2:0);termRows=Math.floor(window.innerHeight/19)-(isFirefox?1:-2);ws&&transport&&(term.resize(termCols,termRows),transport.auth.resize_pty(termCols,termRows))};function auth_failure(){term.write("\n\rAccess Denied");5<=++failedAttempts?term.write("\n\rToo many failed authentication attempts"):(term.write("\n\r"+termUsername+"@"+wsproxyURL.split("/")[3].split(":")[0]+"'s password:"),termPassword="")}
function startSSHy(){ws=new WebSocket(wsproxyURL,"base64");ws.onopen=function(b){transport=new SSHyClient.Transport(ws)};ws.onmessage=function(b){transport.handle(atob(b.data))}}
function startxtermjs(){term=new Terminal({cols:termCols,rows:termRows});term.open(document.getElementById("terminal"),!0);transport.auth.authenticated||term.write("Login as: ");term.textarea.onkeydown=function(b){if(!(!ws||!transport||5<=failedAttempts||transport.auth.awaitingAuthentication||1<b.key.length&&(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey))){if(transport.auth.authenticated){var e={key:null};1!=b.key.length||b.altKey||b.ctrlKey||b.metaKey?1==b.key.length&&b.shiftKey&&b.ctrlKey?"V"!=b.key&&
b.preventDefault():e=term.evaluateKeyEscapeSequence(b):e.key=b.key;return null==e.key?null:transport.expect_key(e.key)}if(!(b.altKey||b.ctrlKey||b.metaKey))switch(b.keyCode){case 8:void 0==termPassword?0<termUsername.length&&(term.write("\b"),term.eraseRight(term.x,term.y),termUsername=termUsername.slice(0,termUsername.length-1)):termPassword=termPassword.slice(0,termPassword.length-1);break;case 13:termPassword?transport.auth.ssh_connection():(term.write("\n\r"+termUsername+"@"+wsproxyURL.split("/")[3].split(":")[0]+
"'s password:"),termPassword="");break;default:void 0==termPassword?(termUsername+=b.key,term.write(b.key)):termPassword+=b.key}}};term.textarea.onpaste=function(b){b.clipboardData&&(b=b.clipboardData.getData("text/plain"),transport.expect_key(b))}};

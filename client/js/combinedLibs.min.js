var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,c,f){e!=Array.prototype&&e!=Object.prototype&&(e[c]=f.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,c,f,h){if(c){f=$jscomp.global;e=e.split(".");for(h=0;h<e.length-1;h++){var a=e[h];a in f||(f[a]={});f=f[a]}e=e[e.length-1];h=f[e];c=c(h);c!=h&&null!=c&&$jscomp.defineProperty(f,e,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.setPrototypeOf",function(e){return e?e:"object"!=typeof"".__proto__?null:function(e,f){e.__proto__=f;if(e.__proto__!==f)throw new TypeError(e+" is not extensible");return e}},"es6","es5");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var c=0;return $jscomp.iteratorPrototype(function(){return c<e.length?{done:!1,value:e[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,c){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var f=0,h={next:function(){if(f<e.length){var a=f++;return{value:c(a,e[a]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");
var BigInteger=function(){function e(l,b,a){null!=l&&("number"==typeof l?this.fromNumber(l,b,a):null==b&&"string"!=typeof l?this.fromString(l,256):this.fromString(l,b))}function c(){return new e(null)}function f(l,b,a,m,e,g){for(;0<=--g;){var z=b*this[l++]+a[m]+e;e=Math.floor(z/67108864);a[m++]=z&67108863}return e}function h(l,b,a,m,e,g){var z=b&32767;for(b>>=15;0<=--g;){var d=this[l]&32767,n=this[l++]>>15,w=b*d+n*z,d=z*d+((w&32767)<<15)+a[m]+(e&1073741823);e=(d>>>30)+(w>>>15)+b*n+(e>>>30);a[m++]=
d&1073741823}return e}function a(l,b,a,m,e,g){var z=b&16383;for(b>>=14;0<=--g;){var d=this[l]&16383,n=this[l++]>>14,w=b*d+n*z,d=z*d+((w&16383)<<14)+a[m]+e;e=(d>>28)+(w>>14)+b*n;a[m++]=d&268435455}return e}function k(l,b){l=y[l.charCodeAt(b)];return null==l?-1:l}function q(l){var b=c();b.fromInt(l);return b}function d(l){var b=1,a;0!=(a=l>>>16)&&(l=a,b+=16);0!=(a=l>>8)&&(l=a,b+=8);0!=(a=l>>4)&&(l=a,b+=4);0!=(a=l>>2)&&(l=a,b+=2);0!=l>>1&&(b+=1);return b}function b(l){this.m=l}function t(l){this.m=l;
this.mp=l.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<l.DB-15)-1;this.mt2=2*l.t}function r(l,b){return l&b}function n(l,b){return l|b}function g(l,b){return l^b}function x(l,b){return l&~b}function v(){}function p(l){return l}function C(l){this.r2=c();this.q3=c();e.ONE.dlShiftTo(2*l.t,this.r2);this.mu=this.r2.divide(l);this.m=l}var u;"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=h,u=30):"Netscape"!=navigator.appName?(e.prototype.am=f,u=26):(e.prototype.am=
a,u=28);e.prototype.DB=u;e.prototype.DM=(1<<u)-1;e.prototype.DV=1<<u;e.prototype.FV=Math.pow(2,52);e.prototype.F1=52-u;e.prototype.F2=2*u-52;var y=[],B;u=48;for(B=0;9>=B;++B)y[u++]=B;u=97;for(B=10;36>B;++B)y[u++]=B;u=65;for(B=10;36>B;++B)y[u++]=B;b.prototype.convert=function(l){return 0>l.s||0<=l.compareTo(this.m)?l.mod(this.m):l};b.prototype.revert=function(l){return l};b.prototype.reduce=function(l){l.divRemTo(this.m,null,l)};b.prototype.mulTo=function(l,b,a){l.multiplyTo(b,a);this.reduce(a)};b.prototype.sqrTo=
function(l,b){l.squareTo(b);this.reduce(b)};t.prototype.convert=function(l){var b=c();l.abs().dlShiftTo(this.m.t,b);b.divRemTo(this.m,null,b);0>l.s&&0<b.compareTo(e.ZERO)&&this.m.subTo(b,b);return b};t.prototype.revert=function(l){var b=c();l.copyTo(b);this.reduce(b);return b};t.prototype.reduce=function(l){for(;l.t<=this.mt2;)l[l.t++]=0;for(var b=0;b<this.m.t;++b){var a=l[b]&32767,m=a*this.mpl+((a*this.mph+(l[b]>>15)*this.mpl&this.um)<<15)&l.DM,a=b+this.m.t;for(l[a]+=this.m.am(0,m,l,b,0,this.m.t);l[a]>=
l.DV;)l[a]-=l.DV,l[++a]++}l.clamp();l.drShiftTo(this.m.t,l);0<=l.compareTo(this.m)&&l.subTo(this.m,l)};t.prototype.mulTo=function(b,a,e){b.multiplyTo(a,e);this.reduce(e)};t.prototype.sqrTo=function(b,a){b.squareTo(a);this.reduce(a)};e.prototype.copyTo=function(b){for(var l=this.t-1;0<=l;--l)b[l]=this[l];b.t=this.t;b.s=this.s};e.prototype.fromInt=function(b){this.t=1;this.s=0>b?-1:0;0<b?this[0]=b:-1>b?this[0]=b+DV:this.t=0};e.prototype.fromString=function(b,a){if(16==a)a=4;else if(8==a)a=3;else if(256==
a)a=8;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else{this.fromRadix(b,a);return}this.s=this.t=0;for(var l=b.length,m=!1,g=0;0<=--l;){var d=8==a?b[l]&255:k(b,l);0>d?"-"==b.charAt(l)&&(m=!0):(m=!1,0==g?this[this.t++]=d:g+a>this.DB?(this[this.t-1]|=(d&(1<<this.DB-g)-1)<<g,this[this.t++]=d>>this.DB-g):this[this.t-1]|=d<<g,g+=a,g>=this.DB&&(g-=this.DB))}8==a&&0!=(b[0]&128)&&(this.s=-1,0<g&&(this[this.t-1]|=(1<<this.DB-g)-1<<g));this.clamp();m&&e.ZERO.subTo(this,this)};e.prototype.clamp=function(){for(var b=
this.s&this.DM;0<this.t&&this[this.t-1]==b;)--this.t};e.prototype.dlShiftTo=function(b,a){var l;for(l=this.t-1;0<=l;--l)a[l+b]=this[l];for(l=b-1;0<=l;--l)a[l]=0;a.t=this.t+b;a.s=this.s};e.prototype.drShiftTo=function(b,a){for(var l=b;l<this.t;++l)a[l-b]=this[l];a.t=Math.max(this.t-b,0);a.s=this.s};e.prototype.lShiftTo=function(b,a){var l=b%this.DB,m=this.DB-l,e=(1<<m)-1;b=Math.floor(b/this.DB);var g=this.s<<l&this.DM,d;for(d=this.t-1;0<=d;--d)a[d+b+1]=this[d]>>m|g,g=(this[d]&e)<<l;for(d=b-1;0<=d;--d)a[d]=
0;a[b]=g;a.t=this.t+b+1;a.s=this.s;a.clamp()};e.prototype.rShiftTo=function(b,a){a.s=this.s;var l=Math.floor(b/this.DB);if(l>=this.t)a.t=0;else{b%=this.DB;var m=this.DB-b,g=(1<<b)-1;a[0]=this[l]>>b;for(var e=l+1;e<this.t;++e)a[e-l-1]|=(this[e]&g)<<m,a[e-l]=this[e]>>b;0<b&&(a[this.t-l-1]|=(this.s&g)<<m);a.t=this.t-l;a.clamp()}};e.prototype.subTo=function(b,a){for(var l=0,m=0,e=Math.min(b.t,this.t);l<e;)m+=this[l]-b[l],a[l++]=m&this.DM,m>>=this.DB;if(b.t<this.t){for(m-=b.s;l<this.t;)m+=this[l],a[l++]=
m&this.DM,m>>=this.DB;m+=this.s}else{for(m+=this.s;l<b.t;)m-=b[l],a[l++]=m&this.DM,m>>=this.DB;m-=b.s}a.s=0>m?-1:0;-1>m?a[l++]=this.DV+m:0<m&&(a[l++]=m);a.t=l;a.clamp()};e.prototype.multiplyTo=function(b,a){var l=this.abs(),m=b.abs(),g=l.t;for(a.t=g+m.t;0<=--g;)a[g]=0;for(g=0;g<m.t;++g)a[g+l.t]=l.am(0,m[g],a,g,0,l.t);a.s=0;a.clamp();this.s!=b.s&&e.ZERO.subTo(a,a)};e.prototype.squareTo=function(b){for(var a=this.abs(),l=b.t=2*a.t;0<=--l;)b[l]=0;for(l=0;l<a.t-1;++l){var m=a.am(l,a[l],b,2*l,0,1);(b[l+
a.t]+=a.am(l+1,2*a[l],b,2*l+1,m,a.t-l-1))>=a.DV&&(b[l+a.t]-=a.DV,b[l+a.t+1]=1)}0<b.t&&(b[b.t-1]+=a.am(l,a[l],b,2*l,0,1));b.s=0;b.clamp()};e.prototype.divRemTo=function(b,a,g){var m=b.abs();if(!(0>=m.t)){var l=this.abs();if(l.t<m.t)null!=a&&a.fromInt(0),null!=g&&this.copyTo(g);else{null==g&&(g=c());var n=c(),q=this.s;b=b.s;var k=this.DB-d(m[m.t-1]);0<k?(m.lShiftTo(k,n),l.lShiftTo(k,g)):(m.copyTo(n),l.copyTo(g));m=n.t;l=n[m-1];if(0!=l){var z=l*(1<<this.F1)+(1<m?n[m-2]>>this.F2:0),r=this.FV/z,z=(1<<
this.F1)/z,t=1<<this.F2,h=g.t,w=h-m,f=null==a?c():a;n.dlShiftTo(w,f);0<=g.compareTo(f)&&(g[g.t++]=1,g.subTo(f,g));e.ONE.dlShiftTo(m,f);for(f.subTo(n,n);n.t<m;)n[n.t++]=0;for(;0<=--w;){var p=g[--h]==l?this.DM:Math.floor(g[h]*r+(g[h-1]+t)*z);if((g[h]+=n.am(0,p,g,w,0,m))<p)for(n.dlShiftTo(w,f),g.subTo(f,g);g[h]<--p;)g.subTo(f,g)}null!=a&&(g.drShiftTo(m,a),q!=b&&e.ZERO.subTo(a,a));g.t=m;g.clamp();0<k&&g.rShiftTo(k,g);0>q&&e.ZERO.subTo(g,g)}}}};e.prototype.invDigit=function(){if(1>this.t)return 0;var b=
this[0];if(0==(b&1))return 0;var a=b&3,a=a*(2-(b&15)*a)&15,a=a*(2-(b&255)*a)&255,a=a*(2-((b&65535)*a&65535))&65535,a=a*(2-b*a%this.DV)%this.DV;return 0<a?this.DV-a:-a};e.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};e.prototype.exp=function(b,a){if(4294967295<b||1>b)return e.ONE;var l=c();var m=c();var g=a.convert(this),n=d(b)-1;for(g.copyTo(l);0<=--n;)if(a.sqrTo(l,m),0<(b&1<<n))a.mulTo(m,g,l);else{var q=l;l=m;m=q}return a.revert(l)};e.prototype.toString=function(b){if(0>this.s)return"-"+
this.negate().toString(b);if(16==b)b=4;else if(8==b)b=3;else if(2==b)b=1;else if(32==b)b=5;else if(4==b)b=2;else return this.toRadix(b);var a=(1<<b)-1,l,m=!1,g="",e=this.t,d=this.DB-e*this.DB%b;if(0<e--)for(d<this.DB&&0<(l=this[e]>>d)&&(m=!0,g="0123456789abcdefghijklmnopqrstuvwxyz".charAt(l));0<=e;)d<b?(l=(this[e]&(1<<d)-1)<<b-d,l|=this[--e]>>(d+=this.DB-b)):(l=this[e]>>(d-=b)&a,0>=d&&(d+=this.DB,--e)),0<l&&(m=!0),m&&(g+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(l));return m?g:"0"};e.prototype.negate=
function(){var b=c();e.ZERO.subTo(this,b);return b};e.prototype.abs=function(){return 0>this.s?this.negate():this};e.prototype.compareTo=function(b){var a=this.s-b.s;if(0!=a)return a;var l=this.t,a=l-b.t;if(0!=a)return a;for(;0<=--l;)if(0!=(a=this[l]-b[l]))return a;return 0};e.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)};e.prototype.mod=function(b){var a=c();this.abs().divRemTo(b,null,a);0>this.s&&0<a.compareTo(e.ZERO)&&b.subTo(a,a);return a};
e.prototype.modPowInt=function(a,g){g=256>a||g.isEven()?new b(g):new t(g);return this.exp(a,g)};e.ZERO=q(0);e.ONE=q(1);v.prototype.convert=p;v.prototype.revert=p;v.prototype.mulTo=function(b,a,g){b.multiplyTo(a,g)};v.prototype.sqrTo=function(b,a){b.squareTo(a)};C.prototype.convert=function(b){if(0>b.s||b.t>2*this.m.t)return b.mod(this.m);if(0>b.compareTo(this.m))return b;var a=c();b.copyTo(a);this.reduce(a);return a};C.prototype.revert=function(b){return b};C.prototype.reduce=function(b){b.drShiftTo(this.m.t-
1,this.r2);b.t>this.m.t+1&&(b.t=this.m.t+1,b.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>b.compareTo(this.r2);)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);0<=b.compareTo(this.m);)b.subTo(this.m,b)};C.prototype.mulTo=function(b,a,g){b.multiplyTo(a,g);this.reduce(g)};C.prototype.sqrTo=function(b,a){b.squareTo(a);this.reduce(a)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],D=67108864/A[A.length-1];e.prototype.chunkSize=function(b){return Math.floor(Math.LN2*this.DB/Math.log(b))};e.prototype.toRadix=function(b){null==b&&(b=10);if(0==this.signum()||2>b||36<b)return"0";var a=this.chunkSize(b),a=Math.pow(b,
a),g=q(a),m=c(),l=c(),e="";for(this.divRemTo(g,m,l);0<m.signum();)e=(a+l.intValue()).toString(b).substr(1)+e,m.divRemTo(g,m,l);return l.intValue().toString(b)+e};e.prototype.fromRadix=function(b,a){this.fromInt(0);null==a&&(a=10);for(var g=this.chunkSize(a),m=Math.pow(a,g),l=!1,d=0,n=0,c=0;c<b.length;++c){var q=k(b,c);0>q?"-"==b.charAt(c)&&0==this.signum()&&(l=!0):(n=a*n+q,++d>=g&&(this.dMultiply(m),this.dAddOffset(n,0),n=d=0))}0<d&&(this.dMultiply(Math.pow(a,d)),this.dAddOffset(n,0));l&&e.ZERO.subTo(this,
this)};e.prototype.fromNumber=function(b,a,g){if("number"==typeof a)if(2>b)this.fromInt(1);else for(this.fromNumber(b,g),this.testBit(b-1)||this.bitwiseTo(e.ONE.shiftLeft(b-1),n,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(a);)this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(e.ONE.shiftLeft(b-1),this);else{g=[];var m=b&7;g.length=(b>>3)+1;a.nextBytes(g);g[0]=0<m?g[0]&(1<<m)-1:0;this.fromString(g,256)}};e.prototype.bitwiseTo=function(b,a,g){var m,l=Math.min(b.t,this.t);for(m=
0;m<l;++m)g[m]=a(this[m],b[m]);if(b.t<this.t){var e=b.s&this.DM;for(m=l;m<this.t;++m)g[m]=a(this[m],e);g.t=this.t}else{e=this.s&this.DM;for(m=l;m<b.t;++m)g[m]=a(e,b[m]);g.t=b.t}g.s=a(this.s,b.s);g.clamp()};e.prototype.changeBit=function(b,a){b=e.ONE.shiftLeft(b);this.bitwiseTo(b,a,b);return b};e.prototype.addTo=function(b,a){for(var g=0,m=0,e=Math.min(b.t,this.t);g<e;)m+=this[g]+b[g],a[g++]=m&this.DM,m>>=this.DB;if(b.t<this.t){for(m+=b.s;g<this.t;)m+=this[g],a[g++]=m&this.DM,m>>=this.DB;m+=this.s}else{for(m+=
this.s;g<b.t;)m+=b[g],a[g++]=m&this.DM,m>>=this.DB;m+=b.s}a.s=0>m?-1:0;0<m?a[g++]=m:-1>m&&(a[g++]=this.DV+m);a.t=g;a.clamp()};e.prototype.dMultiply=function(b){this[this.t]=this.am(0,b-1,this,0,0,this.t);++this.t;this.clamp()};e.prototype.dAddOffset=function(b,a){if(0!=b){for(;this.t<=a;)this[this.t++]=0;for(this[a]+=b;this[a]>=this.DV;)this[a]-=this.DV,++a>=this.t&&(this[this.t++]=0),++this[a]}};e.prototype.multiplyLowerTo=function(b,a,g){var m=Math.min(this.t+b.t,a);g.s=0;for(g.t=m;0<m;)g[--m]=
0;var e;for(e=g.t-this.t;m<e;++m)g[m+this.t]=this.am(0,b[m],g,m,0,this.t);for(e=Math.min(b.t,a);m<e;++m)this.am(0,b[m],g,m,0,a-m);g.clamp()};e.prototype.multiplyUpperTo=function(b,a,g){--a;var m=g.t=this.t+b.t-a;for(g.s=0;0<=--m;)g[m]=0;for(m=Math.max(a-this.t,0);m<b.t;++m)g[this.t+m-a]=this.am(a-m,b[m],g,0,0,this.t+m-a);g.clamp();g.drShiftTo(1,g)};e.prototype.modInt=function(b){if(0>=b)return 0;var a=this.DV%b,g=0>this.s?b-1:0;if(0<this.t)if(0==a)g=this[0]%b;else for(var m=this.t-1;0<=m;--m)g=(a*
g+this[m])%b;return g};e.prototype.millerRabin=function(b){var a=this.subtract(e.ONE),g=a.getLowestSetBit();if(0>=g)return!1;var m=a.shiftRight(g);b=b+1>>1;b>A.length&&(b=A.length);for(var d=c(),n=0;n<b;++n){d.fromInt(A[n]);var l=d.modPow(m,this);if(0!=l.compareTo(e.ONE)&&0!=l.compareTo(a)){for(var q=1;q++<g&&0!=l.compareTo(a);)if(l=l.modPowInt(2,this),0==l.compareTo(e.ONE))return!1;if(0!=l.compareTo(a))return!1}}return!0};e.prototype.clone=function(){var b=c();this.copyTo(b);return b};e.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};e.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};e.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};e.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};e.prototype.toByteArray=function(){var b=this.t,a=[];a[0]=this.s;var g=this.DB-
b*this.DB%8,m,e=0;if(0<b--)for(g<this.DB&&(m=this[b]>>g)!=(this.s&this.DM)>>g&&(a[e++]=m|this.s<<this.DB-g);0<=b;)if(8>g?(m=(this[b]&(1<<g)-1)<<8-g,m|=this[--b]>>(g+=this.DB-8)):(m=this[b]>>(g-=8)&255,0>=g&&(g+=this.DB,--b)),0!=(m&128)&&(m|=-256),0==e&&(this.s&128)!=(m&128)&&++e,0<e||m!=this.s)a[e++]=m;return a};e.prototype.equals=function(b){return 0==this.compareTo(b)};e.prototype.min=function(b){return 0>this.compareTo(b)?this:b};e.prototype.max=function(b){return 0<this.compareTo(b)?this:b};e.prototype.and=
function(b){var a=c();this.bitwiseTo(b,r,a);return a};e.prototype.or=function(b){var a=c();this.bitwiseTo(b,n,a);return a};e.prototype.xor=function(b){var a=c();this.bitwiseTo(b,g,a);return a};e.prototype.andNot=function(b){var a=c();this.bitwiseTo(b,x,a);return a};e.prototype.not=function(){for(var b=c(),a=0;a<this.t;++a)b[a]=this.DM&~this[a];b.t=this.t;b.s=~this.s;return b};e.prototype.shiftLeft=function(b){var a=c();0>b?this.rShiftTo(-b,a):this.lShiftTo(b,a);return a};e.prototype.shiftRight=function(b){var a=
c();0>b?this.lShiftTo(-b,a):this.rShiftTo(b,a);return a};e.prototype.getLowestSetBit=function(){for(var b=0;b<this.t;++b)if(0!=this[b]){var a=b*this.DB,b=this[b];if(0==b)b=-1;else{var g=0;0==(b&65535)&&(b>>=16,g+=16);0==(b&255)&&(b>>=8,g+=8);0==(b&15)&&(b>>=4,g+=4);0==(b&3)&&(b>>=2,g+=2);0==(b&1)&&++g;b=g}return a+b}return 0>this.s?this.t*this.DB:-1};e.prototype.bitCount=function(){for(var b=0,a=this.s&this.DM,g=0;g<this.t;++g){for(var m=this[g]^a,e=0;0!=m;)m&=m-1,++e;b+=e}return b};e.prototype.testBit=
function(b){var a=Math.floor(b/this.DB);return a>=this.t?0!=this.s:0!=(this[a]&1<<b%this.DB)};e.prototype.setBit=function(b){return this.changeBit(b,n)};e.prototype.clearBit=function(b){return this.changeBit(b,x)};e.prototype.flipBit=function(b){return this.changeBit(b,g)};e.prototype.add=function(b){var a=c();this.addTo(b,a);return a};e.prototype.subtract=function(b){var a=c();this.subTo(b,a);return a};e.prototype.multiply=function(b){var a=c();this.multiplyTo(b,a);return a};e.prototype.divide=function(b){var a=
c();this.divRemTo(b,a,null);return a};e.prototype.remainder=function(b){var a=c();this.divRemTo(b,null,a);return a};e.prototype.divideAndRemainder=function(b){var a=c(),g=c();this.divRemTo(b,a,g);return[a,g]};e.prototype.modPow=function(a,g){var e=a.bitLength(),m=q(1);if(0>=e)return m;var n=18>e?1:48>e?3:144>e?4:768>e?5:6;g=8>e?new b(g):g.isEven()?new C(g):new t(g);var l=[],k=3,r=n-1,h=(1<<n)-1;l[1]=g.convert(this);if(1<n)for(e=c(),g.sqrTo(l[1],e);k<=h;)l[k]=c(),g.mulTo(e,l[k-2],l[k]),k+=2;for(var f=
a.t-1,p,x=!0,v=c(),e=d(a[f])-1;0<=f;){e>=r?p=a[f]>>e-r&h:(p=(a[f]&(1<<e+1)-1)<<r-e,0<f&&(p|=a[f-1]>>this.DB+e-r));for(k=n;0==(p&1);)p>>=1,--k;0>(e-=k)&&(e+=this.DB,--f);if(x)l[p].copyTo(m),x=!1;else{for(;1<k;)g.sqrTo(m,v),g.sqrTo(v,m),k-=2;0<k?g.sqrTo(m,v):(k=m,m=v,v=k);g.mulTo(v,l[p],m)}for(;0<=f&&0==(a[f]&1<<e);)g.sqrTo(m,v),k=m,m=v,v=k,0>--e&&(e=this.DB-1,--f)}return g.revert(m)};e.prototype.modInverse=function(b){var a=b.isEven();if(this.isEven()&&a||0==b.signum())return e.ZERO;for(var g=b.clone(),
m=this.clone(),d=q(1),n=q(0),c=q(0),k=q(1);0!=g.signum();){for(;g.isEven();)g.rShiftTo(1,g),a?(d.isEven()&&n.isEven()||(d.addTo(this,d),n.subTo(b,n)),d.rShiftTo(1,d)):n.isEven()||n.subTo(b,n),n.rShiftTo(1,n);for(;m.isEven();)m.rShiftTo(1,m),a?(c.isEven()&&k.isEven()||(c.addTo(this,c),k.subTo(b,k)),c.rShiftTo(1,c)):k.isEven()||k.subTo(b,k),k.rShiftTo(1,k);0<=g.compareTo(m)?(g.subTo(m,g),a&&d.subTo(c,d),n.subTo(k,n)):(m.subTo(g,m),a&&c.subTo(d,c),k.subTo(n,k))}if(0!=m.compareTo(e.ONE))return e.ZERO;
if(0<=k.compareTo(b))return k.subtract(b);if(0>k.signum())k.addTo(b,k);else return k;return 0>k.signum()?k.add(b):k};e.prototype.pow=function(b){return this.exp(b,new v)};e.prototype.gcd=function(b){var a=0>this.s?this.negate():this.clone();b=0>b.s?b.negate():b.clone();if(0>a.compareTo(b)){var g=a;a=b;b=g}g=a.getLowestSetBit();var m=b.getLowestSetBit();if(0>m)return a;g<m&&(m=g);for(0<m&&(a.rShiftTo(m,a),b.rShiftTo(m,b));0<a.signum();)0<(g=a.getLowestSetBit())&&a.rShiftTo(g,a),0<(g=b.getLowestSetBit())&&
b.rShiftTo(g,b),0<=a.compareTo(b)?(a.subTo(b,a),a.rShiftTo(1,a)):(b.subTo(a,b),b.rShiftTo(1,b));0<m&&b.lShiftTo(m,b);return b};e.prototype.isProbablePrime=function(b){var a,g=this.abs();if(1==g.t&&g[0]<=A[A.length-1]){for(a=0;a<A.length;++a)if(g[0]==A[a])return!0;return!1}if(g.isEven())return!1;for(a=1;a<A.length;){for(var m=A[a],e=a+1;e<A.length&&m<D;)m*=A[e++];for(m=g.modInt(m);a<e;)if(0==m%A[a++])return!1}return g.millerRabin(b)};return{BigInteger:e}}(),BigInteger=BigInteger.BigInteger;var struct={pack:function(e,c){var f="";switch(e){case "Q":e=new BigInteger("ff",16);f+=String.fromCharCode(c.shiftRight(56).and(e));f+=String.fromCharCode(c.shiftRight(48).and(e));f+=String.fromCharCode(c.shiftRight(40).and(e));f+=String.fromCharCode(c.shiftRight(32).and(e));f+=String.fromCharCode(c.shiftRight(24).and(e));f+=String.fromCharCode(c.shiftRight(16).and(e));f+=String.fromCharCode(c.shiftRight(8).and(e));f+=String.fromCharCode(c.and(e));break;case "I":f+=String.fromCharCode(c>>>24&255),
f+=String.fromCharCode(c>>>16&255),f+=String.fromCharCode(c>>>8&255);case "B":f+=String.fromCharCode(c&255)}return f},unpack:function(e,c){var f=[],h=0,a=0;switch(e){case "Q":a=new BigInteger("0",10);a=a.add((new BigInteger(c.charCodeAt(0).toString(),10)).shiftLeft(56));a=a.add((new BigInteger(c.charCodeAt(1).toString(),10)).shiftLeft(48));a=a.add((new BigInteger(c.charCodeAt(2).toString(),10)).shiftLeft(40));a=a.add((new BigInteger(c.charCodeAt(3).toString(),10)).shiftLeft(32));a=a.add((new BigInteger(c.charCodeAt(4).toString(),
10)).shiftLeft(24));a=a.add((new BigInteger(c.charCodeAt(5).toString(),10)).shiftLeft(16));a=a.add((new BigInteger(c.charCodeAt(6).toString(),10)).shiftLeft(8));a=a.add((new BigInteger(c.charCodeAt(7).toString(),10)).shiftLeft(0));f.push(a);break;case "I":a+=c.charCodeAt(0)<<24>>>0,a+=c.charCodeAt(1)<<16>>>0,a+=c.charCodeAt(2)<<8>>>0,h+=3;case "B":a+=c.charCodeAt(0+h)<<0>>>0,f.push(a)}return f}};function inflate_long(e){var c=new BigInteger("0",10);e.length%4&&(e=Array(4-e.length%4+1).join("\x00")+e);for(var f=0;f<e.length;f+=4)c=c.shiftLeft(32),c=c.add(new BigInteger(struct.unpack("I",e.substring(f,f+4))[0].toString(),10));return c}
function deflate_long(e,c){e="number"==typeof e?new BigInteger(e.toString(),10):e.clone();c=void 0==c?!0:c;for(var f="",h=new BigInteger("-1",10),a=new BigInteger("ffffffff",16);!e.equals(BigInteger.ZERO)&&!e.equals(h);)f=struct.pack("I",e.and(a))+f,e=e.shiftRight(32);for(var a=!1,k=0;k<f.length;++k){if(e.equals(BigInteger.ZERO)&&"\x00"!=f.charAt(k)){a=!0;break}if(e.equals(h)&&"\u00ff"!=f.charAt(k)){a=!0;break}}a||(k=0,f=e.equals(BigInteger.ZERO)?"\x00":"\u00ff");f=f.substring(k);c&&(e.equals(BigInteger.ZERO)&&
128<=f.charCodeAt(0)&&(f="\x00"+f),e.equals(h)&&128>f.charCodeAt(0)&&(f="\u00ff"+f));return f}function toByteArray(e){for(var c=new Uint8Array(e.length),f=0;f<e.length;f++)c[f]=e.charCodeAt(f);return c}function fromByteArray(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function bytesToWords(e){for(var c=[],f=0,h=0;f<e.length;f++,h+=8)c[h>>>5]|=(e[f]&255)<<24-h%32;return c}function wordsToBytes(e){for(var c=[],f=0;f<32*e.length;f+=8)c.push(e[f>>>5]>>>24-f%32&255);return c}
function setCharAt(e,c,f){return e.substring(0,c)+f+e.substring(c+1)}function fromUtf8(e){for(var c,f="",h=toByteArray(e),a=0;a<e.length;a++){var k=e.charCodeAt(a);if(192<=k&&223>=k)c=h[++a],k=(k&31)<<6|c&63;else if(224<=k&&239>=k){c=h[++a];var q=h[++a],k=(k&15)<<12|(c&63)<<6|q&63}else 128<=k&&(k=".");f+=String.fromCharCode(k)}return f}function read_rng(e){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(e)))}
function filter(e,c){e=e.split(",");for(var f=0;f<e.length;++f)if(-1!=c.indexOf(e[f]))return e[f]}function splitSlice(e,c){c=void 0===c?5E3:c;for(var f=[],h=0,a=e.length;h<a;h+=c)f.push(e.slice(h,c+h));return f}function modColorPercent(e,c){var f=parseInt(e.slice(1),16);e=0>c?0:255;c=0>c?-1*c:c;var h=f>>16,a=f>>8&255,f=f&255;return"#"+(16777216+65536*(Math.round((e-h)*c)+h)+256*(Math.round((e-a)*c)+a)+(Math.round((e-f)*c)+f)).toString(16).slice(1)};sjcl={cipher:{}};
sjcl.cipher.aes=function(e,c){this._tables[0][0][0]||this._precompute();this.mode=c;var f,h,a=this._tables[0][4],k=this._tables[1];c=e.length;var q=1;if(4!==c&&6!==c&&8!==c)throw"invalid aes key size";this._key=[f=e.slice(0),h=[]];for(e=c;e<4*c+28;e++){var d=f[e-1];if(0===e%c||8===c&&4===e%c)d=a[d>>>24]<<24^a[d>>16&255]<<16^a[d>>8&255]<<8^a[d&255],0===e%c&&(d=d<<8^d>>>24^q<<24,q=q<<1^283*(q>>7));f[e]=f[e-c]^d}for(c=0;e;c++,e--)d=f[c&3?e:e-4],h[c]=4>=e||4>c?d:k[0][a[d>>>24]]^k[1][a[d>>16&255]]^k[2][a[d>>
8&255]]^k[3][a[d&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(e,c,f){c=this.mode==sjcl.cipher.aes.MODE_CBC?c:[];for(var h=[],a=0;a<e.length/16;a++){var k=e.slice(16*a,16*(a+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var q=0;16>q;q++)k[q]^=c[q];c=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(k),0))}else for(c=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(f.increment())),0)),q=0;16>q;q++)c[q]^=k[q];h=h.concat(c)}return h},decrypt:function(e,c){for(var f=[],h=0;h<e.length/
16;h++){var a=e.slice(16*h,16*(h+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(a),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var k=0;16>k;k++)ct[k]^=c[k];c=a}f=f.concat(ct)}return f},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e=this._tables[0],c=this._tables[1],f=e[4],h=c[4],a,k,q,d=[],b=[],t;for(a=0;256>a;a++)b[(d[a]=a<<1^283*(a>>7))^a]=a;for(k=q=0;!f[k];k^=t||1,q=b[q]||1){var r=q^q<<1^q<<2^q<<3^q<<4;r=r>>8^r&255^99;f[k]=r;h[r]=k;var n=d[a=
d[t=d[k]]];var g=16843009*n^65537*a^257*t^16843008*k;n=257*d[r]^16843008*r;for(a=0;4>a;a++)e[a][k]=n=n<<24^n>>>8,c[a][r]=g=g<<24^g>>>8}for(a=0;5>a;a++)e[a]=e[a].slice(0),c[a]=c[a].slice(0)},_crypt:function(e,c){if(4!==e.length)throw"invalid aes block size";var f=this._key[c],h=e[0]^f[0],a=e[c?3:1]^f[1],k=e[2]^f[2];e=e[c?1:3]^f[3];var q=f.length/4-2,d,b=4,t=[0,0,0,0];var r=this._tables[c];var n=r[0],g=r[1],x=r[2],v=r[3],p=r[4];for(d=0;d<q;d++){r=n[h>>>24]^g[a>>16&255]^x[k>>8&255]^v[e&255]^f[b];var C=
n[a>>>24]^g[k>>16&255]^x[e>>8&255]^v[h&255]^f[b+1];var u=n[k>>>24]^g[e>>16&255]^x[h>>8&255]^v[a&255]^f[b+2];e=n[e>>>24]^g[h>>16&255]^x[a>>8&255]^v[k&255]^f[b+3];b+=4;h=r;a=C;k=u}for(d=0;4>d;d++)t[c?3&-d:d]=p[h>>>24]<<24^p[a>>16&255]<<16^p[k>>8&255]<<8^p[e&255]^f[b++],r=h,h=a,a=k,k=e,e=r;return t}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(e){var c=[],f=sjcl.bitArray.bitLength(e),h,a;for(h=0;h<f/8;h++)0===(h&3)&&(a=e[h/4]),c.push(a>>>24),a<<=8;return c},toBits:function(e){var c=[],f,h=0;for(f=0;f<e.length;f++)h=h<<8|e[f],3===(f&3)&&(c.push(h),h=0);f&3&&c.push(sjcl.bitArray.partial(8*(f&3),h));return c}};
sjcl.bitArray={bitLength:function(e){var c=e.length;return 0===c?0:32*(c-1)+sjcl.bitArray.getPartial(e[c-1])},partial:function(e,c,f){return 32===e?c:(f?c|0:c<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32}};SSHyClient.hash={};SSHyClient.hash.SHA1=function(e){this.data=e||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var e=toByteArray(this.data),c=bytesToWords(e),f=8*e.length,e=[],h=1732584193,a=-271733879,k=-1732584194,q=271733878,d=-1009589776;c[f>>5]|=128<<24-f%32;c[(f+64>>>9<<4)+15]=f;for(f=0;f<c.length;f+=16){for(var b=h,t=a,r=k,n=q,g=d,x=0;80>x;x++){if(16>x)e[x]=c[f+x];else{var v=e[x-3]^e[x-8]^e[x-14]^e[x-16];e[x]=v<<1|v>>>31}v=(h<<5|h>>>27)+d+(e[x]>>>0)+(20>x?(a&k|~a&q)+1518500249:40>x?(a^k^q)+1859775393:60>x?(a&k|a&q|k&q)-1894007588:(a^k^q)-899497514);
d=q;q=k;k=a<<30|a>>>2;a=h;h=v}h+=b;a+=t;k+=r;q+=n;d+=g}return fromByteArray(wordsToBytes([h,a,k,q,d]))}};SSHyClient.hash.SHA256=function(e){this.data=e||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var e=toByteArray(this.data),c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=bytesToWords(e),h=8*e.length,e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a=[],k,q;f[h>>5]|=128<<24-h%32;f[(h+64>>9<<4)+15]=h;for(k=0;k<f.length;k+=16){h=e[0];var d=e[1];var b=e[2];var t=
e[3];var r=e[4];var n=e[5];var g=e[6];var x=e[7];for(q=0;64>q;q++){if(16>q)a[q]=f[q+k];else{var v=a[q-15];var p=a[q-2];a[q]=((v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3)+(a[q-7]>>>0)+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+(a[q-16]>>>0)}p=h&d^h&b^d&b;var C=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22);v=(x>>>0)+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&n^~r&g)+c[q]+(a[q]>>>0);p=C+p;x=g;g=n;n=r;r=t+v>>>0;t=b;b=d;d=h;h=v+p>>>0}e[0]+=h;e[1]+=d;e[2]+=b;e[3]+=t;e[4]+=r;e[5]+=n;e[6]+=g;e[7]+=x}return fromByteArray(wordsToBytes(e))}};
SSHyClient.hash.HMAC=function(e,c,f){f=digestmod="SHA-1"==f?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var h=new f,a=new f;64<e.length&&(e=(new f(e)).digest());e+=Array(64-e.length+1).join("\x00");f=toByteArray(e).slice(0);e=toByteArray(e).slice(0);for(var k=0;64>k;++k)f[k]^=92,e[k]^=54;h.data+=fromByteArray(f);a.data+=fromByteArray(e);a.data+=c;h.data+=a.digest();return h.digest()};(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=e()})(function(){return function c(f,h,a){function k(b,d){if(!h[b]){if(!f[b]){var r="function"==typeof require&&require;if(!d&&r)return r(b,!0);if(q)return q(b,!0);d=Error("Cannot find module '"+b+"'");throw d.code="MODULE_NOT_FOUND",d;}d=h[b]={exports:{}};
f[b][0].call(d.exports,function(a){var g=f[b][1][a];return k(g?g:a)},d,d.exports,c,f,h,a)}return h[b].exports}for(var q="function"==typeof require&&require,d=0;d<a.length;d++)k(a[d]);return k}({1:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});h.CHARSETS={};h.DEFAULT_CHARSET=h.CHARSETS.B;h.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",
r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};h.CHARSETS.A={"#":"\u00a3"};h.CHARSETS.B=null;h.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};h.CHARSETS.C=h.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};h.CHARSETS.R={"#":"\u00a3","@":"\u00e0",
"[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};h.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};h.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};h.CHARSETS.Y={"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};
h.CHARSETS.E=h.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};h.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};h.CHARSETS.H=h.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};h.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7",
"]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],2:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=function(){function a(a,c,d){this.textarea=a;this.compositionView=c;this.terminal=d;this.isSendingComposition=this.isComposing=!1;this.compositionPosition={start:null,end:null}}a.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=this.textarea.value.length;this.compositionView.textContent=
"";this.compositionView.classList.add("active")};a.prototype.compositionupdate=function(a){var c=this;this.compositionView.textContent=a.data;this.updateCompositionElements();setTimeout(function(){c.compositionPosition.end=c.textarea.value.length},0)};a.prototype.compositionend=function(){this.finalizeComposition(!0)};a.prototype.keydown=function(a){if(this.isComposing||this.isSendingComposition){if(229===a.keyCode||16===a.keyCode||17===a.keyCode||18===a.keyCode)return!1;this.finalizeComposition(!1)}return 229===
a.keyCode?(this.handleAnyTextareaChanges(),!1):!0};a.prototype.finalizeComposition=function(a){var c=this;this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(a){var d=this.compositionPosition.start,b=this.compositionPosition.end;this.isSendingComposition=!0;setTimeout(function(){if(c.isSendingComposition){c.isSendingComposition=!1;var a=c.isComposing?c.textarea.value.substring(d,b):c.textarea.value.substring(d);c.terminal.handler(a)}},0)}else this.isSendingComposition=
!1,a=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(a)};a.prototype.handleAnyTextareaChanges=function(){var a=this,c=this.textarea.value;setTimeout(function(){if(!a.isComposing){var d=a.textarea.value.replace(c,"");0<d.length&&a.terminal.handler(d)}},0)};a.prototype.updateCompositionElements=function(a){var c=this;if(this.isComposing){var d=this.terminal.element.querySelector(".terminal-cursor");if(d){var b=this.terminal.element.querySelector(".xterm-rows").offsetTop+
d.offsetTop;this.compositionView.style.left=d.offsetLeft+"px";this.compositionView.style.top=b+"px";this.compositionView.style.height=d.offsetHeight+"px";this.compositionView.style.lineHeight=d.offsetHeight+"px";var k=this.compositionView.getBoundingClientRect();this.textarea.style.left=d.offsetLeft+"px";this.textarea.style.top=b+"px";this.textarea.style.width=k.width+"px";this.textarea.style.height=k.height+"px";this.textarea.style.lineHeight=k.height+"px"}a||setTimeout(function(){return c.updateCompositionElements(!0)},
0)}};a.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""};return a}();h.CompositionHelper=c},{}],3:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=h.C0||(h.C0={});c.NUL="\x00";c.SOH="\u0001";c.STX="\u0002";c.ETX="\u0003";c.EOT="\u0004";c.ENQ="\u0005";c.ACK="\u0006";c.BEL="\u0007";c.BS="\b";c.HT="\t";c.LF="\n";c.VT="\x0B";c.FF="\f";c.CR="\r";c.SO="\u000e";c.SI="\u000f";c.DLE="\u0010";c.DC1="\u0011";c.DC2="\u0012";c.DC3="\u0013";c.DC4=
"\u0014";c.NAK="\u0015";c.SYN="\u0016";c.ETB="\u0017";c.CAN="\u0018";c.EM="\u0019";c.SUB="\u001a";c.ESC="\u001b";c.FS="\u001c";c.GS="\u001d";c.RS="\u001e";c.US="\u001f";c.SP=" ";c.DEL="\u007f"},{}],4:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=function(){function a(){this._events=this._events||{}}a.prototype.on=function(a,c){this._events[a]=this._events[a]||[];this._events[a].push(c)};a.prototype.off=function(a,c){if(this._events[a]){a=this._events[a];for(var d=a.length;d--;)if(a[d]===
c||a[d].listener===c){a.splice(d,1);break}}};a.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]};a.prototype.once=function(a,c){function d(){var b=Array.prototype.slice.call(arguments);this.off(a,d);return c.apply(this,b)}d.listener=c;return this.on(a,d)};a.prototype.emit=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(this._events[a])for(var d=this._events[a],b=0;b<d.length;b++)d[b].apply(this,c)};a.prototype.listeners=function(a){return this._events[a]||
[]};return a}();h.EventEmitter=c},{}],5:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});var a=c("./EscapeSequences"),k=c("./Charsets");c=function(){function d(b){this._terminal=b}d.prototype.addChar=function(b,a){if(" "<=b){a=q(a);this._terminal.charset&&this._terminal.charset[b]&&(b=this._terminal.charset[b]);var d=this._terminal.y+this._terminal.ybase;if(!a&&this._terminal.x)this._terminal.lines.get(d)[this._terminal.x-1]&&(this._terminal.lines.get(d)[this._terminal.x-1][2]?this._terminal.lines.get(d)[this._terminal.x-
1][1]+=b:this._terminal.lines.get(d)[this._terminal.x-2]&&(this._terminal.lines.get(d)[this._terminal.x-2][1]+=b),this._terminal.updateRange(this._terminal.y));else{if(this._terminal.x+a-1>=this._terminal.cols)if(this._terminal.wraparoundMode)this._terminal.x=0,this._terminal.y++,this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll(!0));else if(2===a)return;d=this._terminal.y+this._terminal.ybase;if(this._terminal.insertMode)for(var n=0;n<a;++n)0===this._terminal.lines.get(this._terminal.y+
this._terminal.ybase).pop()[2]&&this._terminal.lines.get(d)[this._terminal.cols-2]&&2===this._terminal.lines.get(d)[this._terminal.cols-2][2]&&(this._terminal.lines.get(d)[this._terminal.cols-2]=[this._terminal.curAttr," ",1]),this._terminal.lines.get(d).splice(this._terminal.x,0,[this._terminal.curAttr," ",1]);this._terminal.lines.get(d)[this._terminal.x]=[this._terminal.curAttr,b,a];this._terminal.x++;this._terminal.updateRange(this._terminal.y);2===a&&(this._terminal.lines.get(d)[this._terminal.x]=
[this._terminal.curAttr,"",0],this._terminal.x++)}}};d.prototype.bell=function(){var b=this;this._terminal.visualBell&&(this._terminal.element.style.borderColor="white",setTimeout(function(){return b._terminal.element.style.borderColor=""},10),this._terminal.popOnBell&&this._terminal.focus())};d.prototype.lineFeed=function(){this._terminal.convertEol&&(this._terminal.x=0);this._terminal.y++;this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll());this._terminal.x>=
this._terminal.cols&&this._terminal.x--};d.prototype.carriageReturn=function(){this._terminal.x=0};d.prototype.backspace=function(){0<this._terminal.x&&this._terminal.x--};d.prototype.tab=function(){this._terminal.x=this._terminal.nextStop()};d.prototype.shiftOut=function(){this._terminal.setgLevel(1)};d.prototype.shiftIn=function(){this._terminal.setgLevel(0)};d.prototype.insertChars=function(b){var a;b=b[0];1>b&&(b=1);var d=this._terminal.y+this._terminal.ybase;var n=this._terminal.x;for(a=[this._terminal.eraseAttr(),
" ",1];b--&&n<this._terminal.cols;)this._terminal.lines.get(d).splice(n++,0,a),this._terminal.lines.get(d).pop()};d.prototype.cursorUp=function(b){b=b[0];1>b&&(b=1);this._terminal.y-=b;0>this._terminal.y&&(this._terminal.y=0)};d.prototype.cursorDown=function(b){b=b[0];1>b&&(b=1);this._terminal.y+=b;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=this._terminal.cols&&this._terminal.x--};d.prototype.cursorForward=function(b){b=b[0];1>b&&(b=1);this._terminal.x+=
b;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};d.prototype.cursorBackward=function(b){b=b[0];1>b&&(b=1);this._terminal.x>=this._terminal.cols&&this._terminal.x--;this._terminal.x-=b;0>this._terminal.x&&(this._terminal.x=0)};d.prototype.cursorNextLine=function(b){b=b[0];1>b&&(b=1);this._terminal.y+=b;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=0};d.prototype.cursorPrecedingLine=function(b){b=b[0];1>b&&(b=1);this._terminal.y-=
b;0>this._terminal.y&&(this._terminal.y=0);this._terminal.x=0};d.prototype.cursorCharAbsolute=function(b){b=b[0];1>b&&(b=1);this._terminal.x=b-1};d.prototype.cursorPosition=function(b){var a=b[0]-1;b=2<=b.length?b[1]-1:0;0>a?a=0:a>=this._terminal.rows&&(a=this._terminal.rows-1);0>b?b=0:b>=this._terminal.cols&&(b=this._terminal.cols-1);this._terminal.x=b;this._terminal.y=a};d.prototype.cursorForwardTab=function(b){for(b=b[0]||1;b--;)this._terminal.x=this._terminal.nextStop()};d.prototype.eraseInDisplay=
function(b){switch(b[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);for(b=this._terminal.y+1;b<this._terminal.rows;b++)this._terminal.eraseLine(b);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);for(b=this._terminal.y;b--;)this._terminal.eraseLine(b);break;case 2:for(b=this._terminal.rows;b--;)this._terminal.eraseLine(b);break;case 3:b=this._terminal.lines.length-this._terminal.rows,0<b&&(this._terminal.lines.trimStart(b),this._terminal.ybase=Math.max(this._terminal.ybase-
b,0),this._terminal.ydisp=Math.max(this._terminal.ydisp-b,0))}};d.prototype.eraseInLine=function(b){switch(b[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);break;case 2:this._terminal.eraseLine(this._terminal.y)}};d.prototype.insertLines=function(b){b=b[0];1>b&&(b=1);var a=this._terminal.y+this._terminal.ybase;var d=this._terminal.rows-1-this._terminal.scrollBottom;for(d=this._terminal.rows-1+this._terminal.ybase-
d+1;b--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),this._terminal.ybase--,this._terminal.ydisp--,a--,d--),this._terminal.lines.splice(a,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(d,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};d.prototype.deleteLines=function(b){b=b[0];1>b&&(b=1);var a=this._terminal.y+this._terminal.ybase;var d=this._terminal.rows-1-this._terminal.scrollBottom;
for(d=this._terminal.rows-1+this._terminal.ybase-d;b--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),--this._terminal.ybase,--this._terminal.ydisp),this._terminal.lines.splice(d+1,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(a,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};d.prototype.deleteChars=function(b){var a;b=b[0];1>b&&(b=1);var d=this._terminal.y+this._terminal.ybase;
for(a=[this._terminal.eraseAttr()," ",1];b--;)this._terminal.lines.get(d).splice(this._terminal.x,1),this._terminal.lines.get(d).push(a)};d.prototype.scrollUp=function(b){for(b=b[0]||1;b--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};d.prototype.scrollDown=
function(b){for(b=b[0]||1;b--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};d.prototype.eraseChars=function(b){var a;b=b[0];1>b&&(b=1);var d=this._terminal.y+this._terminal.ybase;var n=this._terminal.x;for(a=[this._terminal.eraseAttr()," ",1];b--&&n<this._terminal.cols;)this._terminal.lines.get(d)[n++]=
a};d.prototype.cursorBackwardTab=function(b){for(b=b[0]||1;b--;)this._terminal.x=this._terminal.prevStop()};d.prototype.charPosAbsolute=function(b){b=b[0];1>b&&(b=1);this._terminal.x=b-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};d.prototype.HPositionRelative=function(b){b=b[0];1>b&&(b=1);this._terminal.x+=b;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};d.prototype.repeatPrecedingCharacter=function(b){b=b[0]||1;for(var a=this._terminal.lines.get(this._terminal.ybase+
this._terminal.y),d=a[this._terminal.x-1]||[this._terminal.defAttr," ",1];b--;)a[this._terminal.x++]=d};d.prototype.sendDeviceAttributes=function(b){0<b[0]||(this._terminal.prefix?">"===this._terminal.prefix&&(this._terminal.is("xterm")?this._terminal.send(a.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.send(a.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.send(b[0]+"c"):this._terminal.is("screen")&&this._terminal.send(a.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||
this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.send(a.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.send(a.C0.ESC+"[?6c"))};d.prototype.linePosAbsolute=function(b){b=b[0];1>b&&(b=1);this._terminal.y=b-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1)};d.prototype.VPositionRelative=function(b){b=b[0];1>b&&(b=1);this._terminal.y+=b;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=
this._terminal.cols&&this._terminal.x--};d.prototype.HVPosition=function(b){1>b[0]&&(b[0]=1);1>b[1]&&(b[1]=1);this._terminal.y=b[0]-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=b[1]-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};d.prototype.tabClear=function(b){b=b[0];0>=b?delete this._terminal.tabs[this._terminal.x]:3===b&&(this._terminal.tabs={})};d.prototype.setMode=function(b){if(1<b.length)for(var a=0;a<
b.length;a++)this.setMode([b[a]]);else if(!this._terminal.prefix)switch(b[0]){case 4:this._terminal.insertMode=!0}else if("?"===this._terminal.prefix)switch(b[0]){case 1:this._terminal.applicationCursor=!0;break;case 2:this._terminal.setgCharset(0,k.DEFAULT_CHARSET);this._terminal.setgCharset(1,k.DEFAULT_CHARSET);this._terminal.setgCharset(2,k.DEFAULT_CHARSET);this._terminal.setgCharset(3,k.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);
break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===b[0];this._terminal.vt200Mouse=1E3===b[0];this._terminal.normalMouse=1E3<b[0];this._terminal.mouseEvents=!0;this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager.disable();
this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.normal||(b={lines:this._terminal.lines,ybase:this._terminal.ybase,ydisp:this._terminal.ydisp,x:this._terminal.x,y:this._terminal.y,scrollTop:this._terminal.scrollTop,scrollBottom:this._terminal.scrollBottom,
tabs:this._terminal.tabs},this._terminal.reset(),this._terminal.viewport.syncScrollArea(),this._terminal.normal=b,this._terminal.showCursor())}};d.prototype.resetMode=function(b){if(1<b.length)for(var a=0;a<b.length;a++)this.resetMode([b[a]]);else if(!this._terminal.prefix)switch(b[0]){case 4:this._terminal.insertMode=!1}else if("?"===this._terminal.prefix)switch(b[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,
this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element.classList.remove("enable-mouse-events");
this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.normal&&(this._terminal.lines=this._terminal.normal.lines,this._terminal.ybase=this._terminal.normal.ybase,this._terminal.ydisp=this._terminal.normal.ydisp,this._terminal.x=this._terminal.normal.x,
this._terminal.y=this._terminal.normal.y,this._terminal.scrollTop=this._terminal.normal.scrollTop,this._terminal.scrollBottom=this._terminal.normal.scrollBottom,this._terminal.tabs=this._terminal.normal.tabs,this._terminal.normal=null,this._terminal.selectionManager.setBuffer(this._terminal.lines),this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport.syncScrollArea(),this._terminal.showCursor())}};d.prototype.charAttributes=function(b){if(1===b.length&&0===b[0])this._terminal.curAttr=
this._terminal.defAttr;else{for(var a=b.length,d=0,n=this._terminal.curAttr>>18,g=this._terminal.curAttr>>9&511,c=this._terminal.curAttr&511,k;d<a;d++)k=b[d],30<=k&&37>=k?g=k-30:40<=k&&47>=k?c=k-40:90<=k&&97>=k?(k+=8,g=k-90):100<=k&&107>=k?(k+=8,c=k-100):0===k?(n=this._terminal.defAttr>>18,g=this._terminal.defAttr>>9&511,c=this._terminal.defAttr&511):1===k?n|=1:4===k?n|=2:5===k?n|=4:7===k?n|=8:8===k?n|=16:22===k?n&=-2:24===k?n&=-3:25===k?n&=-5:27===k?n&=-9:28===k?n&=-17:39===k?g=this._terminal.defAttr>>
9&511:49===k?c=this._terminal.defAttr&511:38===k?2===b[d+1]?(d+=2,g=this._terminal.matchColor(b[d]&255,b[d+1]&255,b[d+2]&255),-1===g&&(g=511),d+=2):5===b[d+1]&&(d+=2,g=k=b[d]&255):48===k?2===b[d+1]?(d+=2,c=this._terminal.matchColor(b[d]&255,b[d+1]&255,b[d+2]&255),-1===c&&(c=511),d+=2):5===b[d+1]&&(d+=2,c=k=b[d]&255):100===k?(g=this._terminal.defAttr>>9&511,c=this._terminal.defAttr&511):this._terminal.error("Unknown SGR attribute: %d.",k);this._terminal.curAttr=n<<18|g<<9|c}};d.prototype.deviceStatus=
function(b){if(!this._terminal.prefix)switch(b[0]){case 5:this._terminal.send(a.C0.ESC+"[0n");break;case 6:this._terminal.send(a.C0.ESC+"["+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}else if("?"===this._terminal.prefix)switch(b[0]){case 6:this._terminal.send(a.C0.ESC+"[?"+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}};d.prototype.softReset=function(b){this._terminal.cursorHidden=!1;this._terminal.insertMode=!1;this._terminal.originMode=!1;this._terminal.wraparoundMode=!0;this._terminal.applicationKeypad=
!1;this._terminal.viewport.syncScrollArea();this._terminal.applicationCursor=!1;this._terminal.scrollTop=0;this._terminal.scrollBottom=this._terminal.rows-1;this._terminal.curAttr=this._terminal.defAttr;this._terminal.x=this._terminal.y=0;this._terminal.charset=null;this._terminal.glevel=0;this._terminal.charsets=[null]};d.prototype.setCursorStyle=function(b){b=1>b[0]?1:b[0];switch(b){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle",
"underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",1===b%2)};d.prototype.setScrollRegion=function(b){this._terminal.prefix||(this._terminal.scrollTop=(b[0]||1)-1,this._terminal.scrollBottom=(b[1]&&b[1]<=this._terminal.rows?b[1]:this._terminal.rows)-1,this._terminal.x=0,this._terminal.y=0)};d.prototype.saveCursor=function(b){this._terminal.savedX=this._terminal.x;this._terminal.savedY=this._terminal.y};d.prototype.restoreCursor=function(b){this._terminal.x=
this._terminal.savedX||0;this._terminal.y=this._terminal.savedY||0};return d}();h.InputHandler=c;var q=function(a){var b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],
[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],
[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],
[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(d){if(0===d)return a.nul;if(32>d||127<=d&&160>d)return a.control;a:{var c=0;var n=b.length-1;if(!(d<b[0][0]||d>
b[n][1]))for(;n>=c;){var g=Math.floor((c+n)/2);if(d>b[g][1])c=g+1;else if(d<b[g][0])n=g-1;else{c=!0;break a}}c=!1}return c?0:4352<=d&&(4447>=d||9001===d||9002===d||11904<=d&&42191>=d&&12351!==d||44032<=d&&55203>=d||63744<=d&&64255>=d||65040<=d&&65049>=d||65072<=d&&65135>=d||65280<=d&&65376>=d||65504<=d&&65510>=d||131072<=d&&196605>=d||196608<=d&&262141>=d)?2:1}}({nul:0,control:0})},{"./Charsets":1,"./EscapeSequences":3}],6:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});var a=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?(\/[\/\w\.\-%~]*)*(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;
c=function(){function c(){this._nextLinkMatcherId=0;this._rowTimeoutIds=[];this._linkMatchers=[];this.registerLinkMatcher(a,null,{matchIndex:1})}c.prototype.attachToDom=function(a,d){this._document=a;this._rows=d};c.prototype.linkifyRow=function(a){if(this._document){var d=this._rowTimeoutIds[a];d&&clearTimeout(d);this._rowTimeoutIds[a]=setTimeout(this._linkifyRow.bind(this,a),c.TIME_BEFORE_LINKIFY)}};c.prototype.setHypertextLinkHandler=function(a){this._linkMatchers[0].handler=a};c.prototype.setHypertextValidationCallback=
function(a){this._linkMatchers[0].validationCallback=a};c.prototype.registerLinkMatcher=function(a,d,b){void 0===b&&(b={});if(0!==this._nextLinkMatcherId&&!d)throw Error("handler must be defined");a={id:this._nextLinkMatcherId++,regex:a,handler:d,matchIndex:b.matchIndex,validationCallback:b.validationCallback,priority:b.priority||0};this._addLinkMatcherToList(a);return a.id};c.prototype._addLinkMatcherToList=function(a){if(0===this._linkMatchers.length)this._linkMatchers.push(a);else{for(var d=this._linkMatchers.length-
1;0<=d;d--)if(a.priority<=this._linkMatchers[d].priority){this._linkMatchers.splice(d+1,0,a);return}this._linkMatchers.splice(0,0,a)}};c.prototype.deregisterLinkMatcher=function(a){for(var d=1;d<this._linkMatchers.length;d++)if(this._linkMatchers[d].id===a)return this._linkMatchers.splice(d,1),!0;return!1};c.prototype._linkifyRow=function(a){if(a=this._rows[a])for(var d=0;d<this._linkMatchers.length;d++){var b=this._linkMatchers[d],c=this._doLinkifyRow(a,b);if(0<c.length){if(b.validationCallback)for(a=
function(a){var d=c[a];b.validationCallback(d.textContent,d,function(a){a||d.classList.add("xterm-invalid-link")})},d=0;d<c.length;d++)a(d);break}}};c.prototype._doLinkifyRow=function(a,d){var b=[],c=0===d.id,k=a.childNodes,n=a.textContent.match(d.regex);if(!n||0===n.length)return b;for(var g=n["number"!==typeof d.matchIndex?0:d.matchIndex],q=n.index+g.length,h=0;h<k.length;h++){var f=k[h],C=f.textContent.indexOf(g);if(0<=C){n=this._createAnchorElement(g,d.handler,c);if(f.textContent.length===g.length)if(3===
f.nodeType)this._replaceNode(f,n);else{g=f;if("A"===g.nodeName)break;g.innerHTML="";g.appendChild(n)}else if(1<f.childNodes.length)for(C=0;C<f.childNodes.length;C++){var u=f.childNodes[C],y=u.textContent.indexOf(g);if(-1!==y){this._replaceNodeSubstringWithNode(u,n,g,y);break}}else g=this._replaceNodeSubstringWithNode(f,n,g,C),h+=g;b.push(n);n=a.textContent.substring(q).match(d.regex);if(!n||0===n.length)break;g=n["number"!==typeof d.matchIndex?0:d.matchIndex];q+=n.index+g.length}}return b};c.prototype._createAnchorElement=
function(a,d,b){var c=this._document.createElement("a");c.textContent=a;c.draggable=!1;b?(c.href=a,c.target="_blank",c.addEventListener("click",function(b){if(d)return d(b,a)})):c.addEventListener("click",function(b){if(!c.classList.contains("xterm-invalid-link"))return d(b,a)});return c};c.prototype._replaceNode=function(a){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];for(var b=a.parentNode,c=0;c<d.length;c++)b.insertBefore(d[c],a);b.removeChild(a)};c.prototype._replaceNodeSubstringWithNode=
function(a,d,b,c){1===a.childNodes.length&&(a=a.childNodes[0]);if(3!==a.nodeType)throw Error("targetNode must be a text node or only contain a single text node");var k=a.textContent;if(0===c){var n=k.substring(b.length),n=this._document.createTextNode(n);this._replaceNode(a,d,n);return 0}if(c===a.textContent.length-b.length)return n=k.substring(0,c),n=this._document.createTextNode(n),this._replaceNode(a,n,d),0;n=k.substring(0,c);n=this._document.createTextNode(n);b=k.substring(c+b.length);b=this._document.createTextNode(b);
this._replaceNode(a,n,d,b);return 1};return c}();c.TIME_BEFORE_LINKIFY=200;h.Linkifier=c},{}],7:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});var a=c("./EscapeSequences"),k=c("./Charsets"),q={};q[a.C0.BEL]=function(a,b){return b.bell()};q[a.C0.LF]=function(a,b){return b.lineFeed()};q[a.C0.VT]=q[a.C0.LF];q[a.C0.FF]=q[a.C0.LF];q[a.C0.CR]=function(a,b){return b.carriageReturn()};q[a.C0.BS]=function(a,b){return b.backspace()};q[a.C0.HT]=function(a,b){return b.tab()};q[a.C0.SO]=function(a,
b){return b.shiftOut()};q[a.C0.SI]=function(a,b){return b.shiftIn()};q[a.C0.ESC]=function(a,b){return a.setState(r.ESCAPED)};var d={"[":function(a,b){b.params=[];b.currentParam=0;a.setState(r.CSI_PARAM)},"]":function(a,b){b.params=[];b.currentParam=0;a.setState(r.OSC)},P:function(a,b){b.params=[];b.currentParam=0;a.setState(r.DCS)},_:function(a,b){a.setState(r.IGNORE)},"^":function(a,b){a.setState(r.IGNORE)},c:function(a,b){b.reset()},E:function(a,b){b.x=0;b.index();a.setState(r.NORMAL)},D:function(a,
b){b.index();a.setState(r.NORMAL)},M:function(a,b){b.reverseIndex();a.setState(r.NORMAL)},"%":function(a,b){b.setgLevel(0);b.setgCharset(0,k.DEFAULT_CHARSET);a.setState(r.NORMAL);a.skipNextChar()}};d[a.C0.CAN]=function(a){return a.setState(r.NORMAL)};var b={"?":function(a){return a.setPrefix("?")},">":function(a){return a.setPrefix(">")},"!":function(a){return a.setPrefix("!")},0:function(a){return a.setParam(10*a.getParam())},1:function(a){return a.setParam(10*a.getParam()+1)},2:function(a){return a.setParam(10*
a.getParam()+2)},3:function(a){return a.setParam(10*a.getParam()+3)},4:function(a){return a.setParam(10*a.getParam()+4)},5:function(a){return a.setParam(10*a.getParam()+5)},6:function(a){return a.setParam(10*a.getParam()+6)},7:function(a){return a.setParam(10*a.getParam()+7)},8:function(a){return a.setParam(10*a.getParam()+8)},9:function(a){return a.setParam(10*a.getParam()+9)},$:function(a){return a.setPostfix("$")},'"':function(a){return a.setPostfix('"')}," ":function(a){return a.setPostfix(" ")},
"'":function(a){return a.setPostfix("'")},";":function(a){return a.finalizeParam()}};b[a.C0.CAN]=function(a){return a.setState(r.NORMAL)};var t={"@":function(a,b,d){return a.insertChars(b)},A:function(a,b,d){return a.cursorUp(b)},B:function(a,b,d){return a.cursorDown(b)},C:function(a,b,d){return a.cursorForward(b)},D:function(a,b,d){return a.cursorBackward(b)},E:function(a,b,d){return a.cursorNextLine(b)},F:function(a,b,d){return a.cursorPrecedingLine(b)},G:function(a,b,d){return a.cursorCharAbsolute(b)},
H:function(a,b,d){return a.cursorPosition(b)},I:function(a,b,d){return a.cursorForwardTab(b)},J:function(a,b,d){return a.eraseInDisplay(b)},K:function(a,b,d){return a.eraseInLine(b)},L:function(a,b,d){return a.insertLines(b)},M:function(a,b,d){return a.deleteLines(b)},P:function(a,b,d){return a.deleteChars(b)},S:function(a,b,d){return a.scrollUp(b)},T:function(a,b,d){2>b.length&&!d&&a.scrollDown(b)},X:function(a,b,d){return a.eraseChars(b)},Z:function(a,b,d){return a.cursorBackwardTab(b)},"`":function(a,
b,d){return a.charPosAbsolute(b)},a:function(a,b,d){return a.HPositionRelative(b)},b:function(a,b,d){return a.repeatPrecedingCharacter(b)},c:function(a,b,d){return a.sendDeviceAttributes(b)},d:function(a,b,d){return a.linePosAbsolute(b)},e:function(a,b,d){return a.VPositionRelative(b)},f:function(a,b,d){return a.HVPosition(b)},g:function(a,b,d){return a.tabClear(b)},h:function(a,b,d){return a.setMode(b)},l:function(a,b,d){return a.resetMode(b)},m:function(a,b,d){return a.charAttributes(b)},n:function(a,
b,d){return a.deviceStatus(b)},p:function(a,b,d){switch(d){case "!":a.softReset(b)}},q:function(a,b,d,c){" "===c&&a.setCursorStyle(b)},r:function(a,b){return a.setScrollRegion(b)},s:function(a,b){return a.saveCursor(b)},u:function(a,b){return a.restoreCursor(b)}};t[a.C0.CAN]=function(a,b,d,c,k){return k.setState(r.NORMAL)};var r;(function(a){a[a.NORMAL=0]="NORMAL";a[a.ESCAPED=1]="ESCAPED";a[a.CSI_PARAM=2]="CSI_PARAM";a[a.CSI=3]="CSI";a[a.OSC=4]="OSC";a[a.CHARSET=5]="CHARSET";a[a.DCS=6]="DCS";a[a.IGNORE=
7]="IGNORE"})(r||(r={}));c=function(){function c(a,b){this._inputHandler=a;this._terminal=b;this._state=r.NORMAL}c.prototype.parse=function(g){var c=g.length;this._position=0;this._terminal.surrogate_high&&(g=this._terminal.surrogate_high+g,this._terminal.surrogate_high="");for(;this._position<c;this._position++){var f=g[this._position];var h=g.charCodeAt(this._position);if(55296<=h&&56319>=h){var n=g.charCodeAt(this._position+1);if(isNaN(n)){this._terminal.surrogate_high=f;continue}h=1024*(h-55296)+
(n-56320)+65536;f+=g.charAt(this._position+1)}if(!(56320<=h&&57343>=h))switch(this._state){case r.NORMAL:if(f in q)q[f](this,this._inputHandler);else this._inputHandler.addChar(f,h);break;case r.ESCAPED:if(f in d){d[f](this,this._terminal);break}switch(f){case "(":case ")":case "*":case "+":case "-":case ".":switch(f){case "(":this._terminal.gcharset=0;break;case ")":this._terminal.gcharset=1;break;case "*":this._terminal.gcharset=2;break;case "+":this._terminal.gcharset=3;break;case "-":this._terminal.gcharset=
1;break;case ".":this._terminal.gcharset=2}this._state=r.CHARSET;break;case "/":this._terminal.gcharset=3;this._state=r.CHARSET;this._position--;break;case "N":break;case "O":break;case "n":this._terminal.setgLevel(2);break;case "o":this._terminal.setgLevel(3);break;case "|":this._terminal.setgLevel(3);break;case "}":this._terminal.setgLevel(2);break;case "~":this._terminal.setgLevel(1);break;case "7":this._inputHandler.saveCursor();this._state=r.NORMAL;break;case "8":this._inputHandler.restoreCursor();
this._state=r.NORMAL;break;case "#":this._state=r.NORMAL;this._position++;break;case "H":this._terminal.tabSet();this._state=r.NORMAL;break;case "=":this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();this._state=r.NORMAL;break;case ">":this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._state=r.NORMAL;break;default:this._state=
r.NORMAL,this._terminal.error("Unknown ESC control: %s.",f)}break;case r.CHARSET:f in k.CHARSETS?(h=k.CHARSETS[f],"/"===f&&this.skipNextChar()):h=k.DEFAULT_CHARSET;this._terminal.setgCharset(this._terminal.gcharset,h);this._terminal.gcharset=null;this._state=r.NORMAL;break;case r.OSC:if(f===a.C0.ESC||f===a.C0.BEL){f===a.C0.ESC&&this._position++;this._terminal.params.push(this._terminal.currentParam);switch(this._terminal.params[0]){case 0:case 1:case 2:this._terminal.params[1]&&(this._terminal.title=
this._terminal.params[1],this._terminal.handleTitle(this._terminal.title))}this._terminal.params=[];this._terminal.currentParam=0;this._state=r.NORMAL}else this._terminal.params.length?this._terminal.currentParam+=f:"0"<=f&&"9">=f?this._terminal.currentParam=10*this._terminal.currentParam+f.charCodeAt(0)-48:";"===f&&(this._terminal.params.push(this._terminal.currentParam),this._terminal.currentParam="");break;case r.CSI_PARAM:if(f in b){b[f](this);break}this.finalizeParam();this._state=r.CSI;case r.CSI:if(f in
t)t[f](this._inputHandler,this._terminal.params,this._terminal.prefix,this._terminal.postfix,this);else this._terminal.error("Unknown CSI code: %s.",f);this._state=r.NORMAL;this._terminal.prefix="";this._terminal.postfix="";break;case r.DCS:if(f===a.C0.ESC||f===a.C0.BEL){f===a.C0.ESC&&this._position++;switch(this._terminal.prefix){case "":break;case "$q":f=this._terminal.currentParam;h=!1;switch(f){case '"q':f='0"q';break;case '"p':f='61"p';break;case "r":f=""+(this._terminal.scrollTop+1)+";"+(this._terminal.scrollBottom+
1)+"r";break;case "m":f="0m";break;default:this._terminal.error("Unknown DCS Pt: %s.",f),f=""}this._terminal.send(a.C0.ESC+"P"+ +h+"$r"+f+a.C0.ESC+"\\");break;case "+p":break;case "+q":f=this._terminal.currentParam;h=!1;this._terminal.send(a.C0.ESC+"P"+ +h+"+r"+f+a.C0.ESC+"\\");break;default:this._terminal.error("Unknown DCS prefix: %s.",this._terminal.prefix)}this._terminal.currentParam=0;this._terminal.prefix="";this._state=r.NORMAL}else this._terminal.currentParam?this._terminal.currentParam+=
f:this._terminal.prefix||"$"===f||"+"===f?2===this._terminal.prefix.length?this._terminal.currentParam=f:this._terminal.prefix+=f:this._terminal.currentParam=f;break;case r.IGNORE:if(f===a.C0.ESC||f===a.C0.BEL)f===a.C0.ESC&&this._position++,this._state=r.NORMAL}}return this._state};c.prototype.setState=function(a){this._state=a};c.prototype.setPrefix=function(a){this._terminal.prefix=a};c.prototype.setPostfix=function(a){this._terminal.postfix=a};c.prototype.setParam=function(a){this._terminal.currentParam=
a};c.prototype.getParam=function(){return this._terminal.currentParam};c.prototype.finalizeParam=function(){this._terminal.params.push(this._terminal.currentParam);this._terminal.currentParam=0};c.prototype.skipNextChar=function(){this._position++};return c}();h.Parser=c},{"./Charsets":1,"./EscapeSequences":3}],8:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});var a=c("./utils/DomElementObjectPool"),k;(function(a){a[a.BOLD=1]="BOLD";a[a.UNDERLINE=2]="UNDERLINE";a[a.BLINK=4]="BLINK";
a[a.INVERSE=8]="INVERSE";a[a.INVISIBLE=16]="INVISIBLE"})(k||(k={}));var q=null;c=function(){function d(b){this._terminal=b;this._refreshRowsQueue=[];this._refreshFramesSkipped=0;this._refreshAnimationFrame=null;this._spanElementObjectPool=new a.DomElementObjectPool("span");if(null===q){b=this._terminal.element;var d=b.ownerDocument.createElement("span");d.innerHTML="hello world";b.appendChild(d);var c=d.offsetWidth,k=d.offsetHeight;d.style.fontWeight="bold";var g=d.offsetWidth,f=d.offsetHeight;b.removeChild(d);
q=c!==g||k!==f}this._spanElementObjectPool=new a.DomElementObjectPool("span")}d.prototype.queueRefresh=function(a,d){this._refreshRowsQueue.push({start:a,end:d});this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this)))};d.prototype._refreshLoop=function(){if(0<this._terminal.writeBuffer.length&&5>=this._refreshFramesSkipped++)this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this));else{this._refreshFramesSkipped=
0;if(4<this._refreshRowsQueue.length){var a=0;var d=this._terminal.rows-1}else{a=this._refreshRowsQueue[0].start;d=this._refreshRowsQueue[0].end;for(var c=1;c<this._refreshRowsQueue.length;c++)this._refreshRowsQueue[c].start<a&&(a=this._refreshRowsQueue[c].start),this._refreshRowsQueue[c].end>d&&(d=this._refreshRowsQueue[c].end)}this._refreshRowsQueue=[];this._refreshAnimationFrame=null;this._refresh(a,d)}};d.prototype._refresh=function(a,d){var b;d-a>=this._terminal.rows/2&&(b=this._terminal.element.parentNode)&&
this._terminal.element.removeChild(this._terminal.rowContainer);var c=this._terminal.cols,g=a;d>=this._terminal.rows&&(this._terminal.log("`end` is too large. Most likely a bad CSR."),d=this._terminal.rows-1);for(;g<=d;g++){var f=this._terminal.lines.get(g+this._terminal.ydisp);var h=this._terminal.y===g-(this._terminal.ybase-this._terminal.ydisp)&&this._terminal.cursorState&&!this._terminal.cursorHidden?this._terminal.x:-1;for(var p=this._terminal.defAttr,t=document.createDocumentFragment(),u="",
y=void 0;this._terminal.children[g].children.length;){var B=this._terminal.children[g].children[0];this._terminal.children[g].removeChild(B);this._spanElementObjectPool.release(B)}for(B=0;B<c;B++){var A=f[B][0],D=f[B][1],l=f[B][2];if(l){B===h&&(A=-1);if(A!==p&&(p!==this._terminal.defAttr&&(u&&(y.innerHTML=u,u=""),t.appendChild(y),y=null),A!==this._terminal.defAttr))if(u&&!y&&(y=this._spanElementObjectPool.acquire()),y&&(u&&(y.innerHTML=u,u=""),t.appendChild(y)),y=this._spanElementObjectPool.acquire(),
-1===A)y.classList.add("reverse-video"),y.classList.add("terminal-cursor");else{var p=A&511,z=A>>9&511,w=A>>18;w&k.BOLD&&(q||y.classList.add("xterm-bold"),8>z&&(z+=8));w&k.UNDERLINE&&y.classList.add("xterm-underline");w&k.BLINK&&y.classList.add("xterm-blink");if(w&k.INVERSE){var m=p,p=z,z=m;w&1&&8>z&&(z+=8)}w&k.INVISIBLE&&y.classList.add("xterm-hidden");w&k.INVERSE&&(257===p&&(p=15),256===z&&(z=0));256>p&&y.classList.add("xterm-bg-color-"+p);256>z&&y.classList.add("xterm-color-"+z)}if(2===l)u+='<span class="xterm-wide-char">'+
D+"</span>";else if(255<D.charCodeAt(0))u+='<span class="xterm-normal-char">'+D+"</span>";else switch(D){case "&":u+="&amp;";break;case "<":u+="&lt;";break;case ">":u+="&gt;";break;default:u=" ">=D?u+"&nbsp;":u+D}p=A}}u&&!y&&(y=this._spanElementObjectPool.acquire());y&&(u&&(y.innerHTML=u),t.appendChild(y));this._terminal.children[g].appendChild(t)}b&&this._terminal.element.appendChild(this._terminal.rowContainer);this._terminal.emit("refresh",{element:this._terminal.element,start:a,end:d})};d.prototype.refreshSelection=
function(a,d){for(;this._terminal.selectionContainer.children.length;)this._terminal.selectionContainer.removeChild(this._terminal.selectionContainer.children[0]);if(a&&d){var b=a[1]-this._terminal.ydisp,c=d[1]-this._terminal.ydisp,g=Math.max(b,0),k=Math.min(c,this._terminal.rows-1);if(!(g>=this._terminal.rows||0>k)){var f=document.createDocumentFragment();f.appendChild(this._createSelectionElement(g,b===g?a[0]:0,g===k?d[0]:this._terminal.cols));f.appendChild(this._createSelectionElement(g+1,0,this._terminal.cols,
k-g-1));g!==k&&f.appendChild(this._createSelectionElement(k,0,c===k?d[0]:this._terminal.cols));this._terminal.selectionContainer.appendChild(f)}}};d.prototype._createSelectionElement=function(a,d,c,k){void 0===k&&(k=1);var b=document.createElement("div");b.style.height=k*this._terminal.charMeasure.height+"px";b.style.top=a*this._terminal.charMeasure.height+"px";b.style.left=d*this._terminal.charMeasure.width+"px";b.style.width=this._terminal.charMeasure.width*(c-d)+"px";return b};return d}();h.Renderer=
c},{"./utils/DomElementObjectPool":16}],9:[function(c,f,h){var a=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(h,"__esModule",{value:!0});var k=c("./utils/Mouse"),q=c("./utils/Browser");f=c("./EventEmitter");
var d=c("./SelectionModel");c=String.fromCharCode(160);var b=new RegExp(c,"g"),t;(function(a){a[a.NORMAL=0]="NORMAL";a[a.WORD=1]="WORD";a[a.LINE=2]="LINE"})(t||(t={}));c=function(c){function f(a,b,f,k){var g=c.call(this)||this;g._terminal=a;g._buffer=b;g._rowContainer=f;g._charMeasure=k;g._initListeners();g.enable();g._model=new d.SelectionModel(a);g._lastMouseDownTime=0;g._activeSelectionMode=t.NORMAL;return g}a(f,c);f.prototype._initListeners=function(){var a=this;this._bufferTrimListener=function(b){return a._onTrim(b)};
this._mouseMoveListener=function(b){return a._onMouseMove(b)};this._mouseDownListener=function(b){return a._onMouseDown(b)};this._mouseUpListener=function(b){return a._onMouseUp(b)}};f.prototype.disable=function(){this.clearSelection();this._buffer.off("trim",this._bufferTrimListener);this._rowContainer.removeEventListener("mousedown",this._mouseDownListener)};f.prototype.enable=function(){this._buffer.on("trim",this._bufferTrimListener);this._rowContainer.addEventListener("mousedown",this._mouseDownListener)};
f.prototype.setBuffer=function(a){this._buffer=a;this.clearSelection()};Object.defineProperty(f.prototype,"hasSelection",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return a&&b?a[0]!==b[0]||a[1]!==b[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"selectionText",{get:function(){var a=this._model.finalSelectionStart,d=this._model.finalSelectionEnd;if(!a||!d)return"";var c=a[1]===d[1]?d[0]:null;var f=[];f.push(this._translateBufferLineToString(this._buffer.get(a[1]),
!0,a[0],c));for(var k=a[1]+1;k<=d[1]-1;k++){var h=this._buffer.get(k);c=this._translateBufferLineToString(h,!0);h.isWrapped?f[f.length-1]+=c:f.push(c)}a[1]!==d[1]&&(h=this._buffer.get(d[1]),c=this._translateBufferLineToString(h,!0,0,d[0]),h.isWrapped?f[f.length-1]+=c:f.push(c));return f.map(function(a){return a.replace(b," ")}).join(q.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});f.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh()};
f.prototype._translateBufferLineToString=function(a,b,d,c){void 0===d&&(d=0);void 0===c&&(c=null);for(var g="",f=d,k=c,h=0;h<a.length;h++){var q=a[h],g=g+q[1];0===q[2]&&(d>=h&&f--,c>=h&&k--)}a=k||a.length;return b&&(b=g.search(/\s+$/),-1!==b&&(a=Math.min(a,b)),a<=f)?"":g.substring(f,a)};f.prototype.refresh=function(a){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()}));q.isLinux&&a&&this.selectionText.length&&this.emit("newselection",
this.selectionText)};f.prototype._refresh=function(){this._refreshAnimationFrame=null;this.emit("refresh",{start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd})};f.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh()};f.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()};f.prototype._getMouseBufferCoords=function(a){a=k.getCoords(a,this._rowContainer,this._charMeasure,this._terminal.cols,this._terminal.rows,!0);a[0]--;a[1]--;a[1]+=this._terminal.ydisp;
return a};f.prototype._getMouseEventScrollAmount=function(a){a=k.getCoordsRelativeToElement(a,this._rowContainer)[1];var b=this._terminal.rows*this._charMeasure.height;if(0<=a&&a<=b)return 0;a>b&&(a-=b);a=Math.min(Math.max(a,-50),50);a/=50;return a/Math.abs(a)+Math.round(14*a)};f.prototype._onMouseDown=function(a){0===a.button&&(a.preventDefault(),this._dragScrollAmount=0,this._setMouseClickCount(a),a.shiftKey?this._onShiftClick(a):1===this._clickCount?this._onSingleClick(a):2===this._clickCount?
this._onDoubleClick(a):3===this._clickCount&&this._onTripleClick(a),this._addMouseDownListeners(),this.refresh(!0))};f.prototype._addMouseDownListeners=function(){var a=this;this._rowContainer.ownerDocument.addEventListener("mousemove",this._mouseMoveListener);this._rowContainer.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return a._dragScroll()},50)};f.prototype._removeMouseDownListeners=function(){this._rowContainer.ownerDocument.removeEventListener("mousemove",
this._mouseMoveListener);this._rowContainer.ownerDocument.removeEventListener("mouseup",this._mouseUpListener);clearInterval(this._dragScrollIntervalTimer);this._dragScrollIntervalTimer=null};f.prototype._onShiftClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))};f.prototype._onSingleClick=function(a){this._model.selectionStartLength=0;this._model.isSelectAllActive=!1;this._activeSelectionMode=t.NORMAL;this._model.selectionStart=this._getMouseBufferCoords(a);
this._model.selectionStart&&(this._model.selectionEnd=null,0===this._buffer.get(this._model.selectionStart[1])[this._model.selectionStart[0]][2]&&this._model.selectionStart[0]++)};f.prototype._onDoubleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=t.WORD,this._selectWordAt(a)};f.prototype._onTripleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=t.LINE,this._selectLineAt(a[1])};f.prototype._setMouseClickCount=function(a){var b=(new Date).getTime();
if(400<b-this._lastMouseDownTime||10<this._distanceFromLastMousePosition(a))this._clickCount=0;this._lastMouseDownTime=b;this._lastMousePosition=[a.pageX,a.pageY];this._clickCount++};f.prototype._distanceFromLastMousePosition=function(a){return Math.max(Math.abs(this._lastMousePosition[0]-a.pageX),Math.abs(this._lastMousePosition[1]-a.pageY))};f.prototype._onMouseMove=function(a){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=
this._getMouseBufferCoords(a);this._activeSelectionMode===t.LINE?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:this._activeSelectionMode===t.WORD&&this._selectToWordAt(this._model.selectionEnd);this._dragScrollAmount=this._getMouseEventScrollAmount(a);0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols-1:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0);this._model.selectionEnd[1]<this._buffer.length&&(a=this._buffer.get(this._model.selectionEnd[1])[this._model.selectionEnd[0]])&&
0===a[2]&&this._model.selectionEnd[0]++;b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)};f.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollDisp(this._dragScrollAmount,!1),this._model.selectionEnd=0<this._dragScrollAmount?[this._terminal.cols-1,this._terminal.ydisp+this._terminal.rows]:[0,this._terminal.ydisp],this.refresh())};f.prototype._onMouseUp=function(a){this._removeMouseDownListeners()};f.prototype._convertViewportColToCharacterIndex=
function(a,b){for(var d=b[0],c=0;b[0]>=c;c++)0===a[c][2]&&d--;return d};f.prototype._getWordAt=function(a){var b=this._buffer.get(a[1]),d=this._translateBufferLineToString(b,!1),c=this._convertViewportColToCharacterIndex(b,a),f=c,g=a[0]-f,k=0,h=0;if(" "===d.charAt(f)){for(;0<f&&" "===d.charAt(f-1);)f--;for(;c<d.length&&" "===d.charAt(c+1);)c++}else{var q=a[0];a=a[0];0===b[q][2]&&(k++,q--);2===b[a][2]&&(h++,a++);for(;0<f&&!this._isCharWordSeparator(d.charAt(f-1));)0===b[q-1][2]&&(k++,q--),f--,q--;
for(;c+1<d.length&&!this._isCharWordSeparator(d.charAt(c+1));)2===b[a+1][2]&&(h++,a++),c++,a++}return{start:f+g-k,length:Math.min(c-f+k+h+1,this._terminal.cols)}};f.prototype._selectWordAt=function(a){var b=this._getWordAt(a);this._model.selectionStart=[b.start,a[1]];this._model.selectionStartLength=b.length};f.prototype._selectToWordAt=function(a){var b=this._getWordAt(a);this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,a[1]]};f.prototype._isCharWordSeparator=
function(a){return 0<=" ()[]{}'\"".indexOf(a)};f.prototype._selectLineAt=function(a){this._model.selectionStart=[0,a];this._model.selectionStartLength=this._terminal.cols};return f}(f.EventEmitter);h.SelectionManager=c},{"./EventEmitter":4,"./SelectionModel":10,"./utils/Browser":13,"./utils/Mouse":18}],10:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=function(){function a(a){this._terminal=a;this.clearSelection()}a.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=
null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(a.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._terminal.cols,this._terminal.ybase+this._terminal.rows-1]:this.selectionStart?
!this.selectionEnd||this.areSelectionValuesReversed()?[this.selectionStart[0]+this.selectionStartLength,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:null},enumerable:!0,configurable:!0});a.prototype.areSelectionValuesReversed=function(){var a=this.selectionStart,c=this.selectionEnd;return a[1]>c[1]||a[1]===c[1]&&a[0]>c[0]};a.prototype.onTrim=
function(a){this.selectionStart&&(this.selectionStart[1]-=a);this.selectionEnd&&(this.selectionEnd[1]-=a);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return a}();h.SelectionModel=c},{}],11:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=function(){function a(a,c,d,b){var f=this;this.terminal=a;this.viewportElement=c;this.scrollArea=d;this.charMeasure=b;this.lastRecordedViewportHeight=
this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));setTimeout(function(){return f.syncScrollArea()},0)}a.prototype.refresh=function(){if(0<this.charMeasure.height){var a=this.charMeasure.height!==this.currentRowHeight;a&&(this.currentRowHeight=this.charMeasure.height,this.viewportElement.style.lineHeight=this.charMeasure.height+
"px",this.terminal.rowContainer.style.lineHeight=this.charMeasure.height+"px");var c=this.lastRecordedViewportHeight!==this.terminal.rows;if(a||c)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=this.charMeasure.height*this.terminal.rows+"px",this.terminal.selectionContainer.style.height=this.viewportElement.style.height;this.scrollArea.style.height=this.charMeasure.height*this.lastRecordedBufferLength+"px"}};a.prototype.syncScrollArea=function(){this.lastRecordedBufferLength!==
this.terminal.lines.length?(this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh()):this.lastRecordedViewportHeight!==this.terminal.rows?this.refresh():this.charMeasure.height!==this.currentRowHeight&&this.refresh();var a=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==a&&(this.viewportElement.scrollTop=a)};a.prototype.onScroll=function(a){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};
a.prototype.onWheel=function(a){if(0!==a.deltaY){var c=1;a.deltaMode===WheelEvent.DOM_DELTA_LINE?c=this.currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=a.deltaY*c;a.preventDefault()}};a.prototype.onTouchStart=function(a){this.lastTouchY=a.touches[0].pageY};a.prototype.onTouchMove=function(a){var c=this.lastTouchY-a.touches[0].pageY;this.lastTouchY=a.touches[0].pageY;0!==c&&(this.viewportElement.scrollTop+=c,a.preventDefault())};
return a}();h.Viewport=c},{}],12:[function(c,f,h){function a(a,d){return d?a.replace(/\r?\n/g,"\r"):a}function k(a,d){d.style.position="fixed";d.style.width="20px";d.style.height="20px";d.style.left=a.clientX-10+"px";d.style.top=a.clientY-10+"px";d.style.zIndex="1000";d.focus();setTimeout(function(){d.style.position=null;d.style.width=null;d.style.height=null;d.style.left=null;d.style.top=null;d.style.zIndex=null},4)}Object.defineProperty(h,"__esModule",{value:!0});h.prepareTextForTerminal=a;h.copyHandler=
function(a,d,b){d.browser.isMSIE?window.clipboardData.setData("Text",b.selectionText):a.clipboardData.setData("text/plain",b.selectionText);a.preventDefault()};h.pasteHandler=function(c,d){c.stopPropagation();var b=function(b){b=a(b,d.browser.isMSWindows);d.handler(b);d.textarea.value="";d.emit("paste",b);return d.cancel(c)};if(d.browser.isMSIE){if(window.clipboardData){var f=window.clipboardData.getData("Text");b(f)}}else c.clipboardData&&(f=c.clipboardData.getData("text/plain"),b(f))};h.moveTextAreaUnderMouseCursor=
k;h.rightClickHandler=function(a,d,b){k(a,d);d.value=b.selectionText;d.select()}},{}],13:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=c("./Generic");var a="undefined"===typeof navigator?!0:!1;f=a?"node":navigator.userAgent;a=a?"node":navigator.platform;h.isFirefox=!!~f.indexOf("Firefox");h.isMSIE=!!~f.indexOf("MSIE")||!!~f.indexOf("Trident");h.isMac=c.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],a);h.isIpad="iPad"===a;h.isIphone="iPhone"===a;h.isMSWindows=c.contains(["Windows",
"Win16","Win32","WinCE"],a);h.isLinux=0<=a.indexOf("Linux")},{"./Generic":17}],14:[function(c,f,h){var a=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])};return function(c,d){function b(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(h,"__esModule",{value:!0});c=function(c){function f(a,
b){var d=c.call(this)||this;d._document=a;d._parentElement=b;return d}a(f,c);Object.defineProperty(f.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});f.prototype.measure=function(){var a=this;this._measureElement?this._doMeasure():(this._measureElement=this._document.createElement("span"),this._measureElement.style.position="absolute",this._measureElement.style.top=
"0",this._measureElement.style.left="-9999em",this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement),setTimeout(function(){return a._doMeasure()},0))};f.prototype._doMeasure=function(){var a=this._measureElement.getBoundingClientRect();0===a.width||0===a.height||this._width===a.width&&this._height===a.height||(this._width=a.width,this._height=a.height,this.emit("charsizechanged"))};return f}(c("../EventEmitter.js").EventEmitter);
h.CharMeasure=c},{"../EventEmitter.js":4}],15:[function(c,f,h){var a=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])};return function(c,d){function b(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(h,"__esModule",{value:!0});c=function(c){function f(a){var b=c.call(this)||this;b._array=
Array(a);b._startIndex=0;b._length=0;return b}a(f,c);Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._array.length},set:function(a){for(var b=Array(a),d=0;d<Math.min(a,this.length);d++)b[d]=this._array[this._getCyclicIndex(d)];this._array=b;this._startIndex=0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)for(var b=this._length;b<a;b++)this._array[b]=void 0;this._length=a},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"forEach",{get:function(){var a=this;return function(b){for(var d=a.length,c=0;c<d;c++)b(a.get(c),c)}},enumerable:!0,configurable:!0});f.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]};f.prototype.set=function(a,b){this._array[this._getCyclicIndex(a)]=b};f.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a;this._length===this.maxLength?(this._startIndex++,this._startIndex===this.maxLength&&
(this._startIndex=0),this.emit("trim",1)):this._length++};f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};f.prototype.splice=function(a,b){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];if(b){for(c=a;c<this._length-b;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+b)];this._length-=b}if(d&&d.length){for(c=this._length-1;c>=a;c--)this._array[this._getCyclicIndex(c+d.length)]=this._array[this._getCyclicIndex(c)];for(c=
0;c<d.length;c++)this._array[this._getCyclicIndex(a+c)]=d[c];this._length+d.length>this.maxLength?(d=this._length+d.length-this.maxLength,this._startIndex+=d,this._length=this.maxLength,this.emit("trim",d)):this._length+=d.length}};f.prototype.trimStart=function(a){a>this._length&&(a=this._length);this._startIndex+=a;this._length-=a;this.emit("trim",a)};f.prototype.shiftElements=function(a,b,c){if(!(0>=b)){if(0>a||a>=this._length)throw Error("start argument out of range");if(0>a+c)throw Error("Cannot shift elements in list beyond index 0");
if(0<c){for(var d=b-1;0<=d;d--)this.set(a+d+c,this.get(a+d));a=a+b+c-this._length;if(0<a)for(this._length+=a;this._length>this.maxLength;)this._length--,this._startIndex++,this.emit("trim",1)}else for(d=0;d<b;d++)this.set(a+d+c,this.get(a+d))}};f.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this.maxLength};return f}(c("../EventEmitter").EventEmitter);h.CircularList=c},{"../EventEmitter":4}],16:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});c=function(){function a(a){this._type=
this.type=a;this._pool=[];this._inUse={}}a.prototype.acquire=function(){var c=0===this._pool.length?this._createNew():this._pool.pop();return this._inUse[c.getAttribute(a.OBJECT_ID_ATTRIBUTE)]=c};a.prototype.release=function(c){if(!this._inUse[c.getAttribute(a.OBJECT_ID_ATTRIBUTE)])throw Error("Could not release an element not yet acquired");delete this._inUse[c.getAttribute(a.OBJECT_ID_ATTRIBUTE)];this._cleanElement(c);this._pool.push(c)};a.prototype._createNew=function(){var c=document.createElement(this._type),
f=a._objectCount++;c.setAttribute(a.OBJECT_ID_ATTRIBUTE,f.toString(10));return c};a.prototype._cleanElement=function(a){a.className="";a.innerHTML=""};return a}();c.OBJECT_ID_ATTRIBUTE="data-obj-id";c._objectCount=0;h.DomElementObjectPool=c},{}],17:[function(c,f,h){Object.defineProperty(h,"__esModule",{value:!0});h.contains=function(a,c){return 0<=a.indexOf(c)}},{}],18:[function(c,f,h){function a(a,d){if(null==a.pageX)return null;var b=a.pageX;for(a=a.pageY;d&&d!==self.document.documentElement;)b-=
d.offsetLeft,a-=d.offsetTop,d="offsetParent"in d?d.offsetParent:d.parentElement;return[b,a]}function k(c,d,b,f,k,h){c=a(c,d);c[0]=Math.ceil((c[0]+(h?b.width/2:0))/b.width);c[1]=Math.ceil(c[1]/b.height);c[0]=Math.min(Math.max(c[0],1),f+1);c[1]=Math.min(Math.max(c[1],1),k+1);return c}Object.defineProperty(h,"__esModule",{value:!0});h.getCoordsRelativeToElement=a;h.getCoords=k;h.getRawByteCoords=function(a,c,b,f,h){a=k(a,c,b,f,h);return{x:a[0]+32,y:a[1]+32}}},{}],19:[function(c,f,h){function a(b,c,d){var m=
this;if(!(this instanceof a))return new a(b,c,d);m.browser=l;m.cancel=a.cancel;n.EventEmitter.call(this);"number"===typeof b&&(b={cols:b,rows:c,handler:d});b=b||{};Object.keys(a.defaults).forEach(function(c){null==b[c]&&(b[c]=a.options[c],a[c]!==a.defaults[c]&&(b[c]=a[c]));m[c]=b[c]});8===b.colors.length?b.colors=b.colors.concat(a._colors.slice(8)):16===b.colors.length?b.colors=b.colors.concat(a._colors.slice(16)):10===b.colors.length?b.colors=b.colors.slice(0,-2).concat(a._colors.slice(8,-2),b.colors.slice(-2)):
18===b.colors.length&&(b.colors=b.colors.concat(a._colors.slice(16,-2),b.colors.slice(-2)));this.colors=b.colors;this.options=b;this.parent=b.body||b.parent||(w?w.getElementsByTagName("body")[0]:null);this.cols=b.cols||b.geometry[0];this.rows=b.rows||b.geometry[1];this.geometry=[this.cols,this.rows];if(b.handler)this.on("data",b.handler);this.cursorState=this.y=this.x=this.ydisp=this.ybase=0;this.cursorHidden=!1;this.convertEol;this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.cursorBlinkInterval=
this.customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;
this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.postfix=this.prefix="";this.inputHandler=new C.InputHandler(this);this.parser=new u.Parser(this.inputHandler,this);this.renderer=this.renderer||null;this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new B.Linkifier;this.writeBuffer=[];this.writeStopped=this.xoffSentToCatchUp=this.writeInProgress=!1;this.surrogate_high="";this.lines=new v.CircularList(this.scrollback);for(c=this.rows;c--;)this.lines.push(this.blankLine());
this.selectionManager&&this.selectionManager.setBuffer(this.lines);this.tabs;this.setupStops();this.userScrolling=!1}function k(a,b,c,d){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(b,c,d||!1)})}function q(a,b,c,d){a.removeEventListener(b,c,d||!1)}function d(a,b){function c(){this.constructor=a}c.prototype=b.prototype;a.prototype=new c}function b(a,b){a=a.browser.isMac&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.browser.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"==
b.type?a:a&&(!b.keyCode||47<b.keyCode)}function t(b,c,d){var m=b<<16|c<<8|d;if(null!=t._cache[m])return t._cache[m];for(var f=Infinity,g=-1,k=0,h,l,E;k<a.vcolors.length;k++){h=a.vcolors[k];l=h[0];E=h[1];h=h[2];l=t.distance(b,c,d,l,E,h);if(0===l){g=k;break}l<f&&(f=l,g=k)}return t._cache[m]=g}Object.defineProperty(h,"__esModule",{value:!0});var r=c("./CompositionHelper"),n=c("./EventEmitter"),g=c("./Viewport"),x=c("./handlers/Clipboard"),v=c("./utils/CircularList"),p=c("./EscapeSequences"),C=c("./InputHandler"),
u=c("./Parser"),y=c("./Renderer"),B=c("./Linkifier"),A=c("./SelectionManager"),D=c("./utils/CharMeasure"),l=c("./utils/Browser"),z=c("./utils/Mouse"),w="undefined"!=typeof window?window.document:null;d(a,n.EventEmitter);a.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};a.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");a.colors=function(){function b(a,b,m){d.push("#"+c(a)+
c(b)+c(m))}function c(a){a=a.toString(16);return 2>a.length?"0"+a:a}var d=a.tangoColors.slice(),f=[0,95,135,175,215,255],g;for(g=0;216>g;g++)b(f[g/36%6|0],f[g/6%6|0],f[g%6]);for(g=0;24>g;g++)f=8+10*g,b(f,f,f);return d}();a._colors=a.colors.slice();a.vcolors=function(){for(var b=[],c=a.colors,d=0,f;256>d;d++)f=parseInt(c[d].substring(1),16),b.push([f>>16&255,f>>8&255,f&255]);return b}();a.defaults={colors:a.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,cursorStyle:"block",
visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,tabStopWidth:8};a.options={};a.focus=null;(function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)})(function(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}(a.defaults),function(b){a[b]=a.defaults[b];a.options[b]=a.defaults[b]});a.prototype.focus=function(){return this.textarea.focus()};
a.prototype.getOption=function(b,c){if(!(b in a.defaults))throw Error('No option with key "'+b+'"');return"undefined"!==typeof this.options[b]?this.options[b]:this[b]};a.prototype.setOption=function(b,c){if(!(b in a.defaults))throw Error('No option with key "'+b+'"');switch(b){case "scrollback":if(c<this.rows)return console.warn("Setting the scrollback value less than the number of rows "+("("+this.rows+") is not allowed.")),!1;if(this.options[b]!==c){if(this.lines.length>c){var d=this.lines.length-
c,m=0>this.ydisp-d;this.lines.trimStart(d);this.ybase=Math.max(this.ybase-d,0);this.ydisp=Math.max(this.ydisp-d,0);m&&this.refresh(0,this.rows-1)}this.lines.maxLength=c;this.viewport.syncScrollArea()}}this[b]=c;this.options[b]=c;switch(b){case "cursorBlink":this.setCursorBlinking(c);break;case "cursorStyle":this.element.classList.toggle("xterm-cursor-style-underline","underline"===c);this.element.classList.toggle("xterm-cursor-style-bar","bar"===c);break;case "tabStopWidth":this.setupStops()}};a.prototype.restartCursorBlinking=
function(){this.setCursorBlinking(this.options.cursorBlink)};a.prototype.setCursorBlinking=function(a){this.element.classList.toggle("xterm-cursor-blink",a);this.clearCursorBlinkingInterval();if(a){var b=this;this.cursorBlinkInterval=setInterval(function(){b.element.classList.toggle("xterm-cursor-blink-on")},600)}};a.prototype.clearCursorBlinkingInterval=function(){this.element.classList.remove("xterm-cursor-blink-on");this.cursorBlinkInterval&&(clearInterval(this.cursorBlinkInterval),this.cursorBlinkInterval=
null)};a.bindFocus=function(b){k(b.textarea,"focus",function(c){b.sendFocus&&b.send(p.C0.ESC+"[I");b.element.classList.add("focus");b.showCursor();b.restartCursorBlinking.apply(b);a.focus=b;b.emit("focus",{terminal:b})})};a.prototype.blur=function(){return this.textarea.blur()};a.bindBlur=function(b){k(b.textarea,"blur",function(c){b.refresh(b.y,b.y);b.sendFocus&&b.send(p.C0.ESC+"[O");b.element.classList.remove("focus");b.clearCursorBlinkingInterval.apply(b);a.focus=null;b.emit("blur",{terminal:b})})};
a.prototype.initGlobal=function(){var b=this,c=this;a.bindKeys(this);a.bindFocus(this);a.bindBlur(this);k(this.element,"copy",function(a){b.mouseEvents||x.copyHandler(a,c,b.selectionManager)});var d=function(a){return x.pasteHandler(a,c)};k(this.textarea,"paste",d);k(this.element,"paste",d);c.browser.isFirefox?k(this.element,"mousedown",function(a){2==a.button&&x.rightClickHandler(a,b.textarea,b.selectionManager)}):k(this.element,"contextmenu",function(a){x.rightClickHandler(a,b.textarea,b.selectionManager)});
c.browser.isLinux&&k(this.element,"auxclick",function(a){1===a.button&&x.moveTextAreaUnderMouseCursor(a,b.textarea,b.selectionManager)})};a.bindKeys=function(a){k(a.element,"keydown",function(b){w.activeElement==this&&a.keyDown(b)},!0);k(a.element,"keypress",function(b){w.activeElement==this&&a.keyPress(b)},!0);k(a.element,"keyup",function(b){16!==b.keyCode&&17!==b.keyCode&&18!==b.keyCode&&a.focus(a)},!0);k(a.textarea,"keydown",function(b){a.keyDown(b)},!0);k(a.textarea,"keypress",function(b){a.keyPress(b);
this.value=""},!0);k(a.textarea,"compositionstart",a.compositionHelper.compositionstart.bind(a.compositionHelper));k(a.textarea,"compositionupdate",a.compositionHelper.compositionupdate.bind(a.compositionHelper));k(a.textarea,"compositionend",a.compositionHelper.compositionend.bind(a.compositionHelper));a.on("refresh",a.compositionHelper.updateCompositionElements.bind(a.compositionHelper));a.on("refresh",function(b){a.queueLinkification(b.start,b.end)})};a.prototype.insertRow=function(a){"object"!=
typeof a&&(a=w.createElement("div"));this.rowContainer.appendChild(a);this.children.push(a);return a};a.prototype.open=function(a,b){var c=this,d=this,m=0;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");
this.element.classList.add("xterm-theme-"+this.theme);this.setCursorBlinking(this.options.cursorBlink);this.element.setAttribute("tabindex",0);this.viewportElement=w.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=w.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);this.selectionContainer=w.createElement("div");this.selectionContainer.classList.add("xterm-selection");
this.element.appendChild(this.selectionContainer);this.rowContainer=w.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.linkifier.attachToDom(w,this.children);this.helperContainer=w.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=w.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect",
"off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){d.emit("focus",{terminal:d})});this.textarea.addEventListener("blur",function(){d.emit("blur",{terminal:d})});this.helperContainer.appendChild(this.textarea);this.compositionView=w.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new r.CompositionHelper(this.textarea,this.compositionView,
this);this.helperContainer.appendChild(this.compositionView);this.charSizeStyleElement=w.createElement("style");for(this.helperContainer.appendChild(this.charSizeStyleElement);m<this.rows;m++)this.insertRow();this.parent.appendChild(this.element);this.charMeasure=new D.CharMeasure(w,this.helperContainer);this.charMeasure.on("charsizechanged",function(){d.updateCharSizeStyles()});this.charMeasure.measure();this.viewport=new g.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasure);
this.renderer=new y.Renderer(this);this.selectionManager=new A.SelectionManager(this,this.lines,this.rowContainer,this.charMeasure);this.selectionManager.on("refresh",function(a){c.renderer.refreshSelection(a.start,a.end)});this.selectionManager.on("newselection",function(a){c.textarea.value=a;c.textarea.focus();c.textarea.select()});this.on("scroll",function(){return c.selectionManager.refresh()});this.viewportElement.addEventListener("scroll",function(){return c.selectionManager.refresh()});this.refresh(0,
this.rows-1);this.initGlobal();"undefined"==typeof b&&(console.warn("You did not pass the `focus` argument in `Terminal.prototype.open()`.\nThe `focus` argument now defaults to `true` but starting with xterm.js 3.0 it will default to `false`."),b=!0);b&&this.focus();k(this.element,"click",function(){var a=w.getSelection(),b=a.isCollapsed;("boolean"==typeof b?b:"Range"!=a.type)&&d.focus()});this.bindMouse();this.emit("open")};a.loadAddon=function(a,b){if("object"===typeof h&&"object"===typeof f)return c("./addons/"+
a+"/"+a);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};a.prototype.updateCharSizeStyles=function(){this.charSizeStyleElement.textContent=".xterm-wide-char{width:"+2*this.charMeasure.width+"px;}"+(".xterm-normal-char{width:"+this.charMeasure.width+"px;}")+(".xterm-rows > div{height:"+this.charMeasure.height+"px;}")};a.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var b=null!=a.button?+a.button:null!=a.which?
a.which-1:null;g.browser.isMSIE&&(b=1===b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0<a.wheelDeltaY?64:65}var c=a.shiftKey?4:0;var m=a.metaKey?8:0;var f=a.ctrlKey?16:0;c=c|m|f;g.vt200Mouse?c&=f:g.normalMouse||(c=0);b=32+(c<<2)+b;if(f=z.getRawByteCoords(a,g.rowContainer,g.charMeasure,g.cols,g.rows))switch(d(b,f),a.overrideType||a.type){case "mousedown":h=b;break;case "mouseup":h=32}}function b(a){var b=h;(a=z.getRawByteCoords(a,g.rowContainer,
g.charMeasure,g.cols,g.rows))&&d(b+32,a)}function c(a,b){if(g.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(2047<b&&(b=2047),a.push(192|b>>6),a.push(128|b&63))}else{if(255===b)return a.push(0);127<b&&(b=127);a.push(b)}}function d(a,b){if(g.vt300Mouse){a&=3;b.x-=32;b.y-=32;var d=p.C0.ESC+"[24";if(0===a)d+="1";else if(1===a)d+="3";else if(2===a)d+="5";else{if(3===a)return;d+="0"}d+="~["+b.x+","+b.y+"]\r";g.send(d)}else g.decLocator?(a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&
(a=3),g.send(p.C0.ESC+"["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w")):g.urxvtMouse?(b.x-=32,b.y-=32,b.x++,b.y++,g.send(p.C0.ESC+"["+a+";"+b.x+";"+b.y+"M")):g.sgrMouse?(b.x-=32,b.y-=32,g.send(p.C0.ESC+"[<"+((3===(a&3)?a&-4:a)-32)+";"+b.x+";"+b.y+(3===(a&3)?"m":"M"))):(d=[],c(d,a),c(d,b.x),c(d,b.y),g.send(p.C0.ESC+"[M"+String.fromCharCode.apply(String,d)))}var f=this.element,g=this,h=32;k(f,"mousedown",function(c){if(g.mouseEvents){a(c);g.focus();if(g.vt200Mouse)return c.overrideType="mouseup",
a(c),g.cancel(c);g.normalMouse&&k(g.document,"mousemove",b);g.x10Mouse||k(g.document,"mouseup",function F(c){a(c);g.normalMouse&&q(g.document,"mousemove",b);q(g.document,"mouseup",F);return g.cancel(c)});return g.cancel(c)}});k(f,"wheel",function(b){if(g.mouseEvents&&!(g.x10Mouse||g.vt300Mouse||g.decLocator))return a(b),g.cancel(b)});k(f,"wheel",function(a){if(!g.mouseEvents)return g.viewport.onWheel(a),g.cancel(a)});k(f,"touchstart",function(a){if(!g.mouseEvents)return g.viewport.onTouchStart(a),
g.cancel(a)});k(f,"touchmove",function(a){if(!g.mouseEvents)return g.viewport.onTouchMove(a),g.cancel(a)})};a.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};a.prototype.refresh=function(a,b){this.renderer&&this.renderer.queueRefresh(a,b)};a.prototype.queueLinkification=function(a,b){if(this.linkifier)for(;a<=b;a++)this.linkifier.linkifyRow(a)};
a.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};a.prototype.scroll=function(a){this.lines.length===this.lines.maxLength&&(this.lines.trimStart(1),this.ybase--,0!==this.ydisp&&this.ydisp--);this.ybase++;this.userScrolling||(this.ydisp=this.ybase);var b=this.ybase+this.rows-1;b-=this.rows-1-this.scrollBottom;b===this.lines.length?this.lines.push(this.blankLine(void 0,a)):this.lines.splice(b,0,this.blankLine(void 0,a));0!==this.scrollTop&&(0!==this.ybase&&
(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};a.prototype.scrollDisp=function(a,b){if(0>a){if(0===this.ydisp)return;this.userScrolling=!0}else a+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=a;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);b||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-
1)};a.prototype.scrollPages=function(a){this.scrollDisp(a*(this.rows-1))};a.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};a.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};a.prototype.write=function(a){this.writeBuffer.push(a);this.options.useFlowControl&&!this.xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.send(p.C0.DC3),this.xoffSentToCatchUp=!0);if(!this.writeInProgress&&0<this.writeBuffer.length){this.writeInProgress=!0;var b=this;setTimeout(function(){b.innerWrite()})}};
a.prototype.innerWrite=function(){for(var a=this.writeBuffer.splice(0,300);0<a.length;){var b=a.shift();this.xoffSentToCatchUp&&0===a.length&&0===this.writeBuffer.length&&(this.send(p.C0.DC1),this.xoffSentToCatchUp=!1);this.refreshEnd=this.refreshStart=this.y;b=this.parser.parse(b);this.parser.setState(b);this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)}if(0<this.writeBuffer.length){var c=this;setTimeout(function(){c.innerWrite()},0)}else this.writeInProgress=!1};a.prototype.writeln=
function(a){this.write(a+"\r\n")};a.prototype.attachCustomKeydownHandler=function(a){console.warn("attachCustomKeydownHandler() is DEPRECATED and will be removed soon. Please use attachCustomKeyEventHandler() instead.");this.attachCustomKeyEventHandler(a)};a.prototype.attachCustomKeyEventHandler=function(a){this.customKeyEventHandler=a};a.prototype.setHypertextLinkHandler=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext link handler before Terminal.open is called");this.linkifier.setHypertextLinkHandler(a);
this.refresh(0,this.rows-1)};a.prototype.setHypertextValidationCallback=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext validation callback before Terminal.open is called");this.linkifier.setHypertextValidationCallback(a);this.refresh(0,this.rows-1)};a.prototype.registerLinkMatcher=function(a,b,c){if(this.linkifier)return a=this.linkifier.registerLinkMatcher(a,b,c),this.refresh(0,this.rows-1),a};a.prototype.deregisterLinkMatcher=function(a){this.linkifier&&this.linkifier.deregisterLinkMatcher(a)&&
this.refresh(0,this.rows-1)};a.prototype.hasSelection=function(){return this.selectionManager.hasSelection};a.prototype.getSelection=function(){return this.selectionManager.selectionText};a.prototype.clearSelection=function(){this.selectionManager.clearSelection()};a.prototype.selectAll=function(){this.selectionManager.selectAll()};a.prototype.keyDown=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;this.restartCursorBlinking();if(!this.compositionHelper.keydown.bind(this.compositionHelper)(a))return this.ybase!==
this.ydisp&&this.scrollToBottom(),!1;var c=this.evaluateKeyEscapeSequence(a);c.key===p.C0.DC3?this.writeStopped=!0:c.key===p.C0.DC1&&(this.writeStopped=!1);if(c.scrollDisp)return this.scrollDisp(c.scrollDisp),this.cancel(a,!0);if(b(this,a))return!0;c.cancel&&this.cancel(a,!0);if(!c.key)return!0;this.emit("keydown",a);this.emit("key",c.key,a);this.showCursor();this.handler(c.key);return this.cancel(a,!0)};a.prototype.evaluateKeyEscapeSequence=function(a){var b={cancel:!1,key:void 0,scrollDisp:void 0},
c=a.shiftKey<<0|a.altKey<<1|a.ctrlKey<<2|a.metaKey<<3;switch(a.keyCode){case 8:if(a.shiftKey){b.key=p.C0.BS;break}b.key=p.C0.DEL;break;case 9:if(a.shiftKey){b.key=p.C0.ESC+"[Z";break}b.key=p.C0.HT;b.cancel=!0;break;case 13:b.key=p.C0.CR;b.cancel=!0;break;case 27:b.key=p.C0.ESC;b.cancel=!0;break;case 37:c?(b.key=p.C0.ESC+"[1;"+(c+1)+"D",b.key==p.C0.ESC+"[1;3D"&&(b.key=this.browser.isMac?p.C0.ESC+"b":p.C0.ESC+"[1;5D")):b.key=this.applicationCursor?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:c?(b.key=
p.C0.ESC+"[1;"+(c+1)+"C",b.key==p.C0.ESC+"[1;3C"&&(b.key=this.browser.isMac?p.C0.ESC+"f":p.C0.ESC+"[1;5C")):b.key=this.applicationCursor?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:c?(b.key=p.C0.ESC+"[1;"+(c+1)+"A",b.key==p.C0.ESC+"[1;3A"&&(b.key=p.C0.ESC+"[1;5A")):b.key=this.applicationCursor?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:c?(b.key=p.C0.ESC+"[1;"+(c+1)+"B",b.key==p.C0.ESC+"[1;3B"&&(b.key=p.C0.ESC+"[1;5B")):b.key=this.applicationCursor?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:a.shiftKey||
a.ctrlKey||(b.key=p.C0.ESC+"[2~");break;case 46:b.key=c?p.C0.ESC+"[3;"+(c+1)+"~":p.C0.ESC+"[3~";break;case 36:b.key=c?p.C0.ESC+"[1;"+(c+1)+"H":this.applicationCursor?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:b.key=c?p.C0.ESC+"[1;"+(c+1)+"F":this.applicationCursor?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:a.shiftKey?b.scrollDisp=-(this.rows-1):b.key=p.C0.ESC+"[5~";break;case 34:a.shiftKey?b.scrollDisp=this.rows-1:b.key=p.C0.ESC+"[6~";break;case 112:b.key=c?p.C0.ESC+"[1;"+(c+1)+"P":p.C0.ESC+"OP";break;
case 113:b.key=c?p.C0.ESC+"[1;"+(c+1)+"Q":p.C0.ESC+"OQ";break;case 114:b.key=c?p.C0.ESC+"[1;"+(c+1)+"R":p.C0.ESC+"OR";break;case 115:b.key=c?p.C0.ESC+"[1;"+(c+1)+"S":p.C0.ESC+"OS";break;case 116:b.key=c?p.C0.ESC+"[15;"+(c+1)+"~":p.C0.ESC+"[15~";break;case 117:b.key=c?p.C0.ESC+"[17;"+(c+1)+"~":p.C0.ESC+"[17~";break;case 118:b.key=c?p.C0.ESC+"[18;"+(c+1)+"~":p.C0.ESC+"[18~";break;case 119:b.key=c?p.C0.ESC+"[19;"+(c+1)+"~":p.C0.ESC+"[19~";break;case 120:b.key=c?p.C0.ESC+"[20;"+(c+1)+"~":p.C0.ESC+"[20~";
break;case 121:b.key=c?p.C0.ESC+"[21;"+(c+1)+"~":p.C0.ESC+"[21~";break;case 122:b.key=c?p.C0.ESC+"[23;"+(c+1)+"~":p.C0.ESC+"[23~";break;case 123:b.key=c?p.C0.ESC+"[24;"+(c+1)+"~":p.C0.ESC+"[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?this.browser.isMac||!a.altKey||a.ctrlKey||a.metaKey?this.browser.isMac&&!a.altKey&&!a.ctrlKey&&a.metaKey&&65===a.keyCode&&this.selectAll():65<=a.keyCode&&90>=a.keyCode?b.key=p.C0.ESC+String.fromCharCode(a.keyCode+32):192===a.keyCode?b.key=p.C0.ESC+
"`":48<=a.keyCode&&57>=a.keyCode&&(b.key=p.C0.ESC+(a.keyCode-48)):65<=a.keyCode&&90>=a.keyCode?b.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?b.key=String.fromCharCode(0):51<=a.keyCode&&55>=a.keyCode?b.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?b.key=String.fromCharCode(127):219===a.keyCode?b.key=String.fromCharCode(27):220===a.keyCode?b.key=String.fromCharCode(28):221===a.keyCode&&(b.key=String.fromCharCode(29))}return b};a.prototype.setgLevel=function(a){this.glevel=a;this.charset=
this.charsets[a]};a.prototype.setgCharset=function(a,b){this.charsets[a]=b;this.glevel===a&&(this.charset=b)};a.prototype.keyPress=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;this.cancel(a);if(a.charCode)var c=a.charCode;else if(null==a.which)c=a.keyCode;else if(0!==a.which&&0!==a.charCode)c=a.which;else return!1;if(!c||(a.altKey||a.ctrlKey||a.metaKey)&&!b(this,a))return!1;c=String.fromCharCode(c);this.emit("keypress",c,a);this.emit("key",c,a);this.showCursor();
this.handler(c);return!0};a.prototype.send=function(a){var b=this;this.queue||setTimeout(function(){b.handler(b.queue);b.queue=""},1);this.queue+=a};a.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white";setTimeout(function(){a.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};a.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,
a)}};a.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,a)}};a.prototype.resize=function(a,b){if(!isNaN(a)&&!isNaN(b)){b>this.getOption("scrollback")&&this.setOption("scrollback",b);var c;if(a!==this.cols||b!==this.rows){1>a&&(a=1);1>b&&(b=1);var d=this.cols;if(d<a)for(d=[this.defAttr," ",1],c=this.lines.length;c--;)for(;this.lines.get(c).length<a;)this.lines.get(c).push(d);
this.cols=a;this.setupStops(this.cols);d=this.rows;var f=0;if(d<b)for(;d++<b;)this.lines.length<b+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+this.y+f+1?(this.ybase--,f++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<b&&this.insertRow();else for(;d-- >b;)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>b&&(c=this.children.shift())&&c.parentNode.removeChild(c);
this.rows=b;this.y>=b&&(this.y=b-1);f&&(this.y+=f);this.x>=a&&(this.x=a-1);this.scrollTop=0;this.scrollBottom=b-1;this.charMeasure.measure();this.refresh(0,this.rows-1);this.normal=null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:a,rows:b})}}};a.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};a.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};a.prototype.setupStops=function(a){null!=
a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this.cols;a+=this.getOption("tabStopWidth"))this.tabs[a]=!0};a.prototype.prevStop=function(a){null==a&&(a=this.x);for(;!this.tabs[--a]&&0<a;);return a>=this.cols?this.cols-1:0>a?0:a};a.prototype.nextStop=function(a){null==a&&(a=this.x);for(;!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a};a.prototype.eraseRight=function(a,b){var c=this.lines.get(this.ybase+b);if(c){for(var d=[this.eraseAttr()," ",1];a<this.cols;a++)c[a]=
d;this.updateRange(b)}};a.prototype.eraseLeft=function(a,b){var c=this.lines.get(this.ybase+b);if(c){var d=[this.eraseAttr()," ",1];for(a++;a--;)c[a]=d;this.updateRange(b)}};a.prototype.clear=function(){if(0!==this.ybase||0!==this.y){this.lines.set(0,this.lines.get(this.ybase+this.y));this.lines.length=1;this.y=this.ybase=this.ydisp=0;for(var a=1;a<this.rows;a++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};a.prototype.eraseLine=function(a){this.eraseRight(0,
a)};a.prototype.blankLine=function(a,b){a=[a?this.eraseAttr():this.defAttr," ",1];var c=[],d=0;b&&(c.isWrapped=b);for(;d<this.cols;d++)c[d]=a;return c};a.prototype.ch=function(a){return a?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};a.prototype.is=function(a){return 0===(this.termName+"").indexOf(a)};a.prototype.handler=function(a){this.options.disableStdin||(this.ybase!==this.ydisp&&this.scrollToBottom(),this.emit("data",a))};a.prototype.handleTitle=function(a){this.emit("title",a)};a.prototype.index=
function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.x>=this.cols&&this.x--};a.prototype.reverseIndex=function(){this.y===this.scrollTop?(this.lines.shiftElements(this.y+this.ybase,this.rows-1,1),this.lines.set(this.y+this.ybase,this.blankLine(!0)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)):this.y--};a.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var b=this.customKeyEventHandler,c=this.cursorBlinkInterval;a.call(this,
this.options);this.customKeyEventHandler=b;this.cursorBlinkInterval=c;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};a.prototype.tabSet=function(){this.tabs[this.x]=!0};a.prototype.matchColor=t;t._cache={};t.distance=function(a,b,c,d,f,g){return Math.pow(30*(a-d),2)+Math.pow(59*(b-f),2)+Math.pow(11*(c-g),2)};a.EventEmitter=n.EventEmitter;a.inherits=d;a.on=k;a.off=q;a.cancel=function(a,b){if(this.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1};f.exports=a},{"./CompositionHelper":2,
"./EscapeSequences":3,"./EventEmitter":4,"./InputHandler":5,"./Linkifier":6,"./Parser":7,"./Renderer":8,"./SelectionManager":9,"./Viewport":11,"./handlers/Clipboard":12,"./utils/Browser":13,"./utils/CharMeasure":14,"./utils/CircularList":15,"./utils/Mouse":18}]},{},[19])(19)});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,d,g){e!=Array.prototype&&e!=Object.prototype&&(e[d]=g.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,d,g,k){if(d){g=$jscomp.global;e=e.split(".");for(k=0;k<e.length-1;k++){var b=e[k];b in g||(g[b]={});g=g[b]}e=e[e.length-1];k=g[e];d=d(k);d!=k&&null!=d&&$jscomp.defineProperty(g,e,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.setPrototypeOf",function(e){return e?e:"object"!=typeof"".__proto__?null:function(e,g){e.__proto__=g;if(e.__proto__!==g)throw new TypeError(e+" is not extensible");return e}},"es6","es5");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var d=0;return $jscomp.iteratorPrototype(function(){return d<e.length?{done:!1,value:e[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,d){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var g=0,k={next:function(){if(g<e.length){var b=g++;return{value:d(b,e[b]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");
var BigInteger=function(){function e(h,q,f){null!=h&&("number"==typeof h?this.fromNumber(h,q,f):null==q&&"string"!=typeof h?this.fromString(h,256):this.fromString(h,q))}function d(){return new e(null)}function g(h,q,f,C,a,b){for(;0<=--b;){var e=q*this[h++]+f[C]+a;a=Math.floor(e/67108864);f[C++]=e&67108863}return a}function k(h,a,f,C,b,e){var q=a&32767;for(a>>=15;0<=--e;){var c=this[h]&32767,d=this[h++]>>15,p=a*c+d*q,c=q*c+((p&32767)<<15)+f[C]+(b&1073741823);b=(c>>>30)+(p>>>15)+a*d+(b>>>30);f[C++]=
c&1073741823}return b}function b(h,a,f,C,b,e){var q=a&16383;for(a>>=14;0<=--e;){var c=this[h]&16383,d=this[h++]>>14,p=a*c+d*q,c=q*c+((p&16383)<<14)+f[C]+b;b=(c>>28)+(p>>14)+a*d;f[C++]=c&268435455}return b}function l(h,a){h=y[h.charCodeAt(a)];return null==h?-1:h}function m(h){var a=d();a.fromInt(h);return a}function c(h){var a=1,f;0!=(f=h>>>16)&&(h=f,a+=16);0!=(f=h>>8)&&(h=f,a+=8);0!=(f=h>>4)&&(h=f,a+=4);0!=(f=h>>2)&&(h=f,a+=2);0!=h>>1&&(a+=1);return a}function a(h){this.m=h}function w(h){this.m=h;
this.mp=h.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<h.DB-15)-1;this.mt2=2*h.t}function r(h,a){return h&a}function p(h,a){return h|a}function t(h,a){return h^a}function x(h,a){return h&~a}function u(){}function n(h){return h}function B(h){this.r2=d();this.q3=d();e.ONE.dlShiftTo(2*h.t,this.r2);this.mu=this.r2.divide(h);this.m=h}var v;"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=k,v=30):"Netscape"!=navigator.appName?(e.prototype.am=g,v=26):(e.prototype.am=
b,v=28);e.prototype.DB=v;e.prototype.DM=(1<<v)-1;e.prototype.DV=1<<v;e.prototype.FV=Math.pow(2,52);e.prototype.F1=52-v;e.prototype.F2=2*v-52;var y=[],A;v=48;for(A=0;9>=A;++A)y[v++]=A;v=97;for(A=10;36>A;++A)y[v++]=A;v=65;for(A=10;36>A;++A)y[v++]=A;a.prototype.convert=function(h){return 0>h.s||0<=h.compareTo(this.m)?h.mod(this.m):h};a.prototype.revert=function(h){return h};a.prototype.reduce=function(h){h.divRemTo(this.m,null,h)};a.prototype.mulTo=function(h,a,f){h.multiplyTo(a,f);this.reduce(f)};a.prototype.sqrTo=
function(h,a){h.squareTo(a);this.reduce(a)};w.prototype.convert=function(h){var a=d();h.abs().dlShiftTo(this.m.t,a);a.divRemTo(this.m,null,a);0>h.s&&0<a.compareTo(e.ZERO)&&this.m.subTo(a,a);return a};w.prototype.revert=function(h){var a=d();h.copyTo(a);this.reduce(a);return a};w.prototype.reduce=function(h){for(;h.t<=this.mt2;)h[h.t++]=0;for(var a=0;a<this.m.t;++a){var f=h[a]&32767,C=f*this.mpl+((f*this.mph+(h[a]>>15)*this.mpl&this.um)<<15)&h.DM,f=a+this.m.t;for(h[f]+=this.m.am(0,C,h,a,0,this.m.t);h[f]>=
h.DV;)h[f]-=h.DV,h[++f]++}h.clamp();h.drShiftTo(this.m.t,h);0<=h.compareTo(this.m)&&h.subTo(this.m,h)};w.prototype.mulTo=function(a,q,f){a.multiplyTo(q,f);this.reduce(f)};w.prototype.sqrTo=function(a,q){a.squareTo(q);this.reduce(q)};e.prototype.copyTo=function(a){for(var h=this.t-1;0<=h;--h)a[h]=this[h];a.t=this.t;a.s=this.s};e.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};e.prototype.fromString=function(a,q){if(16==q)q=4;else if(8==q)q=3;else if(256==
q)q=8;else if(2==q)q=1;else if(32==q)q=5;else if(4==q)q=2;else{this.fromRadix(a,q);return}this.s=this.t=0;for(var f=a.length,h=!1,b=0;0<=--f;){var c=8==q?a[f]&255:l(a,f);0>c?"-"==a.charAt(f)&&(h=!0):(h=!1,0==b?this[this.t++]=c:b+q>this.DB?(this[this.t-1]|=(c&(1<<this.DB-b)-1)<<b,this[this.t++]=c>>this.DB-b):this[this.t-1]|=c<<b,b+=q,b>=this.DB&&(b-=this.DB))}8==q&&0!=(a[0]&128)&&(this.s=-1,0<b&&(this[this.t-1]|=(1<<this.DB-b)-1<<b));this.clamp();h&&e.ZERO.subTo(this,this)};e.prototype.clamp=function(){for(var a=
this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};e.prototype.dlShiftTo=function(a,b){var f;for(f=this.t-1;0<=f;--f)b[f+a]=this[f];for(f=a-1;0<=f;--f)b[f]=0;b.t=this.t+a;b.s=this.s};e.prototype.drShiftTo=function(a,b){for(var f=a;f<this.t;++f)b[f-a]=this[f];b.t=Math.max(this.t-a,0);b.s=this.s};e.prototype.lShiftTo=function(a,b){var f=a%this.DB,h=this.DB-f,q=(1<<h)-1;a=Math.floor(a/this.DB);var e=this.s<<f&this.DM,c;for(c=this.t-1;0<=c;--c)b[c+a+1]=this[c]>>h|e,e=(this[c]&q)<<f;for(c=a-1;0<=c;--c)b[c]=
0;b[a]=e;b.t=this.t+a+1;b.s=this.s;b.clamp()};e.prototype.rShiftTo=function(a,b){b.s=this.s;var f=Math.floor(a/this.DB);if(f>=this.t)b.t=0;else{a%=this.DB;var h=this.DB-a,e=(1<<a)-1;b[0]=this[f]>>a;for(var q=f+1;q<this.t;++q)b[q-f-1]|=(this[q]&e)<<h,b[q-f]=this[q]>>a;0<a&&(b[this.t-f-1]|=(this.s&e)<<h);b.t=this.t-f;b.clamp()}};e.prototype.subTo=function(a,b){for(var f=0,h=0,e=Math.min(a.t,this.t);f<e;)h+=this[f]-a[f],b[f++]=h&this.DM,h>>=this.DB;if(a.t<this.t){for(h-=a.s;f<this.t;)h+=this[f],b[f++]=
h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;f<a.t;)h-=a[f],b[f++]=h&this.DM,h>>=this.DB;h-=a.s}b.s=0>h?-1:0;-1>h?b[f++]=this.DV+h:0<h&&(b[f++]=h);b.t=f;b.clamp()};e.prototype.multiplyTo=function(a,b){var f=this.abs(),h=a.abs(),q=f.t;for(b.t=q+h.t;0<=--q;)b[q]=0;for(q=0;q<h.t;++q)b[q+f.t]=f.am(0,h[q],b,q,0,f.t);b.s=0;b.clamp();this.s!=a.s&&e.ZERO.subTo(b,b)};e.prototype.squareTo=function(a){for(var h=this.abs(),f=a.t=2*h.t;0<=--f;)a[f]=0;for(f=0;f<h.t-1;++f){var b=h.am(f,h[f],a,2*f,0,1);(a[f+
h.t]+=h.am(f+1,2*h[f],a,2*f+1,b,h.t-f-1))>=h.DV&&(a[f+h.t]-=h.DV,a[f+h.t+1]=1)}0<a.t&&(a[a.t-1]+=h.am(f,h[f],a,2*f,0,1));a.s=0;a.clamp()};e.prototype.divRemTo=function(a,b,f){var h=a.abs();if(!(0>=h.t)){var q=this.abs();if(q.t<h.t)null!=b&&b.fromInt(0),null!=f&&this.copyTo(f);else{null==f&&(f=d());var p=d(),l=this.s;a=a.s;var m=this.DB-c(h[h.t-1]);0<m?(h.lShiftTo(m,p),q.lShiftTo(m,f)):(h.copyTo(p),q.copyTo(f));h=p.t;q=p[h-1];if(0!=q){var t=q*(1<<this.F1)+(1<h?p[h-2]>>this.F2:0),r=this.FV/t,t=(1<<
this.F1)/t,w=1<<this.F2,k=f.t,g=k-h,n=null==b?d():b;p.dlShiftTo(g,n);0<=f.compareTo(n)&&(f[f.t++]=1,f.subTo(n,f));e.ONE.dlShiftTo(h,n);for(n.subTo(p,p);p.t<h;)p[p.t++]=0;for(;0<=--g;){var u=f[--k]==q?this.DM:Math.floor(f[k]*r+(f[k-1]+w)*t);if((f[k]+=p.am(0,u,f,g,0,h))<u)for(p.dlShiftTo(g,n),f.subTo(n,f);f[k]<--u;)f.subTo(n,f)}null!=b&&(f.drShiftTo(h,b),l!=a&&e.ZERO.subTo(b,b));f.t=h;f.clamp();0<m&&f.rShiftTo(m,f);0>l&&e.ZERO.subTo(f,f)}}}};e.prototype.invDigit=function(){if(1>this.t)return 0;var a=
this[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b};e.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};e.prototype.exp=function(a,b){if(4294967295<a||1>a)return e.ONE;var f=d();var h=d();var q=b.convert(this),p=c(a)-1;for(q.copyTo(f);0<=--p;)if(b.sqrTo(f,h),0<(a&1<<p))b.mulTo(h,q,f);else{var l=f;f=h;h=l}return b.revert(f)};e.prototype.toString=function(a){if(0>this.s)return"-"+
this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var b=(1<<a)-1,f,h=!1,e="",c=this.t,p=this.DB-c*this.DB%a;if(0<c--)for(p<this.DB&&0<(f=this[c]>>p)&&(h=!0,e="0123456789abcdefghijklmnopqrstuvwxyz".charAt(f));0<=c;)p<a?(f=(this[c]&(1<<p)-1)<<a-p,f|=this[--c]>>(p+=this.DB-a)):(f=this[c]>>(p-=a)&b,0>=p&&(p+=this.DB,--c)),0<f&&(h=!0),h&&(e+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(f));return h?e:"0"};e.prototype.negate=
function(){var a=d();e.ZERO.subTo(this,a);return a};e.prototype.abs=function(){return 0>this.s?this.negate():this};e.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var f=this.t,b=f-a.t;if(0!=b)return b;for(;0<=--f;)if(0!=(b=this[f]-a[f]))return b;return 0};e.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+c(this[this.t-1]^this.s&this.DM)};e.prototype.mod=function(a){var b=d();this.abs().divRemTo(a,null,b);0>this.s&&0<b.compareTo(e.ZERO)&&a.subTo(b,b);return b};
e.prototype.modPowInt=function(b,e){e=256>b||e.isEven()?new a(e):new w(e);return this.exp(b,e)};e.ZERO=m(0);e.ONE=m(1);u.prototype.convert=n;u.prototype.revert=n;u.prototype.mulTo=function(a,b,f){a.multiplyTo(b,f)};u.prototype.sqrTo=function(a,b){a.squareTo(b)};B.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var b=d();a.copyTo(b);this.reduce(b);return b};B.prototype.revert=function(a){return a};B.prototype.reduce=function(a){a.drShiftTo(this.m.t-
1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};B.prototype.mulTo=function(a,b,f){a.multiplyTo(b,f);this.reduce(f)};B.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};var z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],D=67108864/z[z.length-1];e.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};e.prototype.toRadix=function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var b=this.chunkSize(a),b=Math.pow(a,
b),f=m(b),h=d(),e=d(),c="";for(this.divRemTo(f,h,e);0<h.signum();)c=(b+e.intValue()).toString(a).substr(1)+c,h.divRemTo(f,h,e);return e.intValue().toString(a)+c};e.prototype.fromRadix=function(a,b){this.fromInt(0);null==b&&(b=10);for(var f=this.chunkSize(b),h=Math.pow(b,f),c=!1,p=0,d=0,m=0;m<a.length;++m){var q=l(a,m);0>q?"-"==a.charAt(m)&&0==this.signum()&&(c=!0):(d=b*d+q,++p>=f&&(this.dMultiply(h),this.dAddOffset(d,0),d=p=0))}0<p&&(this.dMultiply(Math.pow(b,p)),this.dAddOffset(d,0));c&&e.ZERO.subTo(this,
this)};e.prototype.fromNumber=function(a,b,f){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,f),this.testBit(a-1)||this.bitwiseTo(e.ONE.shiftLeft(a-1),p,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(e.ONE.shiftLeft(a-1),this);else{f=[];var h=a&7;f.length=(a>>3)+1;b.nextBytes(f);f[0]=0<h?f[0]&(1<<h)-1:0;this.fromString(f,256)}};e.prototype.bitwiseTo=function(a,b,f){var h,e=Math.min(a.t,this.t);for(h=
0;h<e;++h)f[h]=b(this[h],a[h]);if(a.t<this.t){var c=a.s&this.DM;for(h=e;h<this.t;++h)f[h]=b(this[h],c);f.t=this.t}else{c=this.s&this.DM;for(h=e;h<a.t;++h)f[h]=b(c,a[h]);f.t=a.t}f.s=b(this.s,a.s);f.clamp()};e.prototype.changeBit=function(a,b){a=e.ONE.shiftLeft(a);this.bitwiseTo(a,b,a);return a};e.prototype.addTo=function(a,b){for(var f=0,h=0,e=Math.min(a.t,this.t);f<e;)h+=this[f]+a[f],b[f++]=h&this.DM,h>>=this.DB;if(a.t<this.t){for(h+=a.s;f<this.t;)h+=this[f],b[f++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=
this.s;f<a.t;)h+=a[f],b[f++]=h&this.DM,h>>=this.DB;h+=a.s}b.s=0>h?-1:0;0<h?b[f++]=h:-1>h&&(b[f++]=this.DV+h);b.t=f;b.clamp()};e.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};e.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}};e.prototype.multiplyLowerTo=function(a,b,f){var h=Math.min(this.t+a.t,b);f.s=0;for(f.t=h;0<h;)f[--h]=
0;var e;for(e=f.t-this.t;h<e;++h)f[h+this.t]=this.am(0,a[h],f,h,0,this.t);for(e=Math.min(a.t,b);h<e;++h)this.am(0,a[h],f,h,0,b-h);f.clamp()};e.prototype.multiplyUpperTo=function(a,b,f){--b;var h=f.t=this.t+a.t-b;for(f.s=0;0<=--h;)f[h]=0;for(h=Math.max(b-this.t,0);h<a.t;++h)f[this.t+h-b]=this.am(b-h,a[h],f,0,0,this.t+h-b);f.clamp();f.drShiftTo(1,f)};e.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,f=0>this.s?a-1:0;if(0<this.t)if(0==b)f=this[0]%a;else for(var h=this.t-1;0<=h;--h)f=(b*
f+this[h])%a;return f};e.prototype.millerRabin=function(a){var b=this.subtract(e.ONE),f=b.getLowestSetBit();if(0>=f)return!1;var h=b.shiftRight(f);a=a+1>>1;a>z.length&&(a=z.length);for(var c=d(),p=0;p<a;++p){c.fromInt(z[p]);var l=c.modPow(h,this);if(0!=l.compareTo(e.ONE)&&0!=l.compareTo(b)){for(var m=1;m++<f&&0!=l.compareTo(b);)if(l=l.modPowInt(2,this),0==l.compareTo(e.ONE))return!1;if(0!=l.compareTo(b))return!1}}return!0};e.prototype.clone=function(){var a=d();this.copyTo(a);return a};e.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};e.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};e.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};e.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};e.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var f=this.DB-
a*this.DB%8,e,c=0;if(0<a--)for(f<this.DB&&(e=this[a]>>f)!=(this.s&this.DM)>>f&&(b[c++]=e|this.s<<this.DB-f);0<=a;)if(8>f?(e=(this[a]&(1<<f)-1)<<8-f,e|=this[--a]>>(f+=this.DB-8)):(e=this[a]>>(f-=8)&255,0>=f&&(f+=this.DB,--a)),0!=(e&128)&&(e|=-256),0==c&&(this.s&128)!=(e&128)&&++c,0<c||e!=this.s)b[c++]=e;return b};e.prototype.equals=function(a){return 0==this.compareTo(a)};e.prototype.min=function(a){return 0>this.compareTo(a)?this:a};e.prototype.max=function(a){return 0<this.compareTo(a)?this:a};e.prototype.and=
function(a){var b=d();this.bitwiseTo(a,r,b);return b};e.prototype.or=function(a){var b=d();this.bitwiseTo(a,p,b);return b};e.prototype.xor=function(a){var b=d();this.bitwiseTo(a,t,b);return b};e.prototype.andNot=function(a){var b=d();this.bitwiseTo(a,x,b);return b};e.prototype.not=function(){for(var a=d(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];a.t=this.t;a.s=~this.s;return a};e.prototype.shiftLeft=function(a){var b=d();0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b);return b};e.prototype.shiftRight=function(a){var b=
d();0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b);return b};e.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this.DB,a=this[a];if(0==a)a=-1;else{var f=0;0==(a&65535)&&(a>>=16,f+=16);0==(a&255)&&(a>>=8,f+=8);0==(a&15)&&(a>>=4,f+=4);0==(a&3)&&(a>>=2,f+=2);0==(a&1)&&++f;a=f}return b+a}return 0>this.s?this.t*this.DB:-1};e.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,f=0;f<this.t;++f){for(var e=this[f]^b,c=0;0!=e;)e&=e-1,++c;a+=c}return a};e.prototype.testBit=
function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)};e.prototype.setBit=function(a){return this.changeBit(a,p)};e.prototype.clearBit=function(a){return this.changeBit(a,x)};e.prototype.flipBit=function(a){return this.changeBit(a,t)};e.prototype.add=function(a){var b=d();this.addTo(a,b);return b};e.prototype.subtract=function(a){var b=d();this.subTo(a,b);return b};e.prototype.multiply=function(a){var b=d();this.multiplyTo(a,b);return b};e.prototype.divide=function(a){var b=
d();this.divRemTo(a,b,null);return b};e.prototype.remainder=function(a){var b=d();this.divRemTo(a,null,b);return b};e.prototype.divideAndRemainder=function(a){var b=d(),f=d();this.divRemTo(a,b,f);return[b,f]};e.prototype.modPow=function(b,e){var f=b.bitLength(),p=m(1);if(0>=f)return p;var h=18>f?1:48>f?3:144>f?4:768>f?5:6;e=8>f?new a(e):e.isEven()?new B(e):new w(e);var l=[],t=3,r=h-1,k=(1<<h)-1;l[1]=e.convert(this);if(1<h)for(f=d(),e.sqrTo(l[1],f);t<=k;)l[t]=d(),e.mulTo(f,l[t-2],l[t]),t+=2;for(var g=
b.t-1,n,q=!0,u=d(),f=c(b[g])-1;0<=g;){f>=r?n=b[g]>>f-r&k:(n=(b[g]&(1<<f+1)-1)<<r-f,0<g&&(n|=b[g-1]>>this.DB+f-r));for(t=h;0==(n&1);)n>>=1,--t;0>(f-=t)&&(f+=this.DB,--g);if(q)l[n].copyTo(p),q=!1;else{for(;1<t;)e.sqrTo(p,u),e.sqrTo(u,p),t-=2;0<t?e.sqrTo(p,u):(t=p,p=u,u=t);e.mulTo(u,l[n],p)}for(;0<=g&&0==(b[g]&1<<f);)e.sqrTo(p,u),t=p,p=u,u=t,0>--f&&(f=this.DB-1,--g)}return e.revert(p)};e.prototype.modInverse=function(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return e.ZERO;for(var f=a.clone(),
c=this.clone(),p=m(1),h=m(0),d=m(0),l=m(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),b?(p.isEven()&&h.isEven()||(p.addTo(this,p),h.subTo(a,h)),p.rShiftTo(1,p)):h.isEven()||h.subTo(a,h),h.rShiftTo(1,h);for(;c.isEven();)c.rShiftTo(1,c),b?(d.isEven()&&l.isEven()||(d.addTo(this,d),l.subTo(a,l)),d.rShiftTo(1,d)):l.isEven()||l.subTo(a,l),l.rShiftTo(1,l);0<=f.compareTo(c)?(f.subTo(c,f),b&&p.subTo(d,p),h.subTo(l,h)):(c.subTo(f,c),b&&d.subTo(p,d),l.subTo(h,l))}if(0!=c.compareTo(e.ONE))return e.ZERO;
if(0<=l.compareTo(a))return l.subtract(a);if(0>l.signum())l.addTo(a,l);else return l;return 0>l.signum()?l.add(a):l};e.prototype.pow=function(a){return this.exp(a,new u)};e.prototype.gcd=function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var f=b;b=a;a=f}f=b.getLowestSetBit();var e=a.getLowestSetBit();if(0>e)return b;f<e&&(e=f);for(0<e&&(b.rShiftTo(e,b),a.rShiftTo(e,a));0<b.signum();)0<(f=b.getLowestSetBit())&&b.rShiftTo(f,b),0<(f=a.getLowestSetBit())&&
a.rShiftTo(f,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));0<e&&a.lShiftTo(e,a);return a};e.prototype.isProbablePrime=function(a){var b,f=this.abs();if(1==f.t&&f[0]<=z[z.length-1]){for(b=0;b<z.length;++b)if(f[0]==z[b])return!0;return!1}if(f.isEven())return!1;for(b=1;b<z.length;){for(var e=z[b],c=b+1;c<z.length&&e<D;)e*=z[c++];for(e=f.modInt(e);b<c;)if(0==e%z[b++])return!1}return f.millerRabin(a)};return{BigInteger:e}}(),BigInteger=BigInteger.BigInteger;var struct={pack:function(e,d){var g="";switch(e){case "Q":e=new BigInteger("ff",16);g+=String.fromCharCode(d.shiftRight(56).and(e));g+=String.fromCharCode(d.shiftRight(48).and(e));g+=String.fromCharCode(d.shiftRight(40).and(e));g+=String.fromCharCode(d.shiftRight(32).and(e));g+=String.fromCharCode(d.shiftRight(24).and(e));g+=String.fromCharCode(d.shiftRight(16).and(e));g+=String.fromCharCode(d.shiftRight(8).and(e));g+=String.fromCharCode(d.and(e));break;case "I":g+=String.fromCharCode(d>>>24&255),
g+=String.fromCharCode(d>>>16&255),g+=String.fromCharCode(d>>>8&255);case "B":g+=String.fromCharCode(d&255)}return g},unpack:function(e,d){var g=[],k=0,b=0;switch(e){case "Q":b=new BigInteger("0",10);b=b.add((new BigInteger(d.charCodeAt(0).toString(),10)).shiftLeft(56));b=b.add((new BigInteger(d.charCodeAt(1).toString(),10)).shiftLeft(48));b=b.add((new BigInteger(d.charCodeAt(2).toString(),10)).shiftLeft(40));b=b.add((new BigInteger(d.charCodeAt(3).toString(),10)).shiftLeft(32));b=b.add((new BigInteger(d.charCodeAt(4).toString(),
10)).shiftLeft(24));b=b.add((new BigInteger(d.charCodeAt(5).toString(),10)).shiftLeft(16));b=b.add((new BigInteger(d.charCodeAt(6).toString(),10)).shiftLeft(8));b=b.add((new BigInteger(d.charCodeAt(7).toString(),10)).shiftLeft(0));g.push(b);break;case "I":b+=d.charCodeAt(0)<<24>>>0,b+=d.charCodeAt(1)<<16>>>0,b+=d.charCodeAt(2)<<8>>>0,k+=3;case "B":b+=d.charCodeAt(0+k)<<0>>>0,g.push(b)}return g}};function inflate_long(e){var d=new BigInteger("0",10);e.length%4&&(e=Array(4-e.length%4+1).join("\x00")+e);for(var g=0;g<e.length;g+=4)d=d.shiftLeft(32),d=d.add(new BigInteger(struct.unpack("I",e.substring(g,g+4))[0].toString(),10));return d}
function deflate_long(e,d){e="number"==typeof e?new BigInteger(e.toString(),10):e.clone();d=void 0==d?!0:d;for(var g="",k=new BigInteger("-1",10),b=new BigInteger("ffffffff",16);!e.equals(BigInteger.ZERO)&&!e.equals(k);)g=struct.pack("I",e.and(b))+g,e=e.shiftRight(32);for(var b=!1,l=0;l<g.length;++l){if(e.equals(BigInteger.ZERO)&&"\x00"!=g.charAt(l)){b=!0;break}if(e.equals(k)&&"\u00ff"!=g.charAt(l)){b=!0;break}}b||(l=0,g=e.equals(BigInteger.ZERO)?"\x00":"\u00ff");g=g.substring(l);d&&(e.equals(BigInteger.ZERO)&&
128<=g.charCodeAt(0)&&(g="\x00"+g),e.equals(k)&&128>g.charCodeAt(0)&&(g="\u00ff"+g));return g}function toByteArray(e){return e.split("").map(function(e){return e.charCodeAt(0)})}function fromByteArray(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}function bytesToWords(e){for(var d=[],g=0,k=0;g<e.length;g++,k+=8)d[k>>>5]|=(e[g]&255)<<24-k%32;return d}function wordsToBytes(e){for(var d=[],g=0;g<32*e.length;g+=8)d.push(e[g>>>5]>>>24-g%32&255);return d}
function hex2ascii(e){for(var d="",g=0;g<e.length;g+=2)d+=String.fromCharCode(parseInt(e.substr(g,2),16));return d}function ascii2hex(e){for(var d="",g=0;g<e.length;g++)d=1==e.charCodeAt(g).toString(16).length?d+("0"+e.charCodeAt(g).toString(16)):d+(""+e.charCodeAt(g).toString(16));return d}function setCharAt(e,d,g){return e.substr(0,d)+g+e.substr(d+1)};sjcl={cipher:{}};
sjcl.cipher.aes=function(e,d){this._tables[0][0][0]||this._precompute();this.mode=d;var g,k,b=this._tables[0][4],l=this._tables[1];d=e.length;var m=1;if(4!==d&&6!==d&&8!==d)throw"invalid aes key size";this._key=[g=e.slice(0),k=[]];for(e=d;e<4*d+28;e++){var c=g[e-1];if(0===e%d||8===d&&4===e%d)c=b[c>>>24]<<24^b[c>>16&255]<<16^b[c>>8&255]<<8^b[c&255],0===e%d&&(c=c<<8^c>>>24^m<<24,m=m<<1^283*(m>>7));g[e]=g[e-d]^c}for(d=0;e;d++,e--)c=g[d&3?e:e-4],k[d]=4>=e||4>d?c:l[0][b[c>>>24]]^l[1][b[c>>16&255]]^l[2][b[c>>
8&255]]^l[3][b[c&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(e,d,g){d=this.mode==sjcl.cipher.aes.MODE_CBC?d:[];for(var k=[],b=0;b<e.length/16;b++){var l=e.slice(16*b,16*(b+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var m=0;16>m;m++)l[m]^=d[m];d=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(l),0))}else for(d=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(g.increment())),0)),m=0;16>m;m++)d[m]^=l[m];k=k.concat(d)}return k},decrypt:function(e,d){for(var g=[],k=0;k<e.length/
16;k++){var b=e.slice(16*k,16*(k+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(b),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var l=0;16>l;l++)ct[l]^=d[l];d=b}g=g.concat(ct)}return g},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e=this._tables[0],d=this._tables[1],g=e[4],k=d[4],b,l,m,c=[],a=[],w;for(b=0;256>b;b++)a[(c[b]=b<<1^283*(b>>7))^b]=b;for(l=m=0;!g[l];l^=w||1,m=a[m]||1){var r=m^m<<1^m<<2^m<<3^m<<4;r=r>>8^r&255^99;g[l]=r;k[r]=l;var p=c[b=
c[w=c[l]]];var t=16843009*p^65537*b^257*w^16843008*l;p=257*c[r]^16843008*r;for(b=0;4>b;b++)e[b][l]=p=p<<24^p>>>8,d[b][r]=t=t<<24^t>>>8}for(b=0;5>b;b++)e[b]=e[b].slice(0),d[b]=d[b].slice(0)},_crypt:function(e,d){if(4!==e.length)throw"invalid aes block size";var g=this._key[d],k=e[0]^g[0],b=e[d?3:1]^g[1],l=e[2]^g[2];e=e[d?1:3]^g[3];var m=g.length/4-2,c,a=4,w=[0,0,0,0];var r=this._tables[d];var p=r[0],t=r[1],x=r[2],u=r[3],n=r[4];for(c=0;c<m;c++){r=p[k>>>24]^t[b>>16&255]^x[l>>8&255]^u[e&255]^g[a];var B=
p[b>>>24]^t[l>>16&255]^x[e>>8&255]^u[k&255]^g[a+1];var v=p[l>>>24]^t[e>>16&255]^x[k>>8&255]^u[b&255]^g[a+2];e=p[e>>>24]^t[k>>16&255]^x[b>>8&255]^u[l&255]^g[a+3];a+=4;k=r;b=B;l=v}for(c=0;4>c;c++)w[d?3&-c:c]=n[k>>>24]<<24^n[b>>16&255]<<16^n[l>>8&255]<<8^n[e&255]^g[a++],r=k,k=b,b=l,l=e,e=r;return w}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(e){var d=[],g=sjcl.bitArray.bitLength(e),k,b;for(k=0;k<g/8;k++)0===(k&3)&&(b=e[k/4]),d.push(b>>>24),b<<=8;return d},toBits:function(e){var d=[],g,k=0;for(g=0;g<e.length;g++)k=k<<8|e[g],3===(g&3)&&(d.push(k),k=0);g&3&&d.push(sjcl.bitArray.partial(8*(g&3),k));return d}};
sjcl.bitArray={bitLength:function(e){var d=e.length;return 0===d?0:32*(d-1)+sjcl.bitArray.getPartial(e[d-1])},partial:function(e,d,g){return 32===e?d:(g?d|0:d<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32}};SSHyClient.hash={};SSHyClient.hash.SHA1=function(e){this.data=e||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var e=toByteArray(this.data),d=bytesToWords(e),g=8*e.length,e=[],k=1732584193,b=-271733879,l=-1732584194,m=271733878,c=-1009589776;d[g>>5]|=128<<24-g%32;d[(g+64>>>9<<4)+15]=g;for(g=0;g<d.length;g+=16){for(var a=k,w=b,r=l,p=m,t=c,x=0;80>x;x++){if(16>x)e[x]=d[g+x];else{var u=e[x-3]^e[x-8]^e[x-14]^e[x-16];e[x]=u<<1|u>>>31}u=(k<<5|k>>>27)+c+(e[x]>>>0)+(20>x?(b&l|~b&m)+1518500249:40>x?(b^l^m)+1859775393:60>x?(b&l|b&m|l&m)-1894007588:(b^l^m)-899497514);
c=m;m=l;l=b<<30|b>>>2;b=k;k=u}k+=a;b+=w;l+=r;m+=p;c+=t}return fromByteArray(wordsToBytes([k,b,l,m,c]))}};SSHyClient.hash.SHA256=function(e){this.data=e||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var e=toByteArray(this.data),d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=bytesToWords(e),k=8*e.length,e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],b=[],l,m;g[k>>5]|=128<<24-k%32;g[(k+64>>9<<4)+15]=k;for(l=0;l<g.length;l+=16){k=e[0];var c=e[1];var a=e[2];var w=
e[3];var r=e[4];var p=e[5];var t=e[6];var x=e[7];for(m=0;64>m;m++){if(16>m)b[m]=g[m+l];else{var u=b[m-15];var n=b[m-2];b[m]=((u<<25|u>>>7)^(u<<14|u>>>18)^u>>>3)+(b[m-7]>>>0)+((n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10)+(b[m-16]>>>0)}n=k&c^k&a^c&a;var B=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22);u=(x>>>0)+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&p^~r&t)+d[m]+(b[m]>>>0);n=B+n;x=t;t=p;p=r;r=w+u>>>0;w=a;a=c;c=k;k=u+n>>>0}e[0]+=k;e[1]+=c;e[2]+=a;e[3]+=w;e[4]+=r;e[5]+=p;e[6]+=t;e[7]+=x}return fromByteArray(wordsToBytes(e))}};SSHyClient.hash.HMAC=function(e,d){var g=digestmod=SSHyClient.hash.SHA1,k=new g,b=new g;64<e.length&&(e=(new g(e)).digest());e+=Array(64-e.length+1).join("\x00");g=toByteArray(e).slice(0);e=toByteArray(e).slice(0);for(var l=0;64>l;++l)g[l]^=92,e[l]^=54;k.data+=fromByteArray(g);b.data+=fromByteArray(e);b.data+=d;k.data+=b.digest();return k.digest()};(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=e()})(function(){return function d(g,k,b){function l(a,c){if(!k[a]){if(!g[a]){var r="function"==typeof require&&require;if(!c&&r)return r(a,!0);if(m)return m(a,!0);c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c;}c=k[a]={exports:{}};
g[a][0].call(c.exports,function(b){var c=g[a][1][b];return l(c?c:b)},c,c.exports,d,g,k,b)}return k[a].exports}for(var m="function"==typeof require&&require,c=0;c<b.length;c++)l(b[c]);return l}({1:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});k.CHARSETS={};k.DEFAULT_CHARSET=k.CHARSETS.B;k.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",
r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};k.CHARSETS.A={"#":"\u00a3"};k.CHARSETS.B=null;k.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};k.CHARSETS.C=k.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};k.CHARSETS.R={"#":"\u00a3","@":"\u00e0",
"[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};k.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};k.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};k.CHARSETS.Y={"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};
k.CHARSETS.E=k.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};k.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};k.CHARSETS.H=k.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};k.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7",
"]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],2:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=function(){function b(b,d,c){this.textarea=b;this.compositionView=d;this.terminal=c;this.isSendingComposition=this.isComposing=!1;this.compositionPosition={start:null,end:null}}b.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=this.textarea.value.length;this.compositionView.textContent=
"";this.compositionView.classList.add("active")};b.prototype.compositionupdate=function(b){var l=this;this.compositionView.textContent=b.data;this.updateCompositionElements();setTimeout(function(){l.compositionPosition.end=l.textarea.value.length},0)};b.prototype.compositionend=function(){this.finalizeComposition(!0)};b.prototype.keydown=function(b){if(this.isComposing||this.isSendingComposition){if(229===b.keyCode||16===b.keyCode||17===b.keyCode||18===b.keyCode)return!1;this.finalizeComposition(!1)}return 229===
b.keyCode?(this.handleAnyTextareaChanges(),!1):!0};b.prototype.finalizeComposition=function(b){var l=this;this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(b){var c=this.compositionPosition.start,a=this.compositionPosition.end;this.isSendingComposition=!0;setTimeout(function(){if(l.isSendingComposition){l.isSendingComposition=!1;var b=l.isComposing?l.textarea.value.substring(c,a):l.textarea.value.substring(c);l.terminal.handler(b)}},0)}else this.isSendingComposition=
!1,b=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(b)};b.prototype.handleAnyTextareaChanges=function(){var b=this,d=this.textarea.value;setTimeout(function(){if(!b.isComposing){var c=b.textarea.value.replace(d,"");0<c.length&&b.terminal.handler(c)}},0)};b.prototype.updateCompositionElements=function(b){var l=this;if(this.isComposing){var c=this.terminal.element.querySelector(".terminal-cursor");if(c){var a=this.terminal.element.querySelector(".xterm-rows").offsetTop+
c.offsetTop;this.compositionView.style.left=c.offsetLeft+"px";this.compositionView.style.top=a+"px";this.compositionView.style.height=c.offsetHeight+"px";this.compositionView.style.lineHeight=c.offsetHeight+"px";var d=this.compositionView.getBoundingClientRect();this.textarea.style.left=c.offsetLeft+"px";this.textarea.style.top=a+"px";this.textarea.style.width=d.width+"px";this.textarea.style.height=d.height+"px";this.textarea.style.lineHeight=d.height+"px"}b||setTimeout(function(){return l.updateCompositionElements(!0)},
0)}};b.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""};return b}();k.CompositionHelper=d},{}],3:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=k.C0||(k.C0={});d.NUL="\x00";d.SOH="\u0001";d.STX="\u0002";d.ETX="\u0003";d.EOT="\u0004";d.ENQ="\u0005";d.ACK="\u0006";d.BEL="\u0007";d.BS="\b";d.HT="\t";d.LF="\n";d.VT="\x0B";d.FF="\f";d.CR="\r";d.SO="\u000e";d.SI="\u000f";d.DLE="\u0010";d.DC1="\u0011";d.DC2="\u0012";d.DC3="\u0013";d.DC4=
"\u0014";d.NAK="\u0015";d.SYN="\u0016";d.ETB="\u0017";d.CAN="\u0018";d.EM="\u0019";d.SUB="\u001a";d.ESC="\u001b";d.FS="\u001c";d.GS="\u001d";d.RS="\u001e";d.US="\u001f";d.SP=" ";d.DEL="\u007f"},{}],4:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=function(){function b(){this._events=this._events||{}}b.prototype.on=function(b,d){this._events[b]=this._events[b]||[];this._events[b].push(d)};b.prototype.off=function(b,d){if(this._events[b]){b=this._events[b];for(var c=b.length;c--;)if(b[c]===
d||b[c].listener===d){b.splice(c,1);break}}};b.prototype.removeAllListeners=function(b){this._events[b]&&delete this._events[b]};b.prototype.once=function(b,d){function c(){var a=Array.prototype.slice.call(arguments);this.off(b,c);return d.apply(this,a)}c.listener=d;return this.on(b,c)};b.prototype.emit=function(b){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];if(this._events[b])for(var c=this._events[b],a=0;a<c.length;a++)c[a].apply(this,d)};b.prototype.listeners=function(b){return this._events[b]||
[]};return b}();k.EventEmitter=d},{}],5:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});var b=d("./EscapeSequences"),l=d("./Charsets");d=function(){function c(a){this._terminal=a}c.prototype.addChar=function(a,b){if(" "<=a){b=m(b);this._terminal.charset&&this._terminal.charset[a]&&(a=this._terminal.charset[a]);var c=this._terminal.y+this._terminal.ybase;if(!b&&this._terminal.x)this._terminal.lines.get(c)[this._terminal.x-1]&&(this._terminal.lines.get(c)[this._terminal.x-1][2]?this._terminal.lines.get(c)[this._terminal.x-
1][1]+=a:this._terminal.lines.get(c)[this._terminal.x-2]&&(this._terminal.lines.get(c)[this._terminal.x-2][1]+=a),this._terminal.updateRange(this._terminal.y));else{if(this._terminal.x+b-1>=this._terminal.cols)if(this._terminal.wraparoundMode)this._terminal.x=0,this._terminal.y++,this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll());else if(2===b)return;c=this._terminal.y+this._terminal.ybase;if(this._terminal.insertMode)for(var p=0;p<b;++p)0===this._terminal.lines.get(this._terminal.y+
this._terminal.ybase).pop()[2]&&this._terminal.lines.get(c)[this._terminal.cols-2]&&2===this._terminal.lines.get(c)[this._terminal.cols-2][2]&&(this._terminal.lines.get(c)[this._terminal.cols-2]=[this._terminal.curAttr," ",1]),this._terminal.lines.get(c).splice(this._terminal.x,0,[this._terminal.curAttr," ",1]);this._terminal.lines.get(c)[this._terminal.x]=[this._terminal.curAttr,a,b];this._terminal.x++;this._terminal.updateRange(this._terminal.y);2===b&&(this._terminal.lines.get(c)[this._terminal.x]=
[this._terminal.curAttr,"",0],this._terminal.x++)}}};c.prototype.bell=function(){var a=this;this._terminal.visualBell&&(this._terminal.element.style.borderColor="white",setTimeout(function(){return a._terminal.element.style.borderColor=""},10),this._terminal.popOnBell&&this._terminal.focus())};c.prototype.lineFeed=function(){this._terminal.convertEol&&(this._terminal.x=0);this._terminal.y++;this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll());this._terminal.x>=
this._terminal.cols&&this._terminal.x--};c.prototype.carriageReturn=function(){this._terminal.x=0};c.prototype.backspace=function(){0<this._terminal.x&&this._terminal.x--};c.prototype.tab=function(){this._terminal.x=this._terminal.nextStop()};c.prototype.shiftOut=function(){this._terminal.setgLevel(1)};c.prototype.shiftIn=function(){this._terminal.setgLevel(0)};c.prototype.insertChars=function(a){var b;a=a[0];1>a&&(a=1);var c=this._terminal.y+this._terminal.ybase;var p=this._terminal.x;for(b=[this._terminal.eraseAttr(),
" ",1];a--&&p<this._terminal.cols;)this._terminal.lines.get(c).splice(p++,0,b),this._terminal.lines.get(c).pop()};c.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this._terminal.y-=a;0>this._terminal.y&&(this._terminal.y=0)};c.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=this._terminal.cols&&this._terminal.x--};c.prototype.cursorForward=function(a){a=a[0];1>a&&(a=1);this._terminal.x+=
a;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};c.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this._terminal.x>=this._terminal.cols&&this._terminal.x--;this._terminal.x-=a;0>this._terminal.x&&(this._terminal.x=0)};c.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=0};c.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this._terminal.y-=
a;0>this._terminal.y&&(this._terminal.y=0);this._terminal.x=0};c.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.x=a-1};c.prototype.cursorPosition=function(a){var b=a[0]-1;a=2<=a.length?a[1]-1:0;0>b?b=0:b>=this._terminal.rows&&(b=this._terminal.rows-1);0>a?a=0:a>=this._terminal.cols&&(a=this._terminal.cols-1);this._terminal.x=a;this._terminal.y=b};c.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.x=this._terminal.nextStop()};c.prototype.eraseInDisplay=
function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);for(a=this._terminal.y+1;a<this._terminal.rows;a++)this._terminal.eraseLine(a);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);for(a=this._terminal.y;a--;)this._terminal.eraseLine(a);break;case 2:for(a=this._terminal.rows;a--;)this._terminal.eraseLine(a);break;case 3:a=this._terminal.lines.length-this._terminal.rows,0<a&&(this._terminal.lines.trimStart(a),this._terminal.ybase=Math.max(this._terminal.ybase-
a,0),this._terminal.ydisp=Math.max(this._terminal.ydisp-a,0))}};c.prototype.eraseInLine=function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);break;case 2:this._terminal.eraseLine(this._terminal.y)}};c.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;var c=this._terminal.rows-1-this._terminal.scrollBottom;for(c=this._terminal.rows-1+this._terminal.ybase-
c+1;a--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),this._terminal.ybase--,this._terminal.ydisp--,b--,c--),this._terminal.lines.splice(b,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(c,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};c.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;var c=this._terminal.rows-1-this._terminal.scrollBottom;
for(c=this._terminal.rows-1+this._terminal.ybase-c;a--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),--this._terminal.ybase,--this._terminal.ydisp),this._terminal.lines.splice(c+1,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(b,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};c.prototype.deleteChars=function(a){var b;a=a[0];1>a&&(a=1);var c=this._terminal.y+this._terminal.ybase;
for(b=[this._terminal.eraseAttr()," ",1];a--;)this._terminal.lines.get(c).splice(this._terminal.x,1),this._terminal.lines.get(c).push(b)};c.prototype.scrollUp=function(a){for(a=a[0]||1;a--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};c.prototype.scrollDown=
function(a){for(a=a[0]||1;a--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};c.prototype.eraseChars=function(a){var b;a=a[0];1>a&&(a=1);var c=this._terminal.y+this._terminal.ybase;var p=this._terminal.x;for(b=[this._terminal.eraseAttr()," ",1];a--&&p<this._terminal.cols;)this._terminal.lines.get(c)[p++]=
b};c.prototype.cursorBackwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.x=this._terminal.prevStop()};c.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.x=a-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};c.prototype.HPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.x+=a;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};c.prototype.repeatPrecedingCharacter=function(a){a=a[0]||1;for(var b=this._terminal.lines.get(this._terminal.ybase+
this._terminal.y),c=b[this._terminal.x-1]||[this._terminal.defAttr," ",1];a--;)b[this._terminal.x++]=c};c.prototype.sendDeviceAttributes=function(a){0<a[0]||(this._terminal.prefix?">"===this._terminal.prefix&&(this._terminal.is("xterm")?this._terminal.send(b.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.send(b.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.send(a[0]+"c"):this._terminal.is("screen")&&this._terminal.send(b.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||
this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.send(b.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.send(b.C0.ESC+"[?6c"))};c.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.y=a-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1)};c.prototype.VPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=
this._terminal.cols&&this._terminal.x--};c.prototype.HVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this._terminal.y=a[0]-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=a[1]-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};c.prototype.tabClear=function(a){a=a[0];0>=a?delete this._terminal.tabs[this._terminal.x]:3===a&&(this._terminal.tabs={})};c.prototype.setMode=function(a){if(1<a.length)for(var b=0;b<
a.length;b++)this.setMode([a[b]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!0}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=!0;break;case 2:this._terminal.setgCharset(0,l.DEFAULT_CHARSET);this._terminal.setgCharset(1,l.DEFAULT_CHARSET);this._terminal.setgCharset(2,l.DEFAULT_CHARSET);this._terminal.setgCharset(3,l.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);
break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===a[0];this._terminal.vt200Mouse=1E3===a[0];this._terminal.normalMouse=1E3<a[0];this._terminal.mouseEvents=!0;this._terminal.element.style.cursor="default";this._terminal.log("Binding to mouse events.");
break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.normal||(a={lines:this._terminal.lines,ybase:this._terminal.ybase,ydisp:this._terminal.ydisp,x:this._terminal.x,y:this._terminal.y,scrollTop:this._terminal.scrollTop,scrollBottom:this._terminal.scrollBottom,tabs:this._terminal.tabs},
this._terminal.reset(),this._terminal.viewport.syncScrollArea(),this._terminal.normal=a,this._terminal.showCursor())}};c.prototype.resetMode=function(a){if(1<a.length)for(var b=0;b<a.length;b++)this.resetMode([a[b]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!1}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,
this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element.style.cursor="";break;case 1004:this._terminal.sendFocus=
!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.normal&&(this._terminal.lines=this._terminal.normal.lines,this._terminal.ybase=this._terminal.normal.ybase,this._terminal.ydisp=this._terminal.normal.ydisp,this._terminal.x=this._terminal.normal.x,this._terminal.y=this._terminal.normal.y,this._terminal.scrollTop=this._terminal.normal.scrollTop,
this._terminal.scrollBottom=this._terminal.normal.scrollBottom,this._terminal.tabs=this._terminal.normal.tabs,this._terminal.normal=null,this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport.syncScrollArea(),this._terminal.showCursor())}};c.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])this._terminal.curAttr=this._terminal.defAttr;else{for(var b=a.length,c=0,p=this._terminal.curAttr>>18,d=this._terminal.curAttr>>9&511,l=this._terminal.curAttr&511,m;c<b;c++)m=a[c],
30<=m&&37>=m?d=m-30:40<=m&&47>=m?l=m-40:90<=m&&97>=m?(m+=8,d=m-90):100<=m&&107>=m?(m+=8,l=m-100):0===m?(p=this._terminal.defAttr>>18,d=this._terminal.defAttr>>9&511,l=this._terminal.defAttr&511):1===m?p|=1:4===m?p|=2:5===m?p|=4:7===m?p|=8:8===m?p|=16:22===m?p&=-2:24===m?p&=-3:25===m?p&=-5:27===m?p&=-9:28===m?p&=-17:39===m?d=this._terminal.defAttr>>9&511:49===m?l=this._terminal.defAttr&511:38===m?2===a[c+1]?(c+=2,d=this._terminal.matchColor(a[c]&255,a[c+1]&255,a[c+2]&255),-1===d&&(d=511),c+=2):5===
a[c+1]&&(c+=2,d=m=a[c]&255):48===m?2===a[c+1]?(c+=2,l=this._terminal.matchColor(a[c]&255,a[c+1]&255,a[c+2]&255),-1===l&&(l=511),c+=2):5===a[c+1]&&(c+=2,l=m=a[c]&255):100===m?(d=this._terminal.defAttr>>9&511,l=this._terminal.defAttr&511):this._terminal.error("Unknown SGR attribute: %d.",m);this._terminal.curAttr=p<<18|d<<9|l}};c.prototype.deviceStatus=function(a){if(!this._terminal.prefix)switch(a[0]){case 5:this._terminal.send(b.C0.ESC+"[0n");break;case 6:this._terminal.send(b.C0.ESC+"["+(this._terminal.y+
1)+";"+(this._terminal.x+1)+"R")}else if("?"===this._terminal.prefix)switch(a[0]){case 6:this._terminal.send(b.C0.ESC+"[?"+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}};c.prototype.softReset=function(a){this._terminal.cursorHidden=!1;this._terminal.insertMode=!1;this._terminal.originMode=!1;this._terminal.wraparoundMode=!0;this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._terminal.applicationCursor=!1;this._terminal.scrollTop=0;this._terminal.scrollBottom=this._terminal.rows-
1;this._terminal.curAttr=this._terminal.defAttr;this._terminal.x=this._terminal.y=0;this._terminal.charset=null;this._terminal.glevel=0;this._terminal.charsets=[null]};c.prototype.setCursorStyle=function(a){a=1>a[0]?1:a[0];switch(a){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",1===a%2)};c.prototype.setScrollRegion=
function(a){this._terminal.prefix||(this._terminal.scrollTop=(a[0]||1)-1,this._terminal.scrollBottom=(a[1]&&a[1]<=this._terminal.rows?a[1]:this._terminal.rows)-1,this._terminal.x=0,this._terminal.y=0)};c.prototype.saveCursor=function(a){this._terminal.savedX=this._terminal.x;this._terminal.savedY=this._terminal.y};c.prototype.restoreCursor=function(a){this._terminal.x=this._terminal.savedX||0;this._terminal.y=this._terminal.savedY||0};return c}();k.InputHandler=d;var m=function(b){var a=[[768,879],
[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],
[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],
[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],
[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(c){if(0===c)return b.nul;if(32>c||127<=c&&160>c)return b.control;a:{var d=0;var p=a.length-1;if(!(c<a[0][0]||c>a[p][1]))for(;p>=d;){var l=Math.floor((d+p)/2);if(c>a[l][1])d=l+1;else if(c<a[l][0])p=l-1;else{d=!0;break a}}d=!1}return d?0:4352<=c&&
(4447>=c||9001===c||9002===c||11904<=c&&42191>=c&&12351!==c||44032<=c&&55203>=c||63744<=c&&64255>=c||65040<=c&&65049>=c||65072<=c&&65135>=c||65280<=c&&65376>=c||65504<=c&&65510>=c||131072<=c&&196605>=c||196608<=c&&262141>=c)?2:1}}({nul:0,control:0})},{"./Charsets":1,"./EscapeSequences":3}],6:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});var b=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?(\/[\/\w\.\-%~]*)*(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;
d=function(){function d(){this._nextLinkMatcherId=0;this._rowTimeoutIds=[];this._linkMatchers=[];this.registerLinkMatcher(b,null,{matchIndex:1})}d.prototype.attachToDom=function(b,c){this._document=b;this._rows=c};d.prototype.linkifyRow=function(b){if(this._document){var c=this._rowTimeoutIds[b];c&&clearTimeout(c);this._rowTimeoutIds[b]=setTimeout(this._linkifyRow.bind(this,b),d.TIME_BEFORE_LINKIFY)}};d.prototype.setHypertextLinkHandler=function(b){this._linkMatchers[0].handler=b};d.prototype.setHypertextValidationCallback=
function(b){this._linkMatchers[0].validationCallback=b};d.prototype.registerLinkMatcher=function(b,c,a){void 0===a&&(a={});if(0!==this._nextLinkMatcherId&&!c)throw Error("handler must be defined");b={id:this._nextLinkMatcherId++,regex:b,handler:c,matchIndex:a.matchIndex,validationCallback:a.validationCallback,priority:a.priority||0};this._addLinkMatcherToList(b);return b.id};d.prototype._addLinkMatcherToList=function(b){if(0===this._linkMatchers.length)this._linkMatchers.push(b);else{for(var c=this._linkMatchers.length-
1;0<=c;c--)if(b.priority<=this._linkMatchers[c].priority){this._linkMatchers.splice(c+1,0,b);return}this._linkMatchers.splice(0,0,b)}};d.prototype.deregisterLinkMatcher=function(b){for(var c=1;c<this._linkMatchers.length;c++)if(this._linkMatchers[c].id===b)return this._linkMatchers.splice(c,1),!0;return!1};d.prototype._linkifyRow=function(b){if(b=this._rows[b])for(var c=0;c<this._linkMatchers.length;c++){var a=this._linkMatchers[c],d=this._doLinkifyRow(b,a);if(0<d.length){if(a.validationCallback)for(b=
function(b){var c=d[b];a.validationCallback(c.textContent,c,function(a){a||c.classList.add("xterm-invalid-link")})},c=0;c<d.length;c++)b(c);break}}};d.prototype._doLinkifyRow=function(b,c){var a=[],d=0===c.id,l=b.childNodes,p=b.textContent.match(c.regex);if(!p||0===p.length)return a;for(var m=p["number"!==typeof c.matchIndex?0:c.matchIndex],k=p.index+m.length,g=0;g<l.length;g++){var n=l[g],B=n.textContent.indexOf(m);if(0<=B){p=this._createAnchorElement(m,c.handler,d);if(n.textContent.length===m.length)if(3===
n.nodeType)this._replaceNode(n,p);else{m=n;if("A"===m.nodeName)break;m.innerHTML="";m.appendChild(p)}else m=this._replaceNodeSubstringWithNode(n,p,m,B),g+=m;a.push(p);p=b.textContent.substring(k).match(c.regex);if(!p||0===p.length)break;m=p["number"!==typeof c.matchIndex?0:c.matchIndex];k+=p.index+m.length}}return a};d.prototype._createAnchorElement=function(b,c,a){var d=this._document.createElement("a");d.textContent=b;d.draggable=!1;a?(d.href=b,d.target="_blank",d.addEventListener("click",function(a){if(c)return c(a,
b)})):d.addEventListener("click",function(a){if(!d.classList.contains("xterm-invalid-link"))return c(a,b)});return d};d.prototype._replaceNode=function(b){for(var c=[],a=1;a<arguments.length;a++)c[a-1]=arguments[a];for(var a=b.parentNode,d=0;d<c.length;d++)a.insertBefore(c[d],b);a.removeChild(b)};d.prototype._replaceNodeSubstringWithNode=function(b,c,a,d){var l=b;3!==l.nodeType&&(l=l.childNodes[0]);if(0===l.childNodes.length&&3!==l.nodeType)throw Error("targetNode must be a text node or only contain a single text node");
var p=l.textContent;if(0===d)return a=p.substring(a.length),a=this._document.createTextNode(a),this._replaceNode(l,c,a),0;if(d===b.textContent.length-a.length)return a=p.substring(0,d),a=this._document.createTextNode(a),this._replaceNode(l,a,c),0;b=p.substring(0,d);b=this._document.createTextNode(b);a=p.substring(d+a.length);a=this._document.createTextNode(a);this._replaceNode(l,b,c,a);return 1};return d}();d.TIME_BEFORE_LINKIFY=200;k.Linkifier=d},{}],7:[function(d,g,k){Object.defineProperty(k,"__esModule",
{value:!0});var b=d("./EscapeSequences"),l=d("./Charsets"),m={};m[b.C0.BEL]=function(a,b){return b.bell()};m[b.C0.LF]=function(a,b){return b.lineFeed()};m[b.C0.VT]=m[b.C0.LF];m[b.C0.FF]=m[b.C0.LF];m[b.C0.CR]=function(a,b){return b.carriageReturn()};m[b.C0.BS]=function(a,b){return b.backspace()};m[b.C0.HT]=function(a,b){return b.tab()};m[b.C0.SO]=function(a,b){return b.shiftOut()};m[b.C0.SI]=function(a,b){return b.shiftIn()};m[b.C0.ESC]=function(a,b){return a.setState(r.ESCAPED)};var c={"[":function(a,
b){b.params=[];b.currentParam=0;a.setState(r.CSI_PARAM)},"]":function(a,b){b.params=[];b.currentParam=0;a.setState(r.OSC)},P:function(a,b){b.params=[];b.currentParam=0;a.setState(r.DCS)},_:function(a,b){a.setState(r.IGNORE)},"^":function(a,b){a.setState(r.IGNORE)},c:function(a,b){b.reset()},E:function(a,b){b.x=0;b.index();a.setState(r.NORMAL)},D:function(a,b){b.index();a.setState(r.NORMAL)},M:function(a,b){b.reverseIndex();a.setState(r.NORMAL)},"%":function(a,b){b.setgLevel(0);b.setgCharset(0,l.DEFAULT_CHARSET);
a.setState(r.NORMAL);a.skipNextChar()}};c[b.C0.CAN]=function(a){return a.setState(r.NORMAL)};var a={"?":function(a){return a.setPrefix("?")},">":function(a){return a.setPrefix(">")},"!":function(a){return a.setPrefix("!")},0:function(a){return a.setParam(10*a.getParam())},1:function(a){return a.setParam(10*a.getParam()+1)},2:function(a){return a.setParam(10*a.getParam()+2)},3:function(a){return a.setParam(10*a.getParam()+3)},4:function(a){return a.setParam(10*a.getParam()+4)},5:function(a){return a.setParam(10*
a.getParam()+5)},6:function(a){return a.setParam(10*a.getParam()+6)},7:function(a){return a.setParam(10*a.getParam()+7)},8:function(a){return a.setParam(10*a.getParam()+8)},9:function(a){return a.setParam(10*a.getParam()+9)},$:function(a){return a.setPostfix("$")},'"':function(a){return a.setPostfix('"')}," ":function(a){return a.setPostfix(" ")},"'":function(a){return a.setPostfix("'")},";":function(a){return a.finalizeParam()}};a[b.C0.CAN]=function(a){return a.setState(r.NORMAL)};var w={"@":function(a,
b,c){return a.insertChars(b)},A:function(a,b,c){return a.cursorUp(b)},B:function(a,b,c){return a.cursorDown(b)},C:function(a,b,c){return a.cursorForward(b)},D:function(a,b,c){return a.cursorBackward(b)},E:function(a,b,c){return a.cursorNextLine(b)},F:function(a,b,c){return a.cursorPrecedingLine(b)},G:function(a,b,c){return a.cursorCharAbsolute(b)},H:function(a,b,c){return a.cursorPosition(b)},I:function(a,b,c){return a.cursorForwardTab(b)},J:function(a,b,c){return a.eraseInDisplay(b)},K:function(a,
b,c){return a.eraseInLine(b)},L:function(a,b,c){return a.insertLines(b)},M:function(a,b,c){return a.deleteLines(b)},P:function(a,b,c){return a.deleteChars(b)},S:function(a,b,c){return a.scrollUp(b)},T:function(a,b,c){2>b.length&&!c&&a.scrollDown(b)},X:function(a,b,c){return a.eraseChars(b)},Z:function(a,b,c){return a.cursorBackwardTab(b)},"`":function(a,b,c){return a.charPosAbsolute(b)},a:function(a,b,c){return a.HPositionRelative(b)},b:function(a,b,c){return a.repeatPrecedingCharacter(b)},c:function(a,
b,c){return a.sendDeviceAttributes(b)},d:function(a,b,c){return a.linePosAbsolute(b)},e:function(a,b,c){return a.VPositionRelative(b)},f:function(a,b,c){return a.HVPosition(b)},g:function(a,b,c){return a.tabClear(b)},h:function(a,b,c){return a.setMode(b)},l:function(a,b,c){return a.resetMode(b)},m:function(a,b,c){return a.charAttributes(b)},n:function(a,b,c){return a.deviceStatus(b)},p:function(a,b,c){switch(c){case "!":a.softReset(b)}},q:function(a,b,c,d){" "===d&&a.setCursorStyle(b)},r:function(a,
b){return a.setScrollRegion(b)},s:function(a,b){return a.saveCursor(b)},u:function(a,b){return a.restoreCursor(b)}};w[b.C0.CAN]=function(a,b,c,d,l){return l.setState(r.NORMAL)};var r;(function(a){a[a.NORMAL=0]="NORMAL";a[a.ESCAPED=1]="ESCAPED";a[a.CSI_PARAM=2]="CSI_PARAM";a[a.CSI=3]="CSI";a[a.OSC=4]="OSC";a[a.CHARSET=5]="CHARSET";a[a.DCS=6]="DCS";a[a.IGNORE=7]="IGNORE"})(r||(r={}));d=function(){function d(a,b){this._inputHandler=a;this._terminal=b;this._state=r.NORMAL}d.prototype.parse=function(d){var k=
d.length;this._position=0;this._terminal.surrogate_high&&(d=this._terminal.surrogate_high+d,this._terminal.surrogate_high="");for(;this._position<k;this._position++){var g=d[this._position];var n=d.charCodeAt(this._position);if(55296<=n&&56319>=n){var p=d.charCodeAt(this._position+1);if(isNaN(p)){this._terminal.surrogate_high=g;continue}n=1024*(n-55296)+(p-56320)+65536;g+=d.charAt(this._position+1)}if(!(56320<=n&&57343>=n))switch(this._state){case r.NORMAL:if(g in m)m[g](this,this._inputHandler);
else this._inputHandler.addChar(g,n);break;case r.ESCAPED:if(g in c){c[g](this,this._terminal);break}switch(g){case "(":case ")":case "*":case "+":case "-":case ".":switch(g){case "(":this._terminal.gcharset=0;break;case ")":this._terminal.gcharset=1;break;case "*":this._terminal.gcharset=2;break;case "+":this._terminal.gcharset=3;break;case "-":this._terminal.gcharset=1;break;case ".":this._terminal.gcharset=2}this._state=r.CHARSET;break;case "/":this._terminal.gcharset=3;this._state=r.CHARSET;this._position--;
break;case "N":break;case "O":break;case "n":this._terminal.setgLevel(2);break;case "o":this._terminal.setgLevel(3);break;case "|":this._terminal.setgLevel(3);break;case "}":this._terminal.setgLevel(2);break;case "~":this._terminal.setgLevel(1);break;case "7":this._inputHandler.saveCursor();this._state=r.NORMAL;break;case "8":this._inputHandler.restoreCursor();this._state=r.NORMAL;break;case "#":this._state=r.NORMAL;this._position++;break;case "H":this._terminal.tabSet();this._state=r.NORMAL;break;
case "=":this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();this._state=r.NORMAL;break;case ">":this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._state=r.NORMAL;break;default:this._state=r.NORMAL,this._terminal.error("Unknown ESC control: %s.",g)}break;case r.CHARSET:g in l.CHARSETS?(n=l.CHARSETS[g],"/"===g&&this.skipNextChar()):
n=l.DEFAULT_CHARSET;this._terminal.setgCharset(this._terminal.gcharset,n);this._terminal.gcharset=null;this._state=r.NORMAL;break;case r.OSC:if(g===b.C0.ESC||g===b.C0.BEL){g===b.C0.ESC&&this._position++;this._terminal.params.push(this._terminal.currentParam);switch(this._terminal.params[0]){case 0:case 1:case 2:this._terminal.params[1]&&(this._terminal.title=this._terminal.params[1],this._terminal.handleTitle(this._terminal.title))}this._terminal.params=[];this._terminal.currentParam=0;this._state=
r.NORMAL}else this._terminal.params.length?this._terminal.currentParam+=g:"0"<=g&&"9">=g?this._terminal.currentParam=10*this._terminal.currentParam+g.charCodeAt(0)-48:";"===g&&(this._terminal.params.push(this._terminal.currentParam),this._terminal.currentParam="");break;case r.CSI_PARAM:if(g in a){a[g](this);break}this.finalizeParam();this._state=r.CSI;case r.CSI:if(g in w)w[g](this._inputHandler,this._terminal.params,this._terminal.prefix,this._terminal.postfix,this);else this._terminal.error("Unknown CSI code: %s.",
g);this._state=r.NORMAL;this._terminal.prefix="";this._terminal.postfix="";break;case r.DCS:if(g===b.C0.ESC||g===b.C0.BEL){g===b.C0.ESC&&this._position++;switch(this._terminal.prefix){case "":break;case "$q":g=this._terminal.currentParam;n=!1;switch(g){case '"q':g='0"q';break;case '"p':g='61"p';break;case "r":g=""+(this._terminal.scrollTop+1)+";"+(this._terminal.scrollBottom+1)+"r";break;case "m":g="0m";break;default:this._terminal.error("Unknown DCS Pt: %s.",g),g=""}this._terminal.send(b.C0.ESC+
"P"+ +n+"$r"+g+b.C0.ESC+"\\");break;case "+p":break;case "+q":g=this._terminal.currentParam;n=!1;this._terminal.send(b.C0.ESC+"P"+ +n+"+r"+g+b.C0.ESC+"\\");break;default:this._terminal.error("Unknown DCS prefix: %s.",this._terminal.prefix)}this._terminal.currentParam=0;this._terminal.prefix="";this._state=r.NORMAL}else this._terminal.currentParam?this._terminal.currentParam+=g:this._terminal.prefix||"$"===g||"+"===g?2===this._terminal.prefix.length?this._terminal.currentParam=g:this._terminal.prefix+=
g:this._terminal.currentParam=g;break;case r.IGNORE:if(g===b.C0.ESC||g===b.C0.BEL)g===b.C0.ESC&&this._position++,this._state=r.NORMAL}}return this._state};d.prototype.setState=function(a){this._state=a};d.prototype.setPrefix=function(a){this._terminal.prefix=a};d.prototype.setPostfix=function(a){this._terminal.postfix=a};d.prototype.setParam=function(a){this._terminal.currentParam=a};d.prototype.getParam=function(){return this._terminal.currentParam};d.prototype.finalizeParam=function(){this._terminal.params.push(this._terminal.currentParam);
this._terminal.currentParam=0};d.prototype.skipNextChar=function(){this._position++};return d}();k.Parser=d},{"./Charsets":1,"./EscapeSequences":3}],8:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});var b=d("./utils/DomElementObjectPool"),l;(function(b){b[b.BOLD=1]="BOLD";b[b.UNDERLINE=2]="UNDERLINE";b[b.BLINK=4]="BLINK";b[b.INVERSE=8]="INVERSE";b[b.INVISIBLE=16]="INVISIBLE"})(l||(l={}));var m=null;d=function(){function c(a){this._terminal=a;this._refreshRowsQueue=[];this._refreshFramesSkipped=
0;this._refreshAnimationFrame=null;this._spanElementObjectPool=new b.DomElementObjectPool("span");if(null===m){a=this._terminal.element;var c=a.ownerDocument.createElement("span");c.innerHTML="hello world";a.appendChild(c);var d=c.offsetWidth,l=c.offsetHeight;c.style.fontWeight="bold";var g=c.offsetWidth,k=c.offsetHeight;a.removeChild(c);m=d!==g||l!==k}this._spanElementObjectPool=new b.DomElementObjectPool("span")}c.prototype.queueRefresh=function(a,b){this._refreshRowsQueue.push({start:a,end:b});
this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this)))};c.prototype._refreshLoop=function(){if(0<this._terminal.writeBuffer.length&&5>=this._refreshFramesSkipped++)this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this));else{this._refreshFramesSkipped=0;if(4<this._refreshRowsQueue.length){var a=0;var b=this._terminal.rows-1}else{a=this._refreshRowsQueue[0].start;b=this._refreshRowsQueue[0].end;for(var c=
1;c<this._refreshRowsQueue.length;c++)this._refreshRowsQueue[c].start<a&&(a=this._refreshRowsQueue[c].start),this._refreshRowsQueue[c].end>b&&(b=this._refreshRowsQueue[c].end)}this._refreshRowsQueue=[];this._refreshAnimationFrame=null;this._refresh(a,b)}};c.prototype._refresh=function(a,b){var c;b-a>=this._terminal.rows/2&&(c=this._terminal.element.parentNode)&&this._terminal.element.removeChild(this._terminal.rowContainer);var d=this._terminal.cols,g=a;b>=this._terminal.rows&&(this._terminal.log("`end` is too large. Most likely a bad CSR."),
b=this._terminal.rows-1);for(;g<=b;g++){var k=this._terminal.lines.get(g+this._terminal.ydisp);var w=this._terminal.y===g-(this._terminal.ybase-this._terminal.ydisp)&&this._terminal.cursorState&&!this._terminal.cursorHidden?this._terminal.x:-1;for(var n=this._terminal.defAttr,B=document.createDocumentFragment(),v="",y=void 0;this._terminal.children[g].children.length;){var A=this._terminal.children[g].children[0];this._terminal.children[g].removeChild(A);this._spanElementObjectPool.release(A)}for(A=
0;A<d;A++){var z=k[A][0],D=k[A][1],h=k[A][2];if(h){A===w&&(z=-1);if(z!==n&&(n!==this._terminal.defAttr&&(v&&(y.innerHTML=v,v=""),B.appendChild(y),y=null),z!==this._terminal.defAttr))if(v&&!y&&(y=this._spanElementObjectPool.acquire()),y&&(v&&(y.innerHTML=v,v=""),B.appendChild(y)),y=this._spanElementObjectPool.acquire(),-1===z)y.classList.add("reverse-video","terminal-cursor");else{var n=z&511,q=z>>9&511,f=z>>18;f&l.BOLD&&(m||y.classList.add("xterm-bold"),8>q&&(q+=8));f&l.UNDERLINE&&y.classList.add("xterm-underline");
f&l.BLINK&&y.classList.add("xterm-blink");if(f&l.INVERSE){var C=n,n=q,q=C;f&1&&8>q&&(q+=8)}f&l.INVISIBLE&&y.classList.add("xterm-hidden");f&l.INVERSE&&(257===n&&(n=15),256===q&&(q=0));256>n&&y.classList.add("xterm-bg-color-"+n);256>q&&y.classList.add("xterm-color-"+q)}if(2===h)v+='<span class="xterm-wide-char">'+D+"</span>";else if(255<D.charCodeAt(0))v+='<span class="xterm-normal-char">'+D+"</span>";else switch(D){case "&":v+="&amp;";break;case "<":v+="&lt;";break;case ">":v+="&gt;";break;default:v=
" ">=D?v+"&nbsp;":v+D}n=z}}v&&!y&&(y=this._spanElementObjectPool.acquire());y&&(v&&(y.innerHTML=v),B.appendChild(y));this._terminal.children[g].appendChild(B)}c&&this._terminal.element.appendChild(this._terminal.rowContainer);this._terminal.emit("refresh",{element:this._terminal.element,start:a,end:b})};return c}();k.Renderer=d},{"./utils/DomElementObjectPool":14}],9:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=function(){function b(b,d,c,a){var l=this;this.terminal=b;this.viewportElement=
d;this.scrollArea=c;this.charMeasure=a;this.lastRecordedViewportHeight=this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));setTimeout(function(){return l.syncScrollArea()},0)}b.prototype.refresh=function(){if(0<this.charMeasure.height){var b=this.charMeasure.height!==this.currentRowHeight;b&&(this.currentRowHeight=
this.charMeasure.height,this.viewportElement.style.lineHeight=this.charMeasure.height+"px",this.terminal.rowContainer.style.lineHeight=this.charMeasure.height+"px");var d=this.lastRecordedViewportHeight!==this.terminal.rows;if(b||d)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=this.charMeasure.height*this.terminal.rows+"px";this.scrollArea.style.height=this.charMeasure.height*this.lastRecordedBufferLength+"px"}};b.prototype.syncScrollArea=function(){this.lastRecordedBufferLength!==
this.terminal.lines.length?(this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh()):this.lastRecordedViewportHeight!==this.terminal.rows?this.refresh():this.charMeasure.height!==this.currentRowHeight&&this.refresh();var b=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==b&&(this.viewportElement.scrollTop=b)};b.prototype.onScroll=function(b){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};
b.prototype.onWheel=function(b){if(0!==b.deltaY){var d=1;b.deltaMode===WheelEvent.DOM_DELTA_LINE?d=this.currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=b.deltaY*d;b.preventDefault()}};return b}();k.Viewport=d},{}],10:[function(d,g,k){function b(b){var c=String.fromCharCode(32),a=String.fromCharCode(160),d=new RegExp(a,"g");return b.split("\n").map(function(a){return a.replace(/\s+$/g,"").replace(d,c)}).join("\n")}
function l(b,c){return c?b.replace(/\r?\n/g,"\n"):b}Object.defineProperty(k,"__esModule",{value:!0});k.prepareTextForClipboard=b;k.prepareTextForTerminal=l;k.copyHandler=function(d,c){var a=window.getSelection().toString(),a=b(a);c.browser.isMSIE?window.clipboardData.setData("Text",a):d.clipboardData.setData("text/plain",a);d.preventDefault()};k.pasteHandler=function(b,c){b.stopPropagation();var a=function(a){a=l(a,c.browser.isMSWindows);c.handler(a);c.textarea.value="";c.emit("paste",a);return c.cancel(b)};
if(c.browser.isMSIE){if(window.clipboardData){var d=window.clipboardData.getData("Text");a(d)}}else b.clipboardData&&(d=b.clipboardData.getData("text/plain"),a(d))};k.rightClickHandler=function(d,c){var a=document.getSelection(),l=b(a.toString()),g=!1,m=d.clientX;d=d.clientY;if(a.rangeCount){for(var a=a.getRangeAt(0).getClientRects(),k=0;k<a.length&&!(g=a[k],g=m>g.left&&m<g.right&&d>g.top&&d<g.bottom);k++);if(l.match(/^\s$/)||!l.length)g=!1}g||(c.textarea.style.position="fixed",c.textarea.style.width=
"20px",c.textarea.style.height="20px",c.textarea.style.left=m-10+"px",c.textarea.style.top=d-10+"px",c.textarea.style.zIndex="1000",c.textarea.focus(),setTimeout(function(){c.textarea.style.position=null;c.textarea.style.width=null;c.textarea.style.height=null;c.textarea.style.left=null;c.textarea.style.top=null;c.textarea.style.zIndex=null},4))}},{}],11:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=d("./Generic");var b="undefined"===typeof navigator?!0:!1;g=b?"node":navigator.userAgent;
b=b?"node":navigator.platform;k.isFirefox=!!~g.indexOf("Firefox");k.isMSIE=!!~g.indexOf("MSIE")||!!~g.indexOf("Trident");k.isMac=d.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],b);k.isIpad="iPad"===b;k.isIphone="iPhone"===b;k.isMSWindows=d.contains(["Windows","Win16","Win32","WinCE"],b)},{"./Generic":15}],12:[function(d,g,k){var b=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var a in c)c.hasOwnProperty(a)&&
(b[a]=c[a])};return function(d,c){function a(){this.constructor=d}b(d,c);d.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}}();Object.defineProperty(k,"__esModule",{value:!0});d=function(d){function l(b,a){var c=d.call(this)||this;c._document=b;c._parentElement=a;return c}b(l,d);Object.defineProperty(l.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"height",{get:function(){return this._height},enumerable:!0,
configurable:!0});l.prototype.measure=function(){var b=this;this._measureElement?this._doMeasure():(this._measureElement=this._document.createElement("span"),this._measureElement.style.position="absolute",this._measureElement.style.top="0",this._measureElement.style.left="-9999em",this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement),setTimeout(function(){return b._doMeasure()},0))};l.prototype._doMeasure=
function(){var b=this._measureElement.getBoundingClientRect();0===b.width||0===b.height||this._width===b.width&&this._height===b.height||(this._width=b.width,this._height=b.height,this.emit("charsizechanged"))};return l}(d("../EventEmitter.js").EventEmitter);k.CharMeasure=d},{"../EventEmitter.js":4}],13:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=function(){function b(b){this._array=Array(b);this._length=this._startIndex=0}Object.defineProperty(b.prototype,"maxLength",{get:function(){return this._array.length},
set:function(b){for(var d=Array(b),c=0;c<Math.min(b,this.length);c++)d[c]=this._array[this._getCyclicIndex(c)];this._array=d;this._startIndex=0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"length",{get:function(){return this._length},set:function(b){if(b>this._length)for(var d=this._length;d<b;d++)this._array[d]=void 0;this._length=b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"forEach",{get:function(){return this._array.forEach},enumerable:!0,configurable:!0});
b.prototype.get=function(b){return this._array[this._getCyclicIndex(b)]};b.prototype.set=function(b,d){this._array[this._getCyclicIndex(b)]=d};b.prototype.push=function(b){this._array[this._getCyclicIndex(this._length)]=b;this._length===this.maxLength?(this._startIndex++,this._startIndex===this.maxLength&&(this._startIndex=0)):this._length++};b.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};b.prototype.splice=function(b,d){for(var c=[],a=2;a<arguments.length;a++)c[a-
2]=arguments[a];if(d){for(a=b;a<this._length-d;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+d)];this._length-=d}if(c&&c.length){for(a=this._length-1;a>=b;a--)this._array[this._getCyclicIndex(a+c.length)]=this._array[this._getCyclicIndex(a)];for(a=0;a<c.length;a++)this._array[this._getCyclicIndex(b+a)]=c[a];this._length+c.length>this.maxLength?(this._startIndex+=this._length+c.length-this.maxLength,this._length=this.maxLength):this._length+=c.length}};b.prototype.trimStart=
function(b){b>this._length&&(b=this._length);this._startIndex+=b;this._length-=b};b.prototype.shiftElements=function(b,d,c){if(!(0>=d)){if(0>b||b>=this._length)throw Error("start argument out of range");if(0>b+c)throw Error("Cannot shift elements in list beyond index 0");if(0<c){for(var a=d-1;0<=a;a--)this.set(b+a+c,this.get(b+a));b=b+d+c-this._length;if(0<b)for(this._length+=b;this._length>this.maxLength;)this._length--,this._startIndex++}else for(a=0;a<d;a++)this.set(b+a+c,this.get(b+a))}};b.prototype._getCyclicIndex=
function(b){return(this._startIndex+b)%this.maxLength};return b}();k.CircularList=d},{}],14:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});d=function(){function b(b){this._type=this.type=b;this._pool=[];this._inUse={}}b.prototype.acquire=function(){var d=0===this._pool.length?this._createNew():this._pool.pop();return this._inUse[d.getAttribute(b.OBJECT_ID_ATTRIBUTE)]=d};b.prototype.release=function(d){if(!this._inUse[d.getAttribute(b.OBJECT_ID_ATTRIBUTE)])throw Error("Could not release an element not yet acquired");
delete this._inUse[d.getAttribute(b.OBJECT_ID_ATTRIBUTE)];this._cleanElement(d);this._pool.push(d)};b.prototype._createNew=function(){var d=document.createElement(this._type),g=b._objectCount++;d.setAttribute(b.OBJECT_ID_ATTRIBUTE,g.toString(10));return d};b.prototype._cleanElement=function(b){b.className="";b.innerHTML=""};return b}();d.OBJECT_ID_ATTRIBUTE="data-obj-id";d._objectCount=0;k.DomElementObjectPool=d},{}],15:[function(d,g,k){Object.defineProperty(k,"__esModule",{value:!0});k.contains=
function(b,d){return 0<=b.indexOf(d)}},{}],16:[function(d,g,k){function b(b,d,c){if(null==b.pageX)return null;var a=b.pageX;for(b=b.pageY;d&&d!==self.document.documentElement;)a-=d.offsetLeft,b-=d.offsetTop,d="offsetParent"in d?d.offsetParent:d.parentElement;a=Math.ceil(a/c.width);b=Math.ceil(b/c.height);return[a,b]}Object.defineProperty(k,"__esModule",{value:!0});k.getCoords=b;k.getRawByteCoords=function(d,g,c,a,k){g=b(d,g,c);d=g[0];g=g[1];d=Math.min(Math.max(d,0),a);g=Math.min(Math.max(g,0),k);
return{x:d+32,y:g+32}}},{}],17:[function(d,g,k){function b(a,c,d){var f=this;if(!(this instanceof b))return new b(a,c,d);f.browser=D;f.cancel=b.cancel;p.EventEmitter.call(this);"number"===typeof a&&(a={cols:a,rows:c,handler:d});a=a||{};Object.keys(b.defaults).forEach(function(c){null==a[c]&&(a[c]=b.options[c],b[c]!==b.defaults[c]&&(a[c]=b[c]));f[c]=a[c]});8===a.colors.length?a.colors=a.colors.concat(b._colors.slice(8)):16===a.colors.length?a.colors=a.colors.concat(b._colors.slice(16)):10===a.colors.length?
a.colors=a.colors.slice(0,-2).concat(b._colors.slice(8,-2),a.colors.slice(-2)):18===a.colors.length&&(a.colors=a.colors.concat(b._colors.slice(16,-2),a.colors.slice(-2)));this.colors=a.colors;this.options=a;this.parent=a.body||a.parent||(q?q.getElementsByTagName("body")[0]:null);this.cols=a.cols||a.geometry[0];this.rows=a.rows||a.geometry[1];this.geometry=[this.cols,this.rows];if(a.handler)this.on("data",a.handler);this.cursorState=this.y=this.x=this.ydisp=this.ybase=0;this.cursorHidden=!1;this.convertEol;
this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.cursorBlinkInterval=this.customKeydownHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;
this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.postfix=this.prefix="";this.inputHandler=new B.InputHandler(this);this.parser=new v.Parser(this.inputHandler,this);this.renderer=this.renderer||null;this.linkifier=this.linkifier||new A.Linkifier;this.writeBuffer=[];this.writeStopped=this.xoffSentToCatchUp=this.writeInProgress=!1;this.surrogate_high="";this.lines=new u.CircularList(this.scrollback);for(c=this.rows;c--;)this.lines.push(this.blankLine());
this.tabs;this.setupStops();this.userScrolling=!1}function l(a,b,c,d){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(b,c,d||!1)})}function m(a,b,c,d){a.removeEventListener(b,c,d||!1)}function c(a,b){function f(){this.constructor=a}f.prototype=b.prototype;a.prototype=new f}function a(a,b){a=a.browser.isMac&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.browser.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"==b.type?a:a&&(!b.keyCode||47<b.keyCode)}function w(a,c,d){var f=a<<
16|c<<8|d;if(null!=w._cache[f])return w._cache[f];for(var h=Infinity,g=-1,l=0,k,C,m;l<b.vcolors.length;l++){k=b.vcolors[l];C=k[0];m=k[1];k=k[2];C=w.distance(a,c,d,C,m,k);if(0===C){g=l;break}C<h&&(h=C,g=l)}return w._cache[f]=g}Object.defineProperty(k,"__esModule",{value:!0});var r=d("./CompositionHelper"),p=d("./EventEmitter"),t=d("./Viewport"),x=d("./handlers/Clipboard"),u=d("./utils/CircularList"),n=d("./EscapeSequences"),B=d("./InputHandler"),v=d("./Parser"),y=d("./Renderer"),A=d("./Linkifier"),
z=d("./utils/CharMeasure"),D=d("./utils/Browser"),h=d("./utils/Mouse"),q="undefined"!=typeof window?window.document:null;c(b,p.EventEmitter);b.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};b.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");b.colors=function(){function a(a,b,f){d.push("#"+c(a)+c(b)+c(f))}function c(a){a=a.toString(16);return 2>a.length?"0"+a:a}var d=b.tangoColors.slice(),
h=[0,95,135,175,215,255],g;for(g=0;216>g;g++)a(h[g/36%6|0],h[g/6%6|0],h[g%6]);for(g=0;24>g;g++)h=8+10*g,a(h,h,h);return d}();b._colors=b.colors.slice();b.vcolors=function(){for(var a=[],c=b.colors,d=0,h;256>d;d++)h=parseInt(c[d].substring(1),16),a.push([h>>16&255,h>>8&255,h&255]);return a}();b.defaults={colors:b.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,cursorStyle:"block",visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1,
disableStdin:!1,useFlowControl:!1,tabStopWidth:8};b.options={};b.focus=null;(function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var f=0;f<a.length;f++)b.call(c,a[f],f,a)})(function(a){if(Object.keys)return Object.keys(a);var b,f=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&f.push(b);return f}(b.defaults),function(a){b[a]=b.defaults[a];b.options[a]=b.defaults[a]});b.prototype.focus=function(){return this.textarea.focus()};b.prototype.getOption=function(a,c){if(!(a in b.defaults))throw Error('No option with key "'+
a+'"');return"undefined"!==typeof this.options[a]?this.options[a]:this[a]};b.prototype.setOption=function(a,c){if(!(a in b.defaults))throw Error('No option with key "'+a+'"');switch(a){case "scrollback":if(this.options[a]!==c){if(this.lines.length>c){var f=this.lines.length-c,d=0>this.ydisp-f;this.lines.trimStart(f);this.ybase=Math.max(this.ybase-f,0);this.ydisp=Math.max(this.ydisp-f,0);d&&this.refresh(0,this.rows-1)}this.lines.maxLength=c;this.viewport.syncScrollArea()}}this[a]=c;this.options[a]=
c;switch(a){case "cursorBlink":this.setCursorBlinking(c);break;case "cursorStyle":this.element.classList.toggle("xterm-cursor-style-underline","underline"===c);this.element.classList.toggle("xterm-cursor-style-bar","bar"===c);break;case "tabStopWidth":this.setupStops()}};b.prototype.restartCursorBlinking=function(){this.setCursorBlinking(this.options.cursorBlink)};b.prototype.setCursorBlinking=function(a){this.element.classList.toggle("xterm-cursor-blink",a);this.clearCursorBlinkingInterval();if(a){var b=
this;this.cursorBlinkInterval=setInterval(function(){b.element.classList.toggle("xterm-cursor-blink-on")},600)}};b.prototype.clearCursorBlinkingInterval=function(){this.element.classList.remove("xterm-cursor-blink-on");this.cursorBlinkInterval&&(clearInterval(this.cursorBlinkInterval),this.cursorBlinkInterval=null)};b.bindFocus=function(a){l(a.textarea,"focus",function(f){a.sendFocus&&a.send(n.C0.ESC+"[I");a.element.classList.add("focus");a.showCursor();a.restartCursorBlinking.apply(a);b.focus=a;
a.emit("focus",{terminal:a})})};b.prototype.blur=function(){return this.textarea.blur()};b.bindBlur=function(a){l(a.textarea,"blur",function(f){a.refresh(a.y,a.y);a.sendFocus&&a.send(n.C0.ESC+"[O");a.element.classList.remove("focus");a.clearCursorBlinkingInterval.apply(a);b.focus=null;a.emit("blur",{terminal:a})})};b.prototype.initGlobal=function(){function a(a){x.rightClickHandler.call(this,a,c)}var c=this;b.bindKeys(this);b.bindFocus(this);b.bindBlur(this);l(this.element,"copy",function(a){x.copyHandler.call(this,
a,c)});l(this.textarea,"paste",function(a){x.pasteHandler.call(this,a,c)});l(this.element,"paste",function(a){x.pasteHandler.call(this,a,c)});c.browser.isFirefox?l(this.element,"mousedown",function(b){2==b.button&&a(b)}):l(this.element,"contextmenu",a)};b.bindKeys=function(a){l(a.element,"keydown",function(b){q.activeElement==this&&a.keyDown(b)},!0);l(a.element,"keypress",function(b){q.activeElement==this&&a.keyPress(b)},!0);l(a.element,"keyup",function(b){16!==b.keyCode&&17!==b.keyCode&&18!==b.keyCode&&
a.focus(a)},!0);l(a.textarea,"keydown",function(b){a.keyDown(b)},!0);l(a.textarea,"keypress",function(b){a.keyPress(b);this.value=""},!0);l(a.textarea,"compositionstart",a.compositionHelper.compositionstart.bind(a.compositionHelper));l(a.textarea,"compositionupdate",a.compositionHelper.compositionupdate.bind(a.compositionHelper));l(a.textarea,"compositionend",a.compositionHelper.compositionend.bind(a.compositionHelper));a.on("refresh",a.compositionHelper.updateCompositionElements.bind(a.compositionHelper));
a.on("refresh",function(b){a.queueLinkification(b.start,b.end)})};b.prototype.insertRow=function(a){"object"!=typeof a&&(a=q.createElement("div"));this.rowContainer.appendChild(a);this.children.push(a);return a};b.prototype.open=function(a,b){var c=this,f=0;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];this.element=
this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.classList.add("xterm-theme-"+this.theme);this.setCursorBlinking(this.options.cursorBlink);this.element.style.height;this.element.setAttribute("tabindex",0);this.viewportElement=q.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=q.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");
this.viewportElement.appendChild(this.viewportScrollArea);this.rowContainer=q.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.linkifier.attachToDom(q,this.children);this.helperContainer=q.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=q.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect",
"off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){c.emit("focus",{terminal:c})});this.textarea.addEventListener("blur",function(){c.emit("blur",{terminal:c})});this.helperContainer.appendChild(this.textarea);this.compositionView=q.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new r.CompositionHelper(this.textarea,this.compositionView,
this);this.helperContainer.appendChild(this.compositionView);this.charSizeStyleElement=q.createElement("style");for(this.helperContainer.appendChild(this.charSizeStyleElement);f<this.rows;f++)this.insertRow();this.parent.appendChild(this.element);this.charMeasure=new z.CharMeasure(q,this.helperContainer);this.charMeasure.on("charsizechanged",function(){c.updateCharSizeCSS()});this.charMeasure.measure();this.viewport=new t.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasure);
this.renderer=new y.Renderer(this);this.refresh(0,this.rows-1);this.initGlobal();"undefined"==typeof b&&(console.warn("You did not pass the `focus` argument in `Terminal.prototype.open()`.\nThe `focus` argument now defaults to `true` but starting with xterm.js 3.0 it will default to `false`."),b=!0);b&&this.focus();l(this.element,"click",function(){var a=q.getSelection(),b=a.isCollapsed;("boolean"==typeof b?b:"Range"!=a.type)&&c.focus()});this.bindMouse();this.emit("open")};b.loadAddon=function(a,
b){if("object"===typeof k&&"object"===typeof g)return d("./addons/"+a+"/"+a);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};b.prototype.updateCharSizeCSS=function(){this.charSizeStyleElement.textContent=".xterm-wide-char{width:"+2*this.charMeasure.width+"px;}"+(".xterm-normal-char{width:"+this.charMeasure.width+"px;}")};b.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var b=null!=a.button?+a.button:null!=a.which?
a.which-1:null;k.browser.isMSIE&&(b=1===b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0<a.wheelDeltaY?64:65}var c=a.shiftKey?4:0;var f=a.metaKey?8:0;var g=a.ctrlKey?16:0;c=c|f|g;k.vt200Mouse?c&=g:k.normalMouse||(c=0);b=32+(c<<2)+b;if(g=h.getRawByteCoords(a,k.rowContainer,k.charMeasure,k.cols,k.rows))switch(d(b,g),a.overrideType||a.type){case "mousedown":p=b;break;case "mouseup":p=32}}function b(a){var b=p;(a=h.getRawByteCoords(a,k.rowContainer,
k.charMeasure,k.cols,k.rows))&&d(b+32,a)}function c(a,b){if(k.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(2047<b&&(b=2047),a.push(192|b>>6),a.push(128|b&63))}else{if(255===b)return a.push(0);127<b&&(b=127);a.push(b)}}function d(a,b){if(k.vt300Mouse){a&=3;b.x-=32;b.y-=32;var f=n.C0.ESC+"[24";if(0===a)f+="1";else if(1===a)f+="3";else if(2===a)f+="5";else{if(3===a)return;f+="0"}f+="~["+b.x+","+b.y+"]\r";k.send(f)}else k.decLocator?(a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&
(a=3),k.send(n.C0.ESC+"["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w")):k.urxvtMouse?(b.x-=32,b.y-=32,b.x++,b.y++,k.send(n.C0.ESC+"["+a+";"+b.x+";"+b.y+"M")):k.sgrMouse?(b.x-=32,b.y-=32,k.send(n.C0.ESC+"[<"+((3===(a&3)?a&-4:a)-32)+";"+b.x+";"+b.y+(3===(a&3)?"m":"M"))):(f=[],c(f,a),c(f,b.x),c(f,b.y),k.send(n.C0.ESC+"[M"+String.fromCharCode.apply(String,f)))}var g=this.element,k=this,p=32;l(g,"mousedown",function(c){if(k.mouseEvents){a(c);k.focus();if(k.vt200Mouse)return c.overrideType="mouseup",
a(c),k.cancel(c);k.normalMouse&&l(k.document,"mousemove",b);k.x10Mouse||l(k.document,"mouseup",function E(c){a(c);k.normalMouse&&m(k.document,"mousemove",b);m(k.document,"mouseup",E);return k.cancel(c)});return k.cancel(c)}});l(g,"wheel",function(b){if(k.mouseEvents&&!(k.x10Mouse||k.vt300Mouse||k.decLocator))return a(b),k.cancel(b)});l(g,"wheel",function(a){if(!k.mouseEvents)return k.viewport.onWheel(a),k.cancel(a)})};b.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=
function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};b.prototype.refresh=function(a,b){this.renderer&&this.renderer.queueRefresh(a,b)};b.prototype.queueLinkification=function(a,b){if(this.linkifier)for(;a<=b;a++)this.linkifier.linkifyRow(a)};b.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};b.prototype.scroll=function(){this.lines.length===this.lines.maxLength&&(this.lines.trimStart(1),
this.ybase--,0!==this.ydisp&&this.ydisp--);this.ybase++;this.userScrolling||(this.ydisp=this.ybase);var a=this.ybase+this.rows-1;a-=this.rows-1-this.scrollBottom;a===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(a,0,this.blankLine());0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};
b.prototype.scrollDisp=function(a,b){0>a?this.userScrolling=!0:a+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=a;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);b||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-1)};b.prototype.scrollPages=function(a){this.scrollDisp(a*(this.rows-1))};b.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};b.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};b.prototype.write=function(a){this.writeBuffer.push(a);
this.options.useFlowControl&&!this.xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.send(n.C0.DC3),this.xoffSentToCatchUp=!0);if(!this.writeInProgress&&0<this.writeBuffer.length){this.writeInProgress=!0;var b=this;setTimeout(function(){b.innerWrite()})}};b.prototype.innerWrite=function(){for(var a=this.writeBuffer.splice(0,300);0<a.length;){var b=a.shift();this.xoffSentToCatchUp&&0===a.length&&0===this.writeBuffer.length&&(this.send(n.C0.DC1),this.xoffSentToCatchUp=!1);this.refreshEnd=this.refreshStart=
this.y;b=this.parser.parse(b);this.parser.setState(b);this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)}if(0<this.writeBuffer.length){var c=this;setTimeout(function(){c.innerWrite()},0)}else this.writeInProgress=!1};b.prototype.writeln=function(a){this.write(a+"\r\n")};b.prototype.attachCustomKeydownHandler=function(a){this.customKeydownHandler=a};b.prototype.setHypertextLinkHandler=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext link handler before Terminal.open is called");
this.linkifier.setHypertextLinkHandler(a);this.refresh(0,this.rows-1)};b.prototype.setHypertextValidationCallback=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext validation callback before Terminal.open is called");this.linkifier.setHypertextValidationCallback(a);this.refresh(0,this.rows-1)};b.prototype.registerLinkMatcher=function(a,b,c){if(this.linkifier)return a=this.linkifier.registerLinkMatcher(a,b,c),this.refresh(0,this.rows-1),a};b.prototype.deregisterLinkMatcher=function(a){this.linkifier&&
this.linkifier.deregisterLinkMatcher(a)&&this.refresh(0,this.rows-1)};b.prototype.keyDown=function(b){if(this.customKeydownHandler&&!1===this.customKeydownHandler(b))return!1;this.restartCursorBlinking();if(!this.compositionHelper.keydown.bind(this.compositionHelper)(b))return this.ybase!==this.ydisp&&this.scrollToBottom(),!1;var c=this.evaluateKeyEscapeSequence(b);c.key===n.C0.DC3?this.writeStopped=!0:c.key===n.C0.DC1&&(this.writeStopped=!1);if(c.scrollDisp)return this.scrollDisp(c.scrollDisp),this.cancel(b,
!0);if(a(this,b))return!0;c.cancel&&this.cancel(b,!0);if(!c.key)return!0;this.emit("keydown",b);this.emit("key",c.key,b);this.showCursor();this.handler(c.key);return this.cancel(b,!0)};b.prototype.evaluateKeyEscapeSequence=function(a){var b={cancel:!1,key:void 0,scrollDisp:void 0},c=a.shiftKey<<0|a.altKey<<1|a.ctrlKey<<2|a.metaKey<<3;switch(a.keyCode){case 8:if(a.shiftKey){b.key=n.C0.BS;break}b.key=n.C0.DEL;break;case 9:if(a.shiftKey){b.key=n.C0.ESC+"[Z";break}b.key=n.C0.HT;b.cancel=!0;break;case 13:b.key=
n.C0.CR;b.cancel=!0;break;case 27:b.key=n.C0.ESC;b.cancel=!0;break;case 37:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"D",b.key==n.C0.ESC+"[1;3D"&&(b.key=this.browser.isMac?n.C0.ESC+"b":n.C0.ESC+"[1;5D")):b.key=this.applicationCursor?n.C0.ESC+"OD":n.C0.ESC+"[D";break;case 39:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"C",b.key==n.C0.ESC+"[1;3C"&&(b.key=this.browser.isMac?n.C0.ESC+"f":n.C0.ESC+"[1;5C")):b.key=this.applicationCursor?n.C0.ESC+"OC":n.C0.ESC+"[C";break;case 38:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"A",b.key==n.C0.ESC+
"[1;3A"&&(b.key=n.C0.ESC+"[1;5A")):b.key=this.applicationCursor?n.C0.ESC+"OA":n.C0.ESC+"[A";break;case 40:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"B",b.key==n.C0.ESC+"[1;3B"&&(b.key=n.C0.ESC+"[1;5B")):b.key=this.applicationCursor?n.C0.ESC+"OB":n.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(b.key=n.C0.ESC+"[2~");break;case 46:b.key=c?n.C0.ESC+"[3;"+(c+1)+"~":n.C0.ESC+"[3~";break;case 36:b.key=c?n.C0.ESC+"[1;"+(c+1)+"H":this.applicationCursor?n.C0.ESC+"OH":n.C0.ESC+"[H";break;case 35:b.key=c?n.C0.ESC+"[1;"+
(c+1)+"F":this.applicationCursor?n.C0.ESC+"OF":n.C0.ESC+"[F";break;case 33:a.shiftKey?b.scrollDisp=-(this.rows-1):b.key=n.C0.ESC+"[5~";break;case 34:a.shiftKey?b.scrollDisp=this.rows-1:b.key=n.C0.ESC+"[6~";break;case 112:b.key=c?n.C0.ESC+"[1;"+(c+1)+"P":n.C0.ESC+"OP";break;case 113:b.key=c?n.C0.ESC+"[1;"+(c+1)+"Q":n.C0.ESC+"OQ";break;case 114:b.key=c?n.C0.ESC+"[1;"+(c+1)+"R":n.C0.ESC+"OR";break;case 115:b.key=c?n.C0.ESC+"[1;"+(c+1)+"S":n.C0.ESC+"OS";break;case 116:b.key=c?n.C0.ESC+"[15;"+(c+1)+"~":
n.C0.ESC+"[15~";break;case 117:b.key=c?n.C0.ESC+"[17;"+(c+1)+"~":n.C0.ESC+"[17~";break;case 118:b.key=c?n.C0.ESC+"[18;"+(c+1)+"~":n.C0.ESC+"[18~";break;case 119:b.key=c?n.C0.ESC+"[19;"+(c+1)+"~":n.C0.ESC+"[19~";break;case 120:b.key=c?n.C0.ESC+"[20;"+(c+1)+"~":n.C0.ESC+"[20~";break;case 121:b.key=c?n.C0.ESC+"[21;"+(c+1)+"~":n.C0.ESC+"[21~";break;case 122:b.key=c?n.C0.ESC+"[23;"+(c+1)+"~":n.C0.ESC+"[23~";break;case 123:b.key=c?n.C0.ESC+"[24;"+(c+1)+"~":n.C0.ESC+"[24~";break;default:!a.ctrlKey||a.shiftKey||
a.altKey||a.metaKey?this.browser.isMac||!a.altKey||a.ctrlKey||a.metaKey||(65<=a.keyCode&&90>=a.keyCode?b.key=n.C0.ESC+String.fromCharCode(a.keyCode+32):192===a.keyCode?b.key=n.C0.ESC+"`":48<=a.keyCode&&57>=a.keyCode&&(b.key=n.C0.ESC+(a.keyCode-48))):65<=a.keyCode&&90>=a.keyCode?b.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?b.key=String.fromCharCode(0):51<=a.keyCode&&55>=a.keyCode?b.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?b.key=String.fromCharCode(127):219===a.keyCode?b.key=
String.fromCharCode(27):220===a.keyCode?b.key=String.fromCharCode(28):221===a.keyCode&&(b.key=String.fromCharCode(29))}return b};b.prototype.setgLevel=function(a){this.glevel=a;this.charset=this.charsets[a]};b.prototype.setgCharset=function(a,b){this.charsets[a]=b;this.glevel===a&&(this.charset=b)};b.prototype.keyPress=function(b){this.cancel(b);if(b.charCode)var c=b.charCode;else if(null==b.which)c=b.keyCode;else if(0!==b.which&&0!==b.charCode)c=b.which;else return!1;if(!c||(b.altKey||b.ctrlKey||
b.metaKey)&&!a(this,b))return!1;c=String.fromCharCode(c);this.emit("keypress",c,b);this.emit("key",c,b);this.showCursor();this.handler(c);return!1};b.prototype.send=function(a){var b=this;this.queue||setTimeout(function(){b.handler(b.queue);b.queue=""},1);this.queue+=a};b.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white";setTimeout(function(){a.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};b.prototype.log=function(){if(this.debug&&this.context.console&&
this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,a)}};b.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,a)}};b.prototype.resize=function(a,b){if(!isNaN(a)&&!isNaN(b)){var c;if(a!==this.cols||b!==this.rows){1>a&&(a=1);1>b&&(b=1);var d=this.cols;if(d<a)for(d=[this.defAttr," ",1],c=this.lines.length;c--;)for(;this.lines.get(c).length<
a;)this.lines.get(c).push(d);this.cols=a;this.setupStops(this.cols);d=this.rows;var f=0;if(d<b)for(;d++<b;)this.lines.length<b+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+this.y+f+1?(this.ybase--,f++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<b&&this.insertRow();else for(;d-- >b;)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>b&&(c=this.children.shift())&&
c.parentNode.removeChild(c);this.rows=b;this.y>=b&&(this.y=b-1);f&&(this.y+=f);this.x>=a&&(this.x=a-1);this.scrollTop=0;this.scrollBottom=b-1;this.charMeasure.measure();this.refresh(0,this.rows-1);this.normal=null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:a,rows:b})}}};b.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};b.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};
b.prototype.setupStops=function(a){null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this.cols;a+=this.getOption("tabStopWidth"))this.tabs[a]=!0};b.prototype.prevStop=function(a){null==a&&(a=this.x);for(;!this.tabs[--a]&&0<a;);return a>=this.cols?this.cols-1:0>a?0:a};b.prototype.nextStop=function(a){null==a&&(a=this.x);for(;!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a};b.prototype.eraseRight=function(a,b){var c=this.lines.get(this.ybase+b);if(c){for(var d=
[this.eraseAttr()," ",1];a<this.cols;a++)c[a]=d;this.updateRange(b)}};b.prototype.eraseLeft=function(a,b){var c=this.lines.get(this.ybase+b);if(c){var d=[this.eraseAttr()," ",1];for(a++;a--;)c[a]=d;this.updateRange(b)}};b.prototype.clear=function(){if(0!==this.ybase||0!==this.y){this.lines.set(0,this.lines.get(this.ybase+this.y));this.lines.length=1;this.y=this.ybase=this.ydisp=0;for(var a=1;a<this.rows;a++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};
b.prototype.eraseLine=function(a){this.eraseRight(0,a)};b.prototype.blankLine=function(a){a=[a?this.eraseAttr():this.defAttr," ",1];for(var b=[],c=0;c<this.cols;c++)b[c]=a;return b};b.prototype.ch=function(a){return a?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};b.prototype.is=function(a){return 0===(this.termName+"").indexOf(a)};b.prototype.handler=function(a){this.options.disableStdin||(this.ybase!==this.ydisp&&this.scrollToBottom(),this.emit("data",a))};b.prototype.handleTitle=function(a){this.emit("title",
a)};b.prototype.index=function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.x>=this.cols&&this.x--};b.prototype.reverseIndex=function(){this.y===this.scrollTop?(this.lines.shiftElements(this.y+this.ybase,this.rows-1,1),this.lines.set(this.y+this.ybase,this.blankLine(!0)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)):this.y--};b.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this.customKeydownHandler,c=this.cursorBlinkInterval;
b.call(this,this.options);this.customKeydownHandler=a;this.cursorBlinkInterval=c;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};b.prototype.tabSet=function(){this.tabs[this.x]=!0};b.prototype.matchColor=w;w._cache={};w.distance=function(a,b,c,d,g,h){return Math.pow(30*(a-d),2)+Math.pow(59*(b-g),2)+Math.pow(11*(c-h),2)};b.EventEmitter=p.EventEmitter;b.inherits=c;b.on=l;b.off=m;b.cancel=function(a,b){if(this.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1};g.exports=b},
{"./CompositionHelper":2,"./EscapeSequences":3,"./EventEmitter":4,"./InputHandler":5,"./Linkifier":6,"./Parser":7,"./Renderer":8,"./Viewport":9,"./handlers/Clipboard":10,"./utils/Browser":11,"./utils/CharMeasure":12,"./utils/CircularList":13,"./utils/Mouse":16}]},{},[17])(17)});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,c,e){d!=Array.prototype&&d!=Object.prototype&&(d[c]=e.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var c=0;return $jscomp.iteratorPrototype(function(){return c<d.length?{done:!1,value:d[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,c){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var e=0,h={next:function(){if(e<d.length){var b=e++;return{value:c(b,d[b]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(d,c,e,h){if(c){e=$jscomp.global;d=d.split(".");for(h=0;h<d.length-1;h++){var b=d[h];b in e||(e[b]={});e=e[b]}d=d[d.length-1];h=e[d];c=c(h);c!=h&&null!=c&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6-impl","es3");
var BigInteger=function(){function d(a,m,k){null!=a&&("number"==typeof a?this.fromNumber(a,m,k):null==m&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,m))}function c(){return new d(null)}function e(a,m,k,b,d,g){for(;0<=--g;){var f=m*this[a++]+k[b]+d;d=Math.floor(f/67108864);k[b++]=f&67108863}return d}function h(a,m,k,b,d,g){var f=m&32767;for(m>>=15;0<=--g;){var n=this[a]&32767,D=this[a++]>>15,c=m*n+D*f,n=f*n+((c&32767)<<15)+k[b]+(d&1073741823);d=(n>>>30)+(c>>>15)+m*D+(d>>>30);k[b++]=
n&1073741823}return d}function b(a,m,k,b,d,g){var f=m&16383;for(m>>=14;0<=--g;){var n=this[a]&16383,D=this[a++]>>14,c=m*n+D*f,n=f*n+((c&16383)<<14)+k[b]+d;d=(n>>28)+(c>>14)+m*D;k[b++]=n&268435455}return d}function l(f,m){f=a[f.charCodeAt(m)];return null==f?-1:f}function p(a){var f=c();f.fromInt(a);return f}function r(a){var f=1,k;0!=(k=a>>>16)&&(a=k,f+=16);0!=(k=a>>8)&&(a=k,f+=8);0!=(k=a>>4)&&(a=k,f+=4);0!=(k=a>>2)&&(a=k,f+=2);0!=a>>1&&(f+=1);return f}function u(a){this.m=a}function w(a){this.m=a;
this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function q(a,m){return a&m}function t(a,m){return a|m}function A(a,m){return a^m}function x(a,m){return a&~m}function y(){}function B(a){return a}function z(a){this.r2=c();this.q3=c();d.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}var C;"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=h,C=30):"Netscape"!=navigator.appName?(d.prototype.am=e,C=26):(d.prototype.am=
b,C=28);d.prototype.DB=C;d.prototype.DM=(1<<C)-1;d.prototype.DV=1<<C;d.prototype.FV=Math.pow(2,52);d.prototype.F1=52-C;d.prototype.F2=2*C-52;var a=[],g;C=48;for(g=0;9>=g;++g)a[C++]=g;C=97;for(g=10;36>g;++g)a[C++]=g;C=65;for(g=10;36>g;++g)a[C++]=g;u.prototype.convert=function(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};u.prototype.revert=function(a){return a};u.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};u.prototype.mulTo=function(a,m,k){a.multiplyTo(m,k);this.reduce(k)};u.prototype.sqrTo=
function(a,m){a.squareTo(m);this.reduce(m)};w.prototype.convert=function(a){var f=c();a.abs().dlShiftTo(this.m.t,f);f.divRemTo(this.m,null,f);0>a.s&&0<f.compareTo(d.ZERO)&&this.m.subTo(f,f);return f};w.prototype.revert=function(a){var f=c();a.copyTo(f);this.reduce(f);return f};w.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var f=0;f<this.m.t;++f){var k=a[f]&32767,b=k*this.mpl+((k*this.mph+(a[f]>>15)*this.mpl&this.um)<<15)&a.DM,k=f+this.m.t;for(a[k]+=this.m.am(0,b,a,f,0,this.m.t);a[k]>=
a.DV;)a[k]-=a.DV,a[++k]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};w.prototype.mulTo=function(a,m,k){a.multiplyTo(m,k);this.reduce(k)};w.prototype.sqrTo=function(a,m){a.squareTo(m);this.reduce(m)};d.prototype.copyTo=function(a){for(var f=this.t-1;0<=f;--f)a[f]=this[f];a.t=this.t;a.s=this.s};d.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};d.prototype.fromString=function(a,m){if(16==m)m=4;else if(8==m)m=3;else if(256==
m)m=8;else if(2==m)m=1;else if(32==m)m=5;else if(4==m)m=2;else{this.fromRadix(a,m);return}this.s=this.t=0;for(var f=a.length,b=!1,g=0;0<=--f;){var n=8==m?a[f]&255:l(a,f);0>n?"-"==a.charAt(f)&&(b=!0):(b=!1,0==g?this[this.t++]=n:g+m>this.DB?(this[this.t-1]|=(n&(1<<this.DB-g)-1)<<g,this[this.t++]=n>>this.DB-g):this[this.t-1]|=n<<g,g+=m,g>=this.DB&&(g-=this.DB))}8==m&&0!=(a[0]&128)&&(this.s=-1,0<g&&(this[this.t-1]|=(1<<this.DB-g)-1<<g));this.clamp();b&&d.ZERO.subTo(this,this)};d.prototype.clamp=function(){for(var a=
this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};d.prototype.dlShiftTo=function(a,m){var f;for(f=this.t-1;0<=f;--f)m[f+a]=this[f];for(f=a-1;0<=f;--f)m[f]=0;m.t=this.t+a;m.s=this.s};d.prototype.drShiftTo=function(a,m){for(var f=a;f<this.t;++f)m[f-a]=this[f];m.t=Math.max(this.t-a,0);m.s=this.s};d.prototype.lShiftTo=function(a,m){var f=a%this.DB,b=this.DB-f,d=(1<<b)-1;a=Math.floor(a/this.DB);var g=this.s<<f&this.DM,n;for(n=this.t-1;0<=n;--n)m[n+a+1]=this[n]>>b|g,g=(this[n]&d)<<f;for(n=a-1;0<=n;--n)m[n]=
0;m[a]=g;m.t=this.t+a+1;m.s=this.s;m.clamp()};d.prototype.rShiftTo=function(a,m){m.s=this.s;var f=Math.floor(a/this.DB);if(f>=this.t)m.t=0;else{a%=this.DB;var b=this.DB-a,d=(1<<a)-1;m[0]=this[f]>>a;for(var g=f+1;g<this.t;++g)m[g-f-1]|=(this[g]&d)<<b,m[g-f]=this[g]>>a;0<a&&(m[this.t-f-1]|=(this.s&d)<<b);m.t=this.t-f;m.clamp()}};d.prototype.subTo=function(a,m){for(var f=0,b=0,d=Math.min(a.t,this.t);f<d;)b+=this[f]-a[f],m[f++]=b&this.DM,b>>=this.DB;if(a.t<this.t){for(b-=a.s;f<this.t;)b+=this[f],m[f++]=
b&this.DM,b>>=this.DB;b+=this.s}else{for(b+=this.s;f<a.t;)b-=a[f],m[f++]=b&this.DM,b>>=this.DB;b-=a.s}m.s=0>b?-1:0;-1>b?m[f++]=this.DV+b:0<b&&(m[f++]=b);m.t=f;m.clamp()};d.prototype.multiplyTo=function(a,m){var f=this.abs(),b=a.abs(),g=f.t;for(m.t=g+b.t;0<=--g;)m[g]=0;for(g=0;g<b.t;++g)m[g+f.t]=f.am(0,b[g],m,g,0,f.t);m.s=0;m.clamp();this.s!=a.s&&d.ZERO.subTo(m,m)};d.prototype.squareTo=function(a){for(var f=this.abs(),b=a.t=2*f.t;0<=--b;)a[b]=0;for(b=0;b<f.t-1;++b){var d=f.am(b,f[b],a,2*b,0,1);(a[b+
f.t]+=f.am(b+1,2*f[b],a,2*b+1,d,f.t-b-1))>=f.DV&&(a[b+f.t]-=f.DV,a[b+f.t+1]=1)}0<a.t&&(a[a.t-1]+=f.am(b,f[b],a,2*b,0,1));a.s=0;a.clamp()};d.prototype.divRemTo=function(a,b,k){var f=a.abs();if(!(0>=f.t)){var m=this.abs();if(m.t<f.t)null!=b&&b.fromInt(0),null!=k&&this.copyTo(k);else{null==k&&(k=c());var g=c(),n=this.s;a=a.s;var l=this.DB-r(f[f.t-1]);0<l?(f.lShiftTo(l,g),m.lShiftTo(l,k)):(f.copyTo(g),m.copyTo(k));f=g.t;m=g[f-1];if(0!=m){var v=m*(1<<this.F1)+(1<f?g[f-2]>>this.F2:0),e=this.FV/v,v=(1<<
this.F1)/v,p=1<<this.F2,h=k.t,u=h-f,q=null==b?c():b;g.dlShiftTo(u,q);0<=k.compareTo(q)&&(k[k.t++]=1,k.subTo(q,k));d.ONE.dlShiftTo(f,q);for(q.subTo(g,g);g.t<f;)g[g.t++]=0;for(;0<=--u;){var w=k[--h]==m?this.DM:Math.floor(k[h]*e+(k[h-1]+p)*v);if((k[h]+=g.am(0,w,k,u,0,f))<w)for(g.dlShiftTo(u,q),k.subTo(q,k);k[h]<--w;)k.subTo(q,k)}null!=b&&(k.drShiftTo(f,b),n!=a&&d.ZERO.subTo(b,b));k.t=f;k.clamp();0<l&&k.rShiftTo(l,k);0>n&&d.ZERO.subTo(k,k)}}}};d.prototype.invDigit=function(){if(1>this.t)return 0;var a=
this[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b};d.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};d.prototype.exp=function(a,b){if(4294967295<a||1>a)return d.ONE;var f=c();var m=c();var g=b.convert(this),n=r(a)-1;for(g.copyTo(f);0<=--n;)if(b.sqrTo(f,m),0<(a&1<<n))b.mulTo(m,g,f);else{var l=f;f=m;m=l}return b.revert(f)};d.prototype.toString=function(a){if(0>this.s)return"-"+
this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var f=(1<<a)-1,b,d=!1,g="",n=this.t,c=this.DB-n*this.DB%a;if(0<n--)for(c<this.DB&&0<(b=this[n]>>c)&&(d=!0,g="0123456789abcdefghijklmnopqrstuvwxyz".charAt(b));0<=n;)c<a?(b=(this[n]&(1<<c)-1)<<a-c,b|=this[--n]>>(c+=this.DB-a)):(b=this[n]>>(c-=a)&f,0>=c&&(c+=this.DB,--n)),0<b&&(d=!0),d&&(g+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(b));return d?g:"0"};d.prototype.negate=
function(){var a=c();d.ZERO.subTo(this,a);return a};d.prototype.abs=function(){return 0>this.s?this.negate():this};d.prototype.compareTo=function(a){var f=this.s-a.s;if(0!=f)return f;var b=this.t,f=b-a.t;if(0!=f)return f;for(;0<=--b;)if(0!=(f=this[b]-a[b]))return f;return 0};d.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+r(this[this.t-1]^this.s&this.DM)};d.prototype.mod=function(a){var f=c();this.abs().divRemTo(a,null,f);0>this.s&&0<f.compareTo(d.ZERO)&&a.subTo(f,f);return f};
d.prototype.modPowInt=function(a,b){b=256>a||b.isEven()?new u(b):new w(b);return this.exp(a,b)};d.ZERO=p(0);d.ONE=p(1);y.prototype.convert=B;y.prototype.revert=B;y.prototype.mulTo=function(a,b,d){a.multiplyTo(b,d)};y.prototype.sqrTo=function(a,b){a.squareTo(b)};z.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var b=c();a.copyTo(b);this.reduce(b);return b};z.prototype.revert=function(a){return a};z.prototype.reduce=function(a){a.drShiftTo(this.m.t-
1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};z.prototype.mulTo=function(a,b,d){a.multiplyTo(b,d);this.reduce(d)};z.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};var n=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],v=67108864/n[n.length-1];d.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};d.prototype.toRadix=function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var b=this.chunkSize(a),b=Math.pow(a,
b),f=p(b),d=c(),g=c(),n="";for(this.divRemTo(f,d,g);0<d.signum();)n=(b+g.intValue()).toString(a).substr(1)+n,d.divRemTo(f,d,g);return g.intValue().toString(a)+n};d.prototype.fromRadix=function(a,b){this.fromInt(0);null==b&&(b=10);for(var f=this.chunkSize(b),m=Math.pow(b,f),g=!1,n=0,c=0,v=0;v<a.length;++v){var e=l(a,v);0>e?"-"==a.charAt(v)&&0==this.signum()&&(g=!0):(c=b*c+e,++n>=f&&(this.dMultiply(m),this.dAddOffset(c,0),c=n=0))}0<n&&(this.dMultiply(Math.pow(b,n)),this.dAddOffset(c,0));g&&d.ZERO.subTo(this,
this)};d.prototype.fromNumber=function(a,b,g){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,g),this.testBit(a-1)||this.bitwiseTo(d.ONE.shiftLeft(a-1),t,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(d.ONE.shiftLeft(a-1),this);else{g=[];var f=a&7;g.length=(a>>3)+1;b.nextBytes(g);g[0]=0<f?g[0]&(1<<f)-1:0;this.fromString(g,256)}};d.prototype.bitwiseTo=function(a,b,d){var f,g=Math.min(a.t,this.t);for(f=
0;f<g;++f)d[f]=b(this[f],a[f]);if(a.t<this.t){var m=a.s&this.DM;for(f=g;f<this.t;++f)d[f]=b(this[f],m);d.t=this.t}else{m=this.s&this.DM;for(f=g;f<a.t;++f)d[f]=b(m,a[f]);d.t=a.t}d.s=b(this.s,a.s);d.clamp()};d.prototype.changeBit=function(a,b){a=d.ONE.shiftLeft(a);this.bitwiseTo(a,b,a);return a};d.prototype.addTo=function(a,b){for(var f=0,d=0,g=Math.min(a.t,this.t);f<g;)d+=this[f]+a[f],b[f++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;f<this.t;)d+=this[f],b[f++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=
this.s;f<a.t;)d+=a[f],b[f++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0;0<d?b[f++]=d:-1>d&&(b[f++]=this.DV+d);b.t=f;b.clamp()};d.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};d.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}};d.prototype.multiplyLowerTo=function(a,b,d){var f=Math.min(this.t+a.t,b);d.s=0;for(d.t=f;0<f;)d[--f]=
0;var g;for(g=d.t-this.t;f<g;++f)d[f+this.t]=this.am(0,a[f],d,f,0,this.t);for(g=Math.min(a.t,b);f<g;++f)this.am(0,a[f],d,f,0,b-f);d.clamp()};d.prototype.multiplyUpperTo=function(a,b,d){--b;var f=d.t=this.t+a.t-b;for(d.s=0;0<=--f;)d[f]=0;for(f=Math.max(b-this.t,0);f<a.t;++f)d[this.t+f-b]=this.am(b-f,a[f],d,0,0,this.t+f-b);d.clamp();d.drShiftTo(1,d)};d.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,f=0>this.s?a-1:0;if(0<this.t)if(0==b)f=this[0]%a;else for(var d=this.t-1;0<=d;--d)f=(b*
f+this[d])%a;return f};d.prototype.millerRabin=function(a){var b=this.subtract(d.ONE),f=b.getLowestSetBit();if(0>=f)return!1;var g=b.shiftRight(f);a=a+1>>1;a>n.length&&(a=n.length);for(var l=c(),v=0;v<a;++v){l.fromInt(n[v]);var e=l.modPow(g,this);if(0!=e.compareTo(d.ONE)&&0!=e.compareTo(b)){for(var p=1;p++<f&&0!=e.compareTo(b);)if(e=e.modPowInt(2,this),0==e.compareTo(d.ONE))return!1;if(0!=e.compareTo(b))return!1}}return!0};d.prototype.clone=function(){var a=c();this.copyTo(a);return a};d.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};d.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};d.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};d.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};d.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var d=this.DB-
a*this.DB%8,g,n=0;if(0<a--)for(d<this.DB&&(g=this[a]>>d)!=(this.s&this.DM)>>d&&(b[n++]=g|this.s<<this.DB-d);0<=a;)if(8>d?(g=(this[a]&(1<<d)-1)<<8-d,g|=this[--a]>>(d+=this.DB-8)):(g=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(g&128)&&(g|=-256),0==n&&(this.s&128)!=(g&128)&&++n,0<n||g!=this.s)b[n++]=g;return b};d.prototype.equals=function(a){return 0==this.compareTo(a)};d.prototype.min=function(a){return 0>this.compareTo(a)?this:a};d.prototype.max=function(a){return 0<this.compareTo(a)?this:a};d.prototype.and=
function(a){var b=c();this.bitwiseTo(a,q,b);return b};d.prototype.or=function(a){var b=c();this.bitwiseTo(a,t,b);return b};d.prototype.xor=function(a){var b=c();this.bitwiseTo(a,A,b);return b};d.prototype.andNot=function(a){var b=c();this.bitwiseTo(a,x,b);return b};d.prototype.not=function(){for(var a=c(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];a.t=this.t;a.s=~this.s;return a};d.prototype.shiftLeft=function(a){var b=c();0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b);return b};d.prototype.shiftRight=function(a){var b=
c();0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b);return b};d.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this.DB,a=this[a];if(0==a)a=-1;else{var d=0;0==(a&65535)&&(a>>=16,d+=16);0==(a&255)&&(a>>=8,d+=8);0==(a&15)&&(a>>=4,d+=4);0==(a&3)&&(a>>=2,d+=2);0==(a&1)&&++d;a=d}return b+a}return 0>this.s?this.t*this.DB:-1};d.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,d=0;d<this.t;++d){for(var g=this[d]^b,n=0;0!=g;)g&=g-1,++n;a+=n}return a};d.prototype.testBit=
function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)};d.prototype.setBit=function(a){return this.changeBit(a,t)};d.prototype.clearBit=function(a){return this.changeBit(a,x)};d.prototype.flipBit=function(a){return this.changeBit(a,A)};d.prototype.add=function(a){var b=c();this.addTo(a,b);return b};d.prototype.subtract=function(a){var b=c();this.subTo(a,b);return b};d.prototype.multiply=function(a){var b=c();this.multiplyTo(a,b);return b};d.prototype.divide=function(a){var b=
c();this.divRemTo(a,b,null);return b};d.prototype.remainder=function(a){var b=c();this.divRemTo(a,null,b);return b};d.prototype.divideAndRemainder=function(a){var b=c(),d=c();this.divRemTo(a,b,d);return[b,d]};d.prototype.modPow=function(a,b){var d=a.bitLength(),f=p(1);if(0>=d)return f;var g=18>d?1:48>d?3:144>d?4:768>d?5:6;b=8>d?new u(b):b.isEven()?new z(b):new w(b);var n=[],m=3,l=g-1,v=(1<<g)-1;n[1]=b.convert(this);if(1<g)for(d=c(),b.sqrTo(n[1],d);m<=v;)n[m]=c(),b.mulTo(d,n[m-2],n[m]),m+=2;for(var e=
a.t-1,h,q=!0,t=c(),d=r(a[e])-1;0<=e;){d>=l?h=a[e]>>d-l&v:(h=(a[e]&(1<<d+1)-1)<<l-d,0<e&&(h|=a[e-1]>>this.DB+d-l));for(m=g;0==(h&1);)h>>=1,--m;0>(d-=m)&&(d+=this.DB,--e);if(q)n[h].copyTo(f),q=!1;else{for(;1<m;)b.sqrTo(f,t),b.sqrTo(t,f),m-=2;0<m?b.sqrTo(f,t):(m=f,f=t,t=m);b.mulTo(t,n[h],f)}for(;0<=e&&0==(a[e]&1<<d);)b.sqrTo(f,t),m=f,f=t,t=m,0>--d&&(d=this.DB-1,--e)}return b.revert(f)};d.prototype.modInverse=function(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return d.ZERO;for(var f=a.clone(),
g=this.clone(),n=p(1),c=p(0),l=p(0),v=p(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),b?(n.isEven()&&c.isEven()||(n.addTo(this,n),c.subTo(a,c)),n.rShiftTo(1,n)):c.isEven()||c.subTo(a,c),c.rShiftTo(1,c);for(;g.isEven();)g.rShiftTo(1,g),b?(l.isEven()&&v.isEven()||(l.addTo(this,l),v.subTo(a,v)),l.rShiftTo(1,l)):v.isEven()||v.subTo(a,v),v.rShiftTo(1,v);0<=f.compareTo(g)?(f.subTo(g,f),b&&n.subTo(l,n),c.subTo(v,c)):(g.subTo(f,g),b&&l.subTo(n,l),v.subTo(c,v))}if(0!=g.compareTo(d.ONE))return d.ZERO;
if(0<=v.compareTo(a))return v.subtract(a);if(0>v.signum())v.addTo(a,v);else return v;return 0>v.signum()?v.add(a):v};d.prototype.pow=function(a){return this.exp(a,new y)};d.prototype.gcd=function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var d=b;b=a;a=d}d=b.getLowestSetBit();var g=a.getLowestSetBit();if(0>g)return b;d<g&&(g=d);for(0<g&&(b.rShiftTo(g,b),a.rShiftTo(g,a));0<b.signum();)0<(d=b.getLowestSetBit())&&b.rShiftTo(d,b),0<(d=a.getLowestSetBit())&&
a.rShiftTo(d,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));0<g&&a.lShiftTo(g,a);return a};d.prototype.isProbablePrime=function(a){var b,d=this.abs();if(1==d.t&&d[0]<=n[n.length-1]){for(b=0;b<n.length;++b)if(d[0]==n[b])return!0;return!1}if(d.isEven())return!1;for(b=1;b<n.length;){for(var g=n[b],f=b+1;f<n.length&&g<v;)g*=n[f++];for(g=d.modInt(g);b<f;)if(0==g%n[b++])return!1}return d.millerRabin(a)};return{BigInteger:d}}(),BigInteger=BigInteger.BigInteger;var struct={pack:function(d,c){var e="";switch(d){case "Q":d=new BigInteger("ff",16);e+=String.fromCharCode(c.shiftRight(56).and(d));e+=String.fromCharCode(c.shiftRight(48).and(d));e+=String.fromCharCode(c.shiftRight(40).and(d));e+=String.fromCharCode(c.shiftRight(32).and(d));e+=String.fromCharCode(c.shiftRight(24).and(d));e+=String.fromCharCode(c.shiftRight(16).and(d));e+=String.fromCharCode(c.shiftRight(8).and(d));e+=String.fromCharCode(c.and(d));break;case "I":e+=String.fromCharCode(c>>>24&255),
e+=String.fromCharCode(c>>>16&255),e+=String.fromCharCode(c>>>8&255);case "B":e+=String.fromCharCode(c&255)}return e},unpack:function(d,c){var e=[],h=0,b=0;switch(d){case "Q":b=new BigInteger("0",10);b=b.add((new BigInteger(c.charCodeAt(0).toString(),10)).shiftLeft(56));b=b.add((new BigInteger(c.charCodeAt(1).toString(),10)).shiftLeft(48));b=b.add((new BigInteger(c.charCodeAt(2).toString(),10)).shiftLeft(40));b=b.add((new BigInteger(c.charCodeAt(3).toString(),10)).shiftLeft(32));b=b.add((new BigInteger(c.charCodeAt(4).toString(),
10)).shiftLeft(24));b=b.add((new BigInteger(c.charCodeAt(5).toString(),10)).shiftLeft(16));b=b.add((new BigInteger(c.charCodeAt(6).toString(),10)).shiftLeft(8));b=b.add((new BigInteger(c.charCodeAt(7).toString(),10)).shiftLeft(0));e.push(b);break;case "I":b+=c.charCodeAt(0)<<24>>>0,b+=c.charCodeAt(1)<<16>>>0,b+=c.charCodeAt(2)<<8>>>0,h+=3;case "B":b+=c.charCodeAt(0+h)<<0>>>0,e.push(b)}return e}};function inflate_long(d){var c=new BigInteger("0",10);d.length%4&&(d=Array(4-d.length%4+1).join("\x00")+d);for(var e=0;e<d.length;e+=4)c=c.shiftLeft(32),c=c.add(new BigInteger(struct.unpack("I",d.substring(e,e+4))[0].toString(),10));return c}
function deflate_long(d,c){d="number"==typeof d?new BigInteger(d.toString(),10):d.clone();c=void 0==c?!0:c;for(var e="",h=new BigInteger("-1",10),b=new BigInteger("ffffffff",16);!d.equals(BigInteger.ZERO)&&!d.equals(h);)e=struct.pack("I",d.and(b))+e,d=d.shiftRight(32);for(var b=!1,l=0;l<e.length;++l){if(d.equals(BigInteger.ZERO)&&"\x00"!=e.charAt(l)){b=!0;break}if(d.equals(h)&&"\u00ff"!=e.charAt(l)){b=!0;break}}b||(l=0,e=d.equals(BigInteger.ZERO)?"\x00":"\u00ff");e=e.substring(l);c&&(d.equals(BigInteger.ZERO)&&
128<=e.charCodeAt(0)&&(e="\x00"+e),d.equals(h)&&128>e.charCodeAt(0)&&(e="\u00ff"+e));return e}function toByteArray(d){for(var c=new Uint8Array(d.length),e=0;e<d.length;e++)c[e]=d.charCodeAt(e);return c}function fromByteArray(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function bytesToWords(d){for(var c=[],e=0,h=0;e<d.length;e++,h+=8)c[h>>>5]|=(d[e]&255)<<24-h%32;return c}function wordsToBytes(d){for(var c=[],e=0;e<32*d.length;e+=8)c.push(d[e>>>5]>>>24-e%32&255);return c}
function hex2ascii(d){for(var c="",e=0;e<d.length;e+=2)c+=String.fromCharCode(parseInt(d.substr(e,2),16));return c}function ascii2hex(d){for(var c="",e=0;e<d.length;e++)c=1==d.charCodeAt(e).toString(16).length?c+("0"+d.charCodeAt(e).toString(16)):c+(""+d.charCodeAt(e).toString(16));return c}function setCharAt(d,c,e){return d.substr(0,c)+e+d.substr(c+1)};sjcl={cipher:{}};
sjcl.cipher.aes=function(d,c){this._tables[0][0][0]||this._precompute();this.mode=c;var e,h,b=this._tables[0][4],l=this._tables[1];c=d.length;var p=1;if(4!==c&&6!==c&&8!==c)throw"invalid aes key size";this._key=[e=d.slice(0),h=[]];for(d=c;d<4*c+28;d++){var r=e[d-1];if(0===d%c||8===c&&4===d%c)r=b[r>>>24]<<24^b[r>>16&255]<<16^b[r>>8&255]<<8^b[r&255],0===d%c&&(r=r<<8^r>>>24^p<<24,p=p<<1^283*(p>>7));e[d]=e[d-c]^r}for(c=0;d;c++,d--)r=e[c&3?d:d-4],h[c]=4>=d||4>c?r:l[0][b[r>>>24]]^l[1][b[r>>16&255]]^l[2][b[r>>
8&255]]^l[3][b[r&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(d,c,e){c=this.mode==sjcl.cipher.aes.MODE_CBC?c:[];for(var h=[],b=0;b<d.length/16;b++){var l=d.slice(16*b,16*(b+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var p=0;16>p;p++)l[p]^=c[p];c=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(l),0))}else for(c=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(e.increment())),0)),p=0;16>p;p++)c[p]^=l[p];h=h.concat(c)}return h},decrypt:function(d,c){for(var e=[],h=0;h<d.length/
16;h++){var b=d.slice(16*h,16*(h+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(b),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var l=0;16>l;l++)ct[l]^=c[l];c=b}e=e.concat(ct)}return e},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var d=this._tables[0],c=this._tables[1],e=d[4],h=c[4],b,l,p,r=[],u=[],w;for(b=0;256>b;b++)u[(r[b]=b<<1^283*(b>>7))^b]=b;for(l=p=0;!e[l];l^=w||1,p=u[p]||1){var q=p^p<<1^p<<2^p<<3^p<<4;q=q>>8^q&255^99;e[l]=q;h[q]=l;var t=r[b=
r[w=r[l]]];var A=16843009*t^65537*b^257*w^16843008*l;t=257*r[q]^16843008*q;for(b=0;4>b;b++)d[b][l]=t=t<<24^t>>>8,c[b][q]=A=A<<24^A>>>8}for(b=0;5>b;b++)d[b]=d[b].slice(0),c[b]=c[b].slice(0)},_crypt:function(d,c){if(4!==d.length)throw"invalid aes block size";var e=this._key[c],h=d[0]^e[0],b=d[c?3:1]^e[1],l=d[2]^e[2];d=d[c?1:3]^e[3];var p=e.length/4-2,r,u=4,w=[0,0,0,0];var q=this._tables[c];var t=q[0],A=q[1],x=q[2],y=q[3],B=q[4];for(r=0;r<p;r++){q=t[h>>>24]^A[b>>16&255]^x[l>>8&255]^y[d&255]^e[u];var z=
t[b>>>24]^A[l>>16&255]^x[d>>8&255]^y[h&255]^e[u+1];var C=t[l>>>24]^A[d>>16&255]^x[h>>8&255]^y[b&255]^e[u+2];d=t[d>>>24]^A[h>>16&255]^x[b>>8&255]^y[l&255]^e[u+3];u+=4;h=q;b=z;l=C}for(r=0;4>r;r++)w[c?3&-r:r]=B[h>>>24]<<24^B[b>>16&255]<<16^B[l>>8&255]<<8^B[d&255]^e[u++],q=h,h=b,b=l,l=d,d=q;return w}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(d){var c=[],e=sjcl.bitArray.bitLength(d),h,b;for(h=0;h<e/8;h++)0===(h&3)&&(b=d[h/4]),c.push(b>>>24),b<<=8;return c},toBits:function(d){var c=[],e,h=0;for(e=0;e<d.length;e++)h=h<<8|d[e],3===(e&3)&&(c.push(h),h=0);e&3&&c.push(sjcl.bitArray.partial(8*(e&3),h));return c}};
sjcl.bitArray={bitLength:function(d){var c=d.length;return 0===c?0:32*(c-1)+sjcl.bitArray.getPartial(d[c-1])},partial:function(d,c,e){return 32===d?c:(e?c|0:c<<32-d)+1099511627776*d},getPartial:function(d){return Math.round(d/1099511627776)||32}};SSHyClient.hash={};SSHyClient.hash.SHA1=function(d){this.data=d||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var d=toByteArray(this.data),c=bytesToWords(d),e=8*d.length,d=[],h=1732584193,b=-271733879,l=-1732584194,p=271733878,r=-1009589776;c[e>>5]|=128<<24-e%32;c[(e+64>>>9<<4)+15]=e;for(e=0;e<c.length;e+=16){for(var u=h,w=b,q=l,t=p,A=r,x=0;80>x;x++){if(16>x)d[x]=c[e+x];else{var y=d[x-3]^d[x-8]^d[x-14]^d[x-16];d[x]=y<<1|y>>>31}y=(h<<5|h>>>27)+r+(d[x]>>>0)+(20>x?(b&l|~b&p)+1518500249:40>x?(b^l^p)+1859775393:60>x?(b&l|b&p|l&p)-1894007588:(b^l^p)-899497514);
r=p;p=l;l=b<<30|b>>>2;b=h;h=y}h+=u;b+=w;l+=q;p+=t;r+=A}return fromByteArray(wordsToBytes([h,b,l,p,r]))}};SSHyClient.hash.SHA256=function(d){this.data=d||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var d=toByteArray(this.data),c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],e=bytesToWords(d),h=8*d.length,d=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],b=[],l,p;e[h>>5]|=128<<24-h%32;e[(h+64>>9<<4)+15]=h;for(l=0;l<e.length;l+=16){h=d[0];var r=d[1];var u=d[2];var w=
d[3];var q=d[4];var t=d[5];var A=d[6];var x=d[7];for(p=0;64>p;p++){if(16>p)b[p]=e[p+l];else{var y=b[p-15];var B=b[p-2];b[p]=((y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3)+(b[p-7]>>>0)+((B<<15|B>>>17)^(B<<13|B>>>19)^B>>>10)+(b[p-16]>>>0)}B=h&r^h&u^r&u;var z=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22);y=(x>>>0)+((q<<26|q>>>6)^(q<<21|q>>>11)^(q<<7|q>>>25))+(q&t^~q&A)+c[p]+(b[p]>>>0);B=z+B;x=A;A=t;t=q;q=w+y>>>0;w=u;u=r;r=h;h=y+B>>>0}d[0]+=h;d[1]+=r;d[2]+=u;d[3]+=w;d[4]+=q;d[5]+=t;d[6]+=A;d[7]+=x}return fromByteArray(wordsToBytes(d))}};SSHyClient.hash.HMAC=function(d,c){var e=digestmod=SSHyClient.hash.SHA1,h=new e,b=new e;64<d.length&&(d=(new e(d)).digest());d+=Array(64-d.length+1).join("\x00");e=toByteArray(d).slice(0);d=toByteArray(d).slice(0);for(var l=0;64>l;++l)e[l]^=92,d[l]^=54;h.data+=fromByteArray(e);b.data+=fromByteArray(d);b.data+=c;h.data+=b.digest();return h.digest()};(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=d()})(function(){return function c(e,h,b){function l(r,w){if(!h[r]){if(!e[r]){var q="function"==typeof require&&require;if(!w&&q)return q(r,!0);if(p)return p(r,!0);q=Error("Cannot find module '"+r+"'");throw q.code="MODULE_NOT_FOUND",q;}q=h[r]={exports:{}};
e[r][0].call(q.exports,function(b){var c=e[r][1][b];return l(c?c:b)},q,q.exports,c,e,h,b)}return h[r].exports}for(var p="function"==typeof require&&require,r=0;r<b.length;r++)l(b[r]);return l}({1:[function(c,e,h){function b(b,c,e){this.textarea=b;this.compositionView=c;this.terminal=e;this.isComposing=!1;this.compositionText=null;this.compositionPosition={start:null,end:null};this.isSendingComposition=!1}h.CompositionHelper=b;b.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=
this.textarea.value.length;this.compositionView.textContent="";this.compositionView.classList.add("active")};b.prototype.compositionupdate=function(b){this.compositionView.textContent=b.data;this.updateCompositionElements();var c=this;setTimeout(function(){c.compositionPosition.end=c.textarea.value.length},0)};b.prototype.compositionend=function(){this.finalizeComposition(!0)};b.prototype.keydown=function(b){if(this.isComposing||this.isSendingComposition){if(229===b.keyCode||16===b.keyCode||17===
b.keyCode||18===b.keyCode)return!1;this.finalizeComposition(!1)}return 229===b.keyCode?(this.handleAnyTextareaChanges(),!1):!0};b.prototype.finalizeComposition=function(b){this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(b){var c=this.compositionPosition.start,l=this.compositionPosition.end,e=this;this.isSendingComposition=!0;setTimeout(function(){if(e.isSendingComposition){e.isSendingComposition=!1;var b=e.isComposing?e.textarea.value.substring(c,
l):e.textarea.value.substring(c);e.terminal.handler(b)}},0)}else this.isSendingComposition=!1,b=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(b)};b.prototype.handleAnyTextareaChanges=function(){var b=this.textarea.value,c=this;setTimeout(function(){if(!c.isComposing){var e=c.textarea.value.replace(b,"");0<e.length&&c.terminal.handler(e)}},0)};b.prototype.updateCompositionElements=function(b){if(this.isComposing){var c=this.terminal.element.querySelector(".terminal-cursor");
if(c){var e=this.terminal.element.querySelector(".xterm-rows").offsetTop+c.offsetTop;this.compositionView.style.left=c.offsetLeft+"px";this.compositionView.style.top=e+"px";this.compositionView.style.height=c.offsetHeight+"px";this.compositionView.style.lineHeight=c.offsetHeight+"px";var l=this.compositionView.getBoundingClientRect();this.textarea.style.left=c.offsetLeft+"px";this.textarea.style.top=e+"px";this.textarea.style.width=l.width+"px";this.textarea.style.height=l.height+"px";this.textarea.style.lineHeight=
l.height+"px"}b||setTimeout(this.updateCompositionElements.bind(this,!0),0)}};b.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""}},{}],2:[function(c,e,h){function b(){this._events=this._events||{}}h.EventEmitter=b;b.prototype.addListener=function(b,c){this._events[b]=this._events[b]||[];this._events[b].push(c)};b.prototype.on=b.prototype.addListener;b.prototype.removeListener=function(b,c){if(this._events[b]){b=this._events[b];for(var e=b.length;e--;)if(b[e]===
c||b[e].listener===c){b.splice(e,1);break}}};b.prototype.off=b.prototype.removeListener;b.prototype.removeAllListeners=function(b){this._events[b]&&delete this._events[b]};b.prototype.once=function(b,c){function e(){var l=Array.prototype.slice.call(arguments);this.removeListener(b,e);return c.apply(this,l)}e.listener=c;return this.on(b,e)};b.prototype.emit=function(b){if(this._events[b])for(var c=Array.prototype.slice.call(arguments,1),e=this._events[b],l=e.length,h=0;h<l;h++)e[h].apply(this,c)};
b.prototype.listeners=function(b){return this._events[b]=this._events[b]||[]}},{}],3:[function(c,e,h){function b(b,c,e,h){this.terminal=b;this.viewportElement=c;this.scrollArea=e;this.charMeasureElement=h;this.lastRecordedViewportHeight=this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));this.syncScrollArea()}
h.Viewport=b;b.prototype.refresh=function(b){b=b||this.charMeasureElement.getBoundingClientRect();if(0<b.height){var c=b.height!==this.currentRowHeight;c&&(this.currentRowHeight=b.height,this.viewportElement.style.lineHeight=b.height+"px",this.terminal.rowContainer.style.lineHeight=b.height+"px");var e=this.lastRecordedViewportHeight!==this.terminal.rows;if(c||e)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=b.height*this.terminal.rows+"px";this.scrollArea.style.height=
b.height*this.lastRecordedBufferLength+"px"}};b.prototype.syncScrollArea=function(){if(this.lastRecordedBufferLength!==this.terminal.lines.length)this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh();else if(this.lastRecordedViewportHeight!==this.terminal.rows)this.refresh();else{var b=this.charMeasureElement.getBoundingClientRect();b.height!==this.currentRowHeight&&this.refresh(b)}b=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==b&&(this.viewportElement.scrollTop=
b)};b.prototype.onScroll=function(b){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};b.prototype.onWheel=function(b){if(0!==b.deltaY){var c=1;b.deltaMode===WheelEvent.DOM_DELTA_LINE?c=this.currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=b.deltaY*c;b.preventDefault()}}},{}],4:[function(c,e,h){function b(b){var c=String.fromCharCode(32),e=String.fromCharCode(160),
l=new RegExp(e,"g");return b.split("\n").map(function(b){return b.replace(/\s+$/g,"").replace(l,c)}).join("\n")}h.prepareTextForClipboard=b;h.copyHandler=function(c,e){var h=window.getSelection().toString(),h=b(h);e.browser.isMSIE?window.clipboardData.setData("Text",h):c.clipboardData.setData("text/plain",h);c.preventDefault()};h.pasteHandler=function(b,c){b.stopPropagation();var e=function(e){c.handler(e);c.textarea.value="";return c.cancel(b)};if(c.browser.isMSIE){if(window.clipboardData){var h=
window.clipboardData.getData("Text");e(h)}}else b.clipboardData&&(h=b.clipboardData.getData("text/plain"),e(h))};h.rightClickHandler=function(c,e){var h=document.getSelection();var l=b(h.toString()),p=!1;if(h.rangeCount){h=h.getRangeAt(0).getClientRects();var q=c.clientX;var t=c.clientY;for(c=0;c<h.length&&!(p=h[c],p=q>p.left&&q<p.right&&t>p.top&&t<p.bottom);c++);if(l.match(/^\s$/)||!l.length)p=!1}p||(e.textarea.style.position="fixed",e.textarea.style.width="20px",e.textarea.style.height="20px",e.textarea.style.left=
q-10+"px",e.textarea.style.top=t-10+"px",e.textarea.style.zIndex=1E3,e.textarea.focus(),setTimeout(function(){e.textarea.style.position=null;e.textarea.style.width=null;e.textarea.style.height=null;e.textarea.style.left=null;e.textarea.style.top=null;e.textarea.style.zIndex=null},4))}},{}],5:[function(c,e,h){c=c("./Generic.js");var b="undefined"==typeof navigator?!0:!1;e=b?"node":navigator.userAgent;b=b?"node":navigator.platform;h.isFirefox=!!~e.indexOf("Firefox");h.isMSIE=!!~e.indexOf("MSIE")||!!~e.indexOf("Trident");
h.isMac=c.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],b);h.isIpad="iPad"===b;h.isIphone="iPhone"===b;h.isMSWindows=c.contains(["Windows","Win16","Win32","WinCE"],b)},{"./Generic.js":6}],6:[function(c,e,h){h.contains=function(b,c){return 0<=b.indexOf(c)}},{}],7:[function(c,e,h){function b(a,g,n){var c=this;if(!(this instanceof b))return new b(a,g,n);c.browser=B;c.cancel=b.cancel;A.EventEmitter.call(this);"number"===typeof a&&(a={cols:a,rows:g,handler:n});a=a||{};Object.keys(b.defaults).forEach(function(g){null==
a[g]&&(a[g]=b.options[g],b[g]!==b.defaults[g]&&(a[g]=b[g]));c[g]=a[g]});8===a.colors.length?a.colors=a.colors.concat(b._colors.slice(8)):16===a.colors.length?a.colors=a.colors.concat(b._colors.slice(16)):10===a.colors.length?a.colors=a.colors.slice(0,-2).concat(b._colors.slice(8,-2),a.colors.slice(-2)):18===a.colors.length&&(a.colors=a.colors.concat(b._colors.slice(16,-2),a.colors.slice(-2)));this.colors=a.colors;this.options=a;this.parent=a.body||a.parent||(z?z.getElementsByTagName("body")[0]:null);
this.cols=a.cols||a.geometry[0];this.rows=a.rows||a.geometry[1];this.geometry=[this.cols,this.rows];if(a.handler)this.on("data",a.handler);this.y=this.x=this.ydisp=this.ybase=0;this.isRefreshing=!1;this.cursorState=0;this.cursorHidden=!1;this.convertEol;this.state=0;this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.customKeydownHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=
null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.surrogate_high=this.postfix=this.prefix="";this.lines=[];for(g=this.rows;g--;)this.lines.push(this.blankLine());
this.tabs;this.setupStops();this.userScrolling=!1}function l(a,b,n,c){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(b,n,c||!1)})}function p(a,b,n,c){a.removeEventListener(b,n,c||!1)}function r(a,b){function g(){this.constructor=a}g.prototype=b.prototype;a.prototype=new g}function u(a){var b=a.getElementsByTagName("body")[0];a=a.createElement("span");a.innerHTML="hello world";b.appendChild(a);var n=a.scrollWidth;a.style.fontWeight="bold";var c=a.scrollWidth;b.removeChild(a);return n!==
c}function w(a,b){a=a.browser.isMac&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.browser.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"==b.type?a:a&&(!b.keyCode||47<b.keyCode)}function q(a,g,n){var c=a<<16|g<<8|n;if(null!=q._cache[c])return q._cache[c];for(var f=Infinity,e=-1,k=0,h,l,p;k<b.vcolors.length;k++){h=b.vcolors[k];l=h[0];p=h[1];h=h[2];l=q.distance(a,g,n,l,p,h);if(0===l){e=k;break}l<f&&(f=l,e=k)}return q._cache[c]=e}var t=c("./CompositionHelper.js"),A=c("./EventEmitter.js"),x=c("./Viewport.js"),
y=c("./handlers/Clipboard.js"),B=c("./utils/Browser"),z="undefined"!=typeof window?window.document:null;r(b,A.EventEmitter);b.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};b.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");b.colors=function(){function a(a,b,f){n.push("#"+g(a)+g(b)+g(f))}function g(a){a=a.toString(16);return 2>a.length?"0"+a:a}var n=b.tangoColors.slice(),
c=[0,95,135,175,215,255],f;for(f=0;216>f;f++)a(c[f/36%6|0],c[f/6%6|0],c[f%6]);for(f=0;24>f;f++)c=8+10*f,a(c,c,c);return n}();b._colors=b.colors.slice();b.vcolors=function(){for(var a=[],g=b.colors,n=0,c;256>n;n++)c=parseInt(g[n].substring(1),16),a.push([c>>16&255,c>>8&255,c&255]);return a}();b.defaults={colors:b.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1};b.options={};b.focus=
null;(function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var g=0;g<a.length;g++)b.call(c,a[g],g,a)})(function(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}(b.defaults),function(a){b[a]=b.defaults[a];b.options[a]=b.defaults[a]});b.prototype.focus=function(){return this.textarea.focus()};b.prototype.getOption=function(a,g){if(!(a in b.defaults))throw Error('No option with key "'+a+'"');return"undefined"!==typeof this.options[a]?
this.options[a]:this[a]};b.prototype.setOption=function(a,g){if(!(a in b.defaults))throw Error('No option with key "'+a+'"');this[a]=g;this.options[a]=g};b.bindFocus=function(a){l(a.textarea,"focus",function(g){a.sendFocus&&a.send("\u001b[I");a.element.classList.add("focus");a.showCursor();b.focus=a;a.emit("focus",{terminal:a})})};b.prototype.blur=function(){return this.textarea.blur()};b.bindBlur=function(a){l(a.textarea,"blur",function(g){a.refresh(a.y,a.y);a.sendFocus&&a.send("\u001b[O");a.element.classList.remove("focus");
b.focus=null;a.emit("blur",{terminal:a})})};b.prototype.initGlobal=function(){function a(a){y.rightClickHandler.call(this,a,g)}var g=this;b.bindKeys(this);b.bindFocus(this);b.bindBlur(this);l(this.element,"copy",function(a){y.copyHandler.call(this,a,g)});l(this.textarea,"paste",function(a){y.pasteHandler.call(this,a,g)});g.browser.isFirefox?l(this.element,"mousedown",function(b){2==b.button&&a(b)}):l(this.element,"contextmenu",a)};b.bindKeys=function(a){l(a.element,"keydown",function(b){z.activeElement==
this&&a.keyDown(b)},!0);l(a.element,"keypress",function(b){z.activeElement==this&&a.keyPress(b)},!0);l(a.element,"keyup",a.focus.bind(a));l(a.textarea,"keydown",function(b){a.keyDown(b)},!0);l(a.textarea,"keypress",function(b){a.keyPress(b);this.value=""},!0);l(a.textarea,"compositionstart",a.compositionHelper.compositionstart.bind(a.compositionHelper));l(a.textarea,"compositionupdate",a.compositionHelper.compositionupdate.bind(a.compositionHelper));l(a.textarea,"compositionend",a.compositionHelper.compositionend.bind(a.compositionHelper));
a.on("refresh",a.compositionHelper.updateCompositionElements.bind(a.compositionHelper))};b.prototype.insertRow=function(a){"object"!=typeof a&&(a=z.createElement("div"));this.rowContainer.appendChild(a);this.children.push(a);return a};b.prototype.open=function(a){var g=this,c=0;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];
this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.classList.add("xterm-theme-"+this.theme);this.element.style.height;this.element.setAttribute("tabindex",0);this.viewportElement=z.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=z.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);
this.rowContainer=z.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.helperContainer=z.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=z.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck",
"false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){g.emit("focus",{terminal:g})});this.textarea.addEventListener("blur",function(){g.emit("blur",{terminal:g})});this.helperContainer.appendChild(this.textarea);this.compositionView=z.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new t.CompositionHelper(this.textarea,this.compositionView,this);this.helperContainer.appendChild(this.compositionView);this.charMeasureElement=
z.createElement("div");this.charMeasureElement.classList.add("xterm-char-measure-element");this.charMeasureElement.innerHTML="W";for(this.helperContainer.appendChild(this.charMeasureElement);c<this.rows;c++)this.insertRow();this.parent.appendChild(this.element);this.viewport=new x.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasureElement);this.refresh(0,this.rows-1);this.initGlobal();this.focus();l(this.element,"click",function(){var a=z.getSelection(),b=a.isCollapsed;("boolean"==
typeof b?b:"Range"!=a.type)&&g.focus()});this.bindMouse();null==b.brokenBold&&(b.brokenBold=u(this.document));this.emit("open")};b.loadAddon=function(a,b){if("object"===typeof h&&"object"===typeof e)return c("./addons/"+a+"/"+a);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};b.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var b=null!=a.button?+a.button:null!=a.which?a.which-1:null;k.browser.isMSIE&&(b=1===
b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0<a.wheelDeltaY?64:65}var g=a.shiftKey?4:0;var c=a.metaKey?8:0;var n=a.ctrlKey?16:0;g=g|c|n;k.vt200Mouse?g&=n:k.normalMouse||(g=0);b=32+(g<<2)+b;if(n=f(a))switch(e(b,n),a.overrideType||a.type){case "mousedown":h=b;break;case "mouseup":h=32}}function b(a){var b=h;(a=f(a))&&e(b+32,a)}function c(a,b){if(k.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(2047<b&&(b=2047),a.push(192|b>>6),
a.push(128|b&63))}else{if(255===b)return a.push(0);127<b&&(b=127);a.push(b)}}function e(a,b){if(k.vt300Mouse){a&=3;b.x-=32;b.y-=32;var g="\u001b[24";if(0===a)g+="1";else if(1===a)g+="3";else if(2===a)g+="5";else{if(3===a)return;g+="0"}g+="~["+b.x+","+b.y+"]\r";k.send(g)}else k.decLocator?(a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&(a=3),k.send("\u001b["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w")):k.urxvtMouse?(b.x-=32,b.y-=32,b.x++,b.y++,k.send("\u001b["+a+";"+b.x+";"+
b.y+"M")):k.sgrMouse?(b.x-=32,b.y-=32,k.send("\u001b[<"+(3===(a&3)?a&-4:a)+";"+b.x+";"+b.y+(3===(a&3)?"m":"M"))):(g=[],c(g,a),c(g,b.x),c(g,b.y),k.send("\u001b[M"+String.fromCharCode.apply(String,g)))}function f(a){var b;if(null!=a.pageX){var g=a.pageX;a=a.pageY;for(b=k.element;b&&b!==k.document.documentElement;)g-=b.offsetLeft,a-=b.offsetTop,b="offsetParent"in b?b.offsetParent:b.parentNode;b=k.element.clientWidth;var f=k.element.clientHeight;g=Math.ceil(g/b*k.cols);a=Math.ceil(a/f*k.rows);0>g&&(g=
0);g>k.cols&&(g=k.cols);0>a&&(a=0);a>k.rows&&(a=k.rows);return{x:g+32,y:a+32,type:"wheel"}}}var m=this.element,k=this,h=32;l(m,"mousedown",function(g){if(k.mouseEvents){a(g);k.focus();if(k.vt200Mouse)return g.overrideType="mouseup",a(g),k.cancel(g);k.normalMouse&&l(k.document,"mousemove",b);k.x10Mouse||l(k.document,"mouseup",function E(g){a(g);k.normalMouse&&p(k.document,"mousemove",b);p(k.document,"mouseup",E);return k.cancel(g)});return k.cancel(g)}});l(m,"wheel",function(b){if(k.mouseEvents&&!(k.x10Mouse||
k.vt300Mouse||k.decLocator))return a(b),k.cancel(b)});l(m,"wheel",function(a){if(!k.mouseEvents)return k.viewport.onWheel(a),k.cancel(a)})};b.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=function(){};this.write=function(){};this.element.parentNode&&this.element.parentNode.removeChild(this.element)};b.flags={BOLD:1,UNDERLINE:2,BLINK:4,INVERSE:8,INVISIBLE:16};b.prototype.refresh=function(a,g,c){var n=this;if("undefined"==typeof c||c)this._refreshIsQueued?
this._fullRefreshNext=!0:(setTimeout(function(){n.refresh(a,g,!1)},34),this._refreshIsQueued=!0);else{this._refreshIsQueued=!1;this._fullRefreshNext&&(a=0,g=this.rows-1,this._fullRefreshNext=!1);var f,e,k,h,l;g-a>=this.rows/2&&(l=this.element.parentNode)&&this.element.removeChild(this.rowContainer);var p=this.cols;c=a;for(g>=this.rows.length&&(this.log("`end` is too large. Most likely a bad CSR."),g=this.rows.length-1);c<=g;c++){var q=c+this.ydisp;var r=this.lines[q];var t="";q=this.y===c-(this.ybase-
this.ydisp)&&this.cursorState&&!this.cursorHidden?this.x:-1;var u=this.defAttr;for(f=0;f<p;f++)if(h=r[f][0],e=r[f][1],k=r[f][2]){f===q&&(h=-1);if(h!==u&&(u!==this.defAttr&&(t+="</span>"),h!==this.defAttr))if(-1===h)t+='<span class="reverse-video terminal-cursor',this.cursorBlink&&(t+=" blinking"),t+='">';else{var w=[];k=h&511;u=h>>9&511;var x=h>>18;x&b.flags.BOLD&&(b.brokenBold||w.push("xterm-bold"),8>u&&(u+=8));x&b.flags.UNDERLINE&&w.push("xterm-underline");x&b.flags.BLINK&&w.push("xterm-blink");
x&b.flags.INVERSE&&(k=[u,u=k][0],x&1&&8>u&&(u+=8));x&b.flags.INVISIBLE&&w.push("xterm-hidden");x&b.flags.INVERSE&&(257==k&&(k=15),256==u&&(u=0));256>k&&w.push("xterm-bg-color-"+k);256>u&&w.push("xterm-color-"+u);t+="<span";w.length&&(t+=' class="'+w.join(" ")+'"');t+=">"}switch(e){case "&":t+="&amp;";break;case "<":t+="&lt;";break;case ">":t+="&gt;";break;default:t=" ">=e?t+"&nbsp;":t+e}u=h}u!==this.defAttr&&(t+="</span>");this.children[c].innerHTML=t}l&&this.element.appendChild(this.rowContainer);
this.emit("refresh",{element:this.element,start:a,end:g})}};b.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};b.prototype.scroll=function(){++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1));this.userScrolling||(this.ydisp=this.ybase);var a=this.ybase+this.rows-1;a-=this.rows-1-this.scrollBottom;a===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(a,0,this.blankLine());
0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};b.prototype.scrollDisp=function(a,b){0>a?this.userScrolling=!0:a+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=a;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);b||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-
1)};b.prototype.scrollPages=function(a){this.scrollDisp(a*(this.rows-1))};b.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};b.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};b.prototype.write=function(a){var g=a.length,c=0;this.refreshEnd=this.refreshStart=this.y;for(this.surrogate_high&&(a=this.surrogate_high+a,this.surrogate_high="");c<g;c++){var e=a[c];var f=a.charCodeAt(c);if(55296<=f&&56319>=f){var m=a.charCodeAt(c+1);if(isNaN(m)){this.surrogate_high=
e;continue}f=1024*(f-55296)+(m-56320)+65536;e+=a.charAt(c+1)}if(!(56320<=f&&57343>=f))switch(this.state){case 0:switch(e){case "\u0007":this.bell();break;case "\n":case "\x0B":case "\f":this.convertEol&&(this.x=0);this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());break;case "\r":this.x=0;break;case "\b":0<this.x&&this.x--;break;case "\t":this.x=this.nextStop();break;case "\u000e":this.setgLevel(1);break;case "\u000f":this.setgLevel(0);break;case "\u001b":this.state=1;break;default:if(f=
C(f)," "<=e)if(this.charset&&this.charset[e]&&(e=this.charset[e]),m=this.y+this.ybase,!f&&this.x)this.lines[m][this.x-1]&&(this.lines[m][this.x-1][2]?this.lines[m][this.x-1][1]+=e:this.lines[m][this.x-2]&&(this.lines[m][this.x-2][1]+=e),this.updateRange(this.y));else{if(this.x+f-1>=this.cols)if(this.wraparoundMode)this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());else if(this.x=this.cols-1,2===f)continue;m=this.y+this.ybase;if(this.insertMode)for(var h=0;h<f;++h)0===this.lines[this.y+
this.ybase].pop()[2]&&this.lines[m][this.cols-2]&&2===this.lines[m][this.cols-2][2]&&(this.lines[m][this.cols-2]=[this.curAttr," ",1]),this.lines[m].splice(this.x,0,[this.curAttr," ",1]);this.lines[m][this.x]=[this.curAttr,e,f];this.x++;this.updateRange(this.y);2===f&&(this.lines[m][this.x]=[this.curAttr,"",0],this.x++)}}break;case 1:switch(e){case "[":this.params=[];this.currentParam=0;this.state=2;break;case "]":this.params=[];this.currentParam=0;this.state=3;break;case "P":this.params=[];this.currentParam=
0;this.state=5;break;case "_":this.state=6;break;case "^":this.state=6;break;case "c":this.reset();break;case "E":this.x=0;case "D":this.index();break;case "M":this.reverseIndex();break;case "%":this.setgLevel(0);this.setgCharset(0,b.charsets.US);this.state=0;c++;break;case "(":case ")":case "*":case "+":case "-":case ".":switch(e){case "(":this.gcharset=0;break;case ")":this.gcharset=1;break;case "*":this.gcharset=2;break;case "+":this.gcharset=3;break;case "-":this.gcharset=1;break;case ".":this.gcharset=
2}this.state=4;break;case "/":this.gcharset=3;this.state=4;c--;break;case "N":break;case "O":break;case "n":this.setgLevel(2);break;case "o":this.setgLevel(3);break;case "|":this.setgLevel(3);break;case "}":this.setgLevel(2);break;case "~":this.setgLevel(1);break;case "7":this.saveCursor();this.state=0;break;case "8":this.restoreCursor();this.state=0;break;case "#":this.state=0;c++;break;case "H":this.tabSet();break;case "=":this.log("Serial port requested application keypad.");this.applicationKeypad=
!0;this.viewport.syncScrollArea();this.state=0;break;case ">":this.log("Switching back to normal keypad.");this.applicationKeypad=!1;this.viewport.syncScrollArea();this.state=0;break;default:this.state=0,this.error("Unknown ESC control: %s.",e)}break;case 4:switch(e){case "0":e=b.charsets.SCLD;break;case "A":e=b.charsets.UK;break;case "B":e=b.charsets.US;break;case "4":e=b.charsets.Dutch;break;case "C":case "5":e=b.charsets.Finnish;break;case "R":e=b.charsets.French;break;case "Q":e=b.charsets.FrenchCanadian;
break;case "K":e=b.charsets.German;break;case "Y":e=b.charsets.Italian;break;case "E":case "6":e=b.charsets.NorwegianDanish;break;case "Z":e=b.charsets.Spanish;break;case "H":case "7":e=b.charsets.Swedish;break;case "=":e=b.charsets.Swiss;break;case "/":e=b.charsets.ISOLatin;c++;break;default:e=b.charsets.US}this.setgCharset(this.gcharset,e);this.gcharset=null;this.state=0;break;case 3:if("\u001b"===e||"\u0007"===e){"\u001b"===e&&c++;this.params.push(this.currentParam);switch(this.params[0]){case 0:case 1:case 2:this.params[1]&&
(this.title=this.params[1],this.handleTitle(this.title))}this.params=[];this.state=this.currentParam=0}else this.params.length?this.currentParam+=e:"0"<=e&&"9">=e?this.currentParam=10*this.currentParam+e.charCodeAt(0)-48:";"===e&&(this.params.push(this.currentParam),this.currentParam="");break;case 2:if("?"===e||">"===e||"!"===e){this.prefix=e;break}if("0"<=e&&"9">=e){this.currentParam=10*this.currentParam+e.charCodeAt(0)-48;break}if("$"===e||'"'===e||" "===e||"'"===e){this.postfix=e;break}this.params.push(this.currentParam);
this.currentParam=0;if(";"===e)break;this.state=0;switch(e){case "A":this.cursorUp(this.params);break;case "B":this.cursorDown(this.params);break;case "C":this.cursorForward(this.params);break;case "D":this.cursorBackward(this.params);break;case "H":this.cursorPos(this.params);break;case "J":this.eraseInDisplay(this.params);break;case "K":this.eraseInLine(this.params);break;case "m":this.prefix||this.charAttributes(this.params);break;case "n":this.prefix||this.deviceStatus(this.params);break;case "@":this.insertChars(this.params);
break;case "E":this.cursorNextLine(this.params);break;case "F":this.cursorPrecedingLine(this.params);break;case "G":this.cursorCharAbsolute(this.params);break;case "L":this.insertLines(this.params);break;case "M":this.deleteLines(this.params);break;case "P":this.deleteChars(this.params);break;case "X":this.eraseChars(this.params);break;case "`":this.charPosAbsolute(this.params);break;case "a":this.HPositionRelative(this.params);break;case "c":this.sendDeviceAttributes(this.params);break;case "d":this.linePosAbsolute(this.params);
break;case "e":this.VPositionRelative(this.params);break;case "f":this.HVPosition(this.params);break;case "h":this.setMode(this.params);break;case "l":this.resetMode(this.params);break;case "r":this.setScrollRegion(this.params);break;case "s":this.saveCursor(this.params);break;case "u":this.restoreCursor(this.params);break;case "I":this.cursorForwardTab(this.params);break;case "S":this.scrollUp(this.params);break;case "T":2>this.params.length&&!this.prefix&&this.scrollDown(this.params);break;case "Z":this.cursorBackwardTab(this.params);
break;case "b":this.repeatPrecedingCharacter(this.params);break;case "g":this.tabClear(this.params);break;case "p":switch(this.prefix){case "!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",e)}this.postfix=this.prefix="";break;case 5:if("\u001b"===e||"\u0007"===e){"\u001b"===e&&c++;switch(this.prefix){case "":break;case "$q":e=this.currentParam;f=!1;switch(e){case '"q':e='0"q';break;case '"p':e='61"p';break;case "r":e=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+
"r";break;case "m":e="0m";break;default:this.error("Unknown DCS Pt: %s.",e),e=""}this.send("\u001bP"+ +f+"$r"+e+"\u001b\\");break;case "+p":break;case "+q":e=this.currentParam;f=!1;this.send("\u001bP"+ +f+"+r"+e+"\u001b\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0;this.prefix="";this.state=0}else this.currentParam?this.currentParam+=e:this.prefix||"$"===e||"+"===e?2===this.prefix.length?this.currentParam=e:this.prefix+=e:this.currentParam=e;break;case 6:if("\u001b"===
e||"\u0007"===e)"\u001b"===e&&c++,this.state=0}}this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)};b.prototype.writeln=function(a){this.write(a+"\r\n")};b.prototype.attachCustomKeydownHandler=function(a){this.customKeydownHandler=a};b.prototype.keyDown=function(a){this.ybase!==this.ydisp&&this.scrollToBottom();if(this.customKeydownHandler&&!1===this.customKeydownHandler(a)||!this.compositionHelper.keydown.bind(this.compositionHelper)(a))return!1;var b=this.evaluateKeyEscapeSequence(a);
if(b.scrollDisp)return this.scrollDisp(b.scrollDisp),this.cancel(a,!0);if(w(this,a))return!0;b.cancel&&this.cancel(a,!0);if(!b.key)return!0;this.emit("keydown",a);this.emit("key",b.key,a);this.showCursor();this.handler(b.key);return this.cancel(a,!0)};b.prototype.evaluateKeyEscapeSequence=function(a){var b={cancel:!1,key:void 0,scrollDisp:void 0},c=a.shiftKey<<0|a.altKey<<1|a.ctrlKey<<2|a.metaKey<<3;switch(a.keyCode){case 8:if(a.shiftKey){b.key="\b";break}b.key="\u007f";break;case 9:if(a.shiftKey){b.key=
"\u001b[Z";break}b.key="\t";b.cancel=!0;break;case 13:b.key="\r";b.cancel=!0;break;case 27:b.key="\u001b";b.cancel=!0;break;case 37:c?(b.key="\u001b[1;"+(c+1)+"D","\u001b[1;3D"==b.key&&(b.key="\u001b[1;5D")):b.key=this.applicationCursor?"\u001bOD":"\u001b[D";break;case 39:c?(b.key="\u001b[1;"+(c+1)+"C","\u001b[1;3C"==b.key&&(b.key="\u001b[1;5C")):b.key=this.applicationCursor?"\u001bOC":"\u001b[C";break;case 38:c?(b.key="\u001b[1;"+(c+1)+"A","\u001b[1;3A"==b.key&&(b.key="\u001b[1;5A")):b.key=this.applicationCursor?
"\u001bOA":"\u001b[A";break;case 40:c?(b.key="\u001b[1;"+(c+1)+"B","\u001b[1;3B"==b.key&&(b.key="\u001b[1;5B")):b.key=this.applicationCursor?"\u001bOB":"\u001b[B";break;case 45:a.shiftKey||a.ctrlKey||(b.key="\u001b[2~");break;case 46:b.key=c?"\u001b[3;"+(c+1)+"~":"\u001b[3~";break;case 36:b.key=c?"\u001b[1;"+(c+1)+"H":this.applicationCursor?"\u001bOH":"\u001b[H";break;case 35:b.key=c?"\u001b[1;"+(c+1)+"F":this.applicationCursor?"\u001bOF":"\u001b[F";break;case 33:a.shiftKey?b.scrollDisp=-(this.rows-
1):b.key="\u001b[5~";break;case 34:a.shiftKey?b.scrollDisp=this.rows-1:b.key="\u001b[6~";break;case 112:b.key=c?"\u001b[1;"+(c+1)+"P":"\u001bOP";break;case 113:b.key=c?"\u001b[1;"+(c+1)+"Q":"\u001bOQ";break;case 114:b.key=c?"\u001b[1;"+(c+1)+"R":"\u001bOR";break;case 115:b.key=c?"\u001b[1;"+(c+1)+"S":"\u001bOS";break;case 116:b.key=c?"\u001b[15;"+(c+1)+"~":"\u001b[15~";break;case 117:b.key=c?"\u001b[17;"+(c+1)+"~":"\u001b[17~";break;case 118:b.key=c?"\u001b[18;"+(c+1)+"~":"\u001b[18~";break;case 119:b.key=
c?"\u001b[19;"+(c+1)+"~":"\u001b[19~";break;case 120:b.key=c?"\u001b[20;"+(c+1)+"~":"\u001b[20~";break;case 121:b.key=c?"\u001b[21;"+(c+1)+"~":"\u001b[21~";break;case 122:b.key=c?"\u001b[23;"+(c+1)+"~":"\u001b[23~";break;case 123:b.key=c?"\u001b[24;"+(c+1)+"~":"\u001b[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?this.browser.isMac||!a.altKey||a.ctrlKey||a.metaKey||(65<=a.keyCode&&90>=a.keyCode?b.key="\u001b"+String.fromCharCode(a.keyCode+32):192===a.keyCode?b.key="\u001b`":48<=a.keyCode&&
57>=a.keyCode&&(b.key="\u001b"+(a.keyCode-48))):65<=a.keyCode&&90>=a.keyCode?b.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?b.key=String.fromCharCode(0):51<=a.keyCode&&55>=a.keyCode?b.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?b.key=String.fromCharCode(127):219===a.keyCode?b.key=String.fromCharCode(27):221===a.keyCode&&(b.key=String.fromCharCode(29))}return b};b.prototype.setgLevel=function(a){this.glevel=a;this.charset=this.charsets[a]};b.prototype.setgCharset=function(a,b){this.charsets[a]=
b;this.glevel===a&&(this.charset=b)};b.prototype.keyPress=function(a){this.cancel(a);if(a.charCode)var b=a.charCode;else if(null==a.which)b=a.keyCode;else if(0!==a.which&&0!==a.charCode)b=a.which;else return!1;if(!b||(a.altKey||a.ctrlKey||a.metaKey)&&!w(this,a))return!1;b=String.fromCharCode(b);this.emit("keypress",b,a);this.emit("key",b,a);this.showCursor();this.handler(b);return!1};b.prototype.send=function(a){var b=this;this.queue||setTimeout(function(){b.handler(b.queue);b.queue=""},1);this.queue+=
a};b.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white";setTimeout(function(){a.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};b.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,a)}};b.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);
this.context.console.error.apply(this.context.console,a)}};b.prototype.resize=function(a,b){var c;if(a!==this.cols||b!==this.rows){1>a&&(a=1);1>b&&(b=1);var e=this.cols;if(e<a){var f=[this.defAttr," ",1];for(c=this.lines.length;c--;)for(;this.lines[c].length<a;)this.lines[c].push(f)}else for(c=this.lines.length;c--;)for(;this.lines[c].length>a;)this.lines[c].pop();this.setupStops(e);this.cols=a;e=this.rows;f=0;if(e<b)for(;e++<b;)this.lines.length<b+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+
this.y+f+1?(this.ybase--,f++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<b&&this.insertRow();else for(;e-- >b;)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>b&&(c=this.children.shift())&&c.parentNode.removeChild(c);this.rows=b;this.y>=b&&(this.y=b-1);f&&(this.y+=f);this.x>=a&&(this.x=a-1);this.scrollTop=0;this.scrollBottom=b-1;this.refresh(0,this.rows-1);this.normal=
null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:a,rows:b})}};b.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};b.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};b.prototype.setupStops=function(a){for(null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this.cols;a+=8)this.tabs[a]=!0};b.prototype.prevStop=function(a){for(null==a&&(a=this.x);!this.tabs[--a]&&
0<a;);return a>=this.cols?this.cols-1:0>a?0:a};b.prototype.nextStop=function(a){for(null==a&&(a=this.x);!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a};b.prototype.eraseRight=function(a,b){for(var c=this.lines[this.ybase+b],e=[this.eraseAttr()," ",1];a<this.cols;a++)c[a]=e;this.updateRange(b)};b.prototype.eraseLeft=function(a,b){var c=this.lines[this.ybase+b],e=[this.eraseAttr()," ",1];for(a++;a--;)c[a]=e;this.updateRange(b)};b.prototype.clear=function(){if(0!==this.ybase||
0!==this.y){this.lines=[this.lines[this.ybase+this.y]];this.y=this.ybase=this.ydisp=0;for(var a=1;a<this.rows;a++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};b.prototype.eraseLine=function(a){this.eraseRight(0,a)};b.prototype.blankLine=function(a){a=[a?this.eraseAttr():this.defAttr," ",1];for(var b=[],c=0;c<this.cols;c++)b[c]=a;return b};b.prototype.ch=function(a){return a?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};b.prototype.is=function(a){return 0===
(this.termName+"").indexOf(a)};b.prototype.handler=function(a){this.emit("data",a)};b.prototype.handleTitle=function(a){this.emit("title",a)};b.prototype.index=function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.state=0};b.prototype.reverseIndex=function(){var a;this.y--;this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),a=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-a+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom));
this.state=0};b.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this.customKeydownHandler;b.call(this,this.options);this.customKeydownHandler=a;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};b.prototype.tabSet=function(){this.tabs[this.x]=!0;this.state=0};b.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this.y-=a;0>this.y&&(this.y=0)};b.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this.y+=a;this.y>=this.rows&&(this.y=this.rows-1)};b.prototype.cursorForward=
function(a){a=a[0];1>a&&(a=1);this.x+=a;this.x>=this.cols&&(this.x=this.cols-1)};b.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this.x-=a;0>this.x&&(this.x=0)};b.prototype.cursorPos=function(a){var b=a[0]-1;a=2<=a.length?a[1]-1:0;0>b?b=0:b>=this.rows&&(b=this.rows-1);0>a?a=0:a>=this.cols&&(a=this.cols-1);this.x=a;this.y=b};b.prototype.eraseInDisplay=function(a){switch(a[0]){case 0:this.eraseRight(this.x,this.y);for(a=this.y+1;a<this.rows;a++)this.eraseLine(a);break;case 1:this.eraseLeft(this.x,
this.y);for(a=this.y;a--;)this.eraseLine(a);break;case 2:for(a=this.rows;a--;)this.eraseLine(a)}};b.prototype.eraseInLine=function(a){switch(a[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}};b.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])this.curAttr=this.defAttr;else{for(var b=a.length,c=0,e=this.curAttr>>18,f=this.curAttr>>9&511,h=this.curAttr&511,k;c<b;c++)k=a[c],30<=k&&37>=k?f=k-30:40<=k&&47>=k?h=k-40:
90<=k&&97>=k?(k+=8,f=k-90):100<=k&&107>=k?(k+=8,h=k-100):0===k?(e=this.defAttr>>18,f=this.defAttr>>9&511,h=this.defAttr&511):1===k?e|=1:4===k?e|=2:5===k?e|=4:7===k?e|=8:8===k?e|=16:22===k?e&=-2:24===k?e&=-3:25===k?e&=-5:27===k?e&=-9:28===k?e&=-17:39===k?f=this.defAttr>>9&511:49===k?h=this.defAttr&511:38===k?2===a[c+1]?(c+=2,f=q(a[c]&255,a[c+1]&255,a[c+2]&255),-1===f&&(f=511),c+=2):5===a[c+1]&&(c+=2,f=a[c]&255):48===k?2===a[c+1]?(c+=2,h=q(a[c]&255,a[c+1]&255,a[c+2]&255),-1===h&&(h=511),c+=2):5===a[c+
1]&&(c+=2,h=a[c]&255):100===k?(f=this.defAttr>>9&511,h=this.defAttr&511):this.error("Unknown SGR attribute: %d.",k);this.curAttr=e<<18|f<<9|h}};b.prototype.deviceStatus=function(a){if(!this.prefix)switch(a[0]){case 5:this.send("\u001b[0n");break;case 6:this.send("\u001b["+(this.y+1)+";"+(this.x+1)+"R")}else if("?"===this.prefix)switch(a[0]){case 6:this.send("\u001b[?"+(this.y+1)+";"+(this.x+1)+"R")}};b.prototype.insertChars=function(a){var b;a=a[0];1>a&&(a=1);var c=this.y+this.ybase;var e=this.x;
for(b=[this.eraseAttr()," ",1];a--&&e<this.cols;)this.lines[c].splice(e++,0,b),this.lines[c].pop()};b.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this.y+=a;this.y>=this.rows&&(this.y=this.rows-1);this.x=0};b.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this.y-=a;0>this.y&&(this.y=0);this.x=0};b.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this.x=a-1};b.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);var b=this.y+this.ybase;var c=this.rows-1-this.scrollBottom;
for(c=this.rows-1+this.ybase-c+1;a--;)this.lines.splice(b,0,this.blankLine(!0)),this.lines.splice(c,1);this.updateRange(this.y);this.updateRange(this.scrollBottom)};b.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var b=this.y+this.ybase;var c=this.rows-1-this.scrollBottom;for(c=this.rows-1+this.ybase-c;a--;)this.lines.splice(c+1,0,this.blankLine(!0)),this.lines.splice(b,1);this.updateRange(this.y);this.updateRange(this.scrollBottom)};b.prototype.deleteChars=function(a){var b;a=a[0];1>a&&(a=
1);var c=this.y+this.ybase;for(b=[this.eraseAttr()," ",1];a--;)this.lines[c].splice(this.x,1),this.lines[c].push(b)};b.prototype.eraseChars=function(a){var b;a=a[0];1>a&&(a=1);var c=this.y+this.ybase;var e=this.x;for(b=[this.eraseAttr()," ",1];a--&&e<this.cols;)this.lines[c][e++]=b};b.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this.x=a-1;this.x>=this.cols&&(this.x=this.cols-1)};b.prototype.HPositionRelative=function(a){a=a[0];1>a&&(a=1);this.x+=a;this.x>=this.cols&&(this.x=this.cols-
1)};b.prototype.sendDeviceAttributes=function(a){0<a[0]||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("\u001b[>0;276;0c"):this.is("rxvt-unicode")?this.send("\u001b[>85;95;0c"):this.is("linux")?this.send(a[0]+"c"):this.is("screen")&&this.send("\u001b[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("\u001b[?1;2c"):this.is("linux")&&this.send("\u001b[?6c"))};b.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this.y=a-1;this.y>=this.rows&&(this.y=
this.rows-1)};b.prototype.VPositionRelative=function(a){a=a[0];1>a&&(a=1);this.y+=a;this.y>=this.rows&&(this.y=this.rows-1)};b.prototype.HVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this.y=a[0]-1;this.y>=this.rows&&(this.y=this.rows-1);this.x=a[1]-1;this.x>=this.cols&&(this.x=this.cols-1)};b.prototype.setMode=function(a){if("object"===typeof a)for(var c=a.length,e=0;e<c;e++)this.setMode(a[e]);else if(!this.prefix)switch(a){case 4:this.insertMode=!0}else if("?"===this.prefix)switch(a){case 1:this.applicationCursor=
!0;break;case 2:this.setgCharset(0,b.charsets.US);this.setgCharset(1,b.charsets.US);this.setgCharset(2,b.charsets.US);this.setgCharset(3,b.charsets.US);break;case 3:this.savedCols=this.cols;this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 66:this.log("Serial port requested application keypad.");this.applicationKeypad=!0;this.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this.x10Mouse=9===a;this.vt200Mouse=1E3===a;this.normalMouse=
1E3<a;this.mouseEvents=!0;this.element.style.cursor="default";this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:this.normal||(a={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs},this.reset(),this.normal=a,this.showCursor())}};
b.prototype.resetMode=function(a){if("object"===typeof a)for(var b=a.length,c=0;c<b;c++)this.resetMode(a[c]);else if(!this.prefix)switch(a){case 4:this.insertMode=!1}else if("?"===this.prefix)switch(a){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows);delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 66:this.log("Switching back to normal keypad.");this.applicationKeypad=!1;this.viewport.syncScrollArea();
break;case 9:case 1E3:case 1002:case 1003:this.mouseEvents=this.normalMouse=this.vt200Mouse=this.x10Mouse=!1;this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,
this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}};b.prototype.setScrollRegion=function(a){this.prefix||(this.scrollTop=(a[0]||1)-1,this.scrollBottom=(a[1]||this.rows)-1,this.y=this.x=0)};b.prototype.saveCursor=function(a){this.savedX=this.x;this.savedY=this.y};b.prototype.restoreCursor=function(a){this.x=this.savedX||0;this.y=this.savedY||0};b.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this.x=this.nextStop()};
b.prototype.scrollUp=function(a){for(a=a[0]||1;a--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom)};b.prototype.scrollDown=function(a){for(a=a[0]||1;a--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom)};b.prototype.initMouseTracking=
function(a){};b.prototype.resetTitleModes=function(a){};b.prototype.cursorBackwardTab=function(a){for(a=a[0]||1;a--;)this.x=this.prevStop()};b.prototype.repeatPrecedingCharacter=function(a){a=a[0]||1;for(var b=this.lines[this.ybase+this.y],c=b[this.x-1]||[this.defAttr," ",1];a--;)b[this.x++]=c};b.prototype.tabClear=function(a){a=a[0];0>=a?delete this.tabs[this.x]:3===a&&(this.tabs={})};b.prototype.mediaCopy=function(a){};b.prototype.setResources=function(a){};b.prototype.disableModifiers=function(a){};
b.prototype.setPointerMode=function(a){};b.prototype.softReset=function(a){this.applicationKeypad=this.wraparoundMode=this.originMode=this.insertMode=this.cursorHidden=!1;this.viewport.syncScrollArea();this.applicationCursor=!1;this.scrollTop=0;this.scrollBottom=this.rows-1;this.curAttr=this.defAttr;this.x=this.y=0;this.charset=null;this.glevel=0;this.charsets=[null]};b.prototype.requestAnsiMode=function(a){};b.prototype.requestPrivateMode=function(a){};b.prototype.setConformanceLevel=function(a){};
b.prototype.loadLEDs=function(a){};b.prototype.setCursorStyle=function(a){};b.prototype.setCharProtectionAttr=function(a){};b.prototype.restorePrivateValues=function(a){};b.prototype.setAttrInRectangle=function(a){for(var b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],k,l;b<e+1;b++)for(k=this.lines[this.ybase+b],l=c;l<f;l++)k[l]=[h,k[l][1]];this.updateRange(a[0]);this.updateRange(a[2])};b.prototype.fillRectangle=function(a){for(var b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],k,l;c<f+1;c++)for(k=this.lines[this.ybase+
c],l=e;l<h;l++)k[l]=[k[l][0],String.fromCharCode(b)];this.updateRange(a[1]);this.updateRange(a[3])};b.prototype.enableLocatorReporting=function(a){};b.prototype.eraseRectangle=function(a){var b=a[0],c=a[1],e=a[2],f=a[3],h,k;for(k=[this.eraseAttr()," ",1];b<e+1;b++){var l=this.lines[this.ybase+b];for(h=c;h<f;h++)l[h]=k}this.updateRange(a[0]);this.updateRange(a[2])};b.prototype.insertColumns=function(){for(var a=params[0],b=this.ybase+this.rows,c=[this.eraseAttr()," ",1],e;a--;)for(e=this.ybase;e<b;e++)this.lines[e].splice(this.x+
1,0,c),this.lines[e].pop();this.maxRange()};b.prototype.deleteColumns=function(){for(var a=params[0],b=this.ybase+this.rows,c=[this.eraseAttr()," ",1],e;a--;)for(e=this.ybase;e<b;e++)this.lines[e].splice(this.x,1),this.lines[e].push(c);this.maxRange()};b.charsets={};b.charsets.SCLD={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",
v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};b.charsets.UK=null;b.charsets.US=null;b.charsets.Dutch=null;b.charsets.Finnish=null;b.charsets.French=null;b.charsets.FrenchCanadian=null;b.charsets.German=null;b.charsets.Italian=null;b.charsets.NorwegianDanish=null;b.charsets.Spanish=null;b.charsets.Swedish=null;b.charsets.Swiss=null;b.charsets.ISOLatin=null;q._cache={};q.distance=function(a,b,c,e,f,h){return Math.pow(30*(a-e),2)+Math.pow(59*
(b-f),2)+Math.pow(11*(c-h),2)};var C=function(a){var b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,
2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,
3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],
[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(c){if(0===c)return a.nul;if(32>c||127<=c&&160>c)return a.control;a:{var e=0;var f=b.length-1,g;if(!(c<b[0][0]||c>b[f][1]))for(;f>=e;)if(g=Math.floor((e+f)/2),c>b[g][1])e=g+1;
else if(c<b[g][0])f=g-1;else{e=!0;break a}e=!1}return e?0:1+(4352<=c&&(4447>=c||9001==c||9002==c||11904<=c&&42191>=c&&12351!=c||44032<=c&&55203>=c||63744<=c&&64255>=c||65040<=c&&65049>=c||65072<=c&&65135>=c||65280<=c&&65376>=c||65504<=c&&65510>=c||131072<=c&&196605>=c||196608<=c&&262141>=c))}}({nul:0,control:0});b.EventEmitter=A.EventEmitter;b.CompositionHelper=t.CompositionHelper;b.Viewport=x.Viewport;b.inherits=r;b.on=l;b.off=p;b.cancel=function(a,b){if(this.cancelEvents||b)return a.preventDefault(),
a.stopPropagation(),!1};e.exports=b},{"./CompositionHelper.js":1,"./EventEmitter.js":2,"./Viewport.js":3,"./handlers/Clipboard.js":4,"./utils/Browser":5}]},{},[7])(7)});

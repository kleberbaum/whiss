var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,b,h){d!=Array.prototype&&d!=Object.prototype&&(d[b]=h.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,b,h,f){if(b){h=$jscomp.global;d=d.split(".");for(f=0;f<d.length-1;f++){var a=d[f];a in h||(h[a]={});h=h[a]}d=d[d.length-1];f=h[d];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(h,d,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.setPrototypeOf",function(d){return d?d:"object"!=typeof"".__proto__?null:function(d,h){d.__proto__=h;if(d.__proto__!==h)throw new TypeError(d+" is not extensible");return d}},"es6","es5");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var b=0;return $jscomp.iteratorPrototype(function(){return b<d.length?{done:!1,value:d[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,b){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var h=0,f={next:function(){if(h<d.length){var a=h++;return{value:b(a,d[a]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6-impl","es3");
var BigInteger=function(){function d(t,a,d){null!=t&&("number"==typeof t?this.fromNumber(t,a,d):null==a&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,a))}function b(){return new d(null)}function h(t,a,d,l,c,b){for(;0<=--b;){var A=a*this[t++]+d[l]+c;c=Math.floor(A/67108864);d[l++]=A&67108863}return c}function f(t,a,d,l,c,b){var A=a&32767;for(a>>=15;0<=--b;){var g=this[t]&32767,k=this[t++]>>15,m=a*g+k*A,g=A*g+((m&32767)<<15)+d[l]+(c&1073741823);c=(g>>>30)+(m>>>15)+a*k+(c>>>30);d[l++]=
g&1073741823}return c}function a(t,a,d,l,c,b){var A=a&16383;for(a>>=14;0<=--b;){var g=this[t]&16383,k=this[t++]>>14,m=a*g+k*A,g=A*g+((m&16383)<<14)+d[l]+c;c=(g>>28)+(m>>14)+a*k;d[l++]=g&268435455}return c}function e(a,d){a=w[a.charCodeAt(d)];return null==a?-1:a}function k(a){var t=b();t.fromInt(a);return t}function g(a){var t=1,d;0!=(d=a>>>16)&&(a=d,t+=16);0!=(d=a>>8)&&(a=d,t+=8);0!=(d=a>>4)&&(a=d,t+=4);0!=(d=a>>2)&&(a=d,t+=2);0!=a>>1&&(t+=1);return t}function c(a){this.m=a}function r(a){this.m=a;
this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function p(a,d){return a&d}function q(a,d){return a|d}function m(a,d){return a^d}function u(a,d){return a&~d}function x(){}function n(a){return a}function C(a){this.r2=b();this.q3=b();d.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}var v;"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=f,v=30):"Netscape"!=navigator.appName?(d.prototype.am=h,v=26):(d.prototype.am=
a,v=28);d.prototype.DB=v;d.prototype.DM=(1<<v)-1;d.prototype.DV=1<<v;d.prototype.FV=Math.pow(2,52);d.prototype.F1=52-v;d.prototype.F2=2*v-52;var w=[],B;v=48;for(B=0;9>=B;++B)w[v++]=B;v=97;for(B=10;36>B;++B)w[v++]=B;v=65;for(B=10;36>B;++B)w[v++]=B;c.prototype.convert=function(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};c.prototype.revert=function(a){return a};c.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};c.prototype.mulTo=function(a,d,c){a.multiplyTo(d,c);this.reduce(c)};c.prototype.sqrTo=
function(a,d){a.squareTo(d);this.reduce(d)};r.prototype.convert=function(a){var c=b();a.abs().dlShiftTo(this.m.t,c);c.divRemTo(this.m,null,c);0>a.s&&0<c.compareTo(d.ZERO)&&this.m.subTo(c,c);return c};r.prototype.revert=function(a){var d=b();a.copyTo(d);this.reduce(d);return d};r.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var d=0;d<this.m.t;++d){var c=a[d]&32767,l=c*this.mpl+((c*this.mph+(a[d]>>15)*this.mpl&this.um)<<15)&a.DM,c=d+this.m.t;for(a[c]+=this.m.am(0,l,a,d,0,this.m.t);a[c]>=
a.DV;)a[c]-=a.DV,a[++c]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};r.prototype.mulTo=function(a,d,c){a.multiplyTo(d,c);this.reduce(c)};r.prototype.sqrTo=function(a,d){a.squareTo(d);this.reduce(d)};d.prototype.copyTo=function(a){for(var d=this.t-1;0<=d;--d)a[d]=this[d];a.t=this.t;a.s=this.s};d.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};d.prototype.fromString=function(a,c){if(16==c)c=4;else if(8==c)c=3;else if(256==
c)c=8;else if(2==c)c=1;else if(32==c)c=5;else if(4==c)c=2;else{this.fromRadix(a,c);return}this.s=this.t=0;for(var b=a.length,l=!1,t=0;0<=--b;){var g=8==c?a[b]&255:e(a,b);0>g?"-"==a.charAt(b)&&(l=!0):(l=!1,0==t?this[this.t++]=g:t+c>this.DB?(this[this.t-1]|=(g&(1<<this.DB-t)-1)<<t,this[this.t++]=g>>this.DB-t):this[this.t-1]|=g<<t,t+=c,t>=this.DB&&(t-=this.DB))}8==c&&0!=(a[0]&128)&&(this.s=-1,0<t&&(this[this.t-1]|=(1<<this.DB-t)-1<<t));this.clamp();l&&d.ZERO.subTo(this,this)};d.prototype.clamp=function(){for(var a=
this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};d.prototype.dlShiftTo=function(a,d){var c;for(c=this.t-1;0<=c;--c)d[c+a]=this[c];for(c=a-1;0<=c;--c)d[c]=0;d.t=this.t+a;d.s=this.s};d.prototype.drShiftTo=function(a,d){for(var c=a;c<this.t;++c)d[c-a]=this[c];d.t=Math.max(this.t-a,0);d.s=this.s};d.prototype.lShiftTo=function(a,d){var c=a%this.DB,l=this.DB-c,b=(1<<l)-1;a=Math.floor(a/this.DB);var t=this.s<<c&this.DM,g;for(g=this.t-1;0<=g;--g)d[g+a+1]=this[g]>>l|t,t=(this[g]&b)<<c;for(g=a-1;0<=g;--g)d[g]=
0;d[a]=t;d.t=this.t+a+1;d.s=this.s;d.clamp()};d.prototype.rShiftTo=function(a,d){d.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)d.t=0;else{a%=this.DB;var l=this.DB-a,b=(1<<a)-1;d[0]=this[c]>>a;for(var g=c+1;g<this.t;++g)d[g-c-1]|=(this[g]&b)<<l,d[g-c]=this[g]>>a;0<a&&(d[this.t-c-1]|=(this.s&b)<<l);d.t=this.t-c;d.clamp()}};d.prototype.subTo=function(a,d){for(var c=0,l=0,b=Math.min(a.t,this.t);c<b;)l+=this[c]-a[c],d[c++]=l&this.DM,l>>=this.DB;if(a.t<this.t){for(l-=a.s;c<this.t;)l+=this[c],d[c++]=
l&this.DM,l>>=this.DB;l+=this.s}else{for(l+=this.s;c<a.t;)l-=a[c],d[c++]=l&this.DM,l>>=this.DB;l-=a.s}d.s=0>l?-1:0;-1>l?d[c++]=this.DV+l:0<l&&(d[c++]=l);d.t=c;d.clamp()};d.prototype.multiplyTo=function(a,c){var b=this.abs(),l=a.abs(),g=b.t;for(c.t=g+l.t;0<=--g;)c[g]=0;for(g=0;g<l.t;++g)c[g+b.t]=b.am(0,l[g],c,g,0,b.t);c.s=0;c.clamp();this.s!=a.s&&d.ZERO.subTo(c,c)};d.prototype.squareTo=function(a){for(var c=this.abs(),d=a.t=2*c.t;0<=--d;)a[d]=0;for(d=0;d<c.t-1;++d){var l=c.am(d,c[d],a,2*d,0,1);(a[d+
c.t]+=c.am(d+1,2*c[d],a,2*d+1,l,c.t-d-1))>=c.DV&&(a[d+c.t]-=c.DV,a[d+c.t+1]=1)}0<a.t&&(a[a.t-1]+=c.am(d,c[d],a,2*d,0,1));a.s=0;a.clamp()};d.prototype.divRemTo=function(a,c,k){var l=a.abs();if(!(0>=l.t)){var m=this.abs();if(m.t<l.t)null!=c&&c.fromInt(0),null!=k&&this.copyTo(k);else{null==k&&(k=b());var e=b(),t=this.s;a=a.s;var q=this.DB-g(l[l.t-1]);0<q?(l.lShiftTo(q,e),m.lShiftTo(q,k)):(l.copyTo(e),m.copyTo(k));l=e.t;m=e[l-1];if(0!=m){var f=m*(1<<this.F1)+(1<l?e[l-2]>>this.F2:0),A=this.FV/f,f=(1<<
this.F1)/f,r=1<<this.F2,p=k.t,h=p-l,n=null==c?b():c;e.dlShiftTo(h,n);0<=k.compareTo(n)&&(k[k.t++]=1,k.subTo(n,k));d.ONE.dlShiftTo(l,n);for(n.subTo(e,e);e.t<l;)e[e.t++]=0;for(;0<=--h;){var y=k[--p]==m?this.DM:Math.floor(k[p]*A+(k[p-1]+r)*f);if((k[p]+=e.am(0,y,k,h,0,l))<y)for(e.dlShiftTo(h,n),k.subTo(n,k);k[p]<--y;)k.subTo(n,k)}null!=c&&(k.drShiftTo(l,c),t!=a&&d.ZERO.subTo(c,c));k.t=l;k.clamp();0<q&&k.rShiftTo(q,k);0>t&&d.ZERO.subTo(k,k)}}}};d.prototype.invDigit=function(){if(1>this.t)return 0;var a=
this[0];if(0==(a&1))return 0;var c=a&3,c=c*(2-(a&15)*c)&15,c=c*(2-(a&255)*c)&255,c=c*(2-((a&65535)*c&65535))&65535,c=c*(2-a*c%this.DV)%this.DV;return 0<c?this.DV-c:-c};d.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};d.prototype.exp=function(a,c){if(4294967295<a||1>a)return d.ONE;var k=b();var l=b();var m=c.convert(this),e=g(a)-1;for(m.copyTo(k);0<=--e;)if(c.sqrTo(k,l),0<(a&1<<e))c.mulTo(l,m,k);else{var q=k;k=l;l=q}return c.revert(k)};d.prototype.toString=function(a){if(0>this.s)return"-"+
this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var c=(1<<a)-1,d,l=!1,b="",g=this.t,k=this.DB-g*this.DB%a;if(0<g--)for(k<this.DB&&0<(d=this[g]>>k)&&(l=!0,b="0123456789abcdefghijklmnopqrstuvwxyz".charAt(d));0<=g;)k<a?(d=(this[g]&(1<<k)-1)<<a-k,d|=this[--g]>>(k+=this.DB-a)):(d=this[g]>>(k-=a)&c,0>=k&&(k+=this.DB,--g)),0<d&&(l=!0),l&&(b+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(d));return l?b:"0"};d.prototype.negate=
function(){var a=b();d.ZERO.subTo(this,a);return a};d.prototype.abs=function(){return 0>this.s?this.negate():this};d.prototype.compareTo=function(a){var c=this.s-a.s;if(0!=c)return c;var d=this.t,c=d-a.t;if(0!=c)return c;for(;0<=--d;)if(0!=(c=this[d]-a[d]))return c;return 0};d.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)};d.prototype.mod=function(a){var c=b();this.abs().divRemTo(a,null,c);0>this.s&&0<c.compareTo(d.ZERO)&&a.subTo(c,c);return c};
d.prototype.modPowInt=function(a,d){d=256>a||d.isEven()?new c(d):new r(d);return this.exp(a,d)};d.ZERO=k(0);d.ONE=k(1);x.prototype.convert=n;x.prototype.revert=n;x.prototype.mulTo=function(a,c,d){a.multiplyTo(c,d)};x.prototype.sqrTo=function(a,c){a.squareTo(c)};C.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var c=b();a.copyTo(c);this.reduce(c);return c};C.prototype.revert=function(a){return a};C.prototype.reduce=function(a){a.drShiftTo(this.m.t-
1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};C.prototype.mulTo=function(a,c,d){a.multiplyTo(c,d);this.reduce(d)};C.prototype.sqrTo=function(a,c){a.squareTo(c);this.reduce(c)};var z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],D=67108864/z[z.length-1];d.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};d.prototype.toRadix=function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var c=this.chunkSize(a),c=Math.pow(a,
c),d=k(c),l=b(),g=b(),m="";for(this.divRemTo(d,l,g);0<l.signum();)m=(c+g.intValue()).toString(a).substr(1)+m,l.divRemTo(d,l,g);return g.intValue().toString(a)+m};d.prototype.fromRadix=function(a,c){this.fromInt(0);null==c&&(c=10);for(var b=this.chunkSize(c),l=Math.pow(c,b),g=!1,k=0,m=0,q=0;q<a.length;++q){var f=e(a,q);0>f?"-"==a.charAt(q)&&0==this.signum()&&(g=!0):(m=c*m+f,++k>=b&&(this.dMultiply(l),this.dAddOffset(m,0),m=k=0))}0<k&&(this.dMultiply(Math.pow(c,k)),this.dAddOffset(m,0));g&&d.ZERO.subTo(this,
this)};d.prototype.fromNumber=function(a,c,b){if("number"==typeof c)if(2>a)this.fromInt(1);else for(this.fromNumber(a,b),this.testBit(a-1)||this.bitwiseTo(d.ONE.shiftLeft(a-1),q,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(d.ONE.shiftLeft(a-1),this);else{b=[];var l=a&7;b.length=(a>>3)+1;c.nextBytes(b);b[0]=0<l?b[0]&(1<<l)-1:0;this.fromString(b,256)}};d.prototype.bitwiseTo=function(a,c,d){var l,b=Math.min(a.t,this.t);for(l=
0;l<b;++l)d[l]=c(this[l],a[l]);if(a.t<this.t){var g=a.s&this.DM;for(l=b;l<this.t;++l)d[l]=c(this[l],g);d.t=this.t}else{g=this.s&this.DM;for(l=b;l<a.t;++l)d[l]=c(g,a[l]);d.t=a.t}d.s=c(this.s,a.s);d.clamp()};d.prototype.changeBit=function(a,c){a=d.ONE.shiftLeft(a);this.bitwiseTo(a,c,a);return a};d.prototype.addTo=function(a,c){for(var d=0,l=0,b=Math.min(a.t,this.t);d<b;)l+=this[d]+a[d],c[d++]=l&this.DM,l>>=this.DB;if(a.t<this.t){for(l+=a.s;d<this.t;)l+=this[d],c[d++]=l&this.DM,l>>=this.DB;l+=this.s}else{for(l+=
this.s;d<a.t;)l+=a[d],c[d++]=l&this.DM,l>>=this.DB;l+=a.s}c.s=0>l?-1:0;0<l?c[d++]=l:-1>l&&(c[d++]=this.DV+l);c.t=d;c.clamp()};d.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};d.prototype.dAddOffset=function(a,c){if(0!=a){for(;this.t<=c;)this[this.t++]=0;for(this[c]+=a;this[c]>=this.DV;)this[c]-=this.DV,++c>=this.t&&(this[this.t++]=0),++this[c]}};d.prototype.multiplyLowerTo=function(a,c,d){var l=Math.min(this.t+a.t,c);d.s=0;for(d.t=l;0<l;)d[--l]=
0;var b;for(b=d.t-this.t;l<b;++l)d[l+this.t]=this.am(0,a[l],d,l,0,this.t);for(b=Math.min(a.t,c);l<b;++l)this.am(0,a[l],d,l,0,c-l);d.clamp()};d.prototype.multiplyUpperTo=function(a,c,d){--c;var l=d.t=this.t+a.t-c;for(d.s=0;0<=--l;)d[l]=0;for(l=Math.max(c-this.t,0);l<a.t;++l)d[this.t+l-c]=this.am(c-l,a[l],d,0,0,this.t+l-c);d.clamp();d.drShiftTo(1,d)};d.prototype.modInt=function(a){if(0>=a)return 0;var c=this.DV%a,d=0>this.s?a-1:0;if(0<this.t)if(0==c)d=this[0]%a;else for(var l=this.t-1;0<=l;--l)d=(c*
d+this[l])%a;return d};d.prototype.millerRabin=function(a){var c=this.subtract(d.ONE),g=c.getLowestSetBit();if(0>=g)return!1;var l=c.shiftRight(g);a=a+1>>1;a>z.length&&(a=z.length);for(var k=b(),m=0;m<a;++m){k.fromInt(z[m]);var e=k.modPow(l,this);if(0!=e.compareTo(d.ONE)&&0!=e.compareTo(c)){for(var q=1;q++<g&&0!=e.compareTo(c);)if(e=e.modPowInt(2,this),0==e.compareTo(d.ONE))return!1;if(0!=e.compareTo(c))return!1}}return!0};d.prototype.clone=function(){var a=b();this.copyTo(a);return a};d.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};d.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};d.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};d.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};d.prototype.toByteArray=function(){var a=this.t,c=[];c[0]=this.s;var d=this.DB-
a*this.DB%8,l,b=0;if(0<a--)for(d<this.DB&&(l=this[a]>>d)!=(this.s&this.DM)>>d&&(c[b++]=l|this.s<<this.DB-d);0<=a;)if(8>d?(l=(this[a]&(1<<d)-1)<<8-d,l|=this[--a]>>(d+=this.DB-8)):(l=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(l&128)&&(l|=-256),0==b&&(this.s&128)!=(l&128)&&++b,0<b||l!=this.s)c[b++]=l;return c};d.prototype.equals=function(a){return 0==this.compareTo(a)};d.prototype.min=function(a){return 0>this.compareTo(a)?this:a};d.prototype.max=function(a){return 0<this.compareTo(a)?this:a};d.prototype.and=
function(a){var c=b();this.bitwiseTo(a,p,c);return c};d.prototype.or=function(a){var c=b();this.bitwiseTo(a,q,c);return c};d.prototype.xor=function(a){var c=b();this.bitwiseTo(a,m,c);return c};d.prototype.andNot=function(a){var c=b();this.bitwiseTo(a,u,c);return c};d.prototype.not=function(){for(var a=b(),c=0;c<this.t;++c)a[c]=this.DM&~this[c];a.t=this.t;a.s=~this.s;return a};d.prototype.shiftLeft=function(a){var c=b();0>a?this.rShiftTo(-a,c):this.lShiftTo(a,c);return c};d.prototype.shiftRight=function(a){var c=
b();0>a?this.lShiftTo(-a,c):this.rShiftTo(a,c);return c};d.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var c=a*this.DB,a=this[a];if(0==a)a=-1;else{var d=0;0==(a&65535)&&(a>>=16,d+=16);0==(a&255)&&(a>>=8,d+=8);0==(a&15)&&(a>>=4,d+=4);0==(a&3)&&(a>>=2,d+=2);0==(a&1)&&++d;a=d}return c+a}return 0>this.s?this.t*this.DB:-1};d.prototype.bitCount=function(){for(var a=0,c=this.s&this.DM,d=0;d<this.t;++d){for(var l=this[d]^c,b=0;0!=l;)l&=l-1,++b;a+=b}return a};d.prototype.testBit=
function(a){var c=Math.floor(a/this.DB);return c>=this.t?0!=this.s:0!=(this[c]&1<<a%this.DB)};d.prototype.setBit=function(a){return this.changeBit(a,q)};d.prototype.clearBit=function(a){return this.changeBit(a,u)};d.prototype.flipBit=function(a){return this.changeBit(a,m)};d.prototype.add=function(a){var c=b();this.addTo(a,c);return c};d.prototype.subtract=function(a){var c=b();this.subTo(a,c);return c};d.prototype.multiply=function(a){var c=b();this.multiplyTo(a,c);return c};d.prototype.divide=function(a){var c=
b();this.divRemTo(a,c,null);return c};d.prototype.remainder=function(a){var c=b();this.divRemTo(a,null,c);return c};d.prototype.divideAndRemainder=function(a){var c=b(),d=b();this.divRemTo(a,c,d);return[c,d]};d.prototype.modPow=function(a,d){var m=a.bitLength(),l=k(1);if(0>=m)return l;var e=18>m?1:48>m?3:144>m?4:768>m?5:6;d=8>m?new c(d):d.isEven()?new C(d):new r(d);var q=[],f=3,p=e-1,h=(1<<e)-1;q[1]=d.convert(this);if(1<e)for(m=b(),d.sqrTo(q[1],m);f<=h;)q[f]=b(),d.mulTo(m,q[f-2],q[f]),f+=2;for(var n=
a.t-1,u,x=!0,t=b(),m=g(a[n])-1;0<=n;){m>=p?u=a[n]>>m-p&h:(u=(a[n]&(1<<m+1)-1)<<p-m,0<n&&(u|=a[n-1]>>this.DB+m-p));for(f=e;0==(u&1);)u>>=1,--f;0>(m-=f)&&(m+=this.DB,--n);if(x)q[u].copyTo(l),x=!1;else{for(;1<f;)d.sqrTo(l,t),d.sqrTo(t,l),f-=2;0<f?d.sqrTo(l,t):(f=l,l=t,t=f);d.mulTo(t,q[u],l)}for(;0<=n&&0==(a[n]&1<<m);)d.sqrTo(l,t),f=l,l=t,t=f,0>--m&&(m=this.DB-1,--n)}return d.revert(l)};d.prototype.modInverse=function(a){var c=a.isEven();if(this.isEven()&&c||0==a.signum())return d.ZERO;for(var b=a.clone(),
l=this.clone(),g=k(1),m=k(0),e=k(0),q=k(1);0!=b.signum();){for(;b.isEven();)b.rShiftTo(1,b),c?(g.isEven()&&m.isEven()||(g.addTo(this,g),m.subTo(a,m)),g.rShiftTo(1,g)):m.isEven()||m.subTo(a,m),m.rShiftTo(1,m);for(;l.isEven();)l.rShiftTo(1,l),c?(e.isEven()&&q.isEven()||(e.addTo(this,e),q.subTo(a,q)),e.rShiftTo(1,e)):q.isEven()||q.subTo(a,q),q.rShiftTo(1,q);0<=b.compareTo(l)?(b.subTo(l,b),c&&g.subTo(e,g),m.subTo(q,m)):(l.subTo(b,l),c&&e.subTo(g,e),q.subTo(m,q))}if(0!=l.compareTo(d.ONE))return d.ZERO;
if(0<=q.compareTo(a))return q.subtract(a);if(0>q.signum())q.addTo(a,q);else return q;return 0>q.signum()?q.add(a):q};d.prototype.pow=function(a){return this.exp(a,new x)};d.prototype.gcd=function(a){var c=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>c.compareTo(a)){var d=c;c=a;a=d}d=c.getLowestSetBit();var l=a.getLowestSetBit();if(0>l)return c;d<l&&(l=d);for(0<l&&(c.rShiftTo(l,c),a.rShiftTo(l,a));0<c.signum();)0<(d=c.getLowestSetBit())&&c.rShiftTo(d,c),0<(d=a.getLowestSetBit())&&
a.rShiftTo(d,a),0<=c.compareTo(a)?(c.subTo(a,c),c.rShiftTo(1,c)):(a.subTo(c,a),a.rShiftTo(1,a));0<l&&a.lShiftTo(l,a);return a};d.prototype.isProbablePrime=function(a){var c,d=this.abs();if(1==d.t&&d[0]<=z[z.length-1]){for(c=0;c<z.length;++c)if(d[0]==z[c])return!0;return!1}if(d.isEven())return!1;for(c=1;c<z.length;){for(var l=z[c],b=c+1;b<z.length&&l<D;)l*=z[b++];for(l=d.modInt(l);c<b;)if(0==l%z[c++])return!1}return d.millerRabin(a)};return{BigInteger:d}}(),BigInteger=BigInteger.BigInteger;var struct={pack:function(d,b){var h="";switch(d){case "Q":d=new BigInteger("ff",16);h+=String.fromCharCode(b.shiftRight(56).and(d));h+=String.fromCharCode(b.shiftRight(48).and(d));h+=String.fromCharCode(b.shiftRight(40).and(d));h+=String.fromCharCode(b.shiftRight(32).and(d));h+=String.fromCharCode(b.shiftRight(24).and(d));h+=String.fromCharCode(b.shiftRight(16).and(d));h+=String.fromCharCode(b.shiftRight(8).and(d));h+=String.fromCharCode(b.and(d));break;case "I":h+=String.fromCharCode(b>>>24&255),
h+=String.fromCharCode(b>>>16&255),h+=String.fromCharCode(b>>>8&255);case "B":h+=String.fromCharCode(b&255)}return h},unpack:function(d,b){var h=[],f=0,a=0;switch(d){case "Q":a=new BigInteger("0",10);a=a.add((new BigInteger(b.charCodeAt(0).toString(),10)).shiftLeft(56));a=a.add((new BigInteger(b.charCodeAt(1).toString(),10)).shiftLeft(48));a=a.add((new BigInteger(b.charCodeAt(2).toString(),10)).shiftLeft(40));a=a.add((new BigInteger(b.charCodeAt(3).toString(),10)).shiftLeft(32));a=a.add((new BigInteger(b.charCodeAt(4).toString(),
10)).shiftLeft(24));a=a.add((new BigInteger(b.charCodeAt(5).toString(),10)).shiftLeft(16));a=a.add((new BigInteger(b.charCodeAt(6).toString(),10)).shiftLeft(8));a=a.add((new BigInteger(b.charCodeAt(7).toString(),10)).shiftLeft(0));h.push(a);break;case "I":a+=b.charCodeAt(0)<<24>>>0,a+=b.charCodeAt(1)<<16>>>0,a+=b.charCodeAt(2)<<8>>>0,f+=3;case "B":a+=b.charCodeAt(0+f)<<0>>>0,h.push(a)}return h}};function inflate_long(d){var b=new BigInteger("0",10);d.length%4&&(d=Array(4-d.length%4+1).join("\x00")+d);for(var h=0;h<d.length;h+=4)b=b.shiftLeft(32),b=b.add(new BigInteger(struct.unpack("I",d.substring(h,h+4))[0].toString(),10));return b}
function deflate_long(d,b){d="number"==typeof d?new BigInteger(d.toString(),10):d.clone();b=void 0==b?!0:b;for(var h="",f=new BigInteger("-1",10),a=new BigInteger("ffffffff",16);!d.equals(BigInteger.ZERO)&&!d.equals(f);)h=struct.pack("I",d.and(a))+h,d=d.shiftRight(32);for(var a=!1,e=0;e<h.length;++e){if(d.equals(BigInteger.ZERO)&&"\x00"!=h.charAt(e)){a=!0;break}if(d.equals(f)&&"\u00ff"!=h.charAt(e)){a=!0;break}}a||(e=0,h=d.equals(BigInteger.ZERO)?"\x00":"\u00ff");h=h.substring(e);b&&(d.equals(BigInteger.ZERO)&&
128<=h.charCodeAt(0)&&(h="\x00"+h),d.equals(f)&&128>h.charCodeAt(0)&&(h="\u00ff"+h));return h}function toByteArray(d){for(var b=new Uint8Array(d.length),h=0;h<d.length;h++)b[h]=d.charCodeAt(h);return b}function fromByteArray(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function bytesToWords(d){for(var b=[],h=0,f=0;h<d.length;h++,f+=8)b[f>>>5]|=(d[h]&255)<<24-f%32;return b}function wordsToBytes(d){for(var b=[],h=0;h<32*d.length;h+=8)b.push(d[h>>>5]>>>24-h%32&255);return b}
function setCharAt(d,b,h){return d.substring(0,b)+h+d.substring(b+1)}function fromUtf8(d){for(var b,h="",f=toByteArray(d),a=0;a<d.length;a++){var e=d.charCodeAt(a);if(192<=e&&223>=e)b=f[++a],e=(e&31)<<6|b&63;else if(224<=e&&239>=e){b=f[++a];var k=f[++a],e=(e&15)<<12|(b&63)<<6|k&63}else 128<=e&&(e=".");h+=String.fromCharCode(e)}return h}function read_rng(d){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(d)))}
function filter(d,b){d=d.split(",");for(var h=0;h<d.length;++h)if(-1!=b.indexOf(d[h]))return d[h]}function splitSlice(d,b){b=void 0===b?5E3:b;for(var h=[],f=0,a=d.length;f<a;f+=b)h.push(d.slice(f,b+f));return h}function modColorPercent(d,b){var h=parseInt(d.slice(1),16);d=0>b?0:255;b=0>b?-1*b:b;var f=h>>16,a=h>>8&255,h=h&255;return"#"+(16777216+65536*(Math.round((d-f)*b)+f)+256*(Math.round((d-a)*b)+a)+(Math.round((d-h)*b)+h)).toString(16).slice(1)}
function ascii2hex(d){for(var b="",h=0;h<d.length;h++)b=1==d.charCodeAt(h).toString(16).length?b+("0"+d.charCodeAt(h).toString(16)):b+(""+d.charCodeAt(h).toString(16));return b};sjcl={cipher:{}};
sjcl.cipher.aes=function(d,b){this._tables[0][0][0]||this._precompute();this.mode=b;var h,f,a=this._tables[0][4],e=this._tables[1];b=d.length;var k=1;if(4!==b&&6!==b&&8!==b)throw"invalid aes key size";this._key=[h=d.slice(0),f=[]];for(d=b;d<4*b+28;d++){var g=h[d-1];if(0===d%b||8===b&&4===d%b)g=a[g>>>24]<<24^a[g>>16&255]<<16^a[g>>8&255]<<8^a[g&255],0===d%b&&(g=g<<8^g>>>24^k<<24,k=k<<1^283*(k>>7));h[d]=h[d-b]^g}for(b=0;d;b++,d--)g=h[b&3?d:d-4],f[b]=4>=d||4>b?g:e[0][a[g>>>24]]^e[1][a[g>>16&255]]^e[2][a[g>>
8&255]]^e[3][a[g&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(d,b,h){b=this.mode==sjcl.cipher.aes.MODE_CBC?b:[];for(var f=[],a=0;a<d.length/16;a++){var e=d.slice(16*a,16*(a+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var k=0;16>k;k++)e[k]^=b[k];b=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(e),0))}else for(b=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(h.increment())),0)),k=0;16>k;k++)b[k]^=e[k];f=f.concat(b)}return f},decrypt:function(d,b){for(var h=[],f=0;f<d.length/
16;f++){var a=d.slice(16*f,16*(f+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(a),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var e=0;16>e;e++)ct[e]^=b[e];b=a}h=h.concat(ct)}return h},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var d=this._tables[0],b=this._tables[1],h=d[4],f=b[4],a,e,k,g=[],c=[],r;for(a=0;256>a;a++)c[(g[a]=a<<1^283*(a>>7))^a]=a;for(e=k=0;!h[e];e^=r||1,k=c[k]||1){var p=k^k<<1^k<<2^k<<3^k<<4;p=p>>8^p&255^99;h[e]=p;f[p]=e;var q=g[a=
g[r=g[e]]];var m=16843009*q^65537*a^257*r^16843008*e;q=257*g[p]^16843008*p;for(a=0;4>a;a++)d[a][e]=q=q<<24^q>>>8,b[a][p]=m=m<<24^m>>>8}for(a=0;5>a;a++)d[a]=d[a].slice(0),b[a]=b[a].slice(0)},_crypt:function(d,b){if(4!==d.length)throw"invalid aes block size";var h=this._key[b],f=d[0]^h[0],a=d[b?3:1]^h[1],e=d[2]^h[2];d=d[b?1:3]^h[3];var k=h.length/4-2,g,c=4,r=[0,0,0,0];var p=this._tables[b];var q=p[0],m=p[1],u=p[2],x=p[3],n=p[4];for(g=0;g<k;g++){p=q[f>>>24]^m[a>>16&255]^u[e>>8&255]^x[d&255]^h[c];var C=
q[a>>>24]^m[e>>16&255]^u[d>>8&255]^x[f&255]^h[c+1];var v=q[e>>>24]^m[d>>16&255]^u[f>>8&255]^x[a&255]^h[c+2];d=q[d>>>24]^m[f>>16&255]^u[a>>8&255]^x[e&255]^h[c+3];c+=4;f=p;a=C;e=v}for(g=0;4>g;g++)r[b?3&-g:g]=n[f>>>24]<<24^n[a>>16&255]<<16^n[e>>8&255]<<8^n[d&255]^h[c++],p=f,f=a,a=e,e=d,d=p;return r}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(d){var b=[],h=sjcl.bitArray.bitLength(d),f,a;for(f=0;f<h/8;f++)0===(f&3)&&(a=d[f/4]),b.push(a>>>24),a<<=8;return b},toBits:function(d){var b=[],h,f=0;for(h=0;h<d.length;h++)f=f<<8|d[h],3===(h&3)&&(b.push(f),f=0);h&3&&b.push(sjcl.bitArray.partial(8*(h&3),f));return b}};
sjcl.bitArray={bitLength:function(d){var b=d.length;return 0===b?0:32*(b-1)+sjcl.bitArray.getPartial(d[b-1])},partial:function(d,b,h){return 32===d?b:(h?b|0:b<<32-d)+1099511627776*d},getPartial:function(d){return Math.round(d/1099511627776)||32}};SSHyClient.hash={};SSHyClient.hash.SHA1=function(d){this.data=d||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var d=toByteArray(this.data),b=bytesToWords(d),h=8*d.length,d=[],f=1732584193,a=-271733879,e=-1732584194,k=271733878,g=-1009589776;b[h>>5]|=128<<24-h%32;b[(h+64>>>9<<4)+15]=h;for(h=0;h<b.length;h+=16){for(var c=f,r=a,p=e,q=k,m=g,u=0;80>u;u++){if(16>u)d[u]=b[h+u];else{var x=d[u-3]^d[u-8]^d[u-14]^d[u-16];d[u]=x<<1|x>>>31}x=(f<<5|f>>>27)+g+(d[u]>>>0)+(20>u?(a&e|~a&k)+1518500249:40>u?(a^e^k)+1859775393:60>u?(a&e|a&k|e&k)-1894007588:(a^e^k)-899497514);
g=k;k=e;e=a<<30|a>>>2;a=f;f=x}f+=c;a+=r;e+=p;k+=q;g+=m}return fromByteArray(wordsToBytes([f,a,e,k,g]))}};SSHyClient.hash.SHA256=function(d){this.data=d||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var d=toByteArray(this.data),b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=bytesToWords(d),f=8*d.length,d=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a=[],e,k;h[f>>5]|=128<<24-f%32;h[(f+64>>9<<4)+15]=f;for(e=0;e<h.length;e+=16){f=d[0];var g=d[1];var c=d[2];var r=
d[3];var p=d[4];var q=d[5];var m=d[6];var u=d[7];for(k=0;64>k;k++){if(16>k)a[k]=h[k+e];else{var x=a[k-15];var n=a[k-2];a[k]=((x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3)+(a[k-7]>>>0)+((n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10)+(a[k-16]>>>0)}n=f&g^f&c^g&c;var C=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22);x=(u>>>0)+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&q^~p&m)+b[k]+(a[k]>>>0);n=C+n;u=m;m=q;q=p;p=r+x>>>0;r=c;c=g;g=f;f=x+n>>>0}d[0]+=f;d[1]+=g;d[2]+=c;d[3]+=r;d[4]+=p;d[5]+=q;d[6]+=m;d[7]+=u}return fromByteArray(wordsToBytes(d))}};
SSHyClient.hash.HMAC=function(d,b,h){h=digestmod="SHA-1"==h?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var f=new h,a=new h;64<d.length&&(d=(new h(d)).digest());d+=Array(64-d.length+1).join("\x00");h=toByteArray(d).slice(0);d=toByteArray(d).slice(0);for(var e=0;64>e;++e)h[e]^=92,d[e]^=54;f.data+=fromByteArray(h);a.data+=fromByteArray(d);a.data+=b;f.data+=a.digest();return f.digest()};
SSHyClient.hash.MD5=function(d){var b=toByteArray(d);d=bytesToWords(b);for(var h=8*b.length,b=1732584193,f=-271733879,a=-1732584194,e=271733878,k=0;k<d.length;k++)d[k]=(d[k]<<8|d[k]>>>24)&16711935|(d[k]<<24|d[k]>>>8)&4278255360;d[h>>>5]|=128<<h%32;d[(h+64>>>9<<4)+14]=h;for(var h=function(a,c,d,b,g,m,k){a=a+(c&d|~c&b)+(g>>>0)+k;return(a<<m|a>>>32-m)+c},g=function(a,c,d,b,g,m,k){a=a+(c&b|d&~b)+(g>>>0)+k;return(a<<m|a>>>32-m)+c},c=function(a,c,d,b,g,m,k){a=a+(c^d^b)+(g>>>0)+k;return(a<<m|a>>>32-m)+c},
r=function(a,c,d,b,g,m,k){a=a+(d^(c|~b))+(g>>>0)+k;return(a<<m|a>>>32-m)+c},k=0;k<d.length;k+=16)var p=b,q=f,m=a,u=e,b=h(b,f,a,e,d[k+0],7,-680876936),e=h(e,b,f,a,d[k+1],12,-389564586),a=h(a,e,b,f,d[k+2],17,606105819),f=h(f,a,e,b,d[k+3],22,-1044525330),b=h(b,f,a,e,d[k+4],7,-176418897),e=h(e,b,f,a,d[k+5],12,1200080426),a=h(a,e,b,f,d[k+6],17,-1473231341),f=h(f,a,e,b,d[k+7],22,-45705983),b=h(b,f,a,e,d[k+8],7,1770035416),e=h(e,b,f,a,d[k+9],12,-1958414417),a=h(a,e,b,f,d[k+10],17,-42063),f=h(f,a,e,b,d[k+
11],22,-1990404162),b=h(b,f,a,e,d[k+12],7,1804603682),e=h(e,b,f,a,d[k+13],12,-40341101),a=h(a,e,b,f,d[k+14],17,-1502002290),f=h(f,a,e,b,d[k+15],22,1236535329),b=g(b,f,a,e,d[k+1],5,-165796510),e=g(e,b,f,a,d[k+6],9,-1069501632),a=g(a,e,b,f,d[k+11],14,643717713),f=g(f,a,e,b,d[k+0],20,-373897302),b=g(b,f,a,e,d[k+5],5,-701558691),e=g(e,b,f,a,d[k+10],9,38016083),a=g(a,e,b,f,d[k+15],14,-660478335),f=g(f,a,e,b,d[k+4],20,-405537848),b=g(b,f,a,e,d[k+9],5,568446438),e=g(e,b,f,a,d[k+14],9,-1019803690),a=g(a,
e,b,f,d[k+3],14,-187363961),f=g(f,a,e,b,d[k+8],20,1163531501),b=g(b,f,a,e,d[k+13],5,-1444681467),e=g(e,b,f,a,d[k+2],9,-51403784),a=g(a,e,b,f,d[k+7],14,1735328473),f=g(f,a,e,b,d[k+12],20,-1926607734),b=c(b,f,a,e,d[k+5],4,-378558),e=c(e,b,f,a,d[k+8],11,-2022574463),a=c(a,e,b,f,d[k+11],16,1839030562),f=c(f,a,e,b,d[k+14],23,-35309556),b=c(b,f,a,e,d[k+1],4,-1530992060),e=c(e,b,f,a,d[k+4],11,1272893353),a=c(a,e,b,f,d[k+7],16,-155497632),f=c(f,a,e,b,d[k+10],23,-1094730640),b=c(b,f,a,e,d[k+13],4,681279174),
e=c(e,b,f,a,d[k+0],11,-358537222),a=c(a,e,b,f,d[k+3],16,-722521979),f=c(f,a,e,b,d[k+6],23,76029189),b=c(b,f,a,e,d[k+9],4,-640364487),e=c(e,b,f,a,d[k+12],11,-421815835),a=c(a,e,b,f,d[k+15],16,530742520),f=c(f,a,e,b,d[k+2],23,-995338651),b=r(b,f,a,e,d[k+0],6,-198630844),e=r(e,b,f,a,d[k+7],10,1126891415),a=r(a,e,b,f,d[k+14],15,-1416354905),f=r(f,a,e,b,d[k+5],21,-57434055),b=r(b,f,a,e,d[k+12],6,1700485571),e=r(e,b,f,a,d[k+3],10,-1894986606),a=r(a,e,b,f,d[k+10],15,-1051523),f=r(f,a,e,b,d[k+1],21,-2054922799),
b=r(b,f,a,e,d[k+8],6,1873313359),e=r(e,b,f,a,d[k+15],10,-30611744),a=r(a,e,b,f,d[k+6],15,-1560198380),f=r(f,a,e,b,d[k+13],21,1309151649),b=r(b,f,a,e,d[k+4],6,-145523070),e=r(e,b,f,a,d[k+11],10,-1120210379),a=r(a,e,b,f,d[k+2],15,718787259),f=r(f,a,e,b,d[k+9],21,-343485551),b=b+p>>>0,f=f+q>>>0,a=a+m>>>0,e=e+u>>>0;var x=function(a){if(a.constructor==Number)return(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;for(var c=0;c<a.length;c++)a[c]=x(a[c]);return a};return fromByteArray(wordsToBytes(x([b,f,
a,e])))};(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=d()})(function(){return function b(h,f,a){function e(c,g){if(!f[c]){if(!h[c]){var p="function"==typeof require&&require;if(!g&&p)return p(c,!0);if(k)return k(c,!0);g=Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g;}g=f[c]={exports:{}};
h[c][0].call(g.exports,function(a){var b=h[c][1][a];return e(b?b:a)},g,g.exports,b,h,f,a)}return f[c].exports}for(var k="function"==typeof require&&require,g=0;g<a.length;g++)e(a[g]);return e}({1:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});f.CHARSETS={};f.DEFAULT_CHARSET=f.CHARSETS.B;f.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",
r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};f.CHARSETS.A={"#":"\u00a3"};f.CHARSETS.B=null;f.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};f.CHARSETS.C=f.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};f.CHARSETS.R={"#":"\u00a3","@":"\u00e0",
"[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};f.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};f.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};f.CHARSETS.Y={"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};
f.CHARSETS.E=f.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};f.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};f.CHARSETS.H=f.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};f.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7",
"]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],2:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function a(a,b,g){this.textarea=a;this.compositionView=b;this.terminal=g;this.isSendingComposition=this.isComposing=!1;this.compositionPosition={start:null,end:null}}a.prototype.compositionstart=function(){this.isComposing=!0;this.compositionPosition.start=this.textarea.value.length;this.compositionView.textContent=
"";this.compositionView.classList.add("active")};a.prototype.compositionupdate=function(a){var b=this;this.compositionView.textContent=a.data;this.updateCompositionElements();setTimeout(function(){b.compositionPosition.end=b.textarea.value.length},0)};a.prototype.compositionend=function(){this.finalizeComposition(!0)};a.prototype.keydown=function(a){if(this.isComposing||this.isSendingComposition){if(229===a.keyCode||16===a.keyCode||17===a.keyCode||18===a.keyCode)return!1;this.finalizeComposition(!1)}return 229===
a.keyCode?(this.handleAnyTextareaChanges(),!1):!0};a.prototype.finalizeComposition=function(a){var b=this;this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(a){var g=this.compositionPosition.start,c=this.compositionPosition.end;this.isSendingComposition=!0;setTimeout(function(){if(b.isSendingComposition){b.isSendingComposition=!1;var a=b.isComposing?b.textarea.value.substring(g,c):b.textarea.value.substring(g);b.terminal.handler(a)}},0)}else this.isSendingComposition=
!1,a=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(a)};a.prototype.handleAnyTextareaChanges=function(){var a=this,b=this.textarea.value;setTimeout(function(){if(!a.isComposing){var g=a.textarea.value.replace(b,"");0<g.length&&a.terminal.handler(g)}},0)};a.prototype.updateCompositionElements=function(a){var b=this;if(this.isComposing){var g=this.terminal.element.querySelector(".terminal-cursor");if(g){var c=this.terminal.element.querySelector(".xterm-rows").offsetTop+
g.offsetTop;this.compositionView.style.left=g.offsetLeft+"px";this.compositionView.style.top=c+"px";this.compositionView.style.height=g.offsetHeight+"px";this.compositionView.style.lineHeight=g.offsetHeight+"px";var e=this.compositionView.getBoundingClientRect();this.textarea.style.left=g.offsetLeft+"px";this.textarea.style.top=c+"px";this.textarea.style.width=e.width+"px";this.textarea.style.height=e.height+"px";this.textarea.style.lineHeight=e.height+"px"}a||setTimeout(function(){return b.updateCompositionElements(!0)},
0)}};a.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""};return a}();f.CompositionHelper=b},{}],3:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=f.C0||(f.C0={});b.NUL="\x00";b.SOH="\u0001";b.STX="\u0002";b.ETX="\u0003";b.EOT="\u0004";b.ENQ="\u0005";b.ACK="\u0006";b.BEL="\u0007";b.BS="\b";b.HT="\t";b.LF="\n";b.VT="\x0B";b.FF="\f";b.CR="\r";b.SO="\u000e";b.SI="\u000f";b.DLE="\u0010";b.DC1="\u0011";b.DC2="\u0012";b.DC3="\u0013";b.DC4=
"\u0014";b.NAK="\u0015";b.SYN="\u0016";b.ETB="\u0017";b.CAN="\u0018";b.EM="\u0019";b.SUB="\u001a";b.ESC="\u001b";b.FS="\u001c";b.GS="\u001d";b.RS="\u001e";b.US="\u001f";b.SP=" ";b.DEL="\u007f"},{}],4:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function a(){this._events=this._events||{}}a.prototype.on=function(a,b){this._events[a]=this._events[a]||[];this._events[a].push(b)};a.prototype.off=function(a,b){if(this._events[a]){a=this._events[a];for(var g=a.length;g--;)if(a[g]===
b||a[g].listener===b){a.splice(g,1);break}}};a.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]};a.prototype.once=function(a,b){function g(){var c=Array.prototype.slice.call(arguments);this.off(a,g);return b.apply(this,c)}g.listener=b;return this.on(a,g)};a.prototype.emit=function(a){for(var b=[],g=1;g<arguments.length;g++)b[g-1]=arguments[g];if(this._events[a])for(var g=this._events[a],c=0;c<g.length;c++)g[c].apply(this,b)};a.prototype.listeners=function(a){return this._events[a]||
[]};return a}();f.EventEmitter=b},{}],5:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});var a=b("./EscapeSequences"),e=b("./Charsets");b=function(){function b(a){this._terminal=a}b.prototype.addChar=function(a,b){if(" "<=a){b=k(b);this._terminal.charset&&this._terminal.charset[a]&&(a=this._terminal.charset[a]);var c=this._terminal.y+this._terminal.ybase;if(!b&&this._terminal.x)this._terminal.lines.get(c)[this._terminal.x-1]&&(this._terminal.lines.get(c)[this._terminal.x-1][2]?this._terminal.lines.get(c)[this._terminal.x-
1][1]+=a:this._terminal.lines.get(c)[this._terminal.x-2]&&(this._terminal.lines.get(c)[this._terminal.x-2][1]+=a),this._terminal.updateRange(this._terminal.y));else{if(this._terminal.x+b-1>=this._terminal.cols)if(this._terminal.wraparoundMode)this._terminal.x=0,this._terminal.y++,this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll(!0));else if(2===b)return;c=this._terminal.y+this._terminal.ybase;if(this._terminal.insertMode)for(var g=0;g<b;++g)0===this._terminal.lines.get(this._terminal.y+
this._terminal.ybase).pop()[2]&&this._terminal.lines.get(c)[this._terminal.cols-2]&&2===this._terminal.lines.get(c)[this._terminal.cols-2][2]&&(this._terminal.lines.get(c)[this._terminal.cols-2]=[this._terminal.curAttr," ",1]),this._terminal.lines.get(c).splice(this._terminal.x,0,[this._terminal.curAttr," ",1]);this._terminal.lines.get(c)[this._terminal.x]=[this._terminal.curAttr,a,b];this._terminal.x++;this._terminal.updateRange(this._terminal.y);2===b&&(this._terminal.lines.get(c)[this._terminal.x]=
[this._terminal.curAttr,"",0],this._terminal.x++)}}};b.prototype.bell=function(){var a=this;this._terminal.visualBell&&(this._terminal.element.style.borderColor="white",setTimeout(function(){return a._terminal.element.style.borderColor=""},10),this._terminal.popOnBell&&this._terminal.focus())};b.prototype.lineFeed=function(){this._terminal.convertEol&&(this._terminal.x=0);this._terminal.y++;this._terminal.y>this._terminal.scrollBottom&&(this._terminal.y--,this._terminal.scroll());this._terminal.x>=
this._terminal.cols&&this._terminal.x--};b.prototype.carriageReturn=function(){this._terminal.x=0};b.prototype.backspace=function(){0<this._terminal.x&&this._terminal.x--};b.prototype.tab=function(){this._terminal.x=this._terminal.nextStop()};b.prototype.shiftOut=function(){this._terminal.setgLevel(1)};b.prototype.shiftIn=function(){this._terminal.setgLevel(0)};b.prototype.insertChars=function(a){var c;a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;var g=this._terminal.x;for(c=[this._terminal.eraseAttr(),
" ",1];a--&&g<this._terminal.cols;)this._terminal.lines.get(b).splice(g++,0,c),this._terminal.lines.get(b).pop()};b.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this._terminal.y-=a;0>this._terminal.y&&(this._terminal.y=0)};b.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=this._terminal.cols&&this._terminal.x--};b.prototype.cursorForward=function(a){a=a[0];1>a&&(a=1);this._terminal.x+=
a;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};b.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this._terminal.x>=this._terminal.cols&&this._terminal.x--;this._terminal.x-=a;0>this._terminal.x&&(this._terminal.x=0)};b.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=0};b.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this._terminal.y-=
a;0>this._terminal.y&&(this._terminal.y=0);this._terminal.x=0};b.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.x=a-1};b.prototype.cursorPosition=function(a){var c=a[0]-1;a=2<=a.length?a[1]-1:0;0>c?c=0:c>=this._terminal.rows&&(c=this._terminal.rows-1);0>a?a=0:a>=this._terminal.cols&&(a=this._terminal.cols-1);this._terminal.x=a;this._terminal.y=c};b.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.x=this._terminal.nextStop()};b.prototype.eraseInDisplay=
function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);for(a=this._terminal.y+1;a<this._terminal.rows;a++)this._terminal.eraseLine(a);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);for(a=this._terminal.y;a--;)this._terminal.eraseLine(a);break;case 2:for(a=this._terminal.rows;a--;)this._terminal.eraseLine(a);break;case 3:a=this._terminal.lines.length-this._terminal.rows,0<a&&(this._terminal.lines.trimStart(a),this._terminal.ybase=Math.max(this._terminal.ybase-
a,0),this._terminal.ydisp=Math.max(this._terminal.ydisp-a,0))}};b.prototype.eraseInLine=function(a){switch(a[0]){case 0:this._terminal.eraseRight(this._terminal.x,this._terminal.y);break;case 1:this._terminal.eraseLeft(this._terminal.x,this._terminal.y);break;case 2:this._terminal.eraseLine(this._terminal.y)}};b.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);var c=this._terminal.y+this._terminal.ybase;var b=this._terminal.rows-1-this._terminal.scrollBottom;for(b=this._terminal.rows-1+this._terminal.ybase-
b+1;a--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),this._terminal.ybase--,this._terminal.ydisp--,c--,b--),this._terminal.lines.splice(c,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(b,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};b.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var c=this._terminal.y+this._terminal.ybase;var b=this._terminal.rows-1-this._terminal.scrollBottom;
for(b=this._terminal.rows-1+this._terminal.ybase-b;a--;)this._terminal.lines.length===this._terminal.lines.maxLength&&(this._terminal.lines.trimStart(1),--this._terminal.ybase,--this._terminal.ydisp),this._terminal.lines.splice(b+1,0,this._terminal.blankLine(!0)),this._terminal.lines.splice(c,1);this._terminal.updateRange(this._terminal.y);this._terminal.updateRange(this._terminal.scrollBottom)};b.prototype.deleteChars=function(a){var c;a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;
for(c=[this._terminal.eraseAttr()," ",1];a--;)this._terminal.lines.get(b).splice(this._terminal.x,1),this._terminal.lines.get(b).push(c)};b.prototype.scrollUp=function(a){for(a=a[0]||1;a--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};b.prototype.scrollDown=
function(a){for(a=a[0]||1;a--;)this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollBottom,1),this._terminal.lines.splice(this._terminal.ybase+this._terminal.scrollTop,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.scrollTop);this._terminal.updateRange(this._terminal.scrollBottom)};b.prototype.eraseChars=function(a){var c;a=a[0];1>a&&(a=1);var b=this._terminal.y+this._terminal.ybase;var g=this._terminal.x;for(c=[this._terminal.eraseAttr()," ",1];a--&&g<this._terminal.cols;)this._terminal.lines.get(b)[g++]=
c};b.prototype.cursorBackwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.x=this._terminal.prevStop()};b.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.x=a-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};b.prototype.HPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.x+=a;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};b.prototype.repeatPrecedingCharacter=function(a){a=a[0]||1;for(var c=this._terminal.lines.get(this._terminal.ybase+
this._terminal.y),b=c[this._terminal.x-1]||[this._terminal.defAttr," ",1];a--;)c[this._terminal.x++]=b};b.prototype.sendDeviceAttributes=function(c){0<c[0]||(this._terminal.prefix?">"===this._terminal.prefix&&(this._terminal.is("xterm")?this._terminal.send(a.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.send(a.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.send(c[0]+"c"):this._terminal.is("screen")&&this._terminal.send(a.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||
this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.send(a.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.send(a.C0.ESC+"[?6c"))};b.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.y=a-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1)};b.prototype.VPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.y+=a;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x>=
this._terminal.cols&&this._terminal.x--};b.prototype.HVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this._terminal.y=a[0]-1;this._terminal.y>=this._terminal.rows&&(this._terminal.y=this._terminal.rows-1);this._terminal.x=a[1]-1;this._terminal.x>=this._terminal.cols&&(this._terminal.x=this._terminal.cols-1)};b.prototype.tabClear=function(a){a=a[0];0>=a?delete this._terminal.tabs[this._terminal.x]:3===a&&(this._terminal.tabs={})};b.prototype.setMode=function(a){if(1<a.length)for(var c=0;c<
a.length;c++)this.setMode([a[c]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!0}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=!0;break;case 2:this._terminal.setgCharset(0,e.DEFAULT_CHARSET);this._terminal.setgCharset(1,e.DEFAULT_CHARSET);this._terminal.setgCharset(2,e.DEFAULT_CHARSET);this._terminal.setgCharset(3,e.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);
break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===a[0];this._terminal.vt200Mouse=1E3===a[0];this._terminal.normalMouse=1E3<a[0];this._terminal.mouseEvents=!0;this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager.disable();
this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.normal||(a={lines:this._terminal.lines,ybase:this._terminal.ybase,ydisp:this._terminal.ydisp,x:this._terminal.x,y:this._terminal.y,scrollTop:this._terminal.scrollTop,scrollBottom:this._terminal.scrollBottom,
tabs:this._terminal.tabs},this._terminal.reset(),this._terminal.viewport.syncScrollArea(),this._terminal.normal=a,this._terminal.showCursor())}};b.prototype.resetMode=function(a){if(1<a.length)for(var c=0;c<a.length;c++)this.resetMode([a[c]]);else if(!this._terminal.prefix)switch(a[0]){case 4:this._terminal.insertMode=!1}else if("?"===this._terminal.prefix)switch(a[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,
this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element.classList.remove("enable-mouse-events");
this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.normal&&(this._terminal.lines=this._terminal.normal.lines,this._terminal.ybase=this._terminal.normal.ybase,this._terminal.ydisp=this._terminal.normal.ydisp,this._terminal.x=this._terminal.normal.x,
this._terminal.y=this._terminal.normal.y,this._terminal.scrollTop=this._terminal.normal.scrollTop,this._terminal.scrollBottom=this._terminal.normal.scrollBottom,this._terminal.tabs=this._terminal.normal.tabs,this._terminal.normal=null,this._terminal.selectionManager.setBuffer(this._terminal.lines),this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport.syncScrollArea(),this._terminal.showCursor())}};b.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])this._terminal.curAttr=
this._terminal.defAttr;else{for(var c=a.length,b=0,g=this._terminal.curAttr>>18,m=this._terminal.curAttr>>9&511,k=this._terminal.curAttr&511,e;b<c;b++)e=a[b],30<=e&&37>=e?m=e-30:40<=e&&47>=e?k=e-40:90<=e&&97>=e?(e+=8,m=e-90):100<=e&&107>=e?(e+=8,k=e-100):0===e?(g=this._terminal.defAttr>>18,m=this._terminal.defAttr>>9&511,k=this._terminal.defAttr&511):1===e?g|=1:4===e?g|=2:5===e?g|=4:7===e?g|=8:8===e?g|=16:22===e?g&=-2:24===e?g&=-3:25===e?g&=-5:27===e?g&=-9:28===e?g&=-17:39===e?m=this._terminal.defAttr>>
9&511:49===e?k=this._terminal.defAttr&511:38===e?2===a[b+1]?(b+=2,m=this._terminal.matchColor(a[b]&255,a[b+1]&255,a[b+2]&255),-1===m&&(m=511),b+=2):5===a[b+1]&&(b+=2,m=e=a[b]&255):48===e?2===a[b+1]?(b+=2,k=this._terminal.matchColor(a[b]&255,a[b+1]&255,a[b+2]&255),-1===k&&(k=511),b+=2):5===a[b+1]&&(b+=2,k=e=a[b]&255):100===e?(m=this._terminal.defAttr>>9&511,k=this._terminal.defAttr&511):this._terminal.error("Unknown SGR attribute: %d.",e);this._terminal.curAttr=g<<18|m<<9|k}};b.prototype.deviceStatus=
function(c){if(!this._terminal.prefix)switch(c[0]){case 5:this._terminal.send(a.C0.ESC+"[0n");break;case 6:this._terminal.send(a.C0.ESC+"["+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}else if("?"===this._terminal.prefix)switch(c[0]){case 6:this._terminal.send(a.C0.ESC+"[?"+(this._terminal.y+1)+";"+(this._terminal.x+1)+"R")}};b.prototype.softReset=function(a){this._terminal.cursorHidden=!1;this._terminal.insertMode=!1;this._terminal.originMode=!1;this._terminal.wraparoundMode=!0;this._terminal.applicationKeypad=
!1;this._terminal.viewport.syncScrollArea();this._terminal.applicationCursor=!1;this._terminal.scrollTop=0;this._terminal.scrollBottom=this._terminal.rows-1;this._terminal.curAttr=this._terminal.defAttr;this._terminal.x=this._terminal.y=0;this._terminal.charset=null;this._terminal.glevel=0;this._terminal.charsets=[null]};b.prototype.setCursorStyle=function(a){a=1>a[0]?1:a[0];switch(a){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle",
"underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",1===a%2)};b.prototype.setScrollRegion=function(a){this._terminal.prefix||(this._terminal.scrollTop=(a[0]||1)-1,this._terminal.scrollBottom=(a[1]&&a[1]<=this._terminal.rows?a[1]:this._terminal.rows)-1,this._terminal.x=0,this._terminal.y=0)};b.prototype.saveCursor=function(a){this._terminal.savedX=this._terminal.x;this._terminal.savedY=this._terminal.y};b.prototype.restoreCursor=function(a){this._terminal.x=
this._terminal.savedX||0;this._terminal.y=this._terminal.savedY||0};return b}();f.InputHandler=b;var k=function(a){var b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],
[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],
[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],
[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return function(c){if(0===c)return a.nul;if(32>c||127<=c&&160>c)return a.control;a:{var g=0;var k=b.length-1;if(!(c<b[0][0]||c>
b[k][1]))for(;k>=g;){var m=Math.floor((g+k)/2);if(c>b[m][1])g=m+1;else if(c<b[m][0])k=m-1;else{g=!0;break a}}g=!1}return g?0:4352<=c&&(4447>=c||9001===c||9002===c||11904<=c&&42191>=c&&12351!==c||44032<=c&&55203>=c||63744<=c&&64255>=c||65040<=c&&65049>=c||65072<=c&&65135>=c||65280<=c&&65376>=c||65504<=c&&65510>=c||131072<=c&&196605>=c||196608<=c&&262141>=c)?2:1}}({nul:0,control:0})},{"./Charsets":1,"./EscapeSequences":3}],6:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});var a=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?(\/[\/\w\.\-%~]*)*(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;
b=function(){function b(){this._nextLinkMatcherId=0;this._rowTimeoutIds=[];this._linkMatchers=[];this.registerLinkMatcher(a,null,{matchIndex:1})}b.prototype.attachToDom=function(a,b){this._document=a;this._rows=b};b.prototype.linkifyRow=function(a){if(this._document){var g=this._rowTimeoutIds[a];g&&clearTimeout(g);this._rowTimeoutIds[a]=setTimeout(this._linkifyRow.bind(this,a),b.TIME_BEFORE_LINKIFY)}};b.prototype.setHypertextLinkHandler=function(a){this._linkMatchers[0].handler=a};b.prototype.setHypertextValidationCallback=
function(a){this._linkMatchers[0].validationCallback=a};b.prototype.registerLinkMatcher=function(a,b,c){void 0===c&&(c={});if(0!==this._nextLinkMatcherId&&!b)throw Error("handler must be defined");a={id:this._nextLinkMatcherId++,regex:a,handler:b,matchIndex:c.matchIndex,validationCallback:c.validationCallback,priority:c.priority||0};this._addLinkMatcherToList(a);return a.id};b.prototype._addLinkMatcherToList=function(a){if(0===this._linkMatchers.length)this._linkMatchers.push(a);else{for(var b=this._linkMatchers.length-
1;0<=b;b--)if(a.priority<=this._linkMatchers[b].priority){this._linkMatchers.splice(b+1,0,a);return}this._linkMatchers.splice(0,0,a)}};b.prototype.deregisterLinkMatcher=function(a){for(var b=1;b<this._linkMatchers.length;b++)if(this._linkMatchers[b].id===a)return this._linkMatchers.splice(b,1),!0;return!1};b.prototype._linkifyRow=function(a){if(a=this._rows[a])for(var b=0;b<this._linkMatchers.length;b++){var c=this._linkMatchers[b],k=this._doLinkifyRow(a,c);if(0<k.length){if(c.validationCallback)for(a=
function(a){var b=k[a];c.validationCallback(b.textContent,b,function(a){a||b.classList.add("xterm-invalid-link")})},b=0;b<k.length;b++)a(b);break}}};b.prototype._doLinkifyRow=function(a,b){var c=[],g=0===b.id,k=a.childNodes,e=a.textContent.match(b.regex);if(!e||0===e.length)return c;for(var m=e["number"!==typeof b.matchIndex?0:b.matchIndex],f=e.index+m.length,h=0;h<k.length;h++){var n=k[h],C=n.textContent.indexOf(m);if(0<=C){e=this._createAnchorElement(m,b.handler,g);if(n.textContent.length===m.length)if(3===
n.nodeType)this._replaceNode(n,e);else{m=n;if("A"===m.nodeName)break;m.innerHTML="";m.appendChild(e)}else if(1<n.childNodes.length)for(C=0;C<n.childNodes.length;C++){var v=n.childNodes[C],w=v.textContent.indexOf(m);if(-1!==w){this._replaceNodeSubstringWithNode(v,e,m,w);break}}else m=this._replaceNodeSubstringWithNode(n,e,m,C),h+=m;c.push(e);e=a.textContent.substring(f).match(b.regex);if(!e||0===e.length)break;m=e["number"!==typeof b.matchIndex?0:b.matchIndex];f+=e.index+m.length}}return c};b.prototype._createAnchorElement=
function(a,b,c){var g=this._document.createElement("a");g.textContent=a;g.draggable=!1;c?(g.href=a,g.target="_blank",g.addEventListener("click",function(c){if(b)return b(c,a)})):g.addEventListener("click",function(c){if(!g.classList.contains("xterm-invalid-link"))return b(c,a)});return g};b.prototype._replaceNode=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var c=a.parentNode,e=0;e<b.length;e++)c.insertBefore(b[e],a);c.removeChild(a)};b.prototype._replaceNodeSubstringWithNode=
function(a,b,c,e){1===a.childNodes.length&&(a=a.childNodes[0]);if(3!==a.nodeType)throw Error("targetNode must be a text node or only contain a single text node");var g=a.textContent;if(0===e){var k=g.substring(c.length),k=this._document.createTextNode(k);this._replaceNode(a,b,k);return 0}if(e===a.textContent.length-c.length)return k=g.substring(0,e),k=this._document.createTextNode(k),this._replaceNode(a,k,b),0;k=g.substring(0,e);k=this._document.createTextNode(k);c=g.substring(e+c.length);c=this._document.createTextNode(c);
this._replaceNode(a,k,b,c);return 1};return b}();b.TIME_BEFORE_LINKIFY=200;f.Linkifier=b},{}],7:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});var a=b("./EscapeSequences"),e=b("./Charsets"),k={};k[a.C0.BEL]=function(a,b){return b.bell()};k[a.C0.LF]=function(a,b){return b.lineFeed()};k[a.C0.VT]=k[a.C0.LF];k[a.C0.FF]=k[a.C0.LF];k[a.C0.CR]=function(a,b){return b.carriageReturn()};k[a.C0.BS]=function(a,b){return b.backspace()};k[a.C0.HT]=function(a,b){return b.tab()};k[a.C0.SO]=function(a,
b){return b.shiftOut()};k[a.C0.SI]=function(a,b){return b.shiftIn()};k[a.C0.ESC]=function(a,b){return a.setState(p.ESCAPED)};var g={"[":function(a,b){b.params=[];b.currentParam=0;a.setState(p.CSI_PARAM)},"]":function(a,b){b.params=[];b.currentParam=0;a.setState(p.OSC)},P:function(a,b){b.params=[];b.currentParam=0;a.setState(p.DCS)},_:function(a,b){a.setState(p.IGNORE)},"^":function(a,b){a.setState(p.IGNORE)},c:function(a,b){b.reset()},E:function(a,b){b.x=0;b.index();a.setState(p.NORMAL)},D:function(a,
b){b.index();a.setState(p.NORMAL)},M:function(a,b){b.reverseIndex();a.setState(p.NORMAL)},"%":function(a,b){b.setgLevel(0);b.setgCharset(0,e.DEFAULT_CHARSET);a.setState(p.NORMAL);a.skipNextChar()}};g[a.C0.CAN]=function(a){return a.setState(p.NORMAL)};var c={"?":function(a){return a.setPrefix("?")},">":function(a){return a.setPrefix(">")},"!":function(a){return a.setPrefix("!")},0:function(a){return a.setParam(10*a.getParam())},1:function(a){return a.setParam(10*a.getParam()+1)},2:function(a){return a.setParam(10*
a.getParam()+2)},3:function(a){return a.setParam(10*a.getParam()+3)},4:function(a){return a.setParam(10*a.getParam()+4)},5:function(a){return a.setParam(10*a.getParam()+5)},6:function(a){return a.setParam(10*a.getParam()+6)},7:function(a){return a.setParam(10*a.getParam()+7)},8:function(a){return a.setParam(10*a.getParam()+8)},9:function(a){return a.setParam(10*a.getParam()+9)},$:function(a){return a.setPostfix("$")},'"':function(a){return a.setPostfix('"')}," ":function(a){return a.setPostfix(" ")},
"'":function(a){return a.setPostfix("'")},";":function(a){return a.finalizeParam()}};c[a.C0.CAN]=function(a){return a.setState(p.NORMAL)};var r={"@":function(a,b,c){return a.insertChars(b)},A:function(a,b,c){return a.cursorUp(b)},B:function(a,b,c){return a.cursorDown(b)},C:function(a,b,c){return a.cursorForward(b)},D:function(a,b,c){return a.cursorBackward(b)},E:function(a,b,c){return a.cursorNextLine(b)},F:function(a,b,c){return a.cursorPrecedingLine(b)},G:function(a,b,c){return a.cursorCharAbsolute(b)},
H:function(a,b,c){return a.cursorPosition(b)},I:function(a,b,c){return a.cursorForwardTab(b)},J:function(a,b,c){return a.eraseInDisplay(b)},K:function(a,b,c){return a.eraseInLine(b)},L:function(a,b,c){return a.insertLines(b)},M:function(a,b,c){return a.deleteLines(b)},P:function(a,b,c){return a.deleteChars(b)},S:function(a,b,c){return a.scrollUp(b)},T:function(a,b,c){2>b.length&&!c&&a.scrollDown(b)},X:function(a,b,c){return a.eraseChars(b)},Z:function(a,b,c){return a.cursorBackwardTab(b)},"`":function(a,
b,c){return a.charPosAbsolute(b)},a:function(a,b,c){return a.HPositionRelative(b)},b:function(a,b,c){return a.repeatPrecedingCharacter(b)},c:function(a,b,c){return a.sendDeviceAttributes(b)},d:function(a,b,c){return a.linePosAbsolute(b)},e:function(a,b,c){return a.VPositionRelative(b)},f:function(a,b,c){return a.HVPosition(b)},g:function(a,b,c){return a.tabClear(b)},h:function(a,b,c){return a.setMode(b)},l:function(a,b,c){return a.resetMode(b)},m:function(a,b,c){return a.charAttributes(b)},n:function(a,
b,c){return a.deviceStatus(b)},p:function(a,b,c){switch(c){case "!":a.softReset(b)}},q:function(a,b,c,g){" "===g&&a.setCursorStyle(b)},r:function(a,b){return a.setScrollRegion(b)},s:function(a,b){return a.saveCursor(b)},u:function(a,b){return a.restoreCursor(b)}};r[a.C0.CAN]=function(a,b,c,g,e){return e.setState(p.NORMAL)};var p;(function(a){a[a.NORMAL=0]="NORMAL";a[a.ESCAPED=1]="ESCAPED";a[a.CSI_PARAM=2]="CSI_PARAM";a[a.CSI=3]="CSI";a[a.OSC=4]="OSC";a[a.CHARSET=5]="CHARSET";a[a.DCS=6]="DCS";a[a.IGNORE=
7]="IGNORE"})(p||(p={}));b=function(){function b(a,b){this._inputHandler=a;this._terminal=b;this._state=p.NORMAL}b.prototype.parse=function(b){var f=b.length;this._position=0;this._terminal.surrogate_high&&(b=this._terminal.surrogate_high+b,this._terminal.surrogate_high="");for(;this._position<f;this._position++){var m=b[this._position];var h=b.charCodeAt(this._position);if(55296<=h&&56319>=h){var q=b.charCodeAt(this._position+1);if(isNaN(q)){this._terminal.surrogate_high=m;continue}h=1024*(h-55296)+
(q-56320)+65536;m+=b.charAt(this._position+1)}if(!(56320<=h&&57343>=h))switch(this._state){case p.NORMAL:if(m in k)k[m](this,this._inputHandler);else this._inputHandler.addChar(m,h);break;case p.ESCAPED:if(m in g){g[m](this,this._terminal);break}switch(m){case "(":case ")":case "*":case "+":case "-":case ".":switch(m){case "(":this._terminal.gcharset=0;break;case ")":this._terminal.gcharset=1;break;case "*":this._terminal.gcharset=2;break;case "+":this._terminal.gcharset=3;break;case "-":this._terminal.gcharset=
1;break;case ".":this._terminal.gcharset=2}this._state=p.CHARSET;break;case "/":this._terminal.gcharset=3;this._state=p.CHARSET;this._position--;break;case "N":break;case "O":break;case "n":this._terminal.setgLevel(2);break;case "o":this._terminal.setgLevel(3);break;case "|":this._terminal.setgLevel(3);break;case "}":this._terminal.setgLevel(2);break;case "~":this._terminal.setgLevel(1);break;case "7":this._inputHandler.saveCursor();this._state=p.NORMAL;break;case "8":this._inputHandler.restoreCursor();
this._state=p.NORMAL;break;case "#":this._state=p.NORMAL;this._position++;break;case "H":this._terminal.tabSet();this._state=p.NORMAL;break;case "=":this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport.syncScrollArea();this._state=p.NORMAL;break;case ">":this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._state=p.NORMAL;break;default:this._state=
p.NORMAL,this._terminal.error("Unknown ESC control: %s.",m)}break;case p.CHARSET:m in e.CHARSETS?(h=e.CHARSETS[m],"/"===m&&this.skipNextChar()):h=e.DEFAULT_CHARSET;this._terminal.setgCharset(this._terminal.gcharset,h);this._terminal.gcharset=null;this._state=p.NORMAL;break;case p.OSC:if(m===a.C0.ESC||m===a.C0.BEL){m===a.C0.ESC&&this._position++;this._terminal.params.push(this._terminal.currentParam);switch(this._terminal.params[0]){case 0:case 1:case 2:this._terminal.params[1]&&(this._terminal.title=
this._terminal.params[1],this._terminal.handleTitle(this._terminal.title))}this._terminal.params=[];this._terminal.currentParam=0;this._state=p.NORMAL}else this._terminal.params.length?this._terminal.currentParam+=m:"0"<=m&&"9">=m?this._terminal.currentParam=10*this._terminal.currentParam+m.charCodeAt(0)-48:";"===m&&(this._terminal.params.push(this._terminal.currentParam),this._terminal.currentParam="");break;case p.CSI_PARAM:if(m in c){c[m](this);break}this.finalizeParam();this._state=p.CSI;case p.CSI:if(m in
r)r[m](this._inputHandler,this._terminal.params,this._terminal.prefix,this._terminal.postfix,this);else this._terminal.error("Unknown CSI code: %s.",m);this._state=p.NORMAL;this._terminal.prefix="";this._terminal.postfix="";break;case p.DCS:if(m===a.C0.ESC||m===a.C0.BEL){m===a.C0.ESC&&this._position++;switch(this._terminal.prefix){case "":break;case "$q":m=this._terminal.currentParam;h=!1;switch(m){case '"q':m='0"q';break;case '"p':m='61"p';break;case "r":m=""+(this._terminal.scrollTop+1)+";"+(this._terminal.scrollBottom+
1)+"r";break;case "m":m="0m";break;default:this._terminal.error("Unknown DCS Pt: %s.",m),m=""}this._terminal.send(a.C0.ESC+"P"+ +h+"$r"+m+a.C0.ESC+"\\");break;case "+p":break;case "+q":m=this._terminal.currentParam;h=!1;this._terminal.send(a.C0.ESC+"P"+ +h+"+r"+m+a.C0.ESC+"\\");break;default:this._terminal.error("Unknown DCS prefix: %s.",this._terminal.prefix)}this._terminal.currentParam=0;this._terminal.prefix="";this._state=p.NORMAL}else this._terminal.currentParam?this._terminal.currentParam+=
m:this._terminal.prefix||"$"===m||"+"===m?2===this._terminal.prefix.length?this._terminal.currentParam=m:this._terminal.prefix+=m:this._terminal.currentParam=m;break;case p.IGNORE:if(m===a.C0.ESC||m===a.C0.BEL)m===a.C0.ESC&&this._position++,this._state=p.NORMAL}}return this._state};b.prototype.setState=function(a){this._state=a};b.prototype.setPrefix=function(a){this._terminal.prefix=a};b.prototype.setPostfix=function(a){this._terminal.postfix=a};b.prototype.setParam=function(a){this._terminal.currentParam=
a};b.prototype.getParam=function(){return this._terminal.currentParam};b.prototype.finalizeParam=function(){this._terminal.params.push(this._terminal.currentParam);this._terminal.currentParam=0};b.prototype.skipNextChar=function(){this._position++};return b}();f.Parser=b},{"./Charsets":1,"./EscapeSequences":3}],8:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});var a=b("./utils/DomElementObjectPool"),e;(function(a){a[a.BOLD=1]="BOLD";a[a.UNDERLINE=2]="UNDERLINE";a[a.BLINK=4]="BLINK";
a[a.INVERSE=8]="INVERSE";a[a.INVISIBLE=16]="INVISIBLE"})(e||(e={}));var k=null;b=function(){function b(b){this._terminal=b;this._refreshRowsQueue=[];this._refreshFramesSkipped=0;this._refreshAnimationFrame=null;this._spanElementObjectPool=new a.DomElementObjectPool("span");if(null===k){b=this._terminal.element;var c=b.ownerDocument.createElement("span");c.innerHTML="hello world";b.appendChild(c);var e=c.offsetWidth,g=c.offsetHeight;c.style.fontWeight="bold";var m=c.offsetWidth,f=c.offsetHeight;b.removeChild(c);
k=e!==m||g!==f}this._spanElementObjectPool=new a.DomElementObjectPool("span")}b.prototype.queueRefresh=function(a,b){this._refreshRowsQueue.push({start:a,end:b});this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this)))};b.prototype._refreshLoop=function(){if(0<this._terminal.writeBuffer.length&&5>=this._refreshFramesSkipped++)this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this));else{this._refreshFramesSkipped=
0;if(4<this._refreshRowsQueue.length){var a=0;var b=this._terminal.rows-1}else{a=this._refreshRowsQueue[0].start;b=this._refreshRowsQueue[0].end;for(var e=1;e<this._refreshRowsQueue.length;e++)this._refreshRowsQueue[e].start<a&&(a=this._refreshRowsQueue[e].start),this._refreshRowsQueue[e].end>b&&(b=this._refreshRowsQueue[e].end)}this._refreshRowsQueue=[];this._refreshAnimationFrame=null;this._refresh(a,b)}};b.prototype._refresh=function(a,b){var c;b-a>=this._terminal.rows/2&&(c=this._terminal.element.parentNode)&&
this._terminal.element.removeChild(this._terminal.rowContainer);var g=this._terminal.cols,m=a;b>=this._terminal.rows&&(this._terminal.log("`end` is too large. Most likely a bad CSR."),b=this._terminal.rows-1);for(;m<=b;m++){var f=this._terminal.lines.get(m+this._terminal.ydisp);var h=this._terminal.y===m-(this._terminal.ybase-this._terminal.ydisp)&&this._terminal.cursorState&&!this._terminal.cursorHidden?this._terminal.x:-1;for(var n=this._terminal.defAttr,r=document.createDocumentFragment(),v="",
w=void 0;this._terminal.children[m].children.length;){var B=this._terminal.children[m].children[0];this._terminal.children[m].removeChild(B);this._spanElementObjectPool.release(B)}for(B=0;B<g;B++){var z=f[B][0],D=f[B][1],t=f[B][2];if(t){B===h&&(z=-1);if(z!==n&&(n!==this._terminal.defAttr&&(v&&(w.innerHTML=v,v=""),r.appendChild(w),w=null),z!==this._terminal.defAttr))if(v&&!w&&(w=this._spanElementObjectPool.acquire()),w&&(v&&(w.innerHTML=v,v=""),r.appendChild(w)),w=this._spanElementObjectPool.acquire(),
-1===z)w.classList.add("reverse-video"),w.classList.add("terminal-cursor");else{var n=z&511,A=z>>9&511,y=z>>18;y&e.BOLD&&(k||w.classList.add("xterm-bold"),8>A&&(A+=8));y&e.UNDERLINE&&w.classList.add("xterm-underline");y&e.BLINK&&w.classList.add("xterm-blink");if(y&e.INVERSE){var l=n,n=A,A=l;y&1&&8>A&&(A+=8)}y&e.INVISIBLE&&w.classList.add("xterm-hidden");y&e.INVERSE&&(257===n&&(n=15),256===A&&(A=0));256>n&&w.classList.add("xterm-bg-color-"+n);256>A&&w.classList.add("xterm-color-"+A)}if(2===t)v+='<span class="xterm-wide-char">'+
D+"</span>";else if(255<D.charCodeAt(0))v+='<span class="xterm-normal-char">'+D+"</span>";else switch(D){case "&":v+="&amp;";break;case "<":v+="&lt;";break;case ">":v+="&gt;";break;default:v=" ">=D?v+"&nbsp;":v+D}n=z}}v&&!w&&(w=this._spanElementObjectPool.acquire());w&&(v&&(w.innerHTML=v),r.appendChild(w));this._terminal.children[m].appendChild(r)}c&&this._terminal.element.appendChild(this._terminal.rowContainer);this._terminal.emit("refresh",{element:this._terminal.element,start:a,end:b})};b.prototype.refreshSelection=
function(a,b){for(;this._terminal.selectionContainer.children.length;)this._terminal.selectionContainer.removeChild(this._terminal.selectionContainer.children[0]);if(a&&b){var c=a[1]-this._terminal.ydisp,e=b[1]-this._terminal.ydisp,g=Math.max(c,0),k=Math.min(e,this._terminal.rows-1);if(!(g>=this._terminal.rows||0>k)){var f=document.createDocumentFragment();f.appendChild(this._createSelectionElement(g,c===g?a[0]:0,g===k?b[0]:this._terminal.cols));f.appendChild(this._createSelectionElement(g+1,0,this._terminal.cols,
k-g-1));g!==k&&f.appendChild(this._createSelectionElement(k,0,e===k?b[0]:this._terminal.cols));this._terminal.selectionContainer.appendChild(f)}}};b.prototype._createSelectionElement=function(a,b,e,g){void 0===g&&(g=1);var c=document.createElement("div");c.style.height=g*this._terminal.charMeasure.height+"px";c.style.top=a*this._terminal.charMeasure.height+"px";c.style.left=b*this._terminal.charMeasure.width+"px";c.style.width=this._terminal.charMeasure.width*(e-b)+"px";return c};return b}();f.Renderer=
b},{"./utils/DomElementObjectPool":16}],9:[function(b,h,f){var a=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();Object.defineProperty(f,"__esModule",{value:!0});var e=b("./utils/Mouse"),k=b("./utils/Browser");h=b("./EventEmitter");
var g=b("./SelectionModel");b=String.fromCharCode(160);var c=new RegExp(b,"g"),r;(function(a){a[a.NORMAL=0]="NORMAL";a[a.WORD=1]="WORD";a[a.LINE=2]="LINE"})(r||(r={}));b=function(b){function f(a,c,e,k){var f=b.call(this)||this;f._terminal=a;f._buffer=c;f._rowContainer=e;f._charMeasure=k;f._initListeners();f.enable();f._model=new g.SelectionModel(a);f._lastMouseDownTime=0;f._activeSelectionMode=r.NORMAL;return f}a(f,b);f.prototype._initListeners=function(){var a=this;this._bufferTrimListener=function(b){return a._onTrim(b)};
this._mouseMoveListener=function(b){return a._onMouseMove(b)};this._mouseDownListener=function(b){return a._onMouseDown(b)};this._mouseUpListener=function(b){return a._onMouseUp(b)}};f.prototype.disable=function(){this.clearSelection();this._buffer.off("trim",this._bufferTrimListener);this._rowContainer.removeEventListener("mousedown",this._mouseDownListener)};f.prototype.enable=function(){this._buffer.on("trim",this._bufferTrimListener);this._rowContainer.addEventListener("mousedown",this._mouseDownListener)};
f.prototype.setBuffer=function(a){this._buffer=a;this.clearSelection()};Object.defineProperty(f.prototype,"hasSelection",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return a&&b?a[0]!==b[0]||a[1]!==b[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"selectionText",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!a||!b)return"";var e=a[1]===b[1]?b[0]:null;var g=[];g.push(this._translateBufferLineToString(this._buffer.get(a[1]),
!0,a[0],e));for(var f=a[1]+1;f<=b[1]-1;f++){var h=this._buffer.get(f);e=this._translateBufferLineToString(h,!0);h.isWrapped?g[g.length-1]+=e:g.push(e)}a[1]!==b[1]&&(h=this._buffer.get(b[1]),e=this._translateBufferLineToString(h,!0,0,b[0]),h.isWrapped?g[g.length-1]+=e:g.push(e));return g.map(function(a){return a.replace(c," ")}).join(k.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});f.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh()};
f.prototype._translateBufferLineToString=function(a,b,c,e){void 0===c&&(c=0);void 0===e&&(e=null);for(var g="",k=c,f=e,m=0;m<a.length;m++){var h=a[m],g=g+h[1];0===h[2]&&(c>=m&&k--,e>=m&&f--)}a=f||a.length;return b&&(b=g.search(/\s+$/),-1!==b&&(a=Math.min(a,b)),a<=k)?"":g.substring(k,a)};f.prototype.refresh=function(a){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()}));k.isLinux&&a&&this.selectionText.length&&this.emit("newselection",
this.selectionText)};f.prototype._refresh=function(){this._refreshAnimationFrame=null;this.emit("refresh",{start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd})};f.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh()};f.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()};f.prototype._getMouseBufferCoords=function(a){a=e.getCoords(a,this._rowContainer,this._charMeasure,this._terminal.cols,this._terminal.rows,!0);a[0]--;a[1]--;a[1]+=this._terminal.ydisp;
return a};f.prototype._getMouseEventScrollAmount=function(a){a=e.getCoordsRelativeToElement(a,this._rowContainer)[1];var b=this._terminal.rows*this._charMeasure.height;if(0<=a&&a<=b)return 0;a>b&&(a-=b);a=Math.min(Math.max(a,-50),50);a/=50;return a/Math.abs(a)+Math.round(14*a)};f.prototype._onMouseDown=function(a){0===a.button&&(a.preventDefault(),this._dragScrollAmount=0,this._setMouseClickCount(a),a.shiftKey?this._onShiftClick(a):1===this._clickCount?this._onSingleClick(a):2===this._clickCount?
this._onDoubleClick(a):3===this._clickCount&&this._onTripleClick(a),this._addMouseDownListeners(),this.refresh(!0))};f.prototype._addMouseDownListeners=function(){var a=this;this._rowContainer.ownerDocument.addEventListener("mousemove",this._mouseMoveListener);this._rowContainer.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return a._dragScroll()},50)};f.prototype._removeMouseDownListeners=function(){this._rowContainer.ownerDocument.removeEventListener("mousemove",
this._mouseMoveListener);this._rowContainer.ownerDocument.removeEventListener("mouseup",this._mouseUpListener);clearInterval(this._dragScrollIntervalTimer);this._dragScrollIntervalTimer=null};f.prototype._onShiftClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))};f.prototype._onSingleClick=function(a){this._model.selectionStartLength=0;this._model.isSelectAllActive=!1;this._activeSelectionMode=r.NORMAL;this._model.selectionStart=this._getMouseBufferCoords(a);
this._model.selectionStart&&(this._model.selectionEnd=null,0===this._buffer.get(this._model.selectionStart[1])[this._model.selectionStart[0]][2]&&this._model.selectionStart[0]++)};f.prototype._onDoubleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=r.WORD,this._selectWordAt(a)};f.prototype._onTripleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=r.LINE,this._selectLineAt(a[1])};f.prototype._setMouseClickCount=function(a){var b=(new Date).getTime();
if(400<b-this._lastMouseDownTime||10<this._distanceFromLastMousePosition(a))this._clickCount=0;this._lastMouseDownTime=b;this._lastMousePosition=[a.pageX,a.pageY];this._clickCount++};f.prototype._distanceFromLastMousePosition=function(a){return Math.max(Math.abs(this._lastMousePosition[0]-a.pageX),Math.abs(this._lastMousePosition[1]-a.pageY))};f.prototype._onMouseMove=function(a){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=
this._getMouseBufferCoords(a);this._activeSelectionMode===r.LINE?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:this._activeSelectionMode===r.WORD&&this._selectToWordAt(this._model.selectionEnd);this._dragScrollAmount=this._getMouseEventScrollAmount(a);0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols-1:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0);this._model.selectionEnd[1]<this._buffer.length&&(a=this._buffer.get(this._model.selectionEnd[1])[this._model.selectionEnd[0]])&&
0===a[2]&&this._model.selectionEnd[0]++;b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)};f.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollDisp(this._dragScrollAmount,!1),this._model.selectionEnd=0<this._dragScrollAmount?[this._terminal.cols-1,this._terminal.ydisp+this._terminal.rows]:[0,this._terminal.ydisp],this.refresh())};f.prototype._onMouseUp=function(a){this._removeMouseDownListeners()};f.prototype._convertViewportColToCharacterIndex=
function(a,b){for(var c=b[0],e=0;b[0]>=e;e++)0===a[e][2]&&c--;return c};f.prototype._getWordAt=function(a){var b=this._buffer.get(a[1]),c=this._translateBufferLineToString(b,!1),e=this._convertViewportColToCharacterIndex(b,a),g=e,k=a[0]-g,f=0,h=0;if(" "===c.charAt(g)){for(;0<g&&" "===c.charAt(g-1);)g--;for(;e<c.length&&" "===c.charAt(e+1);)e++}else{var m=a[0];a=a[0];0===b[m][2]&&(f++,m--);2===b[a][2]&&(h++,a++);for(;0<g&&!this._isCharWordSeparator(c.charAt(g-1));)0===b[m-1][2]&&(f++,m--),g--,m--;
for(;e+1<c.length&&!this._isCharWordSeparator(c.charAt(e+1));)2===b[a+1][2]&&(h++,a++),e++,a++}return{start:g+k-f,length:Math.min(e-g+f+h+1,this._terminal.cols)}};f.prototype._selectWordAt=function(a){var b=this._getWordAt(a);this._model.selectionStart=[b.start,a[1]];this._model.selectionStartLength=b.length};f.prototype._selectToWordAt=function(a){var b=this._getWordAt(a);this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,a[1]]};f.prototype._isCharWordSeparator=
function(a){return 0<=" ()[]{}'\"".indexOf(a)};f.prototype._selectLineAt=function(a){this._model.selectionStart=[0,a];this._model.selectionStartLength=this._terminal.cols};return f}(h.EventEmitter);f.SelectionManager=b},{"./EventEmitter":4,"./SelectionModel":10,"./utils/Browser":13,"./utils/Mouse":18}],10:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function a(a){this._terminal=a;this.clearSelection()}a.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=
null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(a.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._terminal.cols,this._terminal.ybase+this._terminal.rows-1]:this.selectionStart?
!this.selectionEnd||this.areSelectionValuesReversed()?[this.selectionStart[0]+this.selectionStartLength,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:null},enumerable:!0,configurable:!0});a.prototype.areSelectionValuesReversed=function(){var a=this.selectionStart,b=this.selectionEnd;return a[1]>b[1]||a[1]===b[1]&&a[0]>b[0]};a.prototype.onTrim=
function(a){this.selectionStart&&(this.selectionStart[1]-=a);this.selectionEnd&&(this.selectionEnd[1]-=a);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return a}();f.SelectionModel=b},{}],11:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function a(a,b,g,c){var e=this;this.terminal=a;this.viewportElement=b;this.scrollArea=g;this.charMeasure=c;this.lastRecordedViewportHeight=
this.lastRecordedBufferLength=this.currentRowHeight=0;this.terminal.on("scroll",this.syncScrollArea.bind(this));this.terminal.on("resize",this.syncScrollArea.bind(this));this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));setTimeout(function(){return e.syncScrollArea()},0)}a.prototype.refresh=function(){if(0<this.charMeasure.height){var a=this.charMeasure.height!==this.currentRowHeight;a&&(this.currentRowHeight=this.charMeasure.height,this.viewportElement.style.lineHeight=this.charMeasure.height+
"px",this.terminal.rowContainer.style.lineHeight=this.charMeasure.height+"px");var b=this.lastRecordedViewportHeight!==this.terminal.rows;if(a||b)this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=this.charMeasure.height*this.terminal.rows+"px",this.terminal.selectionContainer.style.height=this.viewportElement.style.height;this.scrollArea.style.height=this.charMeasure.height*this.lastRecordedBufferLength+"px"}};a.prototype.syncScrollArea=function(){this.lastRecordedBufferLength!==
this.terminal.lines.length?(this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh()):this.lastRecordedViewportHeight!==this.terminal.rows?this.refresh():this.charMeasure.height!==this.currentRowHeight&&this.refresh();var a=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==a&&(this.viewportElement.scrollTop=a)};a.prototype.onScroll=function(a){this.terminal.scrollDisp(Math.round(this.viewportElement.scrollTop/this.currentRowHeight)-this.terminal.ydisp,!0)};
a.prototype.onWheel=function(a){if(0!==a.deltaY){var b=1;a.deltaMode===WheelEvent.DOM_DELTA_LINE?b=this.currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=a.deltaY*b;a.preventDefault()}};a.prototype.onTouchStart=function(a){this.lastTouchY=a.touches[0].pageY};a.prototype.onTouchMove=function(a){var b=this.lastTouchY-a.touches[0].pageY;this.lastTouchY=a.touches[0].pageY;0!==b&&(this.viewportElement.scrollTop+=b,a.preventDefault())};
return a}();f.Viewport=b},{}],12:[function(b,h,f){function a(a,b){return b?a.replace(/\r?\n/g,"\r"):a}function e(a,b){b.style.position="fixed";b.style.width="20px";b.style.height="20px";b.style.left=a.clientX-10+"px";b.style.top=a.clientY-10+"px";b.style.zIndex="1000";b.focus();setTimeout(function(){b.style.position=null;b.style.width=null;b.style.height=null;b.style.left=null;b.style.top=null;b.style.zIndex=null},4)}Object.defineProperty(f,"__esModule",{value:!0});f.prepareTextForTerminal=a;f.copyHandler=
function(a,b,c){b.browser.isMSIE?window.clipboardData.setData("Text",c.selectionText):a.clipboardData.setData("text/plain",c.selectionText);a.preventDefault()};f.pasteHandler=function(b,g){b.stopPropagation();var c=function(c){c=a(c,g.browser.isMSWindows);g.handler(c);g.textarea.value="";g.emit("paste",c);return g.cancel(b)};if(g.browser.isMSIE){if(window.clipboardData){var e=window.clipboardData.getData("Text");c(e)}}else b.clipboardData&&(e=b.clipboardData.getData("text/plain"),c(e))};f.moveTextAreaUnderMouseCursor=
e;f.rightClickHandler=function(a,b,c){e(a,b);b.value=c.selectionText;b.select()}},{}],13:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=b("./Generic");var a="undefined"===typeof navigator?!0:!1;h=a?"node":navigator.userAgent;a=a?"node":navigator.platform;f.isFirefox=!!~h.indexOf("Firefox");f.isMSIE=!!~h.indexOf("MSIE")||!!~h.indexOf("Trident");f.isMac=b.contains(["Macintosh","MacIntel","MacPPC","Mac68K"],a);f.isIpad="iPad"===a;f.isIphone="iPhone"===a;f.isMSWindows=b.contains(["Windows",
"Win16","Win32","WinCE"],a);f.isLinux=0<=a.indexOf("Linux")},{"./Generic":17}],14:[function(b,h,f){var a=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function e(a,
c){var e=b.call(this)||this;e._document=a;e._parentElement=c;return e}a(e,b);Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});e.prototype.measure=function(){var a=this;this._measureElement?this._doMeasure():(this._measureElement=this._document.createElement("span"),this._measureElement.style.position="absolute",this._measureElement.style.top=
"0",this._measureElement.style.left="-9999em",this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement),setTimeout(function(){return a._doMeasure()},0))};e.prototype._doMeasure=function(){var a=this._measureElement.getBoundingClientRect();0===a.width||0===a.height||this._width===a.width&&this._height===a.height||(this._width=a.width,this._height=a.height,this.emit("charsizechanged"))};return e}(b("../EventEmitter.js").EventEmitter);
f.CharMeasure=b},{"../EventEmitter.js":4}],15:[function(b,h,f){var a=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(f,"__esModule",{value:!0});b=function(b){function e(a){var c=b.call(this)||this;c._array=
Array(a);c._startIndex=0;c._length=0;return c}a(e,b);Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._array.length},set:function(a){for(var b=Array(a),e=0;e<Math.min(a,this.length);e++)b[e]=this._array[this._getCyclicIndex(e)];this._array=b;this._startIndex=0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)for(var b=this._length;b<a;b++)this._array[b]=void 0;this._length=a},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"forEach",{get:function(){var a=this;return function(b){for(var c=a.length,e=0;e<c;e++)b(a.get(e),e)}},enumerable:!0,configurable:!0});e.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]};e.prototype.set=function(a,b){this._array[this._getCyclicIndex(a)]=b};e.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a;this._length===this.maxLength?(this._startIndex++,this._startIndex===this.maxLength&&
(this._startIndex=0),this.emit("trim",1)):this._length++};e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};e.prototype.splice=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];if(b){for(e=a;e<this._length-b;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+b)];this._length-=b}if(c&&c.length){for(e=this._length-1;e>=a;e--)this._array[this._getCyclicIndex(e+c.length)]=this._array[this._getCyclicIndex(e)];for(e=
0;e<c.length;e++)this._array[this._getCyclicIndex(a+e)]=c[e];this._length+c.length>this.maxLength?(c=this._length+c.length-this.maxLength,this._startIndex+=c,this._length=this.maxLength,this.emit("trim",c)):this._length+=c.length}};e.prototype.trimStart=function(a){a>this._length&&(a=this._length);this._startIndex+=a;this._length-=a;this.emit("trim",a)};e.prototype.shiftElements=function(a,b,e){if(!(0>=b)){if(0>a||a>=this._length)throw Error("start argument out of range");if(0>a+e)throw Error("Cannot shift elements in list beyond index 0");
if(0<e){for(var c=b-1;0<=c;c--)this.set(a+c+e,this.get(a+c));a=a+b+e-this._length;if(0<a)for(this._length+=a;this._length>this.maxLength;)this._length--,this._startIndex++,this.emit("trim",1)}else for(c=0;c<b;c++)this.set(a+c+e,this.get(a+c))}};e.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this.maxLength};return e}(b("../EventEmitter").EventEmitter);f.CircularList=b},{"../EventEmitter":4}],16:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function a(a){this._type=
this.type=a;this._pool=[];this._inUse={}}a.prototype.acquire=function(){var b=0===this._pool.length?this._createNew():this._pool.pop();return this._inUse[b.getAttribute(a.OBJECT_ID_ATTRIBUTE)]=b};a.prototype.release=function(b){if(!this._inUse[b.getAttribute(a.OBJECT_ID_ATTRIBUTE)])throw Error("Could not release an element not yet acquired");delete this._inUse[b.getAttribute(a.OBJECT_ID_ATTRIBUTE)];this._cleanElement(b);this._pool.push(b)};a.prototype._createNew=function(){var b=document.createElement(this._type),
f=a._objectCount++;b.setAttribute(a.OBJECT_ID_ATTRIBUTE,f.toString(10));return b};a.prototype._cleanElement=function(a){a.className="";a.innerHTML=""};return a}();b.OBJECT_ID_ATTRIBUTE="data-obj-id";b._objectCount=0;f.DomElementObjectPool=b},{}],17:[function(b,h,f){Object.defineProperty(f,"__esModule",{value:!0});f.contains=function(a,b){return 0<=a.indexOf(b)}},{}],18:[function(b,h,f){function a(a,b){if(null==a.pageX)return null;var c=a.pageX;for(a=a.pageY;b&&b!==self.document.documentElement;)c-=
b.offsetLeft,a-=b.offsetTop,b="offsetParent"in b?b.offsetParent:b.parentElement;return[c,a]}function e(b,e,c,f,h,q){b=a(b,e);b[0]=Math.ceil((b[0]+(q?c.width/2:0))/c.width);b[1]=Math.ceil(b[1]/c.height);b[0]=Math.min(Math.max(b[0],1),f+1);b[1]=Math.min(Math.max(b[1],1),h+1);return b}Object.defineProperty(f,"__esModule",{value:!0});f.getCoordsRelativeToElement=a;f.getCoords=e;f.getRawByteCoords=function(a,b,c,f,h){a=e(a,b,c,f,h);return{x:a[0]+32,y:a[1]+32}}},{}],19:[function(b,h,f){function a(b,c,e){var l=
this;if(!(this instanceof a))return new a(b,c,e);l.browser=t;l.cancel=a.cancel;q.EventEmitter.call(this);"number"===typeof b&&(b={cols:b,rows:c,handler:e});b=b||{};Object.keys(a.defaults).forEach(function(c){null==b[c]&&(b[c]=a.options[c],a[c]!==a.defaults[c]&&(b[c]=a[c]));l[c]=b[c]});8===b.colors.length?b.colors=b.colors.concat(a._colors.slice(8)):16===b.colors.length?b.colors=b.colors.concat(a._colors.slice(16)):10===b.colors.length?b.colors=b.colors.slice(0,-2).concat(a._colors.slice(8,-2),b.colors.slice(-2)):
18===b.colors.length&&(b.colors=b.colors.concat(a._colors.slice(16,-2),b.colors.slice(-2)));this.colors=b.colors;this.options=b;this.parent=b.body||b.parent||(y?y.getElementsByTagName("body")[0]:null);this.cols=b.cols||b.geometry[0];this.rows=b.rows||b.geometry[1];this.geometry=[this.cols,this.rows];if(b.handler)this.on("data",b.handler);this.cursorState=this.y=this.x=this.ydisp=this.ybase=0;this.cursorHidden=!1;this.convertEol;this.queue="";this.scrollTop=0;this.scrollBottom=this.rows-1;this.cursorBlinkInterval=
this.customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.gcharset=this.charset=this.normal=null;this.glevel=0;this.charsets=[null];this.decLocator;this.x10Mouse;this.vt200Mouse;this.vt300Mouse;this.normalMouse;this.mouseEvents;this.sendFocus;this.utfMouse;this.sgrMouse;this.urxvtMouse;this.element;this.children;this.refreshStart;this.refreshEnd;this.savedX;this.savedY;this.savedCols;this.writable=this.readable=!0;
this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.postfix=this.prefix="";this.inputHandler=new C.InputHandler(this);this.parser=new v.Parser(this.inputHandler,this);this.renderer=this.renderer||null;this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new B.Linkifier;this.writeBuffer=[];this.writeStopped=this.xoffSentToCatchUp=this.writeInProgress=!1;this.surrogate_high="";this.lines=new x.CircularList(this.scrollback);for(c=this.rows;c--;)this.lines.push(this.blankLine());
this.selectionManager&&this.selectionManager.setBuffer(this.lines);this.tabs;this.setupStops();this.userScrolling=!1}function e(a,b,c,e){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.addEventListener(b,c,e||!1)})}function k(a,b,c,e){a.removeEventListener(b,c,e||!1)}function g(a,b){function c(){this.constructor=a}c.prototype=b.prototype;a.prototype=new c}function c(a,b){a=a.browser.isMac&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.browser.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"==
b.type?a:a&&(!b.keyCode||47<b.keyCode)}function r(b,c,e){var l=b<<16|c<<8|e;if(null!=r._cache[l])return r._cache[l];for(var f=Infinity,g=-1,k=0,h,m,E;k<a.vcolors.length;k++){h=a.vcolors[k];m=h[0];E=h[1];h=h[2];m=r.distance(b,c,e,m,E,h);if(0===m){g=k;break}m<f&&(f=m,g=k)}return r._cache[l]=g}Object.defineProperty(f,"__esModule",{value:!0});var p=b("./CompositionHelper"),q=b("./EventEmitter"),m=b("./Viewport"),u=b("./handlers/Clipboard"),x=b("./utils/CircularList"),n=b("./EscapeSequences"),C=b("./InputHandler"),
v=b("./Parser"),w=b("./Renderer"),B=b("./Linkifier"),z=b("./SelectionManager"),D=b("./utils/CharMeasure"),t=b("./utils/Browser"),A=b("./utils/Mouse"),y="undefined"!=typeof window?window.document:null;g(a,q.EventEmitter);a.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};a.tangoColors="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");a.colors=function(){function b(a,b,l){e.push("#"+c(a)+
c(b)+c(l))}function c(a){a=a.toString(16);return 2>a.length?"0"+a:a}var e=a.tangoColors.slice(),f=[0,95,135,175,215,255],g;for(g=0;216>g;g++)b(f[g/36%6|0],f[g/6%6|0],f[g%6]);for(g=0;24>g;g++)f=8+10*g,b(f,f,f);return e}();a._colors=a.colors.slice();a.vcolors=function(){for(var b=[],c=a.colors,e=0,f;256>e;e++)f=parseInt(c[e].substring(1),16),b.push([f>>16&255,f>>8&255,f&255]);return b}();a.defaults={colors:a.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,cursorStyle:"block",
visualBell:!1,popOnBell:!1,scrollback:1E3,screenKeys:!1,debug:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,tabStopWidth:8};a.options={};a.focus=null;(function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var l=0;l<a.length;l++)b.call(c,a[l],l,a)})(function(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}(a.defaults),function(b){a[b]=a.defaults[b];a.options[b]=a.defaults[b]});a.prototype.focus=function(){return this.textarea.focus()};
a.prototype.getOption=function(b,c){if(!(b in a.defaults))throw Error('No option with key "'+b+'"');return"undefined"!==typeof this.options[b]?this.options[b]:this[b]};a.prototype.setOption=function(b,c){if(!(b in a.defaults))throw Error('No option with key "'+b+'"');switch(b){case "scrollback":if(c<this.rows)return console.warn("Setting the scrollback value less than the number of rows "+("("+this.rows+") is not allowed.")),!1;if(this.options[b]!==c){if(this.lines.length>c){var l=this.lines.length-
c,e=0>this.ydisp-l;this.lines.trimStart(l);this.ybase=Math.max(this.ybase-l,0);this.ydisp=Math.max(this.ydisp-l,0);e&&this.refresh(0,this.rows-1)}this.lines.maxLength=c;this.viewport.syncScrollArea()}}this[b]=c;this.options[b]=c;switch(b){case "cursorBlink":this.setCursorBlinking(c);break;case "cursorStyle":this.element.classList.toggle("xterm-cursor-style-underline","underline"===c);this.element.classList.toggle("xterm-cursor-style-bar","bar"===c);break;case "tabStopWidth":this.setupStops()}};a.prototype.restartCursorBlinking=
function(){this.setCursorBlinking(this.options.cursorBlink)};a.prototype.setCursorBlinking=function(a){this.element.classList.toggle("xterm-cursor-blink",a);this.clearCursorBlinkingInterval();if(a){var b=this;this.cursorBlinkInterval=setInterval(function(){b.element.classList.toggle("xterm-cursor-blink-on")},600)}};a.prototype.clearCursorBlinkingInterval=function(){this.element.classList.remove("xterm-cursor-blink-on");this.cursorBlinkInterval&&(clearInterval(this.cursorBlinkInterval),this.cursorBlinkInterval=
null)};a.bindFocus=function(b){e(b.textarea,"focus",function(c){b.sendFocus&&b.send(n.C0.ESC+"[I");b.element.classList.add("focus");b.showCursor();b.restartCursorBlinking.apply(b);a.focus=b;b.emit("focus",{terminal:b})})};a.prototype.blur=function(){return this.textarea.blur()};a.bindBlur=function(b){e(b.textarea,"blur",function(c){b.refresh(b.y,b.y);b.sendFocus&&b.send(n.C0.ESC+"[O");b.element.classList.remove("focus");b.clearCursorBlinkingInterval.apply(b);a.focus=null;b.emit("blur",{terminal:b})})};
a.prototype.initGlobal=function(){var b=this,c=this;a.bindKeys(this);a.bindFocus(this);a.bindBlur(this);e(this.element,"copy",function(a){b.mouseEvents||u.copyHandler(a,c,b.selectionManager)});var f=function(a){return u.pasteHandler(a,c)};e(this.textarea,"paste",f);e(this.element,"paste",f);c.browser.isFirefox?e(this.element,"mousedown",function(a){2==a.button&&u.rightClickHandler(a,b.textarea,b.selectionManager)}):e(this.element,"contextmenu",function(a){u.rightClickHandler(a,b.textarea,b.selectionManager)});
c.browser.isLinux&&e(this.element,"auxclick",function(a){1===a.button&&u.moveTextAreaUnderMouseCursor(a,b.textarea,b.selectionManager)})};a.bindKeys=function(a){e(a.element,"keydown",function(b){y.activeElement==this&&a.keyDown(b)},!0);e(a.element,"keypress",function(b){y.activeElement==this&&a.keyPress(b)},!0);e(a.element,"keyup",function(b){16!==b.keyCode&&17!==b.keyCode&&18!==b.keyCode&&a.focus(a)},!0);e(a.textarea,"keydown",function(b){a.keyDown(b)},!0);e(a.textarea,"keypress",function(b){a.keyPress(b);
this.value=""},!0);e(a.textarea,"compositionstart",a.compositionHelper.compositionstart.bind(a.compositionHelper));e(a.textarea,"compositionupdate",a.compositionHelper.compositionupdate.bind(a.compositionHelper));e(a.textarea,"compositionend",a.compositionHelper.compositionend.bind(a.compositionHelper));a.on("refresh",a.compositionHelper.updateCompositionElements.bind(a.compositionHelper));a.on("refresh",function(b){a.queueLinkification(b.start,b.end)})};a.prototype.insertRow=function(a){"object"!=
typeof a&&(a=y.createElement("div"));this.rowContainer.appendChild(a);this.children.push(a);return a};a.prototype.open=function(a,b){var c=this,l=this,f=0;this.parent=a||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.getElementsByTagName("body")[0];this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");
this.element.classList.add("xterm-theme-"+this.theme);this.setCursorBlinking(this.options.cursorBlink);this.element.setAttribute("tabindex",0);this.viewportElement=y.createElement("div");this.viewportElement.classList.add("xterm-viewport");this.element.appendChild(this.viewportElement);this.viewportScrollArea=y.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);this.selectionContainer=y.createElement("div");this.selectionContainer.classList.add("xterm-selection");
this.element.appendChild(this.selectionContainer);this.rowContainer=y.createElement("div");this.rowContainer.classList.add("xterm-rows");this.element.appendChild(this.rowContainer);this.children=[];this.linkifier.attachToDom(y,this.children);this.helperContainer=y.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.element.appendChild(this.helperContainer);this.textarea=y.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("autocorrect",
"off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){l.emit("focus",{terminal:l})});this.textarea.addEventListener("blur",function(){l.emit("blur",{terminal:l})});this.helperContainer.appendChild(this.textarea);this.compositionView=y.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=new p.CompositionHelper(this.textarea,this.compositionView,
this);this.helperContainer.appendChild(this.compositionView);this.charSizeStyleElement=y.createElement("style");for(this.helperContainer.appendChild(this.charSizeStyleElement);f<this.rows;f++)this.insertRow();this.parent.appendChild(this.element);this.charMeasure=new D.CharMeasure(y,this.helperContainer);this.charMeasure.on("charsizechanged",function(){l.updateCharSizeStyles()});this.charMeasure.measure();this.viewport=new m.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasure);
this.renderer=new w.Renderer(this);this.selectionManager=new z.SelectionManager(this,this.lines,this.rowContainer,this.charMeasure);this.selectionManager.on("refresh",function(a){c.renderer.refreshSelection(a.start,a.end)});this.selectionManager.on("newselection",function(a){c.textarea.value=a;c.textarea.focus();c.textarea.select()});this.on("scroll",function(){return c.selectionManager.refresh()});this.viewportElement.addEventListener("scroll",function(){return c.selectionManager.refresh()});this.refresh(0,
this.rows-1);this.initGlobal();"undefined"==typeof b&&(console.warn("You did not pass the `focus` argument in `Terminal.prototype.open()`.\nThe `focus` argument now defaults to `true` but starting with xterm.js 3.0 it will default to `false`."),b=!0);b&&this.focus();e(this.element,"click",function(){var a=y.getSelection(),b=a.isCollapsed;("boolean"==typeof b?b:"Range"!=a.type)&&l.focus()});this.bindMouse();this.emit("open")};a.loadAddon=function(a,c){if("object"===typeof f&&"object"===typeof h)return b("./addons/"+
a+"/"+a);console.error("Cannot load a module without a CommonJS or RequireJS environment.");return!1};a.prototype.updateCharSizeStyles=function(){this.charSizeStyleElement.textContent=".xterm-wide-char{width:"+2*this.charMeasure.width+"px;}"+(".xterm-normal-char{width:"+this.charMeasure.width+"px;}")+(".xterm-rows > div{height:"+this.charMeasure.height+"px;}")};a.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var b=null!=a.button?+a.button:null!=a.which?
a.which-1:null;h.browser.isMSIE&&(b=1===b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0<a.wheelDeltaY?64:65}var c=a.shiftKey?4:0;var e=a.metaKey?8:0;var l=a.ctrlKey?16:0;c=c|e|l;h.vt200Mouse?c&=l:h.normalMouse||(c=0);b=32+(c<<2)+b;if(l=A.getRawByteCoords(a,h.rowContainer,h.charMeasure,h.cols,h.rows))switch(f(b,l),a.overrideType||a.type){case "mousedown":m=b;break;case "mouseup":m=32}}function b(a){var b=m;(a=A.getRawByteCoords(a,h.rowContainer,
h.charMeasure,h.cols,h.rows))&&f(b+32,a)}function c(a,b){if(h.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(2047<b&&(b=2047),a.push(192|b>>6),a.push(128|b&63))}else{if(255===b)return a.push(0);127<b&&(b=127);a.push(b)}}function f(a,b){if(h.vt300Mouse){a&=3;b.x-=32;b.y-=32;var e=n.C0.ESC+"[24";if(0===a)e+="1";else if(1===a)e+="3";else if(2===a)e+="5";else{if(3===a)return;e+="0"}e+="~["+b.x+","+b.y+"]\r";h.send(e)}else h.decLocator?(a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&
(a=3),h.send(n.C0.ESC+"["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w")):h.urxvtMouse?(b.x-=32,b.y-=32,b.x++,b.y++,h.send(n.C0.ESC+"["+a+";"+b.x+";"+b.y+"M")):h.sgrMouse?(b.x-=32,b.y-=32,h.send(n.C0.ESC+"[<"+((3===(a&3)?a&-4:a)-32)+";"+b.x+";"+b.y+(3===(a&3)?"m":"M"))):(e=[],c(e,a),c(e,b.x),c(e,b.y),h.send(n.C0.ESC+"[M"+String.fromCharCode.apply(String,e)))}var g=this.element,h=this,m=32;e(g,"mousedown",function(c){if(h.mouseEvents){a(c);h.focus();if(h.vt200Mouse)return c.overrideType="mouseup",
a(c),h.cancel(c);h.normalMouse&&e(h.document,"mousemove",b);h.x10Mouse||e(h.document,"mouseup",function F(c){a(c);h.normalMouse&&k(h.document,"mousemove",b);k(h.document,"mouseup",F);return h.cancel(c)});return h.cancel(c)}});e(g,"wheel",function(b){if(h.mouseEvents&&!(h.x10Mouse||h.vt300Mouse||h.decLocator))return a(b),h.cancel(b)});e(g,"wheel",function(a){if(!h.mouseEvents)return h.viewport.onWheel(a),h.cancel(a)});e(g,"touchstart",function(a){if(!h.mouseEvents)return h.viewport.onTouchStart(a),
h.cancel(a)});e(g,"touchmove",function(a){if(!h.mouseEvents)return h.viewport.onTouchMove(a),h.cancel(a)})};a.prototype.destroy=function(){this.writable=this.readable=!1;this._events={};this.handler=function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};a.prototype.refresh=function(a,b){this.renderer&&this.renderer.queueRefresh(a,b)};a.prototype.queueLinkification=function(a,b){if(this.linkifier)for(;a<=b;a++)this.linkifier.linkifyRow(a)};
a.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))};a.prototype.scroll=function(a){this.lines.length===this.lines.maxLength&&(this.lines.trimStart(1),this.ybase--,0!==this.ydisp&&this.ydisp--);this.ybase++;this.userScrolling||(this.ydisp=this.ybase);var b=this.ybase+this.rows-1;b-=this.rows-1-this.scrollBottom;b===this.lines.length?this.lines.push(this.blankLine(void 0,a)):this.lines.splice(b,0,this.blankLine(void 0,a));0!==this.scrollTop&&(0!==this.ybase&&
(this.ybase--,this.userScrolling||(this.ydisp=this.ybase)),this.lines.splice(this.ybase+this.scrollTop,1));this.updateRange(this.scrollTop);this.updateRange(this.scrollBottom);this.emit("scroll",this.ydisp)};a.prototype.scrollDisp=function(a,b){if(0>a){if(0===this.ydisp)return;this.userScrolling=!0}else a+this.ydisp>=this.ybase&&(this.userScrolling=!1);this.ydisp+=a;this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0);b||this.emit("scroll",this.ydisp);this.refresh(0,this.rows-
1)};a.prototype.scrollPages=function(a){this.scrollDisp(a*(this.rows-1))};a.prototype.scrollToTop=function(){this.scrollDisp(-this.ydisp)};a.prototype.scrollToBottom=function(){this.scrollDisp(this.ybase-this.ydisp)};a.prototype.write=function(a){this.writeBuffer.push(a);this.options.useFlowControl&&!this.xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.send(n.C0.DC3),this.xoffSentToCatchUp=!0);if(!this.writeInProgress&&0<this.writeBuffer.length){this.writeInProgress=!0;var b=this;setTimeout(function(){b.innerWrite()})}};
a.prototype.innerWrite=function(){for(var a=this.writeBuffer.splice(0,300);0<a.length;){var b=a.shift();this.xoffSentToCatchUp&&0===a.length&&0===this.writeBuffer.length&&(this.send(n.C0.DC1),this.xoffSentToCatchUp=!1);this.refreshEnd=this.refreshStart=this.y;b=this.parser.parse(b);this.parser.setState(b);this.updateRange(this.y);this.refresh(this.refreshStart,this.refreshEnd)}if(0<this.writeBuffer.length){var c=this;setTimeout(function(){c.innerWrite()},0)}else this.writeInProgress=!1};a.prototype.writeln=
function(a){this.write(a+"\r\n")};a.prototype.attachCustomKeydownHandler=function(a){console.warn("attachCustomKeydownHandler() is DEPRECATED and will be removed soon. Please use attachCustomKeyEventHandler() instead.");this.attachCustomKeyEventHandler(a)};a.prototype.attachCustomKeyEventHandler=function(a){this.customKeyEventHandler=a};a.prototype.setHypertextLinkHandler=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext link handler before Terminal.open is called");this.linkifier.setHypertextLinkHandler(a);
this.refresh(0,this.rows-1)};a.prototype.setHypertextValidationCallback=function(a){if(!this.linkifier)throw Error("Cannot attach a hypertext validation callback before Terminal.open is called");this.linkifier.setHypertextValidationCallback(a);this.refresh(0,this.rows-1)};a.prototype.registerLinkMatcher=function(a,b,c){if(this.linkifier)return a=this.linkifier.registerLinkMatcher(a,b,c),this.refresh(0,this.rows-1),a};a.prototype.deregisterLinkMatcher=function(a){this.linkifier&&this.linkifier.deregisterLinkMatcher(a)&&
this.refresh(0,this.rows-1)};a.prototype.hasSelection=function(){return this.selectionManager.hasSelection};a.prototype.getSelection=function(){return this.selectionManager.selectionText};a.prototype.clearSelection=function(){this.selectionManager.clearSelection()};a.prototype.selectAll=function(){this.selectionManager.selectAll()};a.prototype.keyDown=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;this.restartCursorBlinking();if(!this.compositionHelper.keydown.bind(this.compositionHelper)(a))return this.ybase!==
this.ydisp&&this.scrollToBottom(),!1;var b=this.evaluateKeyEscapeSequence(a);b.key===n.C0.DC3?this.writeStopped=!0:b.key===n.C0.DC1&&(this.writeStopped=!1);if(b.scrollDisp)return this.scrollDisp(b.scrollDisp),this.cancel(a,!0);if(c(this,a))return!0;b.cancel&&this.cancel(a,!0);if(!b.key)return!0;this.emit("keydown",a);this.emit("key",b.key,a);this.showCursor();this.handler(b.key);return this.cancel(a,!0)};a.prototype.evaluateKeyEscapeSequence=function(a){var b={cancel:!1,key:void 0,scrollDisp:void 0},
c=a.shiftKey<<0|a.altKey<<1|a.ctrlKey<<2|a.metaKey<<3;switch(a.keyCode){case 8:if(a.shiftKey){b.key=n.C0.BS;break}b.key=n.C0.DEL;break;case 9:if(a.shiftKey){b.key=n.C0.ESC+"[Z";break}b.key=n.C0.HT;b.cancel=!0;break;case 13:b.key=n.C0.CR;b.cancel=!0;break;case 27:b.key=n.C0.ESC;b.cancel=!0;break;case 37:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"D",b.key==n.C0.ESC+"[1;3D"&&(b.key=this.browser.isMac?n.C0.ESC+"b":n.C0.ESC+"[1;5D")):b.key=this.applicationCursor?n.C0.ESC+"OD":n.C0.ESC+"[D";break;case 39:c?(b.key=
n.C0.ESC+"[1;"+(c+1)+"C",b.key==n.C0.ESC+"[1;3C"&&(b.key=this.browser.isMac?n.C0.ESC+"f":n.C0.ESC+"[1;5C")):b.key=this.applicationCursor?n.C0.ESC+"OC":n.C0.ESC+"[C";break;case 38:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"A",b.key==n.C0.ESC+"[1;3A"&&(b.key=n.C0.ESC+"[1;5A")):b.key=this.applicationCursor?n.C0.ESC+"OA":n.C0.ESC+"[A";break;case 40:c?(b.key=n.C0.ESC+"[1;"+(c+1)+"B",b.key==n.C0.ESC+"[1;3B"&&(b.key=n.C0.ESC+"[1;5B")):b.key=this.applicationCursor?n.C0.ESC+"OB":n.C0.ESC+"[B";break;case 45:a.shiftKey||
a.ctrlKey||(b.key=n.C0.ESC+"[2~");break;case 46:b.key=c?n.C0.ESC+"[3;"+(c+1)+"~":n.C0.ESC+"[3~";break;case 36:b.key=c?n.C0.ESC+"[1;"+(c+1)+"H":this.applicationCursor?n.C0.ESC+"OH":n.C0.ESC+"[H";break;case 35:b.key=c?n.C0.ESC+"[1;"+(c+1)+"F":this.applicationCursor?n.C0.ESC+"OF":n.C0.ESC+"[F";break;case 33:a.shiftKey?b.scrollDisp=-(this.rows-1):b.key=n.C0.ESC+"[5~";break;case 34:a.shiftKey?b.scrollDisp=this.rows-1:b.key=n.C0.ESC+"[6~";break;case 112:b.key=c?n.C0.ESC+"[1;"+(c+1)+"P":n.C0.ESC+"OP";break;
case 113:b.key=c?n.C0.ESC+"[1;"+(c+1)+"Q":n.C0.ESC+"OQ";break;case 114:b.key=c?n.C0.ESC+"[1;"+(c+1)+"R":n.C0.ESC+"OR";break;case 115:b.key=c?n.C0.ESC+"[1;"+(c+1)+"S":n.C0.ESC+"OS";break;case 116:b.key=c?n.C0.ESC+"[15;"+(c+1)+"~":n.C0.ESC+"[15~";break;case 117:b.key=c?n.C0.ESC+"[17;"+(c+1)+"~":n.C0.ESC+"[17~";break;case 118:b.key=c?n.C0.ESC+"[18;"+(c+1)+"~":n.C0.ESC+"[18~";break;case 119:b.key=c?n.C0.ESC+"[19;"+(c+1)+"~":n.C0.ESC+"[19~";break;case 120:b.key=c?n.C0.ESC+"[20;"+(c+1)+"~":n.C0.ESC+"[20~";
break;case 121:b.key=c?n.C0.ESC+"[21;"+(c+1)+"~":n.C0.ESC+"[21~";break;case 122:b.key=c?n.C0.ESC+"[23;"+(c+1)+"~":n.C0.ESC+"[23~";break;case 123:b.key=c?n.C0.ESC+"[24;"+(c+1)+"~":n.C0.ESC+"[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?this.browser.isMac||!a.altKey||a.ctrlKey||a.metaKey?this.browser.isMac&&!a.altKey&&!a.ctrlKey&&a.metaKey&&65===a.keyCode&&this.selectAll():65<=a.keyCode&&90>=a.keyCode?b.key=n.C0.ESC+String.fromCharCode(a.keyCode+32):192===a.keyCode?b.key=n.C0.ESC+
"`":48<=a.keyCode&&57>=a.keyCode&&(b.key=n.C0.ESC+(a.keyCode-48)):65<=a.keyCode&&90>=a.keyCode?b.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?b.key=String.fromCharCode(0):51<=a.keyCode&&55>=a.keyCode?b.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?b.key=String.fromCharCode(127):219===a.keyCode?b.key=String.fromCharCode(27):220===a.keyCode?b.key=String.fromCharCode(28):221===a.keyCode&&(b.key=String.fromCharCode(29))}return b};a.prototype.setgLevel=function(a){this.glevel=a;this.charset=
this.charsets[a]};a.prototype.setgCharset=function(a,b){this.charsets[a]=b;this.glevel===a&&(this.charset=b)};a.prototype.keyPress=function(a){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(a))return!1;this.cancel(a);if(a.charCode)var b=a.charCode;else if(null==a.which)b=a.keyCode;else if(0!==a.which&&0!==a.charCode)b=a.which;else return!1;if(!b||(a.altKey||a.ctrlKey||a.metaKey)&&!c(this,a))return!1;b=String.fromCharCode(b);this.emit("keypress",b,a);this.emit("key",b,a);this.showCursor();
this.handler(b);return!0};a.prototype.send=function(a){var b=this;this.queue||setTimeout(function(){b.handler(b.queue);b.queue=""},1);this.queue+=a};a.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white";setTimeout(function(){a.element.style.borderColor=""},10);this.popOnBell&&this.focus()}};a.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,
a)}};a.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,a)}};a.prototype.resize=function(a,b){if(!isNaN(a)&&!isNaN(b)){b>this.getOption("scrollback")&&this.setOption("scrollback",b);var c;if(a!==this.cols||b!==this.rows){1>a&&(a=1);1>b&&(b=1);var e=this.cols;if(e<a)for(e=[this.defAttr," ",1],c=this.lines.length;c--;)for(;this.lines.get(c).length<a;)this.lines.get(c).push(e);
this.cols=a;this.setupStops(this.cols);e=this.rows;var f=0;if(e<b)for(;e++<b;)this.lines.length<b+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+this.y+f+1?(this.ybase--,f++,0<this.ydisp&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<b&&this.insertRow();else for(;e-- >b;)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>b&&(c=this.children.shift())&&c.parentNode.removeChild(c);
this.rows=b;this.y>=b&&(this.y=b-1);f&&(this.y+=f);this.x>=a&&(this.x=a-1);this.scrollTop=0;this.scrollBottom=b-1;this.charMeasure.measure();this.refresh(0,this.rows-1);this.normal=null;this.geometry=[this.cols,this.rows];this.emit("resize",{terminal:this,cols:a,rows:b})}}};a.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a);a>this.refreshEnd&&(this.refreshEnd=a)};a.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};a.prototype.setupStops=function(a){null!=
a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this.cols;a+=this.getOption("tabStopWidth"))this.tabs[a]=!0};a.prototype.prevStop=function(a){null==a&&(a=this.x);for(;!this.tabs[--a]&&0<a;);return a>=this.cols?this.cols-1:0>a?0:a};a.prototype.nextStop=function(a){null==a&&(a=this.x);for(;!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a};a.prototype.eraseRight=function(a,b){var c=this.lines.get(this.ybase+b);if(c){for(var e=[this.eraseAttr()," ",1];a<this.cols;a++)c[a]=
e;this.updateRange(b)}};a.prototype.eraseLeft=function(a,b){var c=this.lines.get(this.ybase+b);if(c){var e=[this.eraseAttr()," ",1];for(a++;a--;)c[a]=e;this.updateRange(b)}};a.prototype.clear=function(){if(0!==this.ybase||0!==this.y){this.lines.set(0,this.lines.get(this.ybase+this.y));this.lines.length=1;this.y=this.ybase=this.ydisp=0;for(var a=1;a<this.rows;a++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.ydisp)}};a.prototype.eraseLine=function(a){this.eraseRight(0,
a)};a.prototype.blankLine=function(a,b){a=[a?this.eraseAttr():this.defAttr," ",1];var c=[],e=0;b&&(c.isWrapped=b);for(;e<this.cols;e++)c[e]=a;return c};a.prototype.ch=function(a){return a?[this.eraseAttr()," ",1]:[this.defAttr," ",1]};a.prototype.is=function(a){return 0===(this.termName+"").indexOf(a)};a.prototype.handler=function(a){this.options.disableStdin||(this.ybase!==this.ydisp&&this.scrollToBottom(),this.emit("data",a))};a.prototype.handleTitle=function(a){this.emit("title",a)};a.prototype.index=
function(){this.y++;this.y>this.scrollBottom&&(this.y--,this.scroll());this.x>=this.cols&&this.x--};a.prototype.reverseIndex=function(){this.y===this.scrollTop?(this.lines.shiftElements(this.y+this.ybase,this.rows-1,1),this.lines.set(this.y+this.ybase,this.blankLine(!0)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)):this.y--};a.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var b=this.customKeyEventHandler,c=this.cursorBlinkInterval;a.call(this,
this.options);this.customKeyEventHandler=b;this.cursorBlinkInterval=c;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};a.prototype.tabSet=function(){this.tabs[this.x]=!0};a.prototype.matchColor=r;r._cache={};r.distance=function(a,b,c,e,f,g){return Math.pow(30*(a-e),2)+Math.pow(59*(b-f),2)+Math.pow(11*(c-g),2)};a.EventEmitter=q.EventEmitter;a.inherits=g;a.on=e;a.off=k;a.cancel=function(a,b){if(this.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1};h.exports=a},{"./CompositionHelper":2,
"./EscapeSequences":3,"./EventEmitter":4,"./InputHandler":5,"./Linkifier":6,"./Parser":7,"./Renderer":8,"./SelectionManager":9,"./Viewport":11,"./handlers/Clipboard":12,"./utils/Browser":13,"./utils/CharMeasure":14,"./utils/CircularList":15,"./utils/Mouse":18}]},{},[19])(19)});
